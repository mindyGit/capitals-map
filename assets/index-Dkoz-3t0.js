const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/IdentityManager-hnRHdkFT.js","assets/substitute-S7BCGMqz.js","assets/ElevationLayer-9YBRB8M_.js","assets/ArcGISCachedService-D5Yf78NE.js","assets/TileInfoTilemapCache-TP-dPND-.js","assets/TilemapCache-DWrLPNFZ.js","assets/ByteSizeUnit-BsxeN7wM.js","assets/memoryEstimations-DJrdsxkF.js","assets/WorkerHandle-DvrUp74e.js","assets/layersCreator-D5NlyfN7.js","assets/loadUtils-CYLK-xL7.js","assets/fetchService-CYwfHPlW.js","assets/associatedFeatureServiceUtils-dMBUOJOk.js","assets/lazyLayerLoader-CDO49UBv.js","assets/portalLayers-Q0YGjGE0.js","assets/geometryEngineBase-B9CjWDWD.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/arcgisLayers-BNcdQPOT.js","assets/statsWorker-CJnCOLV0.js","assets/utils-C9Lo5L0K.js","assets/quantizationUtils-BfPhYWtU.js","assets/utils-BRinAtLA.js","assets/utils-Q_9qADhO.js","assets/ClassBreaksDefinition-DsRmIUMD.js","assets/geometryEngineWorker-BeElq9cK.js","assets/geometryEngineJSON-CO8CMyeT.js","assets/json-Wa8cmqdu.js","assets/CSVSourceWorker-D0UIy-ez.js","assets/date-DCujAECq.js","assets/OptimizedFeature-B--Eqgl9.js","assets/executeQueryForSnapping-Dgmf7-Mf.js","assets/queryUtils-DK9ODV3e.js","assets/QueryEngine-Dk46oq7p.js","assets/featureConversionUtils-CLgpv9Bc.js","assets/OptimizedFeatureSet-BR8EEvDc.js","assets/WhereClauseCache-BbjZV4Ab.js","assets/WhereClause-CXm1OfXM.js","assets/timeSupport-BE2XISEf.js","assets/QueryEngineCapabilities-CsRUnGk7.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-wqVLh7yh.js","assets/FeatureStore-DfYM0WGS.js","assets/BoundsStore-DjOf_UKO.js","assets/PooledRBush-Cw7b4nXz.js","assets/optimizedFeatureQueryEngineAdapter-zCoH3P4C.js","assets/number-D3W9fEbb.js","assets/clientSideDefaults-C7am7CTg.js","assets/EdgeProcessingWorker-CvriwqpP.js","assets/workerHelper-BHZwFIRu.js","assets/InterleavedLayout-R8NVZP7m.js","assets/BufferView-BuUbal4j.js","assets/types-BKo2foNY.js","assets/edgeProcessing-CIB3n3yX.js","assets/deduplicate-PPY9o1eF.js","assets/Indices-BdQbqR0Q.js","assets/VertexAttribute-BfkzOMLV.js","assets/glUtil-Dv5m9MnD.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/Normals-DpviKBQH.js","assets/ElevationSamplerWorker-Dv55FF92.js","assets/MeshLocalVertexSpace-NtALTPM-.js","assets/vertexSpaceConversion-CJwHtyUw.js","assets/mat3f64-B5o_lm6j.js","assets/mat4f64-q_b6UJoq.js","assets/spatialReferenceEllipsoidUtils-Clj7L12d.js","assets/computeTranslationToOriginAndRotation-CioZZFUw.js","assets/projectPointToVector-Dq9nTgXM.js","assets/meshVertexSpaceUtils-FoTIpRdf.js","assets/vec3-B4WsE9Vy.js","assets/vec4-CWPkTQ7y.js","assets/FeatureServiceSnappingSourceWorker-DYwa-emE.js","assets/symbologySnappingCandidates-DGKshzQE.js","assets/pbfQueryUtils-DysiEHQn.js","assets/pbf-BE7mYI_G.js","assets/query-By2SwjJm.js","assets/GeoJSONSourceWorker-el4fCRY0.js","assets/geojson-DrFBPjZN.js","assets/sourceUtils-9CW6bonr.js","assets/MemorySourceWorker-BeshX_wz.js","assets/objectIdUtils-BmFjqQA3.js","assets/PBFDecoderWorker-DEe0yn8D.js","assets/dehydratedFeatures-BMhJKTqu.js","assets/FeaturePipelineWorker-Bn3ap7iV.js","assets/AttributeStore-Q9Ptcp8V.js","assets/Utils-CBX9GNEO.js","assets/UpdateTracking2D-Dorkrl_O.js","assets/BidiEngine-QXap_35O.js","assets/GeometryUtils-DrOFaYve.js","assets/rasterizingUtils-B9MMJhJL.js","assets/floatRGBA-Bvz9OPz7.js","assets/Rect-CUzevAry.js","assets/constants-BFLErLYb.js","assets/streamLayerUtils-CKwt2uXH.js","assets/MeshWriterRegistry-ZqLfzRK9.js","assets/TechniqueType-pk2C5RYg.js","assets/PieChartMeshWriter-CfCi4s2C.js","assets/libtess-BQyH2CKr.js","assets/earcut-D9gy186-.js","assets/QueueProcessor-CcW63FRf.js","assets/operatorGeodeticDensify-lXBCEsAJ.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-Dlxc8Fpa.js","assets/ogcFeatureUtils-B61Fss3E.js","assets/bundle-B2FM5W1M.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-BanIg0GF.js","assets/PointCloudWorker-CWAKEnvF.js","assets/quat-CGoPm1Gc.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-WCVSSNPR.js","assets/PointCloudUniqueValueRenderer-BoMKbd80.js","assets/I3SBinaryReader-BB91DEfU.js","assets/orientedBoundingBox-BEkvx216.js","assets/plane-CstSqB8d.js","assets/vectorStacks-CuSlUxcj.js","assets/RasterWorker-BI_drauD.js","assets/GeographicTransformation--V6klbXV.js","assets/dataUtils-BMO78Gkl.js","assets/RasterSymbolizer-D3i0TUvl.js","assets/colorUtils-Bm-Ynj_a.js","assets/rasterFunctionHelper-BBmv6KHQ.js","assets/clipUtils-CmFf6bp9.js","assets/rasterProjectionHelper-BA1qQpoD.js","assets/PolynomialTransform-DHZAZskl.js","assets/SceneLayerSnappingSourceWorker-0Qo7-NHG.js","assets/lineSegment-CKmG6Ayt.js","assets/sphere-CLVW6Vmn.js","assets/Octree-B_cY7RQB.js","assets/SceneLayerWorker-BdXtb3ld.js","assets/projectVectorToVector-BXFzMfnW.js","assets/I3SUtil-ClKO46wb.js","assets/edgeUtils-ikTnaPy8.js","assets/NormalAttribute.glsl-DFoRDnyy.js","assets/glsl-Cj7KC756.js","assets/ShaderOutput-Bdd80V3g.js","assets/BindType-BBwFZqyN.js","assets/WFSSourceWorker-C7tIJDQd.js","assets/wfsUtils-1ZDhoShb.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-DmD1I6b4.js","assets/constants-BwsikM5h.js","assets/config-DHajyIwB.js","assets/StyleDefinition-B_RlTojX.js","assets/SourceLayerData-CyB2YCmt.js","assets/StyleRepository-BLn-eyRD.js","assets/Feature3DPipelineWorker-ZHDm7HnK.js","assets/dehydratedFeatureUtils-KHpGRtwe.js","assets/hydratedFeatures-BMdi0W-v.js","assets/OutputColorHighlightOID.glsl-Db9b-5Vp.js","assets/videoUtils-DQQXpgOo.js","assets/requestImageUtils-Dmmqe4iM.js","assets/basicInterfaces-N86vRvDz.js","assets/TextureFormat-1mYWTFa-.js","assets/triangle-6XvSW4_1.js","assets/renderState-Cy74v52Z.js","assets/boundedPlane-C3muUPbT.js","assets/HUDMaterial.glsl-BfxaEx4l.js","assets/ShaderBuilder-kwgzkb0U.js","assets/DefaultMaterial-Bq2Swb10.js","assets/HUDMaterial-C0ZHHqke.js","assets/primitiveObjectSymbolUtils-BDBrwpQ4.js","assets/IntersectorType-gQim6TH1.js","assets/TextureCompressionWorker-BKoh-rLw.js","assets/Popup-BctESBTl.js","assets/unitFormatUtils-C7FwD0wF.js","assets/quantityUtils-BBxKeHy1.js","assets/AttachmentInfo-eg9M8yru.js","assets/featureUtils-qWuBDcz2.js","assets/utils-D3Gs-lyo.js","assets/cimSymbolUtils-DS5kPFwb.js","assets/executeQueryJSON-B8X8Wc5A.js","assets/shared-xnEd2vea.js","assets/NetworkElement-BC-9F32x.js","assets/ReactiveSet-fpBJxvM3.js","assets/symbolUtils-B862mH-2.js","assets/layerViewUtils-DQmklFeZ.js","assets/arcadeUtils-HoMv7bfZ.js","assets/arcade-CufVBSCE.js","assets/aiServices-BSAurg_7.js","assets/ImmutableArray-BPVd6ESQ.js","assets/commonProperties-DHiB1uzW.js","assets/unitConversion-D2F4GqZF.js","assets/batchExec-DakO5JHK.js","assets/webStyleSymbolUtils-DI235Pi-.js","assets/devEnvironmentUtils-CB8wlU_f.js","assets/geometryServiceUtils-BqhiXKy6.js","assets/project-BLqAJq1n.js","assets/webglDeps-BRJcUMEO.js","assets/ProgramTemplate-DBoSLg8o.js","assets/FramebufferObject-DnHiYvgK.js","assets/NestedMap-wm1q4thl.js","assets/mapViewDeps-4637_grB.js","assets/FeatureCommandQueue-DnLswysf.js","assets/GraphShaderModule-BmokOIdS.js","assets/utils-Ct4WOfSU.js","assets/WGLContainer-DShDaJEk.js","assets/Container-Bd8B4W_i.js","assets/SDFHelper-DcntDJwb.js","assets/OverrideHelper-DRFiIyhS.js","assets/GridShader-8PdCb3CX.js","assets/testSVGPremultipliedAlpha-DZRKw_gy.js","assets/SymbolFader-9bmC6KGI.js","assets/RenderingContext-xWRZNr3J.js","assets/CIMResourceManager-t1eonTo3.js","assets/utils-CiMpZDWg.js","assets/utils-ehcGqGxa.js","assets/projectOperator-B773nDGn.js","assets/GraphicsView2D-DuduU-Lh.js","assets/GraphicContainer--B4vjHGO.js","assets/AGraphicContainer-Dnad0GlK.js","assets/TechniqueInstance-GxngTUEK.js","assets/TileContainer-BI2KU9i4.js","assets/gridUtils-DzpdHHHl.js","assets/geodesicUtils-79oeOBL6.js","assets/TileLayerView2D-D_aGb7iz.js","assets/imageUtils-C3J0elAg.js","assets/BitmapTechnique-CVoOWP9b.js","assets/bitmapUtils-BfY_O8SC.js","assets/LayerView-DfLZaLUo.js","assets/HighlightGraphicContainer-Bk4OL1-7.js","assets/RefreshableLayerView-CzDv6d8J.js","assets/MapServiceLayerViewHelper-Bpa5_go8.js","assets/floorFilterUtils-n6UOt7ty.js","assets/drapedUtils-C3A0Y_Nm.js","assets/sublayerUtils-CoR5xx8L.js","assets/popupUtils-DUXQDcqt.js","assets/FeatureLayerView2D-DcED_P3C.js","assets/timeSupport-CpQRg6eU.js","assets/AttributeBinsFeatureSet-CAlVl4_6.js","assets/AttributeBinsQuery-iy_Hjvo-.js","assets/constants-B4mRqufT.js","assets/BaseDynamicLayerView2D-Cc7m5oBt.js","assets/BitmapContainer-BZr1gfAt.js","assets/ExportStrategy-CjQqwPFK.js","assets/CatalogLayerView2D-B_g_PgqT.js","assets/CatalogDynamicGroupLayerView2D-B_Uhnb75.js","assets/CatalogFootprintLayerView2D-rRIj3yd1.js","assets/GeoRSSLayerView2D-CBm0-idV.js","assets/GraphicsLayerView2D-D0HUEIqM.js","assets/GroupLayerView2D-B-eardHG.js","assets/ImageryLayerView2D-BFgJMLkS.js","assets/RasterVFDisplayObject-BJyzi3OG.js","assets/ImageryTileLayerView2D-Byv16E7E.js","assets/rasterFieldUtils-BxEfX7A9.js","assets/rasterUtils-IUfDKLLA.js","assets/RawBlockCache-DO7mBNiR.js","assets/KMLLayerView2D-D05fCurm.js","assets/kmlUtils-CivqTJeL.js","assets/KnowledgeGraphLayerView2D-DZ95etrv.js","assets/MapImageLayerView2D-2KKdprWG.js","assets/ExportImageParameters-Bj6jTh8X.js","assets/MapNotesLayerView2D-D9h2Ru4O.js","assets/MediaLayerView2D-Bk-_0FBp.js","assets/mediaLayerUtils-DjVHf3j1.js","assets/OverlayContainer-DEg40YsM.js","assets/OGCFeatureLayerView2D-D0NDyTLs.js","assets/RouteLayerView2D-BOoHLNfd.js","assets/Stop-D-fxTpUk.js","assets/networkEnums-DH2zxl5V.js","assets/StreamLayerView2D-Jp0comTP.js","assets/SubtypeGroupLayerView2D-CKHuch4B.js","assets/VectorTileLayerView2D-BKkWu3ZV.js","assets/VideoLayerView2D-Dk2kO2g0.js","assets/GraphicsLayer-BYaRWsX3.js","assets/videoUtils-CYyTd96E.js","assets/WMSLayerView2D-Bj3BJLxk.js","assets/ExportWMSImageParameters-BgV_RzRE.js","assets/WMTSLayerView2D-BqncPYJK.js","assets/apng-GuNPwDTL.js","assets/index-Dr5X_34f.js","assets/index-fmkmkn-c.js","assets/guid-Bu7NDcrC.js","assets/useT9n-COZrGoB7.js","assets/index-BTEniU83.js","assets/dom-DhaDB_xt.js","assets/observers-Ci1BY48Y.js","assets/ref-DqRFB2gC.js","assets/static-CP9tFtBm.js","assets/form-Dd4nP3Fa.js","assets/interactive-DmMwNNQn.js","assets/label-DmBPHBRr.js","assets/component-7DoEzJwy.js","assets/layersLoader-P1p3zvwm.js","assets/jsonContext-DLlnGiJs.js","assets/featureLayerUtils-DeGHNdbF.js","assets/originUtils-D28aQ7f0.js","assets/utils-Dx03FQqT.js","assets/saveUtils-Dktkn86L.js","assets/FeatureLayerSource-DdwOejM-.js","assets/External-CRqFycVw.js","assets/MeshTransform-CvBDejpE.js","assets/axisAngleDegrees-D27-aln_.js","assets/editingSupport-i4w-Mggt.js","assets/QueryTask-kZtDyNwL.js","assets/executeForIds-DEsL2-6A.js"])))=>i.map(i=>d[i]);
var See=Object.getPrototypeOf;var Tee=Reflect.get;var T4=e=>{throw TypeError(e)};var C$=(e,t,r)=>t.has(e)||T4("Cannot "+r);var xt=(e,t,r)=>(C$(e,t,"read from private field"),r?r.call(e):t.get(e)),so=(e,t,r)=>t.has(e)?T4("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),oo=(e,t,r,i)=>(C$(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),kg=(e,t,r)=>(C$(e,t,"access private method"),r);var E4=(e,t,r)=>Tee(See(e),r,t);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();var I$={exports:{}},Fg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x4;function Eee(){if(x4)return Fg;x4=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(i,n,s){var a=null;if(s!==void 0&&(a=""+s),n.key!==void 0&&(a=""+n.key),"key"in n){s={};for(var c in n)c!=="key"&&(s[c]=n[c])}else s=n;return n=s.ref,{$$typeof:e,type:i,key:a,ref:n!==void 0?n:null,props:s}}return Fg.Fragment=t,Fg.jsx=r,Fg.jsxs=r,Fg}var $4;function xee(){return $4||($4=1,I$.exports=Eee()),I$.exports}var Fl=xee(),N$={exports:{}},et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M4;function $ee(){if(M4)return et;M4=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function w(L){return L===null||typeof L!="object"?null:(L=v&&L[v]||L["@@iterator"],typeof L=="function"?L:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,E={};function M(L,oe,xe){this.props=L,this.context=oe,this.refs=E,this.updater=xe||S}M.prototype.isReactComponent={},M.prototype.setState=function(L,oe){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,oe,"setState")},M.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function R(){}R.prototype=M.prototype;function I(L,oe,xe){this.props=L,this.context=oe,this.refs=E,this.updater=xe||S}var k=I.prototype=new R;k.constructor=I,T(k,M.prototype),k.isPureReactComponent=!0;var j=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},X=Object.prototype.hasOwnProperty;function ae(L,oe,xe,we,ze,yt){return xe=yt.ref,{$$typeof:e,type:L,key:oe,ref:xe!==void 0?xe:null,props:yt}}function fe(L,oe){return ae(L.type,oe,void 0,void 0,void 0,L.props)}function he(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function me(L){var oe={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(xe){return oe[xe]})}var Oe=/\/+/g;function Se(L,oe){return typeof L=="object"&&L!==null&&L.key!=null?me(""+L.key):oe.toString(36)}function ft(){}function Ue(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(ft,ft):(L.status="pending",L.then(function(oe){L.status==="pending"&&(L.status="fulfilled",L.value=oe)},function(oe){L.status==="pending"&&(L.status="rejected",L.reason=oe)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function mt(L,oe,xe,we,ze){var yt=typeof L;(yt==="undefined"||yt==="boolean")&&(L=null);var Ze=!1;if(L===null)Ze=!0;else switch(yt){case"bigint":case"string":case"number":Ze=!0;break;case"object":switch(L.$$typeof){case e:case t:Ze=!0;break;case g:return Ze=L._init,mt(Ze(L._payload),oe,xe,we,ze)}}if(Ze)return ze=ze(L),Ze=we===""?"."+Se(L,0):we,j(ze)?(xe="",Ze!=null&&(xe=Ze.replace(Oe,"$&/")+"/"),mt(ze,oe,xe,"",function(qo){return qo})):ze!=null&&(he(ze)&&(ze=fe(ze,xe+(ze.key==null||L&&L.key===ze.key?"":(""+ze.key).replace(Oe,"$&/")+"/")+Ze)),oe.push(ze)),1;Ze=0;var Ji=we===""?".":we+":";if(j(L))for(var Gt=0;Gt<L.length;Gt++)we=L[Gt],yt=Ji+Se(we,Gt),Ze+=mt(we,oe,xe,yt,ze);else if(Gt=w(L),typeof Gt=="function")for(L=Gt.call(L),Gt=0;!(we=L.next()).done;)we=we.value,yt=Ji+Se(we,Gt++),Ze+=mt(we,oe,xe,yt,ze);else if(yt==="object"){if(typeof L.then=="function")return mt(Ue(L),oe,xe,we,ze);throw oe=String(L),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Ze}function Q(L,oe,xe){if(L==null)return L;var we=[],ze=0;return mt(L,we,"","",function(yt){return oe.call(xe,yt,ze++)}),we}function pe(L){if(L._status===-1){var oe=L._result;oe=oe(),oe.then(function(xe){(L._status===0||L._status===-1)&&(L._status=1,L._result=xe)},function(xe){(L._status===0||L._status===-1)&&(L._status=2,L._result=xe)}),L._status===-1&&(L._status=0,L._result=oe)}if(L._status===1)return L._result.default;throw L._result}var ye=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function rt(){}return et.Children={map:Q,forEach:function(L,oe,xe){Q(L,function(){oe.apply(this,arguments)},xe)},count:function(L){var oe=0;return Q(L,function(){oe++}),oe},toArray:function(L){return Q(L,function(oe){return oe})||[]},only:function(L){if(!he(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},et.Component=M,et.Fragment=r,et.Profiler=n,et.PureComponent=I,et.StrictMode=i,et.Suspense=d,et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,et.__COMPILER_RUNTIME={__proto__:null,c:function(L){return P.H.useMemoCache(L)}},et.cache=function(L){return function(){return L.apply(null,arguments)}},et.cloneElement=function(L,oe,xe){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var we=T({},L.props),ze=L.key,yt=void 0;if(oe!=null)for(Ze in oe.ref!==void 0&&(yt=void 0),oe.key!==void 0&&(ze=""+oe.key),oe)!X.call(oe,Ze)||Ze==="key"||Ze==="__self"||Ze==="__source"||Ze==="ref"&&oe.ref===void 0||(we[Ze]=oe[Ze]);var Ze=arguments.length-2;if(Ze===1)we.children=xe;else if(1<Ze){for(var Ji=Array(Ze),Gt=0;Gt<Ze;Gt++)Ji[Gt]=arguments[Gt+2];we.children=Ji}return ae(L.type,ze,void 0,void 0,yt,we)},et.createContext=function(L){return L={$$typeof:a,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:s,_context:L},L},et.createElement=function(L,oe,xe){var we,ze={},yt=null;if(oe!=null)for(we in oe.key!==void 0&&(yt=""+oe.key),oe)X.call(oe,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(ze[we]=oe[we]);var Ze=arguments.length-2;if(Ze===1)ze.children=xe;else if(1<Ze){for(var Ji=Array(Ze),Gt=0;Gt<Ze;Gt++)Ji[Gt]=arguments[Gt+2];ze.children=Ji}if(L&&L.defaultProps)for(we in Ze=L.defaultProps,Ze)ze[we]===void 0&&(ze[we]=Ze[we]);return ae(L,yt,void 0,void 0,null,ze)},et.createRef=function(){return{current:null}},et.forwardRef=function(L){return{$$typeof:c,render:L}},et.isValidElement=he,et.lazy=function(L){return{$$typeof:g,_payload:{_status:-1,_result:L},_init:pe}},et.memo=function(L,oe){return{$$typeof:f,type:L,compare:oe===void 0?null:oe}},et.startTransition=function(L){var oe=P.T,xe={};P.T=xe;try{var we=L(),ze=P.S;ze!==null&&ze(xe,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then(rt,ye)}catch(yt){ye(yt)}finally{P.T=oe}},et.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},et.use=function(L){return P.H.use(L)},et.useActionState=function(L,oe,xe){return P.H.useActionState(L,oe,xe)},et.useCallback=function(L,oe){return P.H.useCallback(L,oe)},et.useContext=function(L){return P.H.useContext(L)},et.useDebugValue=function(){},et.useDeferredValue=function(L,oe){return P.H.useDeferredValue(L,oe)},et.useEffect=function(L,oe,xe){var we=P.H;if(typeof xe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return we.useEffect(L,oe)},et.useId=function(){return P.H.useId()},et.useImperativeHandle=function(L,oe,xe){return P.H.useImperativeHandle(L,oe,xe)},et.useInsertionEffect=function(L,oe){return P.H.useInsertionEffect(L,oe)},et.useLayoutEffect=function(L,oe){return P.H.useLayoutEffect(L,oe)},et.useMemo=function(L,oe){return P.H.useMemo(L,oe)},et.useOptimistic=function(L,oe){return P.H.useOptimistic(L,oe)},et.useReducer=function(L,oe,xe){return P.H.useReducer(L,oe,xe)},et.useRef=function(L){return P.H.useRef(L)},et.useState=function(L){return P.H.useState(L)},et.useSyncExternalStore=function(L,oe,xe){return P.H.useSyncExternalStore(L,oe,xe)},et.useTransition=function(){return P.H.useTransition()},et.version="19.1.1",et}var A4;function pI(){return A4||(A4=1,N$.exports=$ee()),N$.exports}var ne=pI(),P$={exports:{}},Ug={},L$={exports:{}},D$={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O4;function Mee(){return O4||(O4=1,(function(e){function t(Q,pe){var ye=Q.length;Q.push(pe);e:for(;0<ye;){var rt=ye-1>>>1,L=Q[rt];if(0<n(L,pe))Q[rt]=pe,Q[ye]=L,ye=rt;else break e}}function r(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var pe=Q[0],ye=Q.pop();if(ye!==pe){Q[0]=ye;e:for(var rt=0,L=Q.length,oe=L>>>1;rt<oe;){var xe=2*(rt+1)-1,we=Q[xe],ze=xe+1,yt=Q[ze];if(0>n(we,ye))ze<L&&0>n(yt,we)?(Q[rt]=yt,Q[ze]=ye,rt=ze):(Q[rt]=we,Q[xe]=ye,rt=xe);else if(ze<L&&0>n(yt,ye))Q[rt]=yt,Q[ze]=ye,rt=ze;else break e}}return pe}function n(Q,pe){var ye=Q.sortIndex-pe.sortIndex;return ye!==0?ye:Q.id-pe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();e.unstable_now=function(){return a.now()-c}}var d=[],f=[],g=1,v=null,w=3,S=!1,T=!1,E=!1,M=!1,R=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function j(Q){for(var pe=r(f);pe!==null;){if(pe.callback===null)i(f);else if(pe.startTime<=Q)i(f),pe.sortIndex=pe.expirationTime,t(d,pe);else break;pe=r(f)}}function P(Q){if(E=!1,j(Q),!T)if(r(d)!==null)T=!0,X||(X=!0,Se());else{var pe=r(f);pe!==null&&mt(P,pe.startTime-Q)}}var X=!1,ae=-1,fe=5,he=-1;function me(){return M?!0:!(e.unstable_now()-he<fe)}function Oe(){if(M=!1,X){var Q=e.unstable_now();he=Q;var pe=!0;try{e:{T=!1,E&&(E=!1,I(ae),ae=-1),S=!0;var ye=w;try{t:{for(j(Q),v=r(d);v!==null&&!(v.expirationTime>Q&&me());){var rt=v.callback;if(typeof rt=="function"){v.callback=null,w=v.priorityLevel;var L=rt(v.expirationTime<=Q);if(Q=e.unstable_now(),typeof L=="function"){v.callback=L,j(Q),pe=!0;break t}v===r(d)&&i(d),j(Q)}else i(d);v=r(d)}if(v!==null)pe=!0;else{var oe=r(f);oe!==null&&mt(P,oe.startTime-Q),pe=!1}}break e}finally{v=null,w=ye,S=!1}pe=void 0}}finally{pe?Se():X=!1}}}var Se;if(typeof k=="function")Se=function(){k(Oe)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,Ue=ft.port2;ft.port1.onmessage=Oe,Se=function(){Ue.postMessage(null)}}else Se=function(){R(Oe,0)};function mt(Q,pe){ae=R(function(){Q(e.unstable_now())},pe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_next=function(Q){switch(w){case 1:case 2:case 3:var pe=3;break;default:pe=w}var ye=w;w=pe;try{return Q()}finally{w=ye}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(Q,pe){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ye=w;w=Q;try{return pe()}finally{w=ye}},e.unstable_scheduleCallback=function(Q,pe,ye){var rt=e.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?rt+ye:rt):ye=rt,Q){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ye+L,Q={id:g++,callback:pe,priorityLevel:Q,startTime:ye,expirationTime:L,sortIndex:-1},ye>rt?(Q.sortIndex=ye,t(f,Q),r(d)===null&&Q===r(f)&&(E?(I(ae),ae=-1):E=!0,mt(P,ye-rt))):(Q.sortIndex=L,t(d,Q),T||S||(T=!0,X||(X=!0,Se()))),Q},e.unstable_shouldYield=me,e.unstable_wrapCallback=function(Q){var pe=w;return function(){var ye=w;w=pe;try{return Q.apply(this,arguments)}finally{w=ye}}}})(D$)),D$}var R4;function Aee(){return R4||(R4=1,L$.exports=Mee()),L$.exports}var k$={exports:{}},Ci={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C4;function Oee(){if(C4)return Ci;C4=1;var e=pI();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},n=Symbol.for("react.portal");function s(d,f,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:v==null?null:""+v,children:d,containerInfo:f,implementation:g}}var a=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ci.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ci.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return s(d,f,null,g)},Ci.flushSync=function(d){var f=a.T,g=i.p;try{if(a.T=null,i.p=2,d)return d()}finally{a.T=f,i.p=g,i.d.f()}},Ci.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},Ci.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Ci.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,v=c(g,f.crossOrigin),w=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:S}):g==="script"&&i.d.X(d,{crossOrigin:v,integrity:w,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ci.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=c(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},Ci.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,v=c(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ci.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=c(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},Ci.requestFormReset=function(d){i.d.r(d)},Ci.unstable_batchedUpdates=function(d,f){return d(f)},Ci.useFormState=function(d,f,g){return a.H.useFormState(d,f,g)},Ci.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ci.version="19.1.1",Ci}var I4;function Ree(){if(I4)return k$.exports;I4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),k$.exports=Oee(),k$.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N4;function Cee(){if(N4)return Ug;N4=1;var e=Aee(),t=pI(),r=Ree();function i(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(s(o)!==o)throw Error(i(188))}function d(o){var l=o.alternate;if(!l){if(l=s(o),l===null)throw Error(i(188));return l!==o?null:o}for(var h=o,y=l;;){var b=h.return;if(b===null)break;var _=b.alternate;if(_===null){if(y=b.return,y!==null){h=y;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===h)return c(b),o;if(_===y)return c(b),l;_=_.sibling}throw Error(i(188))}if(h.return!==y.return)h=b,y=_;else{for(var x=!1,A=b.child;A;){if(A===h){x=!0,h=b,y=_;break}if(A===y){x=!0,y=b,h=_;break}A=A.sibling}if(!x){for(A=_.child;A;){if(A===h){x=!0,h=_,y=b;break}if(A===y){x=!0,y=_,h=b;break}A=A.sibling}if(!x)throw Error(i(189))}}if(h.alternate!==y)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?o:l}function f(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=f(o),l!==null)return l;o=o.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),k=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),he=Symbol.for("react.activity"),me=Symbol.for("react.memo_cache_sentinel"),Oe=Symbol.iterator;function Se(o){return o===null||typeof o!="object"?null:(o=Oe&&o[Oe]||o["@@iterator"],typeof o=="function"?o:null)}var ft=Symbol.for("react.client.reference");function Ue(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ft?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case T:return"Fragment";case M:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case X:return"SuspenseList";case he:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case S:return"Portal";case k:return(o.displayName||"Context")+".Provider";case I:return(o._context.displayName||"Context")+".Consumer";case j:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ae:return l=o.displayName||null,l!==null?l:Ue(o.type)||"Memo";case fe:l=o._payload,o=o._init;try{return Ue(o(l))}catch{}}return null}var mt=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},rt=[],L=-1;function oe(o){return{current:o}}function xe(o){0>L||(o.current=rt[L],rt[L]=null,L--)}function we(o,l){L++,rt[L]=o.current,o.current=l}var ze=oe(null),yt=oe(null),Ze=oe(null),Ji=oe(null);function Gt(o,l){switch(we(Ze,l),we(yt,o),we(ze,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?Xk(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=Xk(l),o=Qk(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}xe(ze),we(ze,o)}function qo(){xe(ze),xe(yt),xe(Ze)}function Cy(o){o.memoizedState!==null&&we(Ji,o);var l=ze.current,h=Qk(l,o.type);l!==h&&(we(yt,o),we(ze,h))}function ep(o){yt.current===o&&(xe(ze),xe(yt)),Ji.current===o&&(xe(Ji),Ig._currentValue=ye)}var Iy=Object.prototype.hasOwnProperty,Ny=e.unstable_scheduleCallback,Py=e.unstable_cancelCallback,yE=e.unstable_shouldYield,gE=e.unstable_requestPaint,vs=e.unstable_now,vE=e.unstable_getCurrentPriorityLevel,Ly=e.unstable_ImmediatePriority,Dy=e.unstable_UserBlockingPriority,Vn=e.unstable_NormalPriority,bE=e.unstable_LowPriority,Q1=e.unstable_IdlePriority,wE=e.log,_E=e.unstable_setDisableYieldValue,Zc=null,Xi=null;function Bo(o){if(typeof wE=="function"&&_E(o),Xi&&typeof Xi.setStrictMode=="function")try{Xi.setStrictMode(Zc,o)}catch{}}var vn=Math.clz32?Math.clz32:EE,SE=Math.log,TE=Math.LN2;function EE(o){return o>>>=0,o===0?32:31-(SE(o)/TE|0)|0}var tp=256,rp=4194304;function Pa(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ip(o,l,h){var y=o.pendingLanes;if(y===0)return 0;var b=0,_=o.suspendedLanes,x=o.pingedLanes;o=o.warmLanes;var A=y&134217727;return A!==0?(y=A&~_,y!==0?b=Pa(y):(x&=A,x!==0?b=Pa(x):h||(h=A&~o,h!==0&&(b=Pa(h))))):(A=y&~_,A!==0?b=Pa(A):x!==0?b=Pa(x):h||(h=y&~o,h!==0&&(b=Pa(h)))),b===0?0:l!==0&&l!==b&&(l&_)===0&&(_=b&-b,h=l&-l,_>=h||_===32&&(h&4194048)!==0)?l:b}function Yc(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function xE(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K1(){var o=tp;return tp<<=1,(tp&4194048)===0&&(tp=256),o}function eb(){var o=rp;return rp<<=1,(rp&62914560)===0&&(rp=4194304),o}function ky(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function Jc(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function $E(o,l,h,y,b,_){var x=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var A=o.entanglements,N=o.expirationTimes,H=o.hiddenUpdates;for(h=x&~h;0<h;){var ee=31-vn(h),ie=1<<ee;A[ee]=0,N[ee]=-1;var W=H[ee];if(W!==null)for(H[ee]=null,ee=0;ee<W.length;ee++){var J=W[ee];J!==null&&(J.lane&=-536870913)}h&=~ie}y!==0&&tb(o,y,0),_!==0&&b===0&&o.tag!==0&&(o.suspendedLanes|=_&~(x&~l))}function tb(o,l,h){o.pendingLanes|=l,o.suspendedLanes&=~l;var y=31-vn(l);o.entangledLanes|=l,o.entanglements[y]=o.entanglements[y]|1073741824|h&4194090}function rb(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var y=31-vn(h),b=1<<y;b&l|o[y]&l&&(o[y]|=l),h&=~b}}function Fy(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Y(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Ut(){var o=pe.p;return o!==0?o:(o=window.event,o===void 0?32:g4(o.type))}function tu(o,l){var h=pe.p;try{return pe.p=o,l()}finally{pe.p=h}}var bn=Math.random().toString(36).slice(2),It="__reactFiber$"+bn,Hr="__reactProps$"+bn,$e="__reactContainer$"+bn,ru="__reactEvents$"+bn,ME="__reactListeners$"+bn,kr="__reactHandles$"+bn,iu="__reactResources$"+bn,Xc="__reactMarker$"+bn;function bs(o){delete o[It],delete o[Hr],delete o[ru],delete o[ME],delete o[kr]}function La(o){var l=o[It];if(l)return l;for(var h=o.parentNode;h;){if(l=h[$e]||h[It]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=r4(o);o!==null;){if(h=o[It])return h;o=r4(o)}return l}o=h,h=o.parentNode}return null}function Da(o){if(o=o[It]||o[$e]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function qe(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(i(33))}function nu(o){var l=o[iu];return l||(l=o[iu]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Er(o){o[Xc]=!0}var ib=new Set,nb={};function eo(o,l){su(o,l),su(o+"Capture",l)}function su(o,l){for(nb[o]=l,o=0;o<l.length;o++)ib.add(l[o])}var Uy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xr={},sb={};function ob(o){return Iy.call(sb,o)?!0:Iy.call(xr,o)?!1:Uy.test(o)?sb[o]=!0:(xr[o]=!0,!1)}function np(o,l,h){if(ob(l))if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var y=l.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+h)}}function sp(o,l,h){if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+h)}}function to(o,l,h,y){if(y===null)o.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(l,h,""+y)}}var jy,ab;function Wr(o){if(jy===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);jy=l&&l[1]||"",ab=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jy+o+ab}var zy=!1;function Vy(o,l){if(!o||zy)return"";zy=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(l){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(J){var W=J}Reflect.construct(o,[],ie)}else{try{ie.call()}catch(J){W=J}o.call(ie.prototype)}}else{try{throw Error()}catch(J){W=J}(ie=o())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(J){if(J&&W&&typeof J.stack=="string")return[J.stack,W.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=y.DetermineComponentFrameRoot(),x=_[0],A=_[1];if(x&&A){var N=x.split(`
`),H=A.split(`
`);for(b=y=0;y<N.length&&!N[y].includes("DetermineComponentFrameRoot");)y++;for(;b<H.length&&!H[b].includes("DetermineComponentFrameRoot");)b++;if(y===N.length||b===H.length)for(y=N.length-1,b=H.length-1;1<=y&&0<=b&&N[y]!==H[b];)b--;for(;1<=y&&0<=b;y--,b--)if(N[y]!==H[b]){if(y!==1||b!==1)do if(y--,b--,0>b||N[y]!==H[b]){var ee=`
`+N[y].replace(" at new "," at ");return o.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",o.displayName)),ee}while(1<=y&&0<=b);break}}}finally{zy=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Wr(h):""}function Gy(o){switch(o.tag){case 26:case 27:case 5:return Wr(o.type);case 16:return Wr("Lazy");case 13:return Wr("Suspense");case 19:return Wr("SuspenseList");case 0:case 15:return Vy(o.type,!1);case 11:return Vy(o.type.render,!1);case 1:return Vy(o.type,!0);case 31:return Wr("Activity");default:return""}}function qy(o){try{var l="";do l+=Gy(o),o=o.return;while(o);return l}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function C(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Z(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ce(o){var l=Z(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),y=""+o[l];if(!o.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,_=h.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return b.call(this)},set:function(x){y=""+x,_.call(this,x)}}),Object.defineProperty(o,l,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(x){y=""+x},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function ke(o){o._valueTracker||(o._valueTracker=ce(o))}function vt(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),y="";return o&&(y=Z(o)?o.checked?"true":"false":o.value),o=y,o!==h?(l.setValue(o),!0):!1}function jt(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var $r=/[\n"\\]/g;function Ot(o){return o.replace($r,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function AE(o,l,h,y,b,_,x,A){o.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?o.type=x:o.removeAttribute("type"),l!=null?x==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+C(l)):o.value!==""+C(l)&&(o.value=""+C(l)):x!=="submit"&&x!=="reset"||o.removeAttribute("value"),l!=null?OE(o,x,C(l)):h!=null?OE(o,x,C(h)):y!=null&&o.removeAttribute("value"),b==null&&_!=null&&(o.defaultChecked=!!_),b!=null&&(o.checked=b&&typeof b!="function"&&typeof b!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?o.name=""+C(A):o.removeAttribute("name")}function ZP(o,l,h,y,b,_,x,A){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),l!=null||h!=null){if(!(_!=="submit"&&_!=="reset"||l!=null))return;h=h!=null?""+C(h):"",l=l!=null?""+C(l):h,A||l===o.value||(o.value=l),o.defaultValue=l}y=y??b,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=A?o.checked:!!y,o.defaultChecked=!!y,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(o.name=x)}function OE(o,l,h){l==="number"&&jt(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function op(o,l,h,y){if(o=o.options,l){l={};for(var b=0;b<h.length;b++)l["$"+h[b]]=!0;for(h=0;h<o.length;h++)b=l.hasOwnProperty("$"+o[h].value),o[h].selected!==b&&(o[h].selected=b),b&&y&&(o[h].defaultSelected=!0)}else{for(h=""+C(h),l=null,b=0;b<o.length;b++){if(o[b].value===h){o[b].selected=!0,y&&(o[b].defaultSelected=!0);return}l!==null||o[b].disabled||(l=o[b])}l!==null&&(l.selected=!0)}}function YP(o,l,h){if(l!=null&&(l=""+C(l),l!==o.value&&(o.value=l),h==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=h!=null?""+C(h):""}function JP(o,l,h,y){if(l==null){if(y!=null){if(h!=null)throw Error(i(92));if(mt(y)){if(1<y.length)throw Error(i(93));y=y[0]}h=y}h==null&&(h=""),l=h}h=C(l),o.defaultValue=h,y=o.textContent,y===h&&y!==""&&y!==null&&(o.value=y)}function ap(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var bQ=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function XP(o,l,h){var y=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?y?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":y?o.setProperty(l,h):typeof h!="number"||h===0||bQ.has(l)?l==="float"?o.cssFloat=h:o[l]=(""+h).trim():o[l]=h+"px"}function QP(o,l,h){if(l!=null&&typeof l!="object")throw Error(i(62));if(o=o.style,h!=null){for(var y in h)!h.hasOwnProperty(y)||l!=null&&l.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var b in l)y=l[b],l.hasOwnProperty(b)&&h[b]!==y&&XP(o,b,y)}else for(var _ in l)l.hasOwnProperty(_)&&XP(o,_,l[_])}function RE(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wQ=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_Q=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function lb(o){return _Q.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var CE=null;function IE(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var lp=null,up=null;function KP(o){var l=Da(o);if(l&&(o=l.stateNode)){var h=o[Hr]||null;e:switch(o=l.stateNode,l.type){case"input":if(AE(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Ot(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var y=h[l];if(y!==o&&y.form===o.form){var b=y[Hr]||null;if(!b)throw Error(i(90));AE(y,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<h.length;l++)y=h[l],y.form===o.form&&vt(y)}break e;case"textarea":YP(o,h.value,h.defaultValue);break e;case"select":l=h.value,l!=null&&op(o,!!h.multiple,l,!1)}}}var NE=!1;function eL(o,l,h){if(NE)return o(l,h);NE=!0;try{var y=o(l);return y}finally{if(NE=!1,(lp!==null||up!==null)&&(Wb(),lp&&(l=lp,o=up,up=lp=null,KP(l),o)))for(l=0;l<o.length;l++)KP(o[l])}}function By(o,l){var h=o.stateNode;if(h===null)return null;var y=h[Hr]||null;if(y===null)return null;h=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(i(231,l,typeof h));return h}var ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),PE=!1;if(ka)try{var Hy={};Object.defineProperty(Hy,"passive",{get:function(){PE=!0}}),window.addEventListener("test",Hy,Hy),window.removeEventListener("test",Hy,Hy)}catch{PE=!1}var ou=null,LE=null,ub=null;function tL(){if(ub)return ub;var o,l=LE,h=l.length,y,b="value"in ou?ou.value:ou.textContent,_=b.length;for(o=0;o<h&&l[o]===b[o];o++);var x=h-o;for(y=1;y<=x&&l[h-y]===b[_-y];y++);return ub=b.slice(o,1<y?1-y:void 0)}function cb(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function db(){return!0}function rL(){return!1}function wn(o){function l(h,y,b,_,x){this._reactName=h,this._targetInst=b,this.type=y,this.nativeEvent=_,this.target=x,this.currentTarget=null;for(var A in o)o.hasOwnProperty(A)&&(h=o[A],this[A]=h?h(_):_[A]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?db:rL,this.isPropagationStopped=rL,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=db)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=db)},persist:function(){},isPersistent:db}),l}var Qc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hb=wn(Qc),Wy=g({},Qc,{view:0,detail:0}),SQ=wn(Wy),DE,kE,Zy,pb=g({},Wy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:UE,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Zy&&(Zy&&o.type==="mousemove"?(DE=o.screenX-Zy.screenX,kE=o.screenY-Zy.screenY):kE=DE=0,Zy=o),DE)},movementY:function(o){return"movementY"in o?o.movementY:kE}}),iL=wn(pb),TQ=g({},pb,{dataTransfer:0}),EQ=wn(TQ),xQ=g({},Wy,{relatedTarget:0}),FE=wn(xQ),$Q=g({},Qc,{animationName:0,elapsedTime:0,pseudoElement:0}),MQ=wn($Q),AQ=g({},Qc,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),OQ=wn(AQ),RQ=g({},Qc,{data:0}),nL=wn(RQ),CQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PQ(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=NQ[o])?!!l[o]:!1}function UE(){return PQ}var LQ=g({},Wy,{key:function(o){if(o.key){var l=CQ[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=cb(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?IQ[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:UE,charCode:function(o){return o.type==="keypress"?cb(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?cb(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),DQ=wn(LQ),kQ=g({},pb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sL=wn(kQ),FQ=g({},Wy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:UE}),UQ=wn(FQ),jQ=g({},Qc,{propertyName:0,elapsedTime:0,pseudoElement:0}),zQ=wn(jQ),VQ=g({},pb,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),GQ=wn(VQ),qQ=g({},Qc,{newState:0,oldState:0}),BQ=wn(qQ),HQ=[9,13,27,32],jE=ka&&"CompositionEvent"in window,Yy=null;ka&&"documentMode"in document&&(Yy=document.documentMode);var WQ=ka&&"TextEvent"in window&&!Yy,oL=ka&&(!jE||Yy&&8<Yy&&11>=Yy),aL=" ",lL=!1;function uL(o,l){switch(o){case"keyup":return HQ.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cL(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var cp=!1;function ZQ(o,l){switch(o){case"compositionend":return cL(l);case"keypress":return l.which!==32?null:(lL=!0,aL);case"textInput":return o=l.data,o===aL&&lL?null:o;default:return null}}function YQ(o,l){if(cp)return o==="compositionend"||!jE&&uL(o,l)?(o=tL(),ub=LE=ou=null,cp=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return oL&&l.locale!=="ko"?null:l.data;default:return null}}var JQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dL(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!JQ[o.type]:l==="textarea"}function hL(o,l,h,y){lp?up?up.push(y):up=[y]:lp=y,l=Kb(l,"onChange"),0<l.length&&(h=new hb("onChange","change",null,h,y),o.push({event:h,listeners:l}))}var Jy=null,Xy=null;function XQ(o){Hk(o,0)}function fb(o){var l=qe(o);if(vt(l))return o}function pL(o,l){if(o==="change")return l}var fL=!1;if(ka){var zE;if(ka){var VE="oninput"in document;if(!VE){var mL=document.createElement("div");mL.setAttribute("oninput","return;"),VE=typeof mL.oninput=="function"}zE=VE}else zE=!1;fL=zE&&(!document.documentMode||9<document.documentMode)}function yL(){Jy&&(Jy.detachEvent("onpropertychange",gL),Xy=Jy=null)}function gL(o){if(o.propertyName==="value"&&fb(Xy)){var l=[];hL(l,Xy,o,IE(o)),eL(XQ,l)}}function QQ(o,l,h){o==="focusin"?(yL(),Jy=l,Xy=h,Jy.attachEvent("onpropertychange",gL)):o==="focusout"&&yL()}function KQ(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return fb(Xy)}function eK(o,l){if(o==="click")return fb(l)}function tK(o,l){if(o==="input"||o==="change")return fb(l)}function rK(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Gn=typeof Object.is=="function"?Object.is:rK;function Qy(o,l){if(Gn(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),y=Object.keys(l);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var b=h[y];if(!Iy.call(l,b)||!Gn(o[b],l[b]))return!1}return!0}function vL(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function bL(o,l){var h=vL(o);o=0;for(var y;h;){if(h.nodeType===3){if(y=o+h.textContent.length,o<=l&&y>=l)return{node:h,offset:l-o};o=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=vL(h)}}function wL(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?wL(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function _L(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=jt(o.document);l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=jt(o.document)}return l}function GE(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var iK=ka&&"documentMode"in document&&11>=document.documentMode,dp=null,qE=null,Ky=null,BE=!1;function SL(o,l,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;BE||dp==null||dp!==jt(y)||(y=dp,"selectionStart"in y&&GE(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Ky&&Qy(Ky,y)||(Ky=y,y=Kb(qE,"onSelect"),0<y.length&&(l=new hb("onSelect","select",null,l,h),o.push({event:l,listeners:y}),l.target=dp)))}function Kc(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var hp={animationend:Kc("Animation","AnimationEnd"),animationiteration:Kc("Animation","AnimationIteration"),animationstart:Kc("Animation","AnimationStart"),transitionrun:Kc("Transition","TransitionRun"),transitionstart:Kc("Transition","TransitionStart"),transitioncancel:Kc("Transition","TransitionCancel"),transitionend:Kc("Transition","TransitionEnd")},HE={},TL={};ka&&(TL=document.createElement("div").style,"AnimationEvent"in window||(delete hp.animationend.animation,delete hp.animationiteration.animation,delete hp.animationstart.animation),"TransitionEvent"in window||delete hp.transitionend.transition);function ed(o){if(HE[o])return HE[o];if(!hp[o])return o;var l=hp[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in TL)return HE[o]=l[h];return o}var EL=ed("animationend"),xL=ed("animationiteration"),$L=ed("animationstart"),nK=ed("transitionrun"),sK=ed("transitionstart"),oK=ed("transitioncancel"),ML=ed("transitionend"),AL=new Map,WE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");WE.push("scrollEnd");function ro(o,l){AL.set(o,l),eo(l,[o])}var OL=new WeakMap;function ws(o,l){if(typeof o=="object"&&o!==null){var h=OL.get(o);return h!==void 0?h:(l={value:o,source:l,stack:qy(l)},OL.set(o,l),l)}return{value:o,source:l,stack:qy(l)}}var _s=[],pp=0,ZE=0;function mb(){for(var o=pp,l=ZE=pp=0;l<o;){var h=_s[l];_s[l++]=null;var y=_s[l];_s[l++]=null;var b=_s[l];_s[l++]=null;var _=_s[l];if(_s[l++]=null,y!==null&&b!==null){var x=y.pending;x===null?b.next=b:(b.next=x.next,x.next=b),y.pending=b}_!==0&&RL(h,b,_)}}function yb(o,l,h,y){_s[pp++]=o,_s[pp++]=l,_s[pp++]=h,_s[pp++]=y,ZE|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function YE(o,l,h,y){return yb(o,l,h,y),gb(o)}function fp(o,l){return yb(o,null,null,l),gb(o)}function RL(o,l,h){o.lanes|=h;var y=o.alternate;y!==null&&(y.lanes|=h);for(var b=!1,_=o.return;_!==null;)_.childLanes|=h,y=_.alternate,y!==null&&(y.childLanes|=h),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(b=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,b&&l!==null&&(b=31-vn(h),o=_.hiddenUpdates,y=o[b],y===null?o[b]=[l]:y.push(l),l.lane=h|536870912),_):null}function gb(o){if(50<Eg)throw Eg=0,t$=null,Error(i(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var mp={};function aK(o,l,h,y){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(o,l,h,y){return new aK(o,l,h,y)}function JE(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Fa(o,l){var h=o.alternate;return h===null?(h=qn(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function CL(o,l){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,l=h.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function vb(o,l,h,y,b,_){var x=0;if(y=o,typeof o=="function")JE(o)&&(x=1);else if(typeof o=="string")x=uee(o,h,ze.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case he:return o=qn(31,h,l,b),o.elementType=he,o.lanes=_,o;case T:return td(h.children,b,_,l);case E:x=8,b|=24;break;case M:return o=qn(12,h,l,b|2),o.elementType=M,o.lanes=_,o;case P:return o=qn(13,h,l,b),o.elementType=P,o.lanes=_,o;case X:return o=qn(19,h,l,b),o.elementType=X,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case R:case k:x=10;break e;case I:x=9;break e;case j:x=11;break e;case ae:x=14;break e;case fe:x=16,y=null;break e}x=29,h=Error(i(130,o===null?"null":typeof o,"")),y=null}return l=qn(x,h,l,b),l.elementType=o,l.type=y,l.lanes=_,l}function td(o,l,h,y){return o=qn(7,o,y,l),o.lanes=h,o}function XE(o,l,h){return o=qn(6,o,null,l),o.lanes=h,o}function QE(o,l,h){return l=qn(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var yp=[],gp=0,bb=null,wb=0,Ss=[],Ts=0,rd=null,Ua=1,ja="";function id(o,l){yp[gp++]=wb,yp[gp++]=bb,bb=o,wb=l}function IL(o,l,h){Ss[Ts++]=Ua,Ss[Ts++]=ja,Ss[Ts++]=rd,rd=o;var y=Ua;o=ja;var b=32-vn(y)-1;y&=~(1<<b),h+=1;var _=32-vn(l)+b;if(30<_){var x=b-b%5;_=(y&(1<<x)-1).toString(32),y>>=x,b-=x,Ua=1<<32-vn(l)+b|h<<b|y,ja=_+o}else Ua=1<<_|h<<b|y,ja=o}function KE(o){o.return!==null&&(id(o,1),IL(o,1,0))}function ex(o){for(;o===bb;)bb=yp[--gp],yp[gp]=null,wb=yp[--gp],yp[gp]=null;for(;o===rd;)rd=Ss[--Ts],Ss[Ts]=null,ja=Ss[--Ts],Ss[Ts]=null,Ua=Ss[--Ts],Ss[Ts]=null}var Qi=null,pr=null,Tt=!1,nd=null,Ho=!1,tx=Error(i(519));function sd(o){var l=Error(i(418,""));throw rg(ws(l,o)),tx}function NL(o){var l=o.stateNode,h=o.type,y=o.memoizedProps;switch(l[It]=o,l[Hr]=y,h){case"dialog":lt("cancel",l),lt("close",l);break;case"iframe":case"object":case"embed":lt("load",l);break;case"video":case"audio":for(h=0;h<$g.length;h++)lt($g[h],l);break;case"source":lt("error",l);break;case"img":case"image":case"link":lt("error",l),lt("load",l);break;case"details":lt("toggle",l);break;case"input":lt("invalid",l),ZP(l,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),ke(l);break;case"select":lt("invalid",l);break;case"textarea":lt("invalid",l),JP(l,y.value,y.defaultValue,y.children),ke(l)}h=y.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||y.suppressHydrationWarning===!0||Jk(l.textContent,h)?(y.popover!=null&&(lt("beforetoggle",l),lt("toggle",l)),y.onScroll!=null&&lt("scroll",l),y.onScrollEnd!=null&&lt("scrollend",l),y.onClick!=null&&(l.onclick=ew),l=!0):l=!1,l||sd(o)}function PL(o){for(Qi=o.return;Qi;)switch(Qi.tag){case 5:case 13:Ho=!1;return;case 27:case 3:Ho=!0;return;default:Qi=Qi.return}}function eg(o){if(o!==Qi)return!1;if(!Tt)return PL(o),Tt=!0,!1;var l=o.tag,h;if((h=l!==3&&l!==27)&&((h=l===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||g$(o.type,o.memoizedProps)),h=!h),h&&pr&&sd(o),PL(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(h=o.data,h==="/$"){if(l===0){pr=no(o.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++;o=o.nextSibling}pr=null}}else l===27?(l=pr,Su(o.type)?(o=_$,_$=null,pr=o):pr=l):pr=Qi?no(o.stateNode.nextSibling):null;return!0}function tg(){pr=Qi=null,Tt=!1}function LL(){var o=nd;return o!==null&&(Tn===null?Tn=o:Tn.push.apply(Tn,o),nd=null),o}function rg(o){nd===null?nd=[o]:nd.push(o)}var rx=oe(null),od=null,za=null;function au(o,l,h){we(rx,l._currentValue),l._currentValue=h}function Va(o){o._currentValue=rx.current,xe(rx)}function ix(o,l,h){for(;o!==null;){var y=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),o===h)break;o=o.return}}function nx(o,l,h,y){var b=o.child;for(b!==null&&(b.return=o);b!==null;){var _=b.dependencies;if(_!==null){var x=b.child;_=_.firstContext;e:for(;_!==null;){var A=_;_=b;for(var N=0;N<l.length;N++)if(A.context===l[N]){_.lanes|=h,A=_.alternate,A!==null&&(A.lanes|=h),ix(_.return,h,o),y||(x=null);break e}_=A.next}}else if(b.tag===18){if(x=b.return,x===null)throw Error(i(341));x.lanes|=h,_=x.alternate,_!==null&&(_.lanes|=h),ix(x,h,o),x=null}else x=b.child;if(x!==null)x.return=b;else for(x=b;x!==null;){if(x===o){x=null;break}if(b=x.sibling,b!==null){b.return=x.return,x=b;break}x=x.return}b=x}}function ig(o,l,h,y){o=null;for(var b=l,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var x=b.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var A=b.type;Gn(b.pendingProps.value,x.value)||(o!==null?o.push(A):o=[A])}}else if(b===Ji.current){if(x=b.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(o!==null?o.push(Ig):o=[Ig])}b=b.return}o!==null&&nx(l,o,h,y),l.flags|=262144}function _b(o){for(o=o.firstContext;o!==null;){if(!Gn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ad(o){od=o,za=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ri(o){return DL(od,o)}function Sb(o,l){return od===null&&ad(o),DL(o,l)}function DL(o,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},za===null){if(o===null)throw Error(i(308));za=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else za=za.next=l;return h}var lK=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(h,y){o.push(y)}};this.abort=function(){l.aborted=!0,o.forEach(function(h){return h()})}},uK=e.unstable_scheduleCallback,cK=e.unstable_NormalPriority,Zr={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sx(){return{controller:new lK,data:new Map,refCount:0}}function ng(o){o.refCount--,o.refCount===0&&uK(cK,function(){o.controller.abort()})}var sg=null,ox=0,vp=0,bp=null;function dK(o,l){if(sg===null){var h=sg=[];ox=0,vp=l$(),bp={status:"pending",value:void 0,then:function(y){h.push(y)}}}return ox++,l.then(kL,kL),l}function kL(){if(--ox===0&&sg!==null){bp!==null&&(bp.status="fulfilled");var o=sg;sg=null,vp=0,bp=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function hK(o,l){var h=[],y={status:"pending",value:null,reason:null,then:function(b){h.push(b)}};return o.then(function(){y.status="fulfilled",y.value=l;for(var b=0;b<h.length;b++)(0,h[b])(l)},function(b){for(y.status="rejected",y.reason=b,b=0;b<h.length;b++)(0,h[b])(void 0)}),y}var FL=Q.S;Q.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&dK(o,l),FL!==null&&FL(o,l)};var ld=oe(null);function ax(){var o=ld.current;return o!==null?o:qt.pooledCache}function Tb(o,l){l===null?we(ld,ld.current):we(ld,l.pool)}function UL(){var o=ax();return o===null?null:{parent:Zr._currentValue,pool:o}}var og=Error(i(460)),jL=Error(i(474)),Eb=Error(i(542)),lx={then:function(){}};function zL(o){return o=o.status,o==="fulfilled"||o==="rejected"}function xb(){}function VL(o,l,h){switch(h=o[h],h===void 0?o.push(l):h!==l&&(l.then(xb,xb),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,qL(o),o;default:if(typeof l.status=="string")l.then(xb,xb);else{if(o=qt,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=l,o.status="pending",o.then(function(y){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=y}},function(y){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=y}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,qL(o),o}throw ag=l,og}}var ag=null;function GL(){if(ag===null)throw Error(i(459));var o=ag;return ag=null,o}function qL(o){if(o===og||o===Eb)throw Error(i(483))}var lu=!1;function ux(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cx(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function uu(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function cu(o,l,h){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(Rt&2)!==0){var b=y.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),y.pending=l,l=gb(o),RL(o,null,h),l}return yb(o,y,l,h),gb(o)}function lg(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194048)!==0)){var y=l.lanes;y&=o.pendingLanes,h|=y,l.lanes=h,rb(o,h)}}function dx(o,l){var h=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var b=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var x={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};_===null?b=_=x:_=_.next=x,h=h.next}while(h!==null);_===null?b=_=l:_=_.next=l}else b=_=l;h={baseState:y.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:y.shared,callbacks:y.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}var hx=!1;function ug(){if(hx){var o=bp;if(o!==null)throw o}}function cg(o,l,h,y){hx=!1;var b=o.updateQueue;lu=!1;var _=b.firstBaseUpdate,x=b.lastBaseUpdate,A=b.shared.pending;if(A!==null){b.shared.pending=null;var N=A,H=N.next;N.next=null,x===null?_=H:x.next=H,x=N;var ee=o.alternate;ee!==null&&(ee=ee.updateQueue,A=ee.lastBaseUpdate,A!==x&&(A===null?ee.firstBaseUpdate=H:A.next=H,ee.lastBaseUpdate=N))}if(_!==null){var ie=b.baseState;x=0,ee=H=N=null,A=_;do{var W=A.lane&-536870913,J=W!==A.lane;if(J?(gt&W)===W:(y&W)===W){W!==0&&W===vp&&(hx=!0),ee!==null&&(ee=ee.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var He=o,Ve=A;W=l;var Lt=h;switch(Ve.tag){case 1:if(He=Ve.payload,typeof He=="function"){ie=He.call(Lt,ie,W);break e}ie=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Ve.payload,W=typeof He=="function"?He.call(Lt,ie,W):He,W==null)break e;ie=g({},ie,W);break e;case 2:lu=!0}}W=A.callback,W!==null&&(o.flags|=64,J&&(o.flags|=8192),J=b.callbacks,J===null?b.callbacks=[W]:J.push(W))}else J={lane:W,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ee===null?(H=ee=J,N=ie):ee=ee.next=J,x|=W;if(A=A.next,A===null){if(A=b.shared.pending,A===null)break;J=A,A=J.next,J.next=null,b.lastBaseUpdate=J,b.shared.pending=null}}while(!0);ee===null&&(N=ie),b.baseState=N,b.firstBaseUpdate=H,b.lastBaseUpdate=ee,_===null&&(b.shared.lanes=0),vu|=x,o.lanes=x,o.memoizedState=ie}}function BL(o,l){if(typeof o!="function")throw Error(i(191,o));o.call(l)}function HL(o,l){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)BL(h[o],l)}var wp=oe(null),$b=oe(0);function WL(o,l){o=Ya,we($b,o),we(wp,l),Ya=o|l.baseLanes}function px(){we($b,Ya),we(wp,wp.current)}function fx(){Ya=$b.current,xe(wp),xe($b)}var du=0,it=null,Nt=null,Fr=null,Mb=!1,_p=!1,ud=!1,Ab=0,dg=0,Sp=null,pK=0;function Mr(){throw Error(i(321))}function mx(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!Gn(o[h],l[h]))return!1;return!0}function yx(o,l,h,y,b,_){return du=_,it=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Q.H=o===null||o.memoizedState===null?RD:CD,ud=!1,_=h(y,b),ud=!1,_p&&(_=YL(l,h,y,b)),ZL(o),_}function ZL(o){Q.H=Pb;var l=Nt!==null&&Nt.next!==null;if(du=0,Fr=Nt=it=null,Mb=!1,dg=0,Sp=null,l)throw Error(i(300));o===null||oi||(o=o.dependencies,o!==null&&_b(o)&&(oi=!0))}function YL(o,l,h,y){it=o;var b=0;do{if(_p&&(Sp=null),dg=0,_p=!1,25<=b)throw Error(i(301));if(b+=1,Fr=Nt=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Q.H=wK,_=l(h,y)}while(_p);return _}function fK(){var o=Q.H,l=o.useState()[0];return l=typeof l.then=="function"?hg(l):l,o=o.useState()[0],(Nt!==null?Nt.memoizedState:null)!==o&&(it.flags|=1024),l}function gx(){var o=Ab!==0;return Ab=0,o}function vx(o,l,h){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~h}function bx(o){if(Mb){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}Mb=!1}du=0,Fr=Nt=it=null,_p=!1,dg=Ab=0,Sp=null}function _n(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?it.memoizedState=Fr=o:Fr=Fr.next=o,Fr}function Ur(){if(Nt===null){var o=it.alternate;o=o!==null?o.memoizedState:null}else o=Nt.next;var l=Fr===null?it.memoizedState:Fr.next;if(l!==null)Fr=l,Nt=o;else{if(o===null)throw it.alternate===null?Error(i(467)):Error(i(310));Nt=o,o={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Fr===null?it.memoizedState=Fr=o:Fr=Fr.next=o}return Fr}function wx(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hg(o){var l=dg;return dg+=1,Sp===null&&(Sp=[]),o=VL(Sp,o,l),l=it,(Fr===null?l.memoizedState:Fr.next)===null&&(l=l.alternate,Q.H=l===null||l.memoizedState===null?RD:CD),o}function Ob(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return hg(o);if(o.$$typeof===k)return Ri(o)}throw Error(i(438,String(o)))}function _x(o){var l=null,h=it.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var y=it.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(l={data:y.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=wx(),it.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(o),y=0;y<o;y++)h[y]=me;return l.index++,h}function Ga(o,l){return typeof l=="function"?l(o):l}function Rb(o){var l=Ur();return Sx(l,Nt,o)}function Sx(o,l,h){var y=o.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=h;var b=o.baseQueue,_=y.pending;if(_!==null){if(b!==null){var x=b.next;b.next=_.next,_.next=x}l.baseQueue=b=_,y.pending=null}if(_=o.baseState,b===null)o.memoizedState=_;else{l=b.next;var A=x=null,N=null,H=l,ee=!1;do{var ie=H.lane&-536870913;if(ie!==H.lane?(gt&ie)===ie:(du&ie)===ie){var W=H.revertLane;if(W===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ie===vp&&(ee=!0);else if((du&W)===W){H=H.next,W===vp&&(ee=!0);continue}else ie={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},N===null?(A=N=ie,x=_):N=N.next=ie,it.lanes|=W,vu|=W;ie=H.action,ud&&h(_,ie),_=H.hasEagerState?H.eagerState:h(_,ie)}else W={lane:ie,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},N===null?(A=N=W,x=_):N=N.next=W,it.lanes|=ie,vu|=ie;H=H.next}while(H!==null&&H!==l);if(N===null?x=_:N.next=A,!Gn(_,o.memoizedState)&&(oi=!0,ee&&(h=bp,h!==null)))throw h;o.memoizedState=_,o.baseState=x,o.baseQueue=N,y.lastRenderedState=_}return b===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function Tx(o){var l=Ur(),h=l.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=o;var y=h.dispatch,b=h.pending,_=l.memoizedState;if(b!==null){h.pending=null;var x=b=b.next;do _=o(_,x.action),x=x.next;while(x!==b);Gn(_,l.memoizedState)||(oi=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),h.lastRenderedState=_}return[_,y]}function JL(o,l,h){var y=it,b=Ur(),_=Tt;if(_){if(h===void 0)throw Error(i(407));h=h()}else h=l();var x=!Gn((Nt||b).memoizedState,h);x&&(b.memoizedState=h,oi=!0),b=b.queue;var A=KL.bind(null,y,b,o);if(pg(2048,8,A,[o]),b.getSnapshot!==l||x||Fr!==null&&Fr.memoizedState.tag&1){if(y.flags|=2048,Tp(9,Cb(),QL.bind(null,y,b,h,l),null),qt===null)throw Error(i(349));_||(du&124)!==0||XL(y,l,h)}return h}function XL(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=it.updateQueue,l===null?(l=wx(),it.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function QL(o,l,h,y){l.value=h,l.getSnapshot=y,eD(l)&&tD(o)}function KL(o,l,h){return h(function(){eD(l)&&tD(o)})}function eD(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!Gn(o,h)}catch{return!0}}function tD(o){var l=fp(o,2);l!==null&&Yn(l,o,2)}function Ex(o){var l=_n();if(typeof o=="function"){var h=o;if(o=h(),ud){Bo(!0);try{h()}finally{Bo(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:o},l}function rD(o,l,h,y){return o.baseState=h,Sx(o,Nt,typeof y=="function"?y:Ga)}function mK(o,l,h,y,b){if(Nb(o))throw Error(i(485));if(o=l.action,o!==null){var _={payload:b,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){_.listeners.push(x)}};Q.T!==null?h(!0):_.isTransition=!1,y(_),h=l.pending,h===null?(_.next=l.pending=_,iD(l,_)):(_.next=h.next,l.pending=h.next=_)}}function iD(o,l){var h=l.action,y=l.payload,b=o.state;if(l.isTransition){var _=Q.T,x={};Q.T=x;try{var A=h(b,y),N=Q.S;N!==null&&N(x,A),nD(o,l,A)}catch(H){xx(o,l,H)}finally{Q.T=_}}else try{_=h(b,y),nD(o,l,_)}catch(H){xx(o,l,H)}}function nD(o,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(y){sD(o,l,y)},function(y){return xx(o,l,y)}):sD(o,l,h)}function sD(o,l,h){l.status="fulfilled",l.value=h,oD(l),o.state=h,l=o.pending,l!==null&&(h=l.next,h===l?o.pending=null:(h=h.next,l.next=h,iD(o,h)))}function xx(o,l,h){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do l.status="rejected",l.reason=h,oD(l),l=l.next;while(l!==y)}o.action=null}function oD(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function aD(o,l){return l}function lD(o,l){if(Tt){var h=qt.formState;if(h!==null){e:{var y=it;if(Tt){if(pr){t:{for(var b=pr,_=Ho;b.nodeType!==8;){if(!_){b=null;break t}if(b=no(b.nextSibling),b===null){b=null;break t}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){pr=no(b.nextSibling),y=b.data==="F!";break e}}sd(y)}y=!1}y&&(l=h[0])}}return h=_n(),h.memoizedState=h.baseState=l,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aD,lastRenderedState:l},h.queue=y,h=MD.bind(null,it,y),y.dispatch=h,y=Ex(!1),_=Rx.bind(null,it,!1,y.queue),y=_n(),b={state:l,dispatch:null,action:o,pending:null},y.queue=b,h=mK.bind(null,it,b,_,h),b.dispatch=h,y.memoizedState=o,[l,h,!1]}function uD(o){var l=Ur();return cD(l,Nt,o)}function cD(o,l,h){if(l=Sx(o,l,aD)[0],o=Rb(Ga)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var y=hg(l)}catch(x){throw x===og?Eb:x}else y=l;l=Ur();var b=l.queue,_=b.dispatch;return h!==l.memoizedState&&(it.flags|=2048,Tp(9,Cb(),yK.bind(null,b,h),null)),[y,_,o]}function yK(o,l){o.action=l}function dD(o){var l=Ur(),h=Nt;if(h!==null)return cD(l,h,o);Ur(),l=l.memoizedState,h=Ur();var y=h.queue.dispatch;return h.memoizedState=o,[l,y,!1]}function Tp(o,l,h,y){return o={tag:o,create:h,deps:y,inst:l,next:null},l=it.updateQueue,l===null&&(l=wx(),it.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=o.next=o:(y=h.next,h.next=o,o.next=y,l.lastEffect=o),o}function Cb(){return{destroy:void 0,resource:void 0}}function hD(){return Ur().memoizedState}function Ib(o,l,h,y){var b=_n();y=y===void 0?null:y,it.flags|=o,b.memoizedState=Tp(1|l,Cb(),h,y)}function pg(o,l,h,y){var b=Ur();y=y===void 0?null:y;var _=b.memoizedState.inst;Nt!==null&&y!==null&&mx(y,Nt.memoizedState.deps)?b.memoizedState=Tp(l,_,h,y):(it.flags|=o,b.memoizedState=Tp(1|l,_,h,y))}function pD(o,l){Ib(8390656,8,o,l)}function fD(o,l){pg(2048,8,o,l)}function mD(o,l){return pg(4,2,o,l)}function yD(o,l){return pg(4,4,o,l)}function gD(o,l){if(typeof l=="function"){o=o();var h=l(o);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function vD(o,l,h){h=h!=null?h.concat([o]):null,pg(4,4,gD.bind(null,l,o),h)}function $x(){}function bD(o,l){var h=Ur();l=l===void 0?null:l;var y=h.memoizedState;return l!==null&&mx(l,y[1])?y[0]:(h.memoizedState=[o,l],o)}function wD(o,l){var h=Ur();l=l===void 0?null:l;var y=h.memoizedState;if(l!==null&&mx(l,y[1]))return y[0];if(y=o(),ud){Bo(!0);try{o()}finally{Bo(!1)}}return h.memoizedState=[y,l],y}function Mx(o,l,h){return h===void 0||(du&1073741824)!==0?o.memoizedState=l:(o.memoizedState=h,o=Tk(),it.lanes|=o,vu|=o,h)}function _D(o,l,h,y){return Gn(h,l)?h:wp.current!==null?(o=Mx(o,h,y),Gn(o,l)||(oi=!0),o):(du&42)===0?(oi=!0,o.memoizedState=h):(o=Tk(),it.lanes|=o,vu|=o,l)}function SD(o,l,h,y,b){var _=pe.p;pe.p=_!==0&&8>_?_:8;var x=Q.T,A={};Q.T=A,Rx(o,!1,l,h);try{var N=b(),H=Q.S;if(H!==null&&H(A,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var ee=hK(N,y);fg(o,l,ee,Zn(o))}else fg(o,l,y,Zn(o))}catch(ie){fg(o,l,{then:function(){},status:"rejected",reason:ie},Zn())}finally{pe.p=_,Q.T=x}}function gK(){}function Ax(o,l,h,y){if(o.tag!==5)throw Error(i(476));var b=TD(o).queue;SD(o,b,l,ye,h===null?gK:function(){return ED(o),h(y)})}function TD(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:ye},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:h},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function ED(o){var l=TD(o).next.queue;fg(o,l,{},Zn())}function Ox(){return Ri(Ig)}function xD(){return Ur().memoizedState}function $D(){return Ur().memoizedState}function vK(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var h=Zn();o=uu(h);var y=cu(l,o,h);y!==null&&(Yn(y,l,h),lg(y,l,h)),l={cache:sx()},o.payload=l;return}l=l.return}}function bK(o,l,h){var y=Zn();h={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},Nb(o)?AD(l,h):(h=YE(o,l,h,y),h!==null&&(Yn(h,o,y),OD(h,l,y)))}function MD(o,l,h){var y=Zn();fg(o,l,h,y)}function fg(o,l,h,y){var b={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(Nb(o))AD(l,b);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var x=l.lastRenderedState,A=_(x,h);if(b.hasEagerState=!0,b.eagerState=A,Gn(A,x))return yb(o,l,b,0),qt===null&&mb(),!1}catch{}finally{}if(h=YE(o,l,b,y),h!==null)return Yn(h,o,y),OD(h,l,y),!0}return!1}function Rx(o,l,h,y){if(y={lane:2,revertLane:l$(),action:y,hasEagerState:!1,eagerState:null,next:null},Nb(o)){if(l)throw Error(i(479))}else l=YE(o,h,y,2),l!==null&&Yn(l,o,2)}function Nb(o){var l=o.alternate;return o===it||l!==null&&l===it}function AD(o,l){_p=Mb=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function OD(o,l,h){if((h&4194048)!==0){var y=l.lanes;y&=o.pendingLanes,h|=y,l.lanes=h,rb(o,h)}}var Pb={readContext:Ri,use:Ob,useCallback:Mr,useContext:Mr,useEffect:Mr,useImperativeHandle:Mr,useLayoutEffect:Mr,useInsertionEffect:Mr,useMemo:Mr,useReducer:Mr,useRef:Mr,useState:Mr,useDebugValue:Mr,useDeferredValue:Mr,useTransition:Mr,useSyncExternalStore:Mr,useId:Mr,useHostTransitionStatus:Mr,useFormState:Mr,useActionState:Mr,useOptimistic:Mr,useMemoCache:Mr,useCacheRefresh:Mr},RD={readContext:Ri,use:Ob,useCallback:function(o,l){return _n().memoizedState=[o,l===void 0?null:l],o},useContext:Ri,useEffect:pD,useImperativeHandle:function(o,l,h){h=h!=null?h.concat([o]):null,Ib(4194308,4,gD.bind(null,l,o),h)},useLayoutEffect:function(o,l){return Ib(4194308,4,o,l)},useInsertionEffect:function(o,l){Ib(4,2,o,l)},useMemo:function(o,l){var h=_n();l=l===void 0?null:l;var y=o();if(ud){Bo(!0);try{o()}finally{Bo(!1)}}return h.memoizedState=[y,l],y},useReducer:function(o,l,h){var y=_n();if(h!==void 0){var b=h(l);if(ud){Bo(!0);try{h(l)}finally{Bo(!1)}}}else b=l;return y.memoizedState=y.baseState=b,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:b},y.queue=o,o=o.dispatch=bK.bind(null,it,o),[y.memoizedState,o]},useRef:function(o){var l=_n();return o={current:o},l.memoizedState=o},useState:function(o){o=Ex(o);var l=o.queue,h=MD.bind(null,it,l);return l.dispatch=h,[o.memoizedState,h]},useDebugValue:$x,useDeferredValue:function(o,l){var h=_n();return Mx(h,o,l)},useTransition:function(){var o=Ex(!1);return o=SD.bind(null,it,o.queue,!0,!1),_n().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,h){var y=it,b=_n();if(Tt){if(h===void 0)throw Error(i(407));h=h()}else{if(h=l(),qt===null)throw Error(i(349));(gt&124)!==0||XL(y,l,h)}b.memoizedState=h;var _={value:h,getSnapshot:l};return b.queue=_,pD(KL.bind(null,y,_,o),[o]),y.flags|=2048,Tp(9,Cb(),QL.bind(null,y,_,h,l),null),h},useId:function(){var o=_n(),l=qt.identifierPrefix;if(Tt){var h=ja,y=Ua;h=(y&~(1<<32-vn(y)-1)).toString(32)+h,l="«"+l+"R"+h,h=Ab++,0<h&&(l+="H"+h.toString(32)),l+="»"}else h=pK++,l="«"+l+"r"+h.toString(32)+"»";return o.memoizedState=l},useHostTransitionStatus:Ox,useFormState:lD,useActionState:lD,useOptimistic:function(o){var l=_n();l.memoizedState=l.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=Rx.bind(null,it,!0,h),h.dispatch=l,[o,l]},useMemoCache:_x,useCacheRefresh:function(){return _n().memoizedState=vK.bind(null,it)}},CD={readContext:Ri,use:Ob,useCallback:bD,useContext:Ri,useEffect:fD,useImperativeHandle:vD,useInsertionEffect:mD,useLayoutEffect:yD,useMemo:wD,useReducer:Rb,useRef:hD,useState:function(){return Rb(Ga)},useDebugValue:$x,useDeferredValue:function(o,l){var h=Ur();return _D(h,Nt.memoizedState,o,l)},useTransition:function(){var o=Rb(Ga)[0],l=Ur().memoizedState;return[typeof o=="boolean"?o:hg(o),l]},useSyncExternalStore:JL,useId:xD,useHostTransitionStatus:Ox,useFormState:uD,useActionState:uD,useOptimistic:function(o,l){var h=Ur();return rD(h,Nt,o,l)},useMemoCache:_x,useCacheRefresh:$D},wK={readContext:Ri,use:Ob,useCallback:bD,useContext:Ri,useEffect:fD,useImperativeHandle:vD,useInsertionEffect:mD,useLayoutEffect:yD,useMemo:wD,useReducer:Tx,useRef:hD,useState:function(){return Tx(Ga)},useDebugValue:$x,useDeferredValue:function(o,l){var h=Ur();return Nt===null?Mx(h,o,l):_D(h,Nt.memoizedState,o,l)},useTransition:function(){var o=Tx(Ga)[0],l=Ur().memoizedState;return[typeof o=="boolean"?o:hg(o),l]},useSyncExternalStore:JL,useId:xD,useHostTransitionStatus:Ox,useFormState:dD,useActionState:dD,useOptimistic:function(o,l){var h=Ur();return Nt!==null?rD(h,Nt,o,l):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:_x,useCacheRefresh:$D},Ep=null,mg=0;function Lb(o){var l=mg;return mg+=1,Ep===null&&(Ep=[]),VL(Ep,o,l)}function yg(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function Db(o,l){throw l.$$typeof===v?Error(i(525)):(o=Object.prototype.toString.call(l),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function ID(o){var l=o._init;return l(o._payload)}function ND(o){function l(G,F){if(o){var B=G.deletions;B===null?(G.deletions=[F],G.flags|=16):B.push(F)}}function h(G,F){if(!o)return null;for(;F!==null;)l(G,F),F=F.sibling;return null}function y(G){for(var F=new Map;G!==null;)G.key!==null?F.set(G.key,G):F.set(G.index,G),G=G.sibling;return F}function b(G,F){return G=Fa(G,F),G.index=0,G.sibling=null,G}function _(G,F,B){return G.index=B,o?(B=G.alternate,B!==null?(B=B.index,B<F?(G.flags|=67108866,F):B):(G.flags|=67108866,F)):(G.flags|=1048576,F)}function x(G){return o&&G.alternate===null&&(G.flags|=67108866),G}function A(G,F,B,te){return F===null||F.tag!==6?(F=XE(B,G.mode,te),F.return=G,F):(F=b(F,B),F.return=G,F)}function N(G,F,B,te){var Ie=B.type;return Ie===T?ee(G,F,B.props.children,te,B.key):F!==null&&(F.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===fe&&ID(Ie)===F.type)?(F=b(F,B.props),yg(F,B),F.return=G,F):(F=vb(B.type,B.key,B.props,null,G.mode,te),yg(F,B),F.return=G,F)}function H(G,F,B,te){return F===null||F.tag!==4||F.stateNode.containerInfo!==B.containerInfo||F.stateNode.implementation!==B.implementation?(F=QE(B,G.mode,te),F.return=G,F):(F=b(F,B.children||[]),F.return=G,F)}function ee(G,F,B,te,Ie){return F===null||F.tag!==7?(F=td(B,G.mode,te,Ie),F.return=G,F):(F=b(F,B),F.return=G,F)}function ie(G,F,B){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=XE(""+F,G.mode,B),F.return=G,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return B=vb(F.type,F.key,F.props,null,G.mode,B),yg(B,F),B.return=G,B;case S:return F=QE(F,G.mode,B),F.return=G,F;case fe:var te=F._init;return F=te(F._payload),ie(G,F,B)}if(mt(F)||Se(F))return F=td(F,G.mode,B,null),F.return=G,F;if(typeof F.then=="function")return ie(G,Lb(F),B);if(F.$$typeof===k)return ie(G,Sb(G,F),B);Db(G,F)}return null}function W(G,F,B,te){var Ie=F!==null?F.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Ie!==null?null:A(G,F,""+B,te);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return B.key===Ie?N(G,F,B,te):null;case S:return B.key===Ie?H(G,F,B,te):null;case fe:return Ie=B._init,B=Ie(B._payload),W(G,F,B,te)}if(mt(B)||Se(B))return Ie!==null?null:ee(G,F,B,te,null);if(typeof B.then=="function")return W(G,F,Lb(B),te);if(B.$$typeof===k)return W(G,F,Sb(G,B),te);Db(G,B)}return null}function J(G,F,B,te,Ie){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return G=G.get(B)||null,A(F,G,""+te,Ie);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case w:return G=G.get(te.key===null?B:te.key)||null,N(F,G,te,Ie);case S:return G=G.get(te.key===null?B:te.key)||null,H(F,G,te,Ie);case fe:var st=te._init;return te=st(te._payload),J(G,F,B,te,Ie)}if(mt(te)||Se(te))return G=G.get(B)||null,ee(F,G,te,Ie,null);if(typeof te.then=="function")return J(G,F,B,Lb(te),Ie);if(te.$$typeof===k)return J(G,F,B,Sb(F,te),Ie);Db(F,te)}return null}function He(G,F,B,te){for(var Ie=null,st=null,Fe=F,Be=F=0,li=null;Fe!==null&&Be<B.length;Be++){Fe.index>Be?(li=Fe,Fe=null):li=Fe.sibling;var _t=W(G,Fe,B[Be],te);if(_t===null){Fe===null&&(Fe=li);break}o&&Fe&&_t.alternate===null&&l(G,Fe),F=_(_t,F,Be),st===null?Ie=_t:st.sibling=_t,st=_t,Fe=li}if(Be===B.length)return h(G,Fe),Tt&&id(G,Be),Ie;if(Fe===null){for(;Be<B.length;Be++)Fe=ie(G,B[Be],te),Fe!==null&&(F=_(Fe,F,Be),st===null?Ie=Fe:st.sibling=Fe,st=Fe);return Tt&&id(G,Be),Ie}for(Fe=y(Fe);Be<B.length;Be++)li=J(Fe,G,Be,B[Be],te),li!==null&&(o&&li.alternate!==null&&Fe.delete(li.key===null?Be:li.key),F=_(li,F,Be),st===null?Ie=li:st.sibling=li,st=li);return o&&Fe.forEach(function(Mu){return l(G,Mu)}),Tt&&id(G,Be),Ie}function Ve(G,F,B,te){if(B==null)throw Error(i(151));for(var Ie=null,st=null,Fe=F,Be=F=0,li=null,_t=B.next();Fe!==null&&!_t.done;Be++,_t=B.next()){Fe.index>Be?(li=Fe,Fe=null):li=Fe.sibling;var Mu=W(G,Fe,_t.value,te);if(Mu===null){Fe===null&&(Fe=li);break}o&&Fe&&Mu.alternate===null&&l(G,Fe),F=_(Mu,F,Be),st===null?Ie=Mu:st.sibling=Mu,st=Mu,Fe=li}if(_t.done)return h(G,Fe),Tt&&id(G,Be),Ie;if(Fe===null){for(;!_t.done;Be++,_t=B.next())_t=ie(G,_t.value,te),_t!==null&&(F=_(_t,F,Be),st===null?Ie=_t:st.sibling=_t,st=_t);return Tt&&id(G,Be),Ie}for(Fe=y(Fe);!_t.done;Be++,_t=B.next())_t=J(Fe,G,Be,_t.value,te),_t!==null&&(o&&_t.alternate!==null&&Fe.delete(_t.key===null?Be:_t.key),F=_(_t,F,Be),st===null?Ie=_t:st.sibling=_t,st=_t);return o&&Fe.forEach(function(_ee){return l(G,_ee)}),Tt&&id(G,Be),Ie}function Lt(G,F,B,te){if(typeof B=="object"&&B!==null&&B.type===T&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case w:e:{for(var Ie=B.key;F!==null;){if(F.key===Ie){if(Ie=B.type,Ie===T){if(F.tag===7){h(G,F.sibling),te=b(F,B.props.children),te.return=G,G=te;break e}}else if(F.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===fe&&ID(Ie)===F.type){h(G,F.sibling),te=b(F,B.props),yg(te,B),te.return=G,G=te;break e}h(G,F);break}else l(G,F);F=F.sibling}B.type===T?(te=td(B.props.children,G.mode,te,B.key),te.return=G,G=te):(te=vb(B.type,B.key,B.props,null,G.mode,te),yg(te,B),te.return=G,G=te)}return x(G);case S:e:{for(Ie=B.key;F!==null;){if(F.key===Ie)if(F.tag===4&&F.stateNode.containerInfo===B.containerInfo&&F.stateNode.implementation===B.implementation){h(G,F.sibling),te=b(F,B.children||[]),te.return=G,G=te;break e}else{h(G,F);break}else l(G,F);F=F.sibling}te=QE(B,G.mode,te),te.return=G,G=te}return x(G);case fe:return Ie=B._init,B=Ie(B._payload),Lt(G,F,B,te)}if(mt(B))return He(G,F,B,te);if(Se(B)){if(Ie=Se(B),typeof Ie!="function")throw Error(i(150));return B=Ie.call(B),Ve(G,F,B,te)}if(typeof B.then=="function")return Lt(G,F,Lb(B),te);if(B.$$typeof===k)return Lt(G,F,Sb(G,B),te);Db(G,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,F!==null&&F.tag===6?(h(G,F.sibling),te=b(F,B),te.return=G,G=te):(h(G,F),te=XE(B,G.mode,te),te.return=G,G=te),x(G)):h(G,F)}return function(G,F,B,te){try{mg=0;var Ie=Lt(G,F,B,te);return Ep=null,Ie}catch(Fe){if(Fe===og||Fe===Eb)throw Fe;var st=qn(29,Fe,null,G.mode);return st.lanes=te,st.return=G,st}finally{}}}var xp=ND(!0),PD=ND(!1),Es=oe(null),Wo=null;function hu(o){var l=o.alternate;we(Yr,Yr.current&1),we(Es,o),Wo===null&&(l===null||wp.current!==null||l.memoizedState!==null)&&(Wo=o)}function LD(o){if(o.tag===22){if(we(Yr,Yr.current),we(Es,o),Wo===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(Wo=o)}}else pu()}function pu(){we(Yr,Yr.current),we(Es,Es.current)}function qa(o){xe(Es),Wo===o&&(Wo=null),xe(Yr)}var Yr=oe(0);function kb(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||w$(h)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Cx(o,l,h,y){l=o.memoizedState,h=h(y,l),h=h==null?l:g({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Ix={enqueueSetState:function(o,l,h){o=o._reactInternals;var y=Zn(),b=uu(y);b.payload=l,h!=null&&(b.callback=h),l=cu(o,b,y),l!==null&&(Yn(l,o,y),lg(l,o,y))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var y=Zn(),b=uu(y);b.tag=1,b.payload=l,h!=null&&(b.callback=h),l=cu(o,b,y),l!==null&&(Yn(l,o,y),lg(l,o,y))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=Zn(),y=uu(h);y.tag=2,l!=null&&(y.callback=l),l=cu(o,y,h),l!==null&&(Yn(l,o,h),lg(l,o,h))}};function DD(o,l,h,y,b,_,x){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,_,x):l.prototype&&l.prototype.isPureReactComponent?!Qy(h,y)||!Qy(b,_):!0}function kD(o,l,h,y){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,y),l.state!==o&&Ix.enqueueReplaceState(l,l.state,null)}function cd(o,l){var h=l;if("ref"in l){h={};for(var y in l)y!=="ref"&&(h[y]=l[y])}if(o=o.defaultProps){h===l&&(h=g({},h));for(var b in o)h[b]===void 0&&(h[b]=o[b])}return h}var Fb=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function FD(o){Fb(o)}function UD(o){console.error(o)}function jD(o){Fb(o)}function Ub(o,l){try{var h=o.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(y){setTimeout(function(){throw y})}}function zD(o,l,h){try{var y=o.onCaughtError;y(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Nx(o,l,h){return h=uu(h),h.tag=3,h.payload={element:null},h.callback=function(){Ub(o,l)},h}function VD(o){return o=uu(o),o.tag=3,o}function GD(o,l,h,y){var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var _=y.value;o.payload=function(){return b(_)},o.callback=function(){zD(l,h,y)}}var x=h.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(o.callback=function(){zD(l,h,y),typeof b!="function"&&(bu===null?bu=new Set([this]):bu.add(this));var A=y.stack;this.componentDidCatch(y.value,{componentStack:A!==null?A:""})})}function _K(o,l,h,y,b){if(h.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(l=h.alternate,l!==null&&ig(l,h,b,!0),h=Es.current,h!==null){switch(h.tag){case 13:return Wo===null?i$():h.alternate===null&&fr===0&&(fr=3),h.flags&=-257,h.flags|=65536,h.lanes=b,y===lx?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([y]):l.add(y),s$(o,y,b)),!1;case 22:return h.flags|=65536,y===lx?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([y])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([y]):h.add(y)),s$(o,y,b)),!1}throw Error(i(435,h.tag))}return s$(o,y,b),i$(),!1}if(Tt)return l=Es.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,y!==tx&&(o=Error(i(422),{cause:y}),rg(ws(o,h)))):(y!==tx&&(l=Error(i(423),{cause:y}),rg(ws(l,h))),o=o.current.alternate,o.flags|=65536,b&=-b,o.lanes|=b,y=ws(y,h),b=Nx(o.stateNode,y,b),dx(o,b),fr!==4&&(fr=2)),!1;var _=Error(i(520),{cause:y});if(_=ws(_,h),Tg===null?Tg=[_]:Tg.push(_),fr!==4&&(fr=2),l===null)return!0;y=ws(y,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,o=b&-b,h.lanes|=o,o=Nx(h.stateNode,y,o),dx(h,o),!1;case 1:if(l=h.type,_=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(bu===null||!bu.has(_))))return h.flags|=65536,b&=-b,h.lanes|=b,b=VD(b),GD(b,o,h,y),dx(h,b),!1}h=h.return}while(h!==null);return!1}var qD=Error(i(461)),oi=!1;function _i(o,l,h,y){l.child=o===null?PD(l,null,h,y):xp(l,o.child,h,y)}function BD(o,l,h,y,b){h=h.render;var _=l.ref;if("ref"in y){var x={};for(var A in y)A!=="ref"&&(x[A]=y[A])}else x=y;return ad(l),y=yx(o,l,h,x,_,b),A=gx(),o!==null&&!oi?(vx(o,l,b),Ba(o,l,b)):(Tt&&A&&KE(l),l.flags|=1,_i(o,l,y,b),l.child)}function HD(o,l,h,y,b){if(o===null){var _=h.type;return typeof _=="function"&&!JE(_)&&_.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=_,WD(o,l,_,y,b)):(o=vb(h.type,null,y,l,l.mode,b),o.ref=l.ref,o.return=l,l.child=o)}if(_=o.child,!zx(o,b)){var x=_.memoizedProps;if(h=h.compare,h=h!==null?h:Qy,h(x,y)&&o.ref===l.ref)return Ba(o,l,b)}return l.flags|=1,o=Fa(_,y),o.ref=l.ref,o.return=l,l.child=o}function WD(o,l,h,y,b){if(o!==null){var _=o.memoizedProps;if(Qy(_,y)&&o.ref===l.ref)if(oi=!1,l.pendingProps=y=_,zx(o,b))(o.flags&131072)!==0&&(oi=!0);else return l.lanes=o.lanes,Ba(o,l,b)}return Px(o,l,h,y,b)}function ZD(o,l,h){var y=l.pendingProps,b=y.children,_=o!==null?o.memoizedState:null;if(y.mode==="hidden"){if((l.flags&128)!==0){if(y=_!==null?_.baseLanes|h:h,o!==null){for(b=l.child=o.child,_=0;b!==null;)_=_|b.lanes|b.childLanes,b=b.sibling;l.childLanes=_&~y}else l.childLanes=0,l.child=null;return YD(o,l,y,h)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&Tb(l,_!==null?_.cachePool:null),_!==null?WL(l,_):px(),LD(l);else return l.lanes=l.childLanes=536870912,YD(o,l,_!==null?_.baseLanes|h:h,h)}else _!==null?(Tb(l,_.cachePool),WL(l,_),pu(),l.memoizedState=null):(o!==null&&Tb(l,null),px(),pu());return _i(o,l,b,h),l.child}function YD(o,l,h,y){var b=ax();return b=b===null?null:{parent:Zr._currentValue,pool:b},l.memoizedState={baseLanes:h,cachePool:b},o!==null&&Tb(l,null),px(),LD(l),o!==null&&ig(o,l,y,!0),null}function jb(o,l){var h=l.ref;if(h===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(o===null||o.ref!==h)&&(l.flags|=4194816)}}function Px(o,l,h,y,b){return ad(l),h=yx(o,l,h,y,void 0,b),y=gx(),o!==null&&!oi?(vx(o,l,b),Ba(o,l,b)):(Tt&&y&&KE(l),l.flags|=1,_i(o,l,h,b),l.child)}function JD(o,l,h,y,b,_){return ad(l),l.updateQueue=null,h=YL(l,y,h,b),ZL(o),y=gx(),o!==null&&!oi?(vx(o,l,_),Ba(o,l,_)):(Tt&&y&&KE(l),l.flags|=1,_i(o,l,h,_),l.child)}function XD(o,l,h,y,b){if(ad(l),l.stateNode===null){var _=mp,x=h.contextType;typeof x=="object"&&x!==null&&(_=Ri(x)),_=new h(y,_),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ix,l.stateNode=_,_._reactInternals=l,_=l.stateNode,_.props=y,_.state=l.memoizedState,_.refs={},ux(l),x=h.contextType,_.context=typeof x=="object"&&x!==null?Ri(x):mp,_.state=l.memoizedState,x=h.getDerivedStateFromProps,typeof x=="function"&&(Cx(l,h,x,y),_.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(x=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),x!==_.state&&Ix.enqueueReplaceState(_,_.state,null),cg(l,y,_,b),ug(),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308),y=!0}else if(o===null){_=l.stateNode;var A=l.memoizedProps,N=cd(h,A);_.props=N;var H=_.context,ee=h.contextType;x=mp,typeof ee=="object"&&ee!==null&&(x=Ri(ee));var ie=h.getDerivedStateFromProps;ee=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function",A=l.pendingProps!==A,ee||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A||H!==x)&&kD(l,_,y,x),lu=!1;var W=l.memoizedState;_.state=W,cg(l,y,_,b),ug(),H=l.memoizedState,A||W!==H||lu?(typeof ie=="function"&&(Cx(l,h,ie,y),H=l.memoizedState),(N=lu||DD(l,h,N,y,W,H,x))?(ee||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=H),_.props=y,_.state=H,_.context=x,y=N):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{_=l.stateNode,cx(o,l),x=l.memoizedProps,ee=cd(h,x),_.props=ee,ie=l.pendingProps,W=_.context,H=h.contextType,N=mp,typeof H=="object"&&H!==null&&(N=Ri(H)),A=h.getDerivedStateFromProps,(H=typeof A=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(x!==ie||W!==N)&&kD(l,_,y,N),lu=!1,W=l.memoizedState,_.state=W,cg(l,y,_,b),ug();var J=l.memoizedState;x!==ie||W!==J||lu||o!==null&&o.dependencies!==null&&_b(o.dependencies)?(typeof A=="function"&&(Cx(l,h,A,y),J=l.memoizedState),(ee=lu||DD(l,h,ee,y,W,J,N)||o!==null&&o.dependencies!==null&&_b(o.dependencies))?(H||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(y,J,N),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(y,J,N)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||x===o.memoizedProps&&W===o.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===o.memoizedProps&&W===o.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=J),_.props=y,_.state=J,_.context=N,y=ee):(typeof _.componentDidUpdate!="function"||x===o.memoizedProps&&W===o.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===o.memoizedProps&&W===o.memoizedState||(l.flags|=1024),y=!1)}return _=y,jb(o,l),y=(l.flags&128)!==0,_||y?(_=l.stateNode,h=y&&typeof h.getDerivedStateFromError!="function"?null:_.render(),l.flags|=1,o!==null&&y?(l.child=xp(l,o.child,null,b),l.child=xp(l,null,h,b)):_i(o,l,h,b),l.memoizedState=_.state,o=l.child):o=Ba(o,l,b),o}function QD(o,l,h,y){return tg(),l.flags|=256,_i(o,l,h,y),l.child}var Lx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dx(o){return{baseLanes:o,cachePool:UL()}}function kx(o,l,h){return o=o!==null?o.childLanes&~h:0,l&&(o|=xs),o}function KD(o,l,h){var y=l.pendingProps,b=!1,_=(l.flags&128)!==0,x;if((x=_)||(x=o!==null&&o.memoizedState===null?!1:(Yr.current&2)!==0),x&&(b=!0,l.flags&=-129),x=(l.flags&32)!==0,l.flags&=-33,o===null){if(Tt){if(b?hu(l):pu(),Tt){var A=pr,N;if(N=A){e:{for(N=A,A=Ho;N.nodeType!==8;){if(!A){A=null;break e}if(N=no(N.nextSibling),N===null){A=null;break e}}A=N}A!==null?(l.memoizedState={dehydrated:A,treeContext:rd!==null?{id:Ua,overflow:ja}:null,retryLane:536870912,hydrationErrors:null},N=qn(18,null,null,0),N.stateNode=A,N.return=l,l.child=N,Qi=l,pr=null,N=!0):N=!1}N||sd(l)}if(A=l.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return w$(A)?l.lanes=32:l.lanes=536870912,null;qa(l)}return A=y.children,y=y.fallback,b?(pu(),b=l.mode,A=zb({mode:"hidden",children:A},b),y=td(y,b,h,null),A.return=l,y.return=l,A.sibling=y,l.child=A,b=l.child,b.memoizedState=Dx(h),b.childLanes=kx(o,x,h),l.memoizedState=Lx,y):(hu(l),Fx(l,A))}if(N=o.memoizedState,N!==null&&(A=N.dehydrated,A!==null)){if(_)l.flags&256?(hu(l),l.flags&=-257,l=Ux(o,l,h)):l.memoizedState!==null?(pu(),l.child=o.child,l.flags|=128,l=null):(pu(),b=y.fallback,A=l.mode,y=zb({mode:"visible",children:y.children},A),b=td(b,A,h,null),b.flags|=2,y.return=l,b.return=l,y.sibling=b,l.child=y,xp(l,o.child,null,h),y=l.child,y.memoizedState=Dx(h),y.childLanes=kx(o,x,h),l.memoizedState=Lx,l=b);else if(hu(l),w$(A)){if(x=A.nextSibling&&A.nextSibling.dataset,x)var H=x.dgst;x=H,y=Error(i(419)),y.stack="",y.digest=x,rg({value:y,source:null,stack:null}),l=Ux(o,l,h)}else if(oi||ig(o,l,h,!1),x=(h&o.childLanes)!==0,oi||x){if(x=qt,x!==null&&(y=h&-h,y=(y&42)!==0?1:Fy(y),y=(y&(x.suspendedLanes|h))!==0?0:y,y!==0&&y!==N.retryLane))throw N.retryLane=y,fp(o,y),Yn(x,o,y),qD;A.data==="$?"||i$(),l=Ux(o,l,h)}else A.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=N.treeContext,pr=no(A.nextSibling),Qi=l,Tt=!0,nd=null,Ho=!1,o!==null&&(Ss[Ts++]=Ua,Ss[Ts++]=ja,Ss[Ts++]=rd,Ua=o.id,ja=o.overflow,rd=l),l=Fx(l,y.children),l.flags|=4096);return l}return b?(pu(),b=y.fallback,A=l.mode,N=o.child,H=N.sibling,y=Fa(N,{mode:"hidden",children:y.children}),y.subtreeFlags=N.subtreeFlags&65011712,H!==null?b=Fa(H,b):(b=td(b,A,h,null),b.flags|=2),b.return=l,y.return=l,y.sibling=b,l.child=y,y=b,b=l.child,A=o.child.memoizedState,A===null?A=Dx(h):(N=A.cachePool,N!==null?(H=Zr._currentValue,N=N.parent!==H?{parent:H,pool:H}:N):N=UL(),A={baseLanes:A.baseLanes|h,cachePool:N}),b.memoizedState=A,b.childLanes=kx(o,x,h),l.memoizedState=Lx,y):(hu(l),h=o.child,o=h.sibling,h=Fa(h,{mode:"visible",children:y.children}),h.return=l,h.sibling=null,o!==null&&(x=l.deletions,x===null?(l.deletions=[o],l.flags|=16):x.push(o)),l.child=h,l.memoizedState=null,h)}function Fx(o,l){return l=zb({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function zb(o,l){return o=qn(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Ux(o,l,h){return xp(l,o.child,null,h),o=Fx(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function ek(o,l,h){o.lanes|=l;var y=o.alternate;y!==null&&(y.lanes|=l),ix(o.return,l,h)}function jx(o,l,h,y,b){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:b}:(_.isBackwards=l,_.rendering=null,_.renderingStartTime=0,_.last=y,_.tail=h,_.tailMode=b)}function tk(o,l,h){var y=l.pendingProps,b=y.revealOrder,_=y.tail;if(_i(o,l,y.children,h),y=Yr.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&ek(o,h,l);else if(o.tag===19)ek(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}switch(we(Yr,y),b){case"forwards":for(h=l.child,b=null;h!==null;)o=h.alternate,o!==null&&kb(o)===null&&(b=h),h=h.sibling;h=b,h===null?(b=l.child,l.child=null):(b=h.sibling,h.sibling=null),jx(l,!1,b,h,_);break;case"backwards":for(h=null,b=l.child,l.child=null;b!==null;){if(o=b.alternate,o!==null&&kb(o)===null){l.child=b;break}o=b.sibling,b.sibling=h,h=b,b=o}jx(l,!0,h,null,_);break;case"together":jx(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Ba(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),vu|=l.lanes,(h&l.childLanes)===0)if(o!==null){if(ig(o,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(i(153));if(l.child!==null){for(o=l.child,h=Fa(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=Fa(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function zx(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&_b(o)))}function SK(o,l,h){switch(l.tag){case 3:Gt(l,l.stateNode.containerInfo),au(l,Zr,o.memoizedState.cache),tg();break;case 27:case 5:Cy(l);break;case 4:Gt(l,l.stateNode.containerInfo);break;case 10:au(l,l.type,l.memoizedProps.value);break;case 13:var y=l.memoizedState;if(y!==null)return y.dehydrated!==null?(hu(l),l.flags|=128,null):(h&l.child.childLanes)!==0?KD(o,l,h):(hu(l),o=Ba(o,l,h),o!==null?o.sibling:null);hu(l);break;case 19:var b=(o.flags&128)!==0;if(y=(h&l.childLanes)!==0,y||(ig(o,l,h,!1),y=(h&l.childLanes)!==0),b){if(y)return tk(o,l,h);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),we(Yr,Yr.current),y)break;return null;case 22:case 23:return l.lanes=0,ZD(o,l,h);case 24:au(l,Zr,o.memoizedState.cache)}return Ba(o,l,h)}function rk(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps)oi=!0;else{if(!zx(o,h)&&(l.flags&128)===0)return oi=!1,SK(o,l,h);oi=(o.flags&131072)!==0}else oi=!1,Tt&&(l.flags&1048576)!==0&&IL(l,wb,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var y=l.elementType,b=y._init;if(y=b(y._payload),l.type=y,typeof y=="function")JE(y)?(o=cd(y,o),l.tag=1,l=XD(null,l,y,o,h)):(l.tag=0,l=Px(null,l,y,o,h));else{if(y!=null){if(b=y.$$typeof,b===j){l.tag=11,l=BD(null,l,y,o,h);break e}else if(b===ae){l.tag=14,l=HD(null,l,y,o,h);break e}}throw l=Ue(y)||y,Error(i(306,l,""))}}return l;case 0:return Px(o,l,l.type,l.pendingProps,h);case 1:return y=l.type,b=cd(y,l.pendingProps),XD(o,l,y,b,h);case 3:e:{if(Gt(l,l.stateNode.containerInfo),o===null)throw Error(i(387));y=l.pendingProps;var _=l.memoizedState;b=_.element,cx(o,l),cg(l,y,null,h);var x=l.memoizedState;if(y=x.cache,au(l,Zr,y),y!==_.cache&&nx(l,[Zr],h,!0),ug(),y=x.element,_.isDehydrated)if(_={element:y,isDehydrated:!1,cache:x.cache},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){l=QD(o,l,y,h);break e}else if(y!==b){b=ws(Error(i(424)),l),rg(b),l=QD(o,l,y,h);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(pr=no(o.firstChild),Qi=l,Tt=!0,nd=null,Ho=!0,h=PD(l,null,y,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(tg(),y===b){l=Ba(o,l,h);break e}_i(o,l,y,h)}l=l.child}return l;case 26:return jb(o,l),o===null?(h=o4(l.type,null,l.pendingProps,null))?l.memoizedState=h:Tt||(h=l.type,o=l.pendingProps,y=tw(Ze.current).createElement(h),y[It]=l,y[Hr]=o,Ti(y,h,o),Er(y),l.stateNode=y):l.memoizedState=o4(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Cy(l),o===null&&Tt&&(y=l.stateNode=i4(l.type,l.pendingProps,Ze.current),Qi=l,Ho=!0,b=pr,Su(l.type)?(_$=b,pr=no(y.firstChild)):pr=b),_i(o,l,l.pendingProps.children,h),jb(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&Tt&&((b=y=pr)&&(y=JK(y,l.type,l.pendingProps,Ho),y!==null?(l.stateNode=y,Qi=l,pr=no(y.firstChild),Ho=!1,b=!0):b=!1),b||sd(l)),Cy(l),b=l.type,_=l.pendingProps,x=o!==null?o.memoizedProps:null,y=_.children,g$(b,_)?y=null:x!==null&&g$(b,x)&&(l.flags|=32),l.memoizedState!==null&&(b=yx(o,l,fK,null,null,h),Ig._currentValue=b),jb(o,l),_i(o,l,y,h),l.child;case 6:return o===null&&Tt&&((o=h=pr)&&(h=XK(h,l.pendingProps,Ho),h!==null?(l.stateNode=h,Qi=l,pr=null,o=!0):o=!1),o||sd(l)),null;case 13:return KD(o,l,h);case 4:return Gt(l,l.stateNode.containerInfo),y=l.pendingProps,o===null?l.child=xp(l,null,y,h):_i(o,l,y,h),l.child;case 11:return BD(o,l,l.type,l.pendingProps,h);case 7:return _i(o,l,l.pendingProps,h),l.child;case 8:return _i(o,l,l.pendingProps.children,h),l.child;case 12:return _i(o,l,l.pendingProps.children,h),l.child;case 10:return y=l.pendingProps,au(l,l.type,y.value),_i(o,l,y.children,h),l.child;case 9:return b=l.type._context,y=l.pendingProps.children,ad(l),b=Ri(b),y=y(b),l.flags|=1,_i(o,l,y,h),l.child;case 14:return HD(o,l,l.type,l.pendingProps,h);case 15:return WD(o,l,l.type,l.pendingProps,h);case 19:return tk(o,l,h);case 31:return y=l.pendingProps,h=l.mode,y={mode:y.mode,children:y.children},o===null?(h=zb(y,h),h.ref=l.ref,l.child=h,h.return=l,l=h):(h=Fa(o.child,y),h.ref=l.ref,l.child=h,h.return=l,l=h),l;case 22:return ZD(o,l,h);case 24:return ad(l),y=Ri(Zr),o===null?(b=ax(),b===null&&(b=qt,_=sx(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=h),b=_),l.memoizedState={parent:y,cache:b},ux(l),au(l,Zr,b)):((o.lanes&h)!==0&&(cx(o,l),cg(l,null,null,h),ug()),b=o.memoizedState,_=l.memoizedState,b.parent!==y?(b={parent:y,cache:y},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),au(l,Zr,y)):(y=_.cache,au(l,Zr,y),y!==b.cache&&nx(l,[Zr],h,!0))),_i(o,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function Ha(o){o.flags|=4}function ik(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!d4(l)){if(l=Es.current,l!==null&&((gt&4194048)===gt?Wo!==null:(gt&62914560)!==gt&&(gt&536870912)===0||l!==Wo))throw ag=lx,jL;o.flags|=8192}}function Vb(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?eb():536870912,o.lanes|=l,Op|=l)}function gg(o,l){if(!Tt)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function ar(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,y=0;if(l)for(var b=o.child;b!==null;)h|=b.lanes|b.childLanes,y|=b.subtreeFlags&65011712,y|=b.flags&65011712,b.return=o,b=b.sibling;else for(b=o.child;b!==null;)h|=b.lanes|b.childLanes,y|=b.subtreeFlags,y|=b.flags,b.return=o,b=b.sibling;return o.subtreeFlags|=y,o.childLanes=h,l}function TK(o,l,h){var y=l.pendingProps;switch(ex(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(l),null;case 1:return ar(l),null;case 3:return h=l.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),l.memoizedState.cache!==y&&(l.flags|=2048),Va(Zr),qo(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(eg(l)?Ha(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,LL())),ar(l),null;case 26:return h=l.memoizedState,o===null?(Ha(l),h!==null?(ar(l),ik(l,h)):(ar(l),l.flags&=-16777217)):h?h!==o.memoizedState?(Ha(l),ar(l),ik(l,h)):(ar(l),l.flags&=-16777217):(o.memoizedProps!==y&&Ha(l),ar(l),l.flags&=-16777217),null;case 27:ep(l),h=Ze.current;var b=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==y&&Ha(l);else{if(!y){if(l.stateNode===null)throw Error(i(166));return ar(l),null}o=ze.current,eg(l)?NL(l):(o=i4(b,y,h),l.stateNode=o,Ha(l))}return ar(l),null;case 5:if(ep(l),h=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==y&&Ha(l);else{if(!y){if(l.stateNode===null)throw Error(i(166));return ar(l),null}if(o=ze.current,eg(l))NL(l);else{switch(b=tw(Ze.current),o){case 1:o=b.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:o=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":o=b.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":o=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":o=b.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof y.is=="string"?b.createElement("select",{is:y.is}):b.createElement("select"),y.multiple?o.multiple=!0:y.size&&(o.size=y.size);break;default:o=typeof y.is=="string"?b.createElement(h,{is:y.is}):b.createElement(h)}}o[It]=l,o[Hr]=y;e:for(b=l.child;b!==null;){if(b.tag===5||b.tag===6)o.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===l)break e;for(;b.sibling===null;){if(b.return===null||b.return===l)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}l.stateNode=o;e:switch(Ti(o,h,y),h){case"button":case"input":case"select":case"textarea":o=!!y.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ha(l)}}return ar(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==y&&Ha(l);else{if(typeof y!="string"&&l.stateNode===null)throw Error(i(166));if(o=Ze.current,eg(l)){if(o=l.stateNode,h=l.memoizedProps,y=null,b=Qi,b!==null)switch(b.tag){case 27:case 5:y=b.memoizedProps}o[It]=l,o=!!(o.nodeValue===h||y!==null&&y.suppressHydrationWarning===!0||Jk(o.nodeValue,h)),o||sd(l)}else o=tw(o).createTextNode(y),o[It]=l,l.stateNode=o}return ar(l),null;case 13:if(y=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(b=eg(l),y!==null&&y.dehydrated!==null){if(o===null){if(!b)throw Error(i(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(i(317));b[It]=l}else tg(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ar(l),b=!1}else b=LL(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(qa(l),l):(qa(l),null)}if(qa(l),(l.flags&128)!==0)return l.lanes=h,l;if(h=y!==null,o=o!==null&&o.memoizedState!==null,h){y=l.child,b=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(b=y.alternate.memoizedState.cachePool.pool);var _=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(_=y.memoizedState.cachePool.pool),_!==b&&(y.flags|=2048)}return h!==o&&h&&(l.child.flags|=8192),Vb(l,l.updateQueue),ar(l),null;case 4:return qo(),o===null&&h$(l.stateNode.containerInfo),ar(l),null;case 10:return Va(l.type),ar(l),null;case 19:if(xe(Yr),b=l.memoizedState,b===null)return ar(l),null;if(y=(l.flags&128)!==0,_=b.rendering,_===null)if(y)gg(b,!1);else{if(fr!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(_=kb(o),_!==null){for(l.flags|=128,gg(b,!1),o=_.updateQueue,l.updateQueue=o,Vb(l,o),l.subtreeFlags=0,o=h,h=l.child;h!==null;)CL(h,o),h=h.sibling;return we(Yr,Yr.current&1|2),l.child}o=o.sibling}b.tail!==null&&vs()>Bb&&(l.flags|=128,y=!0,gg(b,!1),l.lanes=4194304)}else{if(!y)if(o=kb(_),o!==null){if(l.flags|=128,y=!0,o=o.updateQueue,l.updateQueue=o,Vb(l,o),gg(b,!0),b.tail===null&&b.tailMode==="hidden"&&!_.alternate&&!Tt)return ar(l),null}else 2*vs()-b.renderingStartTime>Bb&&h!==536870912&&(l.flags|=128,y=!0,gg(b,!1),l.lanes=4194304);b.isBackwards?(_.sibling=l.child,l.child=_):(o=b.last,o!==null?o.sibling=_:l.child=_,b.last=_)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=vs(),l.sibling=null,o=Yr.current,we(Yr,y?o&1|2:o&1),l):(ar(l),null);case 22:case 23:return qa(l),fx(),y=l.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(l.flags|=8192):y&&(l.flags|=8192),y?(h&536870912)!==0&&(l.flags&128)===0&&(ar(l),l.subtreeFlags&6&&(l.flags|=8192)):ar(l),h=l.updateQueue,h!==null&&Vb(l,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),y=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==h&&(l.flags|=2048),o!==null&&xe(ld),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),Va(Zr),ar(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function EK(o,l){switch(ex(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Va(Zr),qo(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return ep(l),null;case 13:if(qa(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(i(340));tg()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return xe(Yr),null;case 4:return qo(),null;case 10:return Va(l.type),null;case 22:case 23:return qa(l),fx(),o!==null&&xe(ld),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Va(Zr),null;case 25:return null;default:return null}}function nk(o,l){switch(ex(l),l.tag){case 3:Va(Zr),qo();break;case 26:case 27:case 5:ep(l);break;case 4:qo();break;case 13:qa(l);break;case 19:xe(Yr);break;case 10:Va(l.type);break;case 22:case 23:qa(l),fx(),o!==null&&xe(ld);break;case 24:Va(Zr)}}function vg(o,l){try{var h=l.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var b=y.next;h=b;do{if((h.tag&o)===o){y=void 0;var _=h.create,x=h.inst;y=_(),x.destroy=y}h=h.next}while(h!==b)}}catch(A){zt(l,l.return,A)}}function fu(o,l,h){try{var y=l.updateQueue,b=y!==null?y.lastEffect:null;if(b!==null){var _=b.next;y=_;do{if((y.tag&o)===o){var x=y.inst,A=x.destroy;if(A!==void 0){x.destroy=void 0,b=l;var N=h,H=A;try{H()}catch(ee){zt(b,N,ee)}}}y=y.next}while(y!==_)}}catch(ee){zt(l,l.return,ee)}}function sk(o){var l=o.updateQueue;if(l!==null){var h=o.stateNode;try{HL(l,h)}catch(y){zt(o,o.return,y)}}}function ok(o,l,h){h.props=cd(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(y){zt(o,l,y)}}function bg(o,l){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof h=="function"?o.refCleanup=h(y):h.current=y}}catch(b){zt(o,l,b)}}function Zo(o,l){var h=o.ref,y=o.refCleanup;if(h!==null)if(typeof y=="function")try{y()}catch(b){zt(o,l,b)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(b){zt(o,l,b)}else h.current=null}function ak(o){var l=o.type,h=o.memoizedProps,y=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&y.focus();break e;case"img":h.src?y.src=h.src:h.srcSet&&(y.srcset=h.srcSet)}}catch(b){zt(o,o.return,b)}}function Vx(o,l,h){try{var y=o.stateNode;BK(y,o.type,h,l),y[Hr]=l}catch(b){zt(o,o.return,b)}}function lk(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Su(o.type)||o.tag===4}function Gx(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||lk(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Su(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function qx(o,l,h){var y=o.tag;if(y===5||y===6)o=o.stateNode,l?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,l):(l=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,l.appendChild(o),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=ew));else if(y!==4&&(y===27&&Su(o.type)&&(h=o.stateNode,l=null),o=o.child,o!==null))for(qx(o,l,h),o=o.sibling;o!==null;)qx(o,l,h),o=o.sibling}function Gb(o,l,h){var y=o.tag;if(y===5||y===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(y!==4&&(y===27&&Su(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(Gb(o,l,h),o=o.sibling;o!==null;)Gb(o,l,h),o=o.sibling}function uk(o){var l=o.stateNode,h=o.memoizedProps;try{for(var y=o.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);Ti(l,y,h),l[It]=o,l[Hr]=h}catch(_){zt(o,o.return,_)}}var Wa=!1,Ar=!1,Bx=!1,ck=typeof WeakSet=="function"?WeakSet:Set,ai=null;function xK(o,l){if(o=o.containerInfo,m$=aw,o=_L(o),GE(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var b=y.anchorOffset,_=y.focusNode;y=y.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break e}var x=0,A=-1,N=-1,H=0,ee=0,ie=o,W=null;t:for(;;){for(var J;ie!==h||b!==0&&ie.nodeType!==3||(A=x+b),ie!==_||y!==0&&ie.nodeType!==3||(N=x+y),ie.nodeType===3&&(x+=ie.nodeValue.length),(J=ie.firstChild)!==null;)W=ie,ie=J;for(;;){if(ie===o)break t;if(W===h&&++H===b&&(A=x),W===_&&++ee===y&&(N=x),(J=ie.nextSibling)!==null)break;ie=W,W=ie.parentNode}ie=J}h=A===-1||N===-1?null:{start:A,end:N}}else h=null}h=h||{start:0,end:0}}else h=null;for(y$={focusedElem:o,selectionRange:h},aw=!1,ai=l;ai!==null;)if(l=ai,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,ai=o;else for(;ai!==null;){switch(l=ai,_=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,h=l,b=_.memoizedProps,_=_.memoizedState,y=h.stateNode;try{var He=cd(h.type,b,h.elementType===h.type);o=y.getSnapshotBeforeUpdate(He,_),y.__reactInternalSnapshotBeforeUpdate=o}catch(Ve){zt(h,h.return,Ve)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,h=o.nodeType,h===9)b$(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":b$(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=l.sibling,o!==null){o.return=l.return,ai=o;break}ai=l.return}}function dk(o,l,h){var y=h.flags;switch(h.tag){case 0:case 11:case 15:mu(o,h),y&4&&vg(5,h);break;case 1:if(mu(o,h),y&4)if(o=h.stateNode,l===null)try{o.componentDidMount()}catch(x){zt(h,h.return,x)}else{var b=cd(h.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(b,l,o.__reactInternalSnapshotBeforeUpdate)}catch(x){zt(h,h.return,x)}}y&64&&sk(h),y&512&&bg(h,h.return);break;case 3:if(mu(o,h),y&64&&(o=h.updateQueue,o!==null)){if(l=null,h.child!==null)switch(h.child.tag){case 27:case 5:l=h.child.stateNode;break;case 1:l=h.child.stateNode}try{HL(o,l)}catch(x){zt(h,h.return,x)}}break;case 27:l===null&&y&4&&uk(h);case 26:case 5:mu(o,h),l===null&&y&4&&ak(h),y&512&&bg(h,h.return);break;case 12:mu(o,h);break;case 13:mu(o,h),y&4&&fk(o,h),y&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=PK.bind(null,h),QK(o,h))));break;case 22:if(y=h.memoizedState!==null||Wa,!y){l=l!==null&&l.memoizedState!==null||Ar,b=Wa;var _=Ar;Wa=y,(Ar=l)&&!_?yu(o,h,(h.subtreeFlags&8772)!==0):mu(o,h),Wa=b,Ar=_}break;case 30:break;default:mu(o,h)}}function hk(o){var l=o.alternate;l!==null&&(o.alternate=null,hk(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&bs(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var nr=null,Sn=!1;function Za(o,l,h){for(h=h.child;h!==null;)pk(o,l,h),h=h.sibling}function pk(o,l,h){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(Zc,h)}catch{}switch(h.tag){case 26:Ar||Zo(h,l),Za(o,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Ar||Zo(h,l);var y=nr,b=Sn;Su(h.type)&&(nr=h.stateNode,Sn=!1),Za(o,l,h),Ag(h.stateNode),nr=y,Sn=b;break;case 5:Ar||Zo(h,l);case 6:if(y=nr,b=Sn,nr=null,Za(o,l,h),nr=y,Sn=b,nr!==null)if(Sn)try{(nr.nodeType===9?nr.body:nr.nodeName==="HTML"?nr.ownerDocument.body:nr).removeChild(h.stateNode)}catch(_){zt(h,l,_)}else try{nr.removeChild(h.stateNode)}catch(_){zt(h,l,_)}break;case 18:nr!==null&&(Sn?(o=nr,t4(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),Dg(o)):t4(nr,h.stateNode));break;case 4:y=nr,b=Sn,nr=h.stateNode.containerInfo,Sn=!0,Za(o,l,h),nr=y,Sn=b;break;case 0:case 11:case 14:case 15:Ar||fu(2,h,l),Ar||fu(4,h,l),Za(o,l,h);break;case 1:Ar||(Zo(h,l),y=h.stateNode,typeof y.componentWillUnmount=="function"&&ok(h,l,y)),Za(o,l,h);break;case 21:Za(o,l,h);break;case 22:Ar=(y=Ar)||h.memoizedState!==null,Za(o,l,h),Ar=y;break;default:Za(o,l,h)}}function fk(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Dg(o)}catch(h){zt(l,l.return,h)}}function $K(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new ck),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new ck),l;default:throw Error(i(435,o.tag))}}function Hx(o,l){var h=$K(o);l.forEach(function(y){var b=LK.bind(null,o,y);h.has(y)||(h.add(y),y.then(b,b))})}function Bn(o,l){var h=l.deletions;if(h!==null)for(var y=0;y<h.length;y++){var b=h[y],_=o,x=l,A=x;e:for(;A!==null;){switch(A.tag){case 27:if(Su(A.type)){nr=A.stateNode,Sn=!1;break e}break;case 5:nr=A.stateNode,Sn=!1;break e;case 3:case 4:nr=A.stateNode.containerInfo,Sn=!0;break e}A=A.return}if(nr===null)throw Error(i(160));pk(_,x,b),nr=null,Sn=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)mk(l,o),l=l.sibling}var io=null;function mk(o,l){var h=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Bn(l,o),Hn(o),y&4&&(fu(3,o,o.return),vg(3,o),fu(5,o,o.return));break;case 1:Bn(l,o),Hn(o),y&512&&(Ar||h===null||Zo(h,h.return)),y&64&&Wa&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?y:h.concat(y))));break;case 26:var b=io;if(Bn(l,o),Hn(o),y&512&&(Ar||h===null||Zo(h,h.return)),y&4){var _=h!==null?h.memoizedState:null;if(y=o.memoizedState,h===null)if(y===null)if(o.stateNode===null){e:{y=o.type,h=o.memoizedProps,b=b.ownerDocument||b;t:switch(y){case"title":_=b.getElementsByTagName("title")[0],(!_||_[Xc]||_[It]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(y),b.head.insertBefore(_,b.querySelector("head > title"))),Ti(_,y,h),_[It]=o,Er(_),y=_;break e;case"link":var x=u4("link","href",b).get(y+(h.href||""));if(x){for(var A=0;A<x.length;A++)if(_=x[A],_.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&_.getAttribute("rel")===(h.rel==null?null:h.rel)&&_.getAttribute("title")===(h.title==null?null:h.title)&&_.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){x.splice(A,1);break t}}_=b.createElement(y),Ti(_,y,h),b.head.appendChild(_);break;case"meta":if(x=u4("meta","content",b).get(y+(h.content||""))){for(A=0;A<x.length;A++)if(_=x[A],_.getAttribute("content")===(h.content==null?null:""+h.content)&&_.getAttribute("name")===(h.name==null?null:h.name)&&_.getAttribute("property")===(h.property==null?null:h.property)&&_.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&_.getAttribute("charset")===(h.charSet==null?null:h.charSet)){x.splice(A,1);break t}}_=b.createElement(y),Ti(_,y,h),b.head.appendChild(_);break;default:throw Error(i(468,y))}_[It]=o,Er(_),y=_}o.stateNode=y}else c4(b,o.type,o.stateNode);else o.stateNode=l4(b,y,o.memoizedProps);else _!==y?(_===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):_.count--,y===null?c4(b,o.type,o.stateNode):l4(b,y,o.memoizedProps)):y===null&&o.stateNode!==null&&Vx(o,o.memoizedProps,h.memoizedProps)}break;case 27:Bn(l,o),Hn(o),y&512&&(Ar||h===null||Zo(h,h.return)),h!==null&&y&4&&Vx(o,o.memoizedProps,h.memoizedProps);break;case 5:if(Bn(l,o),Hn(o),y&512&&(Ar||h===null||Zo(h,h.return)),o.flags&32){b=o.stateNode;try{ap(b,"")}catch(J){zt(o,o.return,J)}}y&4&&o.stateNode!=null&&(b=o.memoizedProps,Vx(o,b,h!==null?h.memoizedProps:b)),y&1024&&(Bx=!0);break;case 6:if(Bn(l,o),Hn(o),y&4){if(o.stateNode===null)throw Error(i(162));y=o.memoizedProps,h=o.stateNode;try{h.nodeValue=y}catch(J){zt(o,o.return,J)}}break;case 3:if(nw=null,b=io,io=rw(l.containerInfo),Bn(l,o),io=b,Hn(o),y&4&&h!==null&&h.memoizedState.isDehydrated)try{Dg(l.containerInfo)}catch(J){zt(o,o.return,J)}Bx&&(Bx=!1,yk(o));break;case 4:y=io,io=rw(o.stateNode.containerInfo),Bn(l,o),Hn(o),io=y;break;case 12:Bn(l,o),Hn(o);break;case 13:Bn(l,o),Hn(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Qx=vs()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,Hx(o,y)));break;case 22:b=o.memoizedState!==null;var N=h!==null&&h.memoizedState!==null,H=Wa,ee=Ar;if(Wa=H||b,Ar=ee||N,Bn(l,o),Ar=ee,Wa=H,Hn(o),y&8192)e:for(l=o.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(h===null||N||Wa||Ar||dd(o)),h=null,l=o;;){if(l.tag===5||l.tag===26){if(h===null){N=h=l;try{if(_=N.stateNode,b)x=_.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{A=N.stateNode;var ie=N.memoizedProps.style,W=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;A.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(J){zt(N,N.return,J)}}}else if(l.tag===6){if(h===null){N=l;try{N.stateNode.nodeValue=b?"":N.memoizedProps}catch(J){zt(N,N.return,J)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}y&4&&(y=o.updateQueue,y!==null&&(h=y.retryQueue,h!==null&&(y.retryQueue=null,Hx(o,h))));break;case 19:Bn(l,o),Hn(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,Hx(o,y)));break;case 30:break;case 21:break;default:Bn(l,o),Hn(o)}}function Hn(o){var l=o.flags;if(l&2){try{for(var h,y=o.return;y!==null;){if(lk(y)){h=y;break}y=y.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var b=h.stateNode,_=Gx(o);Gb(o,_,b);break;case 5:var x=h.stateNode;h.flags&32&&(ap(x,""),h.flags&=-33);var A=Gx(o);Gb(o,A,x);break;case 3:case 4:var N=h.stateNode.containerInfo,H=Gx(o);qx(o,H,N);break;default:throw Error(i(161))}}catch(ee){zt(o,o.return,ee)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function yk(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;yk(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function mu(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)dk(o,l.alternate,l),l=l.sibling}function dd(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:fu(4,l,l.return),dd(l);break;case 1:Zo(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&ok(l,l.return,h),dd(l);break;case 27:Ag(l.stateNode);case 26:case 5:Zo(l,l.return),dd(l);break;case 22:l.memoizedState===null&&dd(l);break;case 30:dd(l);break;default:dd(l)}o=o.sibling}}function yu(o,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var y=l.alternate,b=o,_=l,x=_.flags;switch(_.tag){case 0:case 11:case 15:yu(b,_,h),vg(4,_);break;case 1:if(yu(b,_,h),y=_,b=y.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(H){zt(y,y.return,H)}if(y=_,b=y.updateQueue,b!==null){var A=y.stateNode;try{var N=b.shared.hiddenCallbacks;if(N!==null)for(b.shared.hiddenCallbacks=null,b=0;b<N.length;b++)BL(N[b],A)}catch(H){zt(y,y.return,H)}}h&&x&64&&sk(_),bg(_,_.return);break;case 27:uk(_);case 26:case 5:yu(b,_,h),h&&y===null&&x&4&&ak(_),bg(_,_.return);break;case 12:yu(b,_,h);break;case 13:yu(b,_,h),h&&x&4&&fk(b,_);break;case 22:_.memoizedState===null&&yu(b,_,h),bg(_,_.return);break;case 30:break;default:yu(b,_,h)}l=l.sibling}}function Wx(o,l){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&ng(h))}function Zx(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&ng(o))}function Yo(o,l,h,y){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)gk(o,l,h,y),l=l.sibling}function gk(o,l,h,y){var b=l.flags;switch(l.tag){case 0:case 11:case 15:Yo(o,l,h,y),b&2048&&vg(9,l);break;case 1:Yo(o,l,h,y);break;case 3:Yo(o,l,h,y),b&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&ng(o)));break;case 12:if(b&2048){Yo(o,l,h,y),o=l.stateNode;try{var _=l.memoizedProps,x=_.id,A=_.onPostCommit;typeof A=="function"&&A(x,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(N){zt(l,l.return,N)}}else Yo(o,l,h,y);break;case 13:Yo(o,l,h,y);break;case 23:break;case 22:_=l.stateNode,x=l.alternate,l.memoizedState!==null?_._visibility&2?Yo(o,l,h,y):wg(o,l):_._visibility&2?Yo(o,l,h,y):(_._visibility|=2,$p(o,l,h,y,(l.subtreeFlags&10256)!==0)),b&2048&&Wx(x,l);break;case 24:Yo(o,l,h,y),b&2048&&Zx(l.alternate,l);break;default:Yo(o,l,h,y)}}function $p(o,l,h,y,b){for(b=b&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var _=o,x=l,A=h,N=y,H=x.flags;switch(x.tag){case 0:case 11:case 15:$p(_,x,A,N,b),vg(8,x);break;case 23:break;case 22:var ee=x.stateNode;x.memoizedState!==null?ee._visibility&2?$p(_,x,A,N,b):wg(_,x):(ee._visibility|=2,$p(_,x,A,N,b)),b&&H&2048&&Wx(x.alternate,x);break;case 24:$p(_,x,A,N,b),b&&H&2048&&Zx(x.alternate,x);break;default:$p(_,x,A,N,b)}l=l.sibling}}function wg(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=o,y=l,b=y.flags;switch(y.tag){case 22:wg(h,y),b&2048&&Wx(y.alternate,y);break;case 24:wg(h,y),b&2048&&Zx(y.alternate,y);break;default:wg(h,y)}l=l.sibling}}var _g=8192;function Mp(o){if(o.subtreeFlags&_g)for(o=o.child;o!==null;)vk(o),o=o.sibling}function vk(o){switch(o.tag){case 26:Mp(o),o.flags&_g&&o.memoizedState!==null&&dee(io,o.memoizedState,o.memoizedProps);break;case 5:Mp(o);break;case 3:case 4:var l=io;io=rw(o.stateNode.containerInfo),Mp(o),io=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=_g,_g=16777216,Mp(o),_g=l):Mp(o));break;default:Mp(o)}}function bk(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function Sg(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var y=l[h];ai=y,_k(y,o)}bk(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)wk(o),o=o.sibling}function wk(o){switch(o.tag){case 0:case 11:case 15:Sg(o),o.flags&2048&&fu(9,o,o.return);break;case 3:Sg(o);break;case 12:Sg(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,qb(o)):Sg(o);break;default:Sg(o)}}function qb(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var y=l[h];ai=y,_k(y,o)}bk(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:fu(8,l,l.return),qb(l);break;case 22:h=l.stateNode,h._visibility&2&&(h._visibility&=-3,qb(l));break;default:qb(l)}o=o.sibling}}function _k(o,l){for(;ai!==null;){var h=ai;switch(h.tag){case 0:case 11:case 15:fu(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var y=h.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:ng(h.memoizedState.cache)}if(y=h.child,y!==null)y.return=h,ai=y;else e:for(h=o;ai!==null;){y=ai;var b=y.sibling,_=y.return;if(hk(y),y===h){ai=null;break e}if(b!==null){b.return=_,ai=b;break e}ai=_}}}var MK={getCacheForType:function(o){var l=Ri(Zr),h=l.data.get(o);return h===void 0&&(h=o(),l.data.set(o,h)),h}},AK=typeof WeakMap=="function"?WeakMap:Map,Rt=0,qt=null,at=null,gt=0,Ct=0,Wn=null,gu=!1,Ap=!1,Yx=!1,Ya=0,fr=0,vu=0,hd=0,Jx=0,xs=0,Op=0,Tg=null,Tn=null,Xx=!1,Qx=0,Bb=1/0,Hb=null,bu=null,Si=0,wu=null,Rp=null,Cp=0,Kx=0,e$=null,Sk=null,Eg=0,t$=null;function Zn(){if((Rt&2)!==0&&gt!==0)return gt&-gt;if(Q.T!==null){var o=vp;return o!==0?o:l$()}return Ut()}function Tk(){xs===0&&(xs=(gt&536870912)===0||Tt?K1():536870912);var o=Es.current;return o!==null&&(o.flags|=32),xs}function Yn(o,l,h){(o===qt&&(Ct===2||Ct===9)||o.cancelPendingCommit!==null)&&(Ip(o,0),_u(o,gt,xs,!1)),Jc(o,h),((Rt&2)===0||o!==qt)&&(o===qt&&((Rt&2)===0&&(hd|=h),fr===4&&_u(o,gt,xs,!1)),Jo(o))}function Ek(o,l,h){if((Rt&6)!==0)throw Error(i(327));var y=!h&&(l&124)===0&&(l&o.expiredLanes)===0||Yc(o,l),b=y?CK(o,l):n$(o,l,!0),_=y;do{if(b===0){Ap&&!y&&_u(o,l,0,!1);break}else{if(h=o.current.alternate,_&&!OK(h)){b=n$(o,l,!1),_=!1;continue}if(b===2){if(_=l,o.errorRecoveryDisabledLanes&_)var x=0;else x=o.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){l=x;e:{var A=o;b=Tg;var N=A.current.memoizedState.isDehydrated;if(N&&(Ip(A,x).flags|=256),x=n$(A,x,!1),x!==2){if(Yx&&!N){A.errorRecoveryDisabledLanes|=_,hd|=_,b=4;break e}_=Tn,Tn=b,_!==null&&(Tn===null?Tn=_:Tn.push.apply(Tn,_))}b=x}if(_=!1,b!==2)continue}}if(b===1){Ip(o,0),_u(o,l,0,!0);break}e:{switch(y=o,_=b,_){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:_u(y,l,xs,!gu);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(b=Qx+300-vs(),10<b)){if(_u(y,l,xs,!gu),ip(y,0,!0)!==0)break e;y.timeoutHandle=Kk(xk.bind(null,y,h,Tn,Hb,Xx,l,xs,hd,Op,gu,_,2,-0,0),b);break e}xk(y,h,Tn,Hb,Xx,l,xs,hd,Op,gu,_,0,-0,0)}}break}while(!0);Jo(o)}function xk(o,l,h,y,b,_,x,A,N,H,ee,ie,W,J){if(o.timeoutHandle=-1,ie=l.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(Cg={stylesheets:null,count:0,unsuspend:cee},vk(l),ie=hee(),ie!==null)){o.cancelPendingCommit=ie(Ik.bind(null,o,l,_,h,y,b,x,A,N,ee,1,W,J)),_u(o,_,x,!H);return}Ik(o,l,_,h,y,b,x,A,N)}function OK(o){for(var l=o;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var y=0;y<h.length;y++){var b=h[y],_=b.getSnapshot;b=b.value;try{if(!Gn(_(),b))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function _u(o,l,h,y){l&=~Jx,l&=~hd,o.suspendedLanes|=l,o.pingedLanes&=~l,y&&(o.warmLanes|=l),y=o.expirationTimes;for(var b=l;0<b;){var _=31-vn(b),x=1<<_;y[_]=-1,b&=~x}h!==0&&tb(o,h,l)}function Wb(){return(Rt&6)===0?(xg(0),!1):!0}function r$(){if(at!==null){if(Ct===0)var o=at.return;else o=at,za=od=null,bx(o),Ep=null,mg=0,o=at;for(;o!==null;)nk(o.alternate,o),o=o.return;at=null}}function Ip(o,l){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,WK(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),r$(),qt=o,at=h=Fa(o.current,null),gt=l,Ct=0,Wn=null,gu=!1,Ap=Yc(o,l),Yx=!1,Op=xs=Jx=hd=vu=fr=0,Tn=Tg=null,Xx=!1,(l&8)!==0&&(l|=l&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=l;0<y;){var b=31-vn(y),_=1<<b;l|=o[b],y&=~_}return Ya=l,mb(),h}function $k(o,l){it=null,Q.H=Pb,l===og||l===Eb?(l=GL(),Ct=3):l===jL?(l=GL(),Ct=4):Ct=l===qD?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Wn=l,at===null&&(fr=1,Ub(o,ws(l,o.current)))}function Mk(){var o=Q.H;return Q.H=Pb,o===null?Pb:o}function Ak(){var o=Q.A;return Q.A=MK,o}function i$(){fr=4,gu||(gt&4194048)!==gt&&Es.current!==null||(Ap=!0),(vu&134217727)===0&&(hd&134217727)===0||qt===null||_u(qt,gt,xs,!1)}function n$(o,l,h){var y=Rt;Rt|=2;var b=Mk(),_=Ak();(qt!==o||gt!==l)&&(Hb=null,Ip(o,l)),l=!1;var x=fr;e:do try{if(Ct!==0&&at!==null){var A=at,N=Wn;switch(Ct){case 8:r$(),x=6;break e;case 3:case 2:case 9:case 6:Es.current===null&&(l=!0);var H=Ct;if(Ct=0,Wn=null,Np(o,A,N,H),h&&Ap){x=0;break e}break;default:H=Ct,Ct=0,Wn=null,Np(o,A,N,H)}}RK(),x=fr;break}catch(ee){$k(o,ee)}while(!0);return l&&o.shellSuspendCounter++,za=od=null,Rt=y,Q.H=b,Q.A=_,at===null&&(qt=null,gt=0,mb()),x}function RK(){for(;at!==null;)Ok(at)}function CK(o,l){var h=Rt;Rt|=2;var y=Mk(),b=Ak();qt!==o||gt!==l?(Hb=null,Bb=vs()+500,Ip(o,l)):Ap=Yc(o,l);e:do try{if(Ct!==0&&at!==null){l=at;var _=Wn;t:switch(Ct){case 1:Ct=0,Wn=null,Np(o,l,_,1);break;case 2:case 9:if(zL(_)){Ct=0,Wn=null,Rk(l);break}l=function(){Ct!==2&&Ct!==9||qt!==o||(Ct=7),Jo(o)},_.then(l,l);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:zL(_)?(Ct=0,Wn=null,Rk(l)):(Ct=0,Wn=null,Np(o,l,_,7));break;case 5:var x=null;switch(at.tag){case 26:x=at.memoizedState;case 5:case 27:var A=at;if(!x||d4(x)){Ct=0,Wn=null;var N=A.sibling;if(N!==null)at=N;else{var H=A.return;H!==null?(at=H,Zb(H)):at=null}break t}}Ct=0,Wn=null,Np(o,l,_,5);break;case 6:Ct=0,Wn=null,Np(o,l,_,6);break;case 8:r$(),fr=6;break e;default:throw Error(i(462))}}IK();break}catch(ee){$k(o,ee)}while(!0);return za=od=null,Q.H=y,Q.A=b,Rt=h,at!==null?0:(qt=null,gt=0,mb(),fr)}function IK(){for(;at!==null&&!yE();)Ok(at)}function Ok(o){var l=rk(o.alternate,o,Ya);o.memoizedProps=o.pendingProps,l===null?Zb(o):at=l}function Rk(o){var l=o,h=l.alternate;switch(l.tag){case 15:case 0:l=JD(h,l,l.pendingProps,l.type,void 0,gt);break;case 11:l=JD(h,l,l.pendingProps,l.type.render,l.ref,gt);break;case 5:bx(l);default:nk(h,l),l=at=CL(l,Ya),l=rk(h,l,Ya)}o.memoizedProps=o.pendingProps,l===null?Zb(o):at=l}function Np(o,l,h,y){za=od=null,bx(l),Ep=null,mg=0;var b=l.return;try{if(_K(o,b,l,h,gt)){fr=1,Ub(o,ws(h,o.current)),at=null;return}}catch(_){if(b!==null)throw at=b,_;fr=1,Ub(o,ws(h,o.current)),at=null;return}l.flags&32768?(Tt||y===1?o=!0:Ap||(gt&536870912)!==0?o=!1:(gu=o=!0,(y===2||y===9||y===3||y===6)&&(y=Es.current,y!==null&&y.tag===13&&(y.flags|=16384))),Ck(l,o)):Zb(l)}function Zb(o){var l=o;do{if((l.flags&32768)!==0){Ck(l,gu);return}o=l.return;var h=TK(l.alternate,l,Ya);if(h!==null){at=h;return}if(l=l.sibling,l!==null){at=l;return}at=l=o}while(l!==null);fr===0&&(fr=5)}function Ck(o,l){do{var h=EK(o.alternate,o);if(h!==null){h.flags&=32767,at=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(o=o.sibling,o!==null)){at=o;return}at=o=h}while(o!==null);fr=6,at=null}function Ik(o,l,h,y,b,_,x,A,N){o.cancelPendingCommit=null;do Yb();while(Si!==0);if((Rt&6)!==0)throw Error(i(327));if(l!==null){if(l===o.current)throw Error(i(177));if(_=l.lanes|l.childLanes,_|=ZE,$E(o,h,_,x,A,N),o===qt&&(at=qt=null,gt=0),Rp=l,wu=o,Cp=h,Kx=_,e$=b,Sk=y,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,DK(Vn,function(){return kk(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||y){y=Q.T,Q.T=null,b=pe.p,pe.p=2,x=Rt,Rt|=4;try{xK(o,l,h)}finally{Rt=x,pe.p=b,Q.T=y}}Si=1,Nk(),Pk(),Lk()}}function Nk(){if(Si===1){Si=0;var o=wu,l=Rp,h=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||h){h=Q.T,Q.T=null;var y=pe.p;pe.p=2;var b=Rt;Rt|=4;try{mk(l,o);var _=y$,x=_L(o.containerInfo),A=_.focusedElem,N=_.selectionRange;if(x!==A&&A&&A.ownerDocument&&wL(A.ownerDocument.documentElement,A)){if(N!==null&&GE(A)){var H=N.start,ee=N.end;if(ee===void 0&&(ee=H),"selectionStart"in A)A.selectionStart=H,A.selectionEnd=Math.min(ee,A.value.length);else{var ie=A.ownerDocument||document,W=ie&&ie.defaultView||window;if(W.getSelection){var J=W.getSelection(),He=A.textContent.length,Ve=Math.min(N.start,He),Lt=N.end===void 0?Ve:Math.min(N.end,He);!J.extend&&Ve>Lt&&(x=Lt,Lt=Ve,Ve=x);var G=bL(A,Ve),F=bL(A,Lt);if(G&&F&&(J.rangeCount!==1||J.anchorNode!==G.node||J.anchorOffset!==G.offset||J.focusNode!==F.node||J.focusOffset!==F.offset)){var B=ie.createRange();B.setStart(G.node,G.offset),J.removeAllRanges(),Ve>Lt?(J.addRange(B),J.extend(F.node,F.offset)):(B.setEnd(F.node,F.offset),J.addRange(B))}}}}for(ie=[],J=A;J=J.parentNode;)J.nodeType===1&&ie.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ie.length;A++){var te=ie[A];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}aw=!!m$,y$=m$=null}finally{Rt=b,pe.p=y,Q.T=h}}o.current=l,Si=2}}function Pk(){if(Si===2){Si=0;var o=wu,l=Rp,h=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||h){h=Q.T,Q.T=null;var y=pe.p;pe.p=2;var b=Rt;Rt|=4;try{dk(o,l.alternate,l)}finally{Rt=b,pe.p=y,Q.T=h}}Si=3}}function Lk(){if(Si===4||Si===3){Si=0,gE();var o=wu,l=Rp,h=Cp,y=Sk;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Si=5:(Si=0,Rp=wu=null,Dk(o,o.pendingLanes));var b=o.pendingLanes;if(b===0&&(bu=null),Y(h),l=l.stateNode,Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(Zc,l,void 0,(l.current.flags&128)===128)}catch{}if(y!==null){l=Q.T,b=pe.p,pe.p=2,Q.T=null;try{for(var _=o.onRecoverableError,x=0;x<y.length;x++){var A=y[x];_(A.value,{componentStack:A.stack})}}finally{Q.T=l,pe.p=b}}(Cp&3)!==0&&Yb(),Jo(o),b=o.pendingLanes,(h&4194090)!==0&&(b&42)!==0?o===t$?Eg++:(Eg=0,t$=o):Eg=0,xg(0)}}function Dk(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,ng(l)))}function Yb(o){return Nk(),Pk(),Lk(),kk()}function kk(){if(Si!==5)return!1;var o=wu,l=Kx;Kx=0;var h=Y(Cp),y=Q.T,b=pe.p;try{pe.p=32>h?32:h,Q.T=null,h=e$,e$=null;var _=wu,x=Cp;if(Si=0,Rp=wu=null,Cp=0,(Rt&6)!==0)throw Error(i(331));var A=Rt;if(Rt|=4,wk(_.current),gk(_,_.current,x,h),Rt=A,xg(0,!1),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(Zc,_)}catch{}return!0}finally{pe.p=b,Q.T=y,Dk(o,l)}}function Fk(o,l,h){l=ws(h,l),l=Nx(o.stateNode,l,2),o=cu(o,l,2),o!==null&&(Jc(o,2),Jo(o))}function zt(o,l,h){if(o.tag===3)Fk(o,o,h);else for(;l!==null;){if(l.tag===3){Fk(l,o,h);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(bu===null||!bu.has(y))){o=ws(h,o),h=VD(2),y=cu(l,h,2),y!==null&&(GD(h,y,l,o),Jc(y,2),Jo(y));break}}l=l.return}}function s$(o,l,h){var y=o.pingCache;if(y===null){y=o.pingCache=new AK;var b=new Set;y.set(l,b)}else b=y.get(l),b===void 0&&(b=new Set,y.set(l,b));b.has(h)||(Yx=!0,b.add(h),o=NK.bind(null,o,l,h),l.then(o,o))}function NK(o,l,h){var y=o.pingCache;y!==null&&y.delete(l),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,qt===o&&(gt&h)===h&&(fr===4||fr===3&&(gt&62914560)===gt&&300>vs()-Qx?(Rt&2)===0&&Ip(o,0):Jx|=h,Op===gt&&(Op=0)),Jo(o)}function Uk(o,l){l===0&&(l=eb()),o=fp(o,l),o!==null&&(Jc(o,l),Jo(o))}function PK(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),Uk(o,h)}function LK(o,l){var h=0;switch(o.tag){case 13:var y=o.stateNode,b=o.memoizedState;b!==null&&(h=b.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&&y.delete(l),Uk(o,h)}function DK(o,l){return Ny(o,l)}var Jb=null,Pp=null,o$=!1,Xb=!1,a$=!1,pd=0;function Jo(o){o!==Pp&&o.next===null&&(Pp===null?Jb=Pp=o:Pp=Pp.next=o),Xb=!0,o$||(o$=!0,FK())}function xg(o,l){if(!a$&&Xb){a$=!0;do for(var h=!1,y=Jb;y!==null;){if(o!==0){var b=y.pendingLanes;if(b===0)var _=0;else{var x=y.suspendedLanes,A=y.pingedLanes;_=(1<<31-vn(42|o)+1)-1,_&=b&~(x&~A),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(h=!0,Gk(y,_))}else _=gt,_=ip(y,y===qt?_:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(_&3)===0||Yc(y,_)||(h=!0,Gk(y,_));y=y.next}while(h);a$=!1}}function kK(){jk()}function jk(){Xb=o$=!1;var o=0;pd!==0&&(HK()&&(o=pd),pd=0);for(var l=vs(),h=null,y=Jb;y!==null;){var b=y.next,_=zk(y,l);_===0?(y.next=null,h===null?Jb=b:h.next=b,b===null&&(Pp=h)):(h=y,(o!==0||(_&3)!==0)&&(Xb=!0)),y=b}xg(o)}function zk(o,l){for(var h=o.suspendedLanes,y=o.pingedLanes,b=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var x=31-vn(_),A=1<<x,N=b[x];N===-1?((A&h)===0||(A&y)!==0)&&(b[x]=xE(A,l)):N<=l&&(o.expiredLanes|=A),_&=~A}if(l=qt,h=gt,h=ip(o,o===l?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,h===0||o===l&&(Ct===2||Ct===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&Py(y),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||Yc(o,h)){if(l=h&-h,l===o.callbackPriority)return l;switch(y!==null&&Py(y),Y(h)){case 2:case 8:h=Dy;break;case 32:h=Vn;break;case 268435456:h=Q1;break;default:h=Vn}return y=Vk.bind(null,o),h=Ny(h,y),o.callbackPriority=l,o.callbackNode=h,l}return y!==null&&y!==null&&Py(y),o.callbackPriority=2,o.callbackNode=null,2}function Vk(o,l){if(Si!==0&&Si!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(Yb()&&o.callbackNode!==h)return null;var y=gt;return y=ip(o,o===qt?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(Ek(o,y,l),zk(o,vs()),o.callbackNode!=null&&o.callbackNode===h?Vk.bind(null,o):null)}function Gk(o,l){if(Yb())return null;Ek(o,l,!0)}function FK(){ZK(function(){(Rt&6)!==0?Ny(Ly,kK):jk()})}function l$(){return pd===0&&(pd=K1()),pd}function qk(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:lb(""+o)}function Bk(o,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,o.id&&h.setAttribute("form",o.id),l.parentNode.insertBefore(h,l),o=new FormData(o),h.parentNode.removeChild(h),o}function UK(o,l,h,y,b){if(l==="submit"&&h&&h.stateNode===b){var _=qk((b[Hr]||null).action),x=y.submitter;x&&(l=(l=x[Hr]||null)?qk(l.formAction):x.getAttribute("formAction"),l!==null&&(_=l,x=null));var A=new hb("action","action",null,y,b);o.push({event:A,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(pd!==0){var N=x?Bk(b,x):new FormData(b);Ax(h,{pending:!0,data:N,method:b.method,action:_},null,N)}}else typeof _=="function"&&(A.preventDefault(),N=x?Bk(b,x):new FormData(b),Ax(h,{pending:!0,data:N,method:b.method,action:_},_,N))},currentTarget:b}]})}}for(var u$=0;u$<WE.length;u$++){var c$=WE[u$],jK=c$.toLowerCase(),zK=c$[0].toUpperCase()+c$.slice(1);ro(jK,"on"+zK)}ro(EL,"onAnimationEnd"),ro(xL,"onAnimationIteration"),ro($L,"onAnimationStart"),ro("dblclick","onDoubleClick"),ro("focusin","onFocus"),ro("focusout","onBlur"),ro(nK,"onTransitionRun"),ro(sK,"onTransitionStart"),ro(oK,"onTransitionCancel"),ro(ML,"onTransitionEnd"),su("onMouseEnter",["mouseout","mouseover"]),su("onMouseLeave",["mouseout","mouseover"]),su("onPointerEnter",["pointerout","pointerover"]),su("onPointerLeave",["pointerout","pointerover"]),eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),eo("onBeforeInput",["compositionend","keypress","textInput","paste"]),eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $g="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VK=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($g));function Hk(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var y=o[h],b=y.event;y=y.listeners;e:{var _=void 0;if(l)for(var x=y.length-1;0<=x;x--){var A=y[x],N=A.instance,H=A.currentTarget;if(A=A.listener,N!==_&&b.isPropagationStopped())break e;_=A,b.currentTarget=H;try{_(b)}catch(ee){Fb(ee)}b.currentTarget=null,_=N}else for(x=0;x<y.length;x++){if(A=y[x],N=A.instance,H=A.currentTarget,A=A.listener,N!==_&&b.isPropagationStopped())break e;_=A,b.currentTarget=H;try{_(b)}catch(ee){Fb(ee)}b.currentTarget=null,_=N}}}}function lt(o,l){var h=l[ru];h===void 0&&(h=l[ru]=new Set);var y=o+"__bubble";h.has(y)||(Wk(l,o,2,!1),h.add(y))}function d$(o,l,h){var y=0;l&&(y|=4),Wk(h,o,y,l)}var Qb="_reactListening"+Math.random().toString(36).slice(2);function h$(o){if(!o[Qb]){o[Qb]=!0,ib.forEach(function(h){h!=="selectionchange"&&(VK.has(h)||d$(h,!1,o),d$(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Qb]||(l[Qb]=!0,d$("selectionchange",!1,l))}}function Wk(o,l,h,y){switch(g4(l)){case 2:var b=mee;break;case 8:b=yee;break;default:b=$$}h=b.bind(null,l,h,o),b=void 0,!PE||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),y?b!==void 0?o.addEventListener(l,h,{capture:!0,passive:b}):o.addEventListener(l,h,!0):b!==void 0?o.addEventListener(l,h,{passive:b}):o.addEventListener(l,h,!1)}function p$(o,l,h,y,b){var _=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var x=y.tag;if(x===3||x===4){var A=y.stateNode.containerInfo;if(A===b)break;if(x===4)for(x=y.return;x!==null;){var N=x.tag;if((N===3||N===4)&&x.stateNode.containerInfo===b)return;x=x.return}for(;A!==null;){if(x=La(A),x===null)return;if(N=x.tag,N===5||N===6||N===26||N===27){y=_=x;continue e}A=A.parentNode}}y=y.return}eL(function(){var H=_,ee=IE(h),ie=[];e:{var W=AL.get(o);if(W!==void 0){var J=hb,He=o;switch(o){case"keypress":if(cb(h)===0)break e;case"keydown":case"keyup":J=DQ;break;case"focusin":He="focus",J=FE;break;case"focusout":He="blur",J=FE;break;case"beforeblur":case"afterblur":J=FE;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=iL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=EQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=UQ;break;case EL:case xL:case $L:J=MQ;break;case ML:J=zQ;break;case"scroll":case"scrollend":J=SQ;break;case"wheel":J=GQ;break;case"copy":case"cut":case"paste":J=OQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=sL;break;case"toggle":case"beforetoggle":J=BQ}var Ve=(l&4)!==0,Lt=!Ve&&(o==="scroll"||o==="scrollend"),G=Ve?W!==null?W+"Capture":null:W;Ve=[];for(var F=H,B;F!==null;){var te=F;if(B=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||B===null||G===null||(te=By(F,G),te!=null&&Ve.push(Mg(F,te,B))),Lt)break;F=F.return}0<Ve.length&&(W=new J(W,He,null,h,ee),ie.push({event:W,listeners:Ve}))}}if((l&7)===0){e:{if(W=o==="mouseover"||o==="pointerover",J=o==="mouseout"||o==="pointerout",W&&h!==CE&&(He=h.relatedTarget||h.fromElement)&&(La(He)||He[$e]))break e;if((J||W)&&(W=ee.window===ee?ee:(W=ee.ownerDocument)?W.defaultView||W.parentWindow:window,J?(He=h.relatedTarget||h.toElement,J=H,He=He?La(He):null,He!==null&&(Lt=s(He),Ve=He.tag,He!==Lt||Ve!==5&&Ve!==27&&Ve!==6)&&(He=null)):(J=null,He=H),J!==He)){if(Ve=iL,te="onMouseLeave",G="onMouseEnter",F="mouse",(o==="pointerout"||o==="pointerover")&&(Ve=sL,te="onPointerLeave",G="onPointerEnter",F="pointer"),Lt=J==null?W:qe(J),B=He==null?W:qe(He),W=new Ve(te,F+"leave",J,h,ee),W.target=Lt,W.relatedTarget=B,te=null,La(ee)===H&&(Ve=new Ve(G,F+"enter",He,h,ee),Ve.target=B,Ve.relatedTarget=Lt,te=Ve),Lt=te,J&&He)t:{for(Ve=J,G=He,F=0,B=Ve;B;B=Lp(B))F++;for(B=0,te=G;te;te=Lp(te))B++;for(;0<F-B;)Ve=Lp(Ve),F--;for(;0<B-F;)G=Lp(G),B--;for(;F--;){if(Ve===G||G!==null&&Ve===G.alternate)break t;Ve=Lp(Ve),G=Lp(G)}Ve=null}else Ve=null;J!==null&&Zk(ie,W,J,Ve,!1),He!==null&&Lt!==null&&Zk(ie,Lt,He,Ve,!0)}}e:{if(W=H?qe(H):window,J=W.nodeName&&W.nodeName.toLowerCase(),J==="select"||J==="input"&&W.type==="file")var Ie=pL;else if(dL(W))if(fL)Ie=tK;else{Ie=KQ;var st=QQ}else J=W.nodeName,!J||J.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?H&&RE(H.elementType)&&(Ie=pL):Ie=eK;if(Ie&&(Ie=Ie(o,H))){hL(ie,Ie,h,ee);break e}st&&st(o,W,H),o==="focusout"&&H&&W.type==="number"&&H.memoizedProps.value!=null&&OE(W,"number",W.value)}switch(st=H?qe(H):window,o){case"focusin":(dL(st)||st.contentEditable==="true")&&(dp=st,qE=H,Ky=null);break;case"focusout":Ky=qE=dp=null;break;case"mousedown":BE=!0;break;case"contextmenu":case"mouseup":case"dragend":BE=!1,SL(ie,h,ee);break;case"selectionchange":if(iK)break;case"keydown":case"keyup":SL(ie,h,ee)}var Fe;if(jE)e:{switch(o){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else cp?uL(o,h)&&(Be="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Be="onCompositionStart");Be&&(oL&&h.locale!=="ko"&&(cp||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&cp&&(Fe=tL()):(ou=ee,LE="value"in ou?ou.value:ou.textContent,cp=!0)),st=Kb(H,Be),0<st.length&&(Be=new nL(Be,o,null,h,ee),ie.push({event:Be,listeners:st}),Fe?Be.data=Fe:(Fe=cL(h),Fe!==null&&(Be.data=Fe)))),(Fe=WQ?ZQ(o,h):YQ(o,h))&&(Be=Kb(H,"onBeforeInput"),0<Be.length&&(st=new nL("onBeforeInput","beforeinput",null,h,ee),ie.push({event:st,listeners:Be}),st.data=Fe)),UK(ie,o,H,h,ee)}Hk(ie,l)})}function Mg(o,l,h){return{instance:o,listener:l,currentTarget:h}}function Kb(o,l){for(var h=l+"Capture",y=[];o!==null;){var b=o,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=By(o,h),b!=null&&y.unshift(Mg(o,b,_)),b=By(o,l),b!=null&&y.push(Mg(o,b,_))),o.tag===3)return y;o=o.return}return[]}function Lp(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Zk(o,l,h,y,b){for(var _=l._reactName,x=[];h!==null&&h!==y;){var A=h,N=A.alternate,H=A.stateNode;if(A=A.tag,N!==null&&N===y)break;A!==5&&A!==26&&A!==27||H===null||(N=H,b?(H=By(h,_),H!=null&&x.unshift(Mg(h,H,N))):b||(H=By(h,_),H!=null&&x.push(Mg(h,H,N)))),h=h.return}x.length!==0&&o.push({event:l,listeners:x})}var GK=/\r\n?/g,qK=/\u0000|\uFFFD/g;function Yk(o){return(typeof o=="string"?o:""+o).replace(GK,`
`).replace(qK,"")}function Jk(o,l){return l=Yk(l),Yk(o)===l}function ew(){}function Pt(o,l,h,y,b,_){switch(h){case"children":typeof y=="string"?l==="body"||l==="textarea"&&y===""||ap(o,y):(typeof y=="number"||typeof y=="bigint")&&l!=="body"&&ap(o,""+y);break;case"className":sp(o,"class",y);break;case"tabIndex":sp(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":sp(o,h,y);break;case"style":QP(o,y,_);break;case"data":if(l!=="object"){sp(o,"data",y);break}case"src":case"href":if(y===""&&(l!=="a"||h!=="href")){o.removeAttribute(h);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(h);break}y=lb(""+y),o.setAttribute(h,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(h==="formAction"?(l!=="input"&&Pt(o,l,"name",b.name,b,null),Pt(o,l,"formEncType",b.formEncType,b,null),Pt(o,l,"formMethod",b.formMethod,b,null),Pt(o,l,"formTarget",b.formTarget,b,null)):(Pt(o,l,"encType",b.encType,b,null),Pt(o,l,"method",b.method,b,null),Pt(o,l,"target",b.target,b,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(h);break}y=lb(""+y),o.setAttribute(h,y);break;case"onClick":y!=null&&(o.onclick=ew);break;case"onScroll":y!=null&&lt("scroll",o);break;case"onScrollEnd":y!=null&&lt("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(h=y.__html,h!=null){if(b.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}h=lb(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(h,""+y):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":y===!0?o.setAttribute(h,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(h,y):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(h,y):o.removeAttribute(h);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(h):o.setAttribute(h,y);break;case"popover":lt("beforetoggle",o),lt("toggle",o),np(o,"popover",y);break;case"xlinkActuate":to(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":to(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":to(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":to(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":to(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":to(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":to(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":to(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":to(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":np(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=wQ.get(h)||h,np(o,h,y))}}function f$(o,l,h,y,b,_){switch(h){case"style":QP(o,y,_);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(h=y.__html,h!=null){if(b.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"children":typeof y=="string"?ap(o,y):(typeof y=="number"||typeof y=="bigint")&&ap(o,""+y);break;case"onScroll":y!=null&&lt("scroll",o);break;case"onScrollEnd":y!=null&&lt("scrollend",o);break;case"onClick":y!=null&&(o.onclick=ew);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nb.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(b=h.endsWith("Capture"),l=h.slice(2,b?h.length-7:void 0),_=o[Hr]||null,_=_!=null?_[h]:null,typeof _=="function"&&o.removeEventListener(l,_,b),typeof y=="function")){typeof _!="function"&&_!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(l,y,b);break e}h in o?o[h]=y:y===!0?o.setAttribute(h,""):np(o,h,y)}}}function Ti(o,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lt("error",o),lt("load",o);var y=!1,b=!1,_;for(_ in h)if(h.hasOwnProperty(_)){var x=h[_];if(x!=null)switch(_){case"src":y=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Pt(o,l,_,x,h,null)}}b&&Pt(o,l,"srcSet",h.srcSet,h,null),y&&Pt(o,l,"src",h.src,h,null);return;case"input":lt("invalid",o);var A=_=x=b=null,N=null,H=null;for(y in h)if(h.hasOwnProperty(y)){var ee=h[y];if(ee!=null)switch(y){case"name":b=ee;break;case"type":x=ee;break;case"checked":N=ee;break;case"defaultChecked":H=ee;break;case"value":_=ee;break;case"defaultValue":A=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,l));break;default:Pt(o,l,y,ee,h,null)}}ZP(o,_,A,N,H,x,b,!1),ke(o);return;case"select":lt("invalid",o),y=x=_=null;for(b in h)if(h.hasOwnProperty(b)&&(A=h[b],A!=null))switch(b){case"value":_=A;break;case"defaultValue":x=A;break;case"multiple":y=A;default:Pt(o,l,b,A,h,null)}l=_,h=x,o.multiple=!!y,l!=null?op(o,!!y,l,!1):h!=null&&op(o,!!y,h,!0);return;case"textarea":lt("invalid",o),_=b=y=null;for(x in h)if(h.hasOwnProperty(x)&&(A=h[x],A!=null))switch(x){case"value":y=A;break;case"defaultValue":b=A;break;case"children":_=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:Pt(o,l,x,A,h,null)}JP(o,y,b,_),ke(o);return;case"option":for(N in h)if(h.hasOwnProperty(N)&&(y=h[N],y!=null))switch(N){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Pt(o,l,N,y,h,null)}return;case"dialog":lt("beforetoggle",o),lt("toggle",o),lt("cancel",o),lt("close",o);break;case"iframe":case"object":lt("load",o);break;case"video":case"audio":for(y=0;y<$g.length;y++)lt($g[y],o);break;case"image":lt("error",o),lt("load",o);break;case"details":lt("toggle",o);break;case"embed":case"source":case"link":lt("error",o),lt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in h)if(h.hasOwnProperty(H)&&(y=h[H],y!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Pt(o,l,H,y,h,null)}return;default:if(RE(l)){for(ee in h)h.hasOwnProperty(ee)&&(y=h[ee],y!==void 0&&f$(o,l,ee,y,h,void 0));return}}for(A in h)h.hasOwnProperty(A)&&(y=h[A],y!=null&&Pt(o,l,A,y,h,null))}function BK(o,l,h,y){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,x=null,A=null,N=null,H=null,ee=null;for(J in h){var ie=h[J];if(h.hasOwnProperty(J)&&ie!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":N=ie;default:y.hasOwnProperty(J)||Pt(o,l,J,null,y,ie)}}for(var W in y){var J=y[W];if(ie=h[W],y.hasOwnProperty(W)&&(J!=null||ie!=null))switch(W){case"type":_=J;break;case"name":b=J;break;case"checked":H=J;break;case"defaultChecked":ee=J;break;case"value":x=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,l));break;default:J!==ie&&Pt(o,l,W,J,y,ie)}}AE(o,x,A,N,H,ee,_,b);return;case"select":J=x=A=W=null;for(_ in h)if(N=h[_],h.hasOwnProperty(_)&&N!=null)switch(_){case"value":break;case"multiple":J=N;default:y.hasOwnProperty(_)||Pt(o,l,_,null,y,N)}for(b in y)if(_=y[b],N=h[b],y.hasOwnProperty(b)&&(_!=null||N!=null))switch(b){case"value":W=_;break;case"defaultValue":A=_;break;case"multiple":x=_;default:_!==N&&Pt(o,l,b,_,y,N)}l=A,h=x,y=J,W!=null?op(o,!!h,W,!1):!!y!=!!h&&(l!=null?op(o,!!h,l,!0):op(o,!!h,h?[]:"",!1));return;case"textarea":J=W=null;for(A in h)if(b=h[A],h.hasOwnProperty(A)&&b!=null&&!y.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Pt(o,l,A,null,y,b)}for(x in y)if(b=y[x],_=h[x],y.hasOwnProperty(x)&&(b!=null||_!=null))switch(x){case"value":W=b;break;case"defaultValue":J=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:b!==_&&Pt(o,l,x,b,y,_)}YP(o,W,J);return;case"option":for(var He in h)if(W=h[He],h.hasOwnProperty(He)&&W!=null&&!y.hasOwnProperty(He))switch(He){case"selected":o.selected=!1;break;default:Pt(o,l,He,null,y,W)}for(N in y)if(W=y[N],J=h[N],y.hasOwnProperty(N)&&W!==J&&(W!=null||J!=null))switch(N){case"selected":o.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Pt(o,l,N,W,y,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in h)W=h[Ve],h.hasOwnProperty(Ve)&&W!=null&&!y.hasOwnProperty(Ve)&&Pt(o,l,Ve,null,y,W);for(H in y)if(W=y[H],J=h[H],y.hasOwnProperty(H)&&W!==J&&(W!=null||J!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,l));break;default:Pt(o,l,H,W,y,J)}return;default:if(RE(l)){for(var Lt in h)W=h[Lt],h.hasOwnProperty(Lt)&&W!==void 0&&!y.hasOwnProperty(Lt)&&f$(o,l,Lt,void 0,y,W);for(ee in y)W=y[ee],J=h[ee],!y.hasOwnProperty(ee)||W===J||W===void 0&&J===void 0||f$(o,l,ee,W,y,J);return}}for(var G in h)W=h[G],h.hasOwnProperty(G)&&W!=null&&!y.hasOwnProperty(G)&&Pt(o,l,G,null,y,W);for(ie in y)W=y[ie],J=h[ie],!y.hasOwnProperty(ie)||W===J||W==null&&J==null||Pt(o,l,ie,W,y,J)}var m$=null,y$=null;function tw(o){return o.nodeType===9?o:o.ownerDocument}function Xk(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qk(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function g$(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var v$=null;function HK(){var o=window.event;return o&&o.type==="popstate"?o===v$?!1:(v$=o,!0):(v$=null,!1)}var Kk=typeof setTimeout=="function"?setTimeout:void 0,WK=typeof clearTimeout=="function"?clearTimeout:void 0,e4=typeof Promise=="function"?Promise:void 0,ZK=typeof queueMicrotask=="function"?queueMicrotask:typeof e4<"u"?function(o){return e4.resolve(null).then(o).catch(YK)}:Kk;function YK(o){setTimeout(function(){throw o})}function Su(o){return o==="head"}function t4(o,l){var h=l,y=0,b=0;do{var _=h.nextSibling;if(o.removeChild(h),_&&_.nodeType===8)if(h=_.data,h==="/$"){if(0<y&&8>y){h=y;var x=o.ownerDocument;if(h&1&&Ag(x.documentElement),h&2&&Ag(x.body),h&4)for(h=x.head,Ag(h),x=h.firstChild;x;){var A=x.nextSibling,N=x.nodeName;x[Xc]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&x.rel.toLowerCase()==="stylesheet"||h.removeChild(x),x=A}}if(b===0){o.removeChild(_),Dg(l);return}b--}else h==="$"||h==="$?"||h==="$!"?b++:y=h.charCodeAt(0)-48;else y=0;h=_}while(h);Dg(l)}function b$(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":b$(h),bs(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function JK(o,l,h,y){for(;o.nodeType===1;){var b=h;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[Xc])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==b.rel||o.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||o.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||o.getAttribute("title")!==(b.title==null?null:b.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(b.src==null?null:b.src)||o.getAttribute("type")!==(b.type==null?null:b.type)||o.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=no(o.nextSibling),o===null)break}return null}function XK(o,l,h){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=no(o.nextSibling),o===null))return null;return o}function w$(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function QK(o,l){var h=o.ownerDocument;if(o.data!=="$?"||h.readyState==="complete")l();else{var y=function(){l(),h.removeEventListener("DOMContentLoaded",y)};h.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function no(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var _$=null;function r4(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return o;l--}else h==="/$"&&l++}o=o.previousSibling}return null}function i4(o,l,h){switch(l=tw(h),o){case"html":if(o=l.documentElement,!o)throw Error(i(452));return o;case"head":if(o=l.head,!o)throw Error(i(453));return o;case"body":if(o=l.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Ag(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);bs(o)}var $s=new Map,n4=new Set;function rw(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Ja=pe.d;pe.d={f:KK,r:eee,D:tee,C:ree,L:iee,m:nee,X:oee,S:see,M:aee};function KK(){var o=Ja.f(),l=Wb();return o||l}function eee(o){var l=Da(o);l!==null&&l.tag===5&&l.type==="form"?ED(l):Ja.r(o)}var Dp=typeof document>"u"?null:document;function s4(o,l,h){var y=Dp;if(y&&typeof l=="string"&&l){var b=Ot(l);b='link[rel="'+o+'"][href="'+b+'"]',typeof h=="string"&&(b+='[crossorigin="'+h+'"]'),n4.has(b)||(n4.add(b),o={rel:o,crossOrigin:h,href:l},y.querySelector(b)===null&&(l=y.createElement("link"),Ti(l,"link",o),Er(l),y.head.appendChild(l)))}}function tee(o){Ja.D(o),s4("dns-prefetch",o,null)}function ree(o,l){Ja.C(o,l),s4("preconnect",o,l)}function iee(o,l,h){Ja.L(o,l,h);var y=Dp;if(y&&o&&l){var b='link[rel="preload"][as="'+Ot(l)+'"]';l==="image"&&h&&h.imageSrcSet?(b+='[imagesrcset="'+Ot(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(b+='[imagesizes="'+Ot(h.imageSizes)+'"]')):b+='[href="'+Ot(o)+'"]';var _=b;switch(l){case"style":_=kp(o);break;case"script":_=Fp(o)}$s.has(_)||(o=g({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:o,as:l},h),$s.set(_,o),y.querySelector(b)!==null||l==="style"&&y.querySelector(Og(_))||l==="script"&&y.querySelector(Rg(_))||(l=y.createElement("link"),Ti(l,"link",o),Er(l),y.head.appendChild(l)))}}function nee(o,l){Ja.m(o,l);var h=Dp;if(h&&o){var y=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+Ot(y)+'"][href="'+Ot(o)+'"]',_=b;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Fp(o)}if(!$s.has(_)&&(o=g({rel:"modulepreload",href:o},l),$s.set(_,o),h.querySelector(b)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Rg(_)))return}y=h.createElement("link"),Ti(y,"link",o),Er(y),h.head.appendChild(y)}}}function see(o,l,h){Ja.S(o,l,h);var y=Dp;if(y&&o){var b=nu(y).hoistableStyles,_=kp(o);l=l||"default";var x=b.get(_);if(!x){var A={loading:0,preload:null};if(x=y.querySelector(Og(_)))A.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":l},h),(h=$s.get(_))&&S$(o,h);var N=x=y.createElement("link");Er(N),Ti(N,"link",o),N._p=new Promise(function(H,ee){N.onload=H,N.onerror=ee}),N.addEventListener("load",function(){A.loading|=1}),N.addEventListener("error",function(){A.loading|=2}),A.loading|=4,iw(x,l,y)}x={type:"stylesheet",instance:x,count:1,state:A},b.set(_,x)}}}function oee(o,l){Ja.X(o,l);var h=Dp;if(h&&o){var y=nu(h).hoistableScripts,b=Fp(o),_=y.get(b);_||(_=h.querySelector(Rg(b)),_||(o=g({src:o,async:!0},l),(l=$s.get(b))&&T$(o,l),_=h.createElement("script"),Er(_),Ti(_,"link",o),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},y.set(b,_))}}function aee(o,l){Ja.M(o,l);var h=Dp;if(h&&o){var y=nu(h).hoistableScripts,b=Fp(o),_=y.get(b);_||(_=h.querySelector(Rg(b)),_||(o=g({src:o,async:!0,type:"module"},l),(l=$s.get(b))&&T$(o,l),_=h.createElement("script"),Er(_),Ti(_,"link",o),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},y.set(b,_))}}function o4(o,l,h,y){var b=(b=Ze.current)?rw(b):null;if(!b)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=kp(h.href),h=nu(b).hoistableStyles,y=h.get(l),y||(y={type:"style",instance:null,count:0,state:null},h.set(l,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=kp(h.href);var _=nu(b).hoistableStyles,x=_.get(o);if(x||(b=b.ownerDocument||b,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,x),(_=b.querySelector(Og(o)))&&!_._p&&(x.instance=_,x.state.loading=5),$s.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},$s.set(o,h),_||lee(b,o,h,x.state))),l&&y===null)throw Error(i(528,""));return x}if(l&&y!==null)throw Error(i(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Fp(h),h=nu(b).hoistableScripts,y=h.get(l),y||(y={type:"script",instance:null,count:0,state:null},h.set(l,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function kp(o){return'href="'+Ot(o)+'"'}function Og(o){return'link[rel="stylesheet"]['+o+"]"}function a4(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function lee(o,l,h,y){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?y.loading=1:(l=o.createElement("link"),y.preload=l,l.addEventListener("load",function(){return y.loading|=1}),l.addEventListener("error",function(){return y.loading|=2}),Ti(l,"link",h),Er(l),o.head.appendChild(l))}function Fp(o){return'[src="'+Ot(o)+'"]'}function Rg(o){return"script[async]"+o}function l4(o,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var y=o.querySelector('style[data-href~="'+Ot(h.href)+'"]');if(y)return l.instance=y,Er(y),y;var b=g({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),Er(y),Ti(y,"style",b),iw(y,h.precedence,o),l.instance=y;case"stylesheet":b=kp(h.href);var _=o.querySelector(Og(b));if(_)return l.state.loading|=4,l.instance=_,Er(_),_;y=a4(h),(b=$s.get(b))&&S$(y,b),_=(o.ownerDocument||o).createElement("link"),Er(_);var x=_;return x._p=new Promise(function(A,N){x.onload=A,x.onerror=N}),Ti(_,"link",y),l.state.loading|=4,iw(_,h.precedence,o),l.instance=_;case"script":return _=Fp(h.src),(b=o.querySelector(Rg(_)))?(l.instance=b,Er(b),b):(y=h,(b=$s.get(_))&&(y=g({},h),T$(y,b)),o=o.ownerDocument||o,b=o.createElement("script"),Er(b),Ti(b,"link",y),o.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(y=l.instance,l.state.loading|=4,iw(y,h.precedence,o));return l.instance}function iw(o,l,h){for(var y=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=y.length?y[y.length-1]:null,_=b,x=0;x<y.length;x++){var A=y[x];if(A.dataset.precedence===l)_=A;else if(_!==b)break}_?_.parentNode.insertBefore(o,_.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(o,l.firstChild))}function S$(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function T$(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var nw=null;function u4(o,l,h){if(nw===null){var y=new Map,b=nw=new Map;b.set(h,y)}else b=nw,y=b.get(h),y||(y=new Map,b.set(h,y));if(y.has(o))return y;for(y.set(o,null),h=h.getElementsByTagName(o),b=0;b<h.length;b++){var _=h[b];if(!(_[Xc]||_[It]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var x=_.getAttribute(l)||"";x=o+x;var A=y.get(x);A?A.push(_):y.set(x,[_])}}return y}function c4(o,l,h){o=o.ownerDocument||o,o.head.insertBefore(h,l==="title"?o.querySelector("head > title"):null)}function uee(o,l,h){if(h===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function d4(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Cg=null;function cee(){}function dee(o,l,h){if(Cg===null)throw Error(i(475));var y=Cg;if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var b=kp(h.href),_=o.querySelector(Og(b));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(y.count++,y=sw.bind(y),o.then(y,y)),l.state.loading|=4,l.instance=_,Er(_);return}_=o.ownerDocument||o,h=a4(h),(b=$s.get(b))&&S$(h,b),_=_.createElement("link"),Er(_);var x=_;x._p=new Promise(function(A,N){x.onload=A,x.onerror=N}),Ti(_,"link",h),l.instance=_}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(y.count++,l=sw.bind(y),o.addEventListener("load",l),o.addEventListener("error",l))}}function hee(){if(Cg===null)throw Error(i(475));var o=Cg;return o.stylesheets&&o.count===0&&E$(o,o.stylesheets),0<o.count?function(l){var h=setTimeout(function(){if(o.stylesheets&&E$(o,o.stylesheets),o.unsuspend){var y=o.unsuspend;o.unsuspend=null,y()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(h)}}:null}function sw(){if(this.count--,this.count===0){if(this.stylesheets)E$(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var ow=null;function E$(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,ow=new Map,l.forEach(pee,o),ow=null,sw.call(o))}function pee(o,l){if(!(l.state.loading&4)){var h=ow.get(o);if(h)var y=h.get(null);else{h=new Map,ow.set(o,h);for(var b=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var x=b[_];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(h.set(x.dataset.precedence,x),y=x)}y&&h.set(null,y)}b=l.instance,x=b.getAttribute("data-precedence"),_=h.get(x)||y,_===y&&h.set(null,b),h.set(x,b),this.count++,y=sw.bind(this),b.addEventListener("load",y),b.addEventListener("error",y),_?_.parentNode.insertBefore(b,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(b,o.firstChild)),l.state.loading|=4}}var Ig={$$typeof:k,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function fee(o,l,h,y,b,_,x,A){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ky(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ky(0),this.hiddenUpdates=ky(null),this.identifierPrefix=y,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function h4(o,l,h,y,b,_,x,A,N,H,ee,ie){return o=new fee(o,l,h,x,A,N,H,ie),l=1,_===!0&&(l|=24),_=qn(3,null,null,l),o.current=_,_.stateNode=o,l=sx(),l.refCount++,o.pooledCache=l,l.refCount++,_.memoizedState={element:y,isDehydrated:h,cache:l},ux(_),o}function p4(o){return o?(o=mp,o):mp}function f4(o,l,h,y,b,_){b=p4(b),y.context===null?y.context=b:y.pendingContext=b,y=uu(l),y.payload={element:h},_=_===void 0?null:_,_!==null&&(y.callback=_),h=cu(o,y,l),h!==null&&(Yn(h,o,l),lg(h,o,l))}function m4(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function x$(o,l){m4(o,l),(o=o.alternate)&&m4(o,l)}function y4(o){if(o.tag===13){var l=fp(o,67108864);l!==null&&Yn(l,o,67108864),x$(o,67108864)}}var aw=!0;function mee(o,l,h,y){var b=Q.T;Q.T=null;var _=pe.p;try{pe.p=2,$$(o,l,h,y)}finally{pe.p=_,Q.T=b}}function yee(o,l,h,y){var b=Q.T;Q.T=null;var _=pe.p;try{pe.p=8,$$(o,l,h,y)}finally{pe.p=_,Q.T=b}}function $$(o,l,h,y){if(aw){var b=M$(y);if(b===null)p$(o,l,y,lw,h),v4(o,y);else if(vee(b,o,l,h,y))y.stopPropagation();else if(v4(o,y),l&4&&-1<gee.indexOf(o)){for(;b!==null;){var _=Da(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var x=Pa(_.pendingLanes);if(x!==0){var A=_;for(A.pendingLanes|=2,A.entangledLanes|=2;x;){var N=1<<31-vn(x);A.entanglements[1]|=N,x&=~N}Jo(_),(Rt&6)===0&&(Bb=vs()+500,xg(0))}}break;case 13:A=fp(_,2),A!==null&&Yn(A,_,2),Wb(),x$(_,2)}if(_=M$(y),_===null&&p$(o,l,y,lw,h),_===b)break;b=_}b!==null&&y.stopPropagation()}else p$(o,l,y,null,h)}}function M$(o){return o=IE(o),A$(o)}var lw=null;function A$(o){if(lw=null,o=La(o),o!==null){var l=s(o);if(l===null)o=null;else{var h=l.tag;if(h===13){if(o=a(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return lw=o,null}function g4(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vE()){case Ly:return 2;case Dy:return 8;case Vn:case bE:return 32;case Q1:return 268435456;default:return 32}default:return 32}}var O$=!1,Tu=null,Eu=null,xu=null,Ng=new Map,Pg=new Map,$u=[],gee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function v4(o,l){switch(o){case"focusin":case"focusout":Tu=null;break;case"dragenter":case"dragleave":Eu=null;break;case"mouseover":case"mouseout":xu=null;break;case"pointerover":case"pointerout":Ng.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pg.delete(l.pointerId)}}function Lg(o,l,h,y,b,_){return o===null||o.nativeEvent!==_?(o={blockedOn:l,domEventName:h,eventSystemFlags:y,nativeEvent:_,targetContainers:[b]},l!==null&&(l=Da(l),l!==null&&y4(l)),o):(o.eventSystemFlags|=y,l=o.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),o)}function vee(o,l,h,y,b){switch(l){case"focusin":return Tu=Lg(Tu,o,l,h,y,b),!0;case"dragenter":return Eu=Lg(Eu,o,l,h,y,b),!0;case"mouseover":return xu=Lg(xu,o,l,h,y,b),!0;case"pointerover":var _=b.pointerId;return Ng.set(_,Lg(Ng.get(_)||null,o,l,h,y,b)),!0;case"gotpointercapture":return _=b.pointerId,Pg.set(_,Lg(Pg.get(_)||null,o,l,h,y,b)),!0}return!1}function b4(o){var l=La(o.target);if(l!==null){var h=s(l);if(h!==null){if(l=h.tag,l===13){if(l=a(h),l!==null){o.blockedOn=l,tu(o.priority,function(){if(h.tag===13){var y=Zn();y=Fy(y);var b=fp(h,y);b!==null&&Yn(b,h,y),x$(h,y)}});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function uw(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=M$(o.nativeEvent);if(h===null){h=o.nativeEvent;var y=new h.constructor(h.type,h);CE=y,h.target.dispatchEvent(y),CE=null}else return l=Da(h),l!==null&&y4(l),o.blockedOn=h,!1;l.shift()}return!0}function w4(o,l,h){uw(o)&&h.delete(l)}function bee(){O$=!1,Tu!==null&&uw(Tu)&&(Tu=null),Eu!==null&&uw(Eu)&&(Eu=null),xu!==null&&uw(xu)&&(xu=null),Ng.forEach(w4),Pg.forEach(w4)}function cw(o,l){o.blockedOn===l&&(o.blockedOn=null,O$||(O$=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bee)))}var dw=null;function _4(o){dw!==o&&(dw=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){dw===o&&(dw=null);for(var l=0;l<o.length;l+=3){var h=o[l],y=o[l+1],b=o[l+2];if(typeof y!="function"){if(A$(y||h)===null)continue;break}var _=Da(h);_!==null&&(o.splice(l,3),l-=3,Ax(_,{pending:!0,data:b,method:h.method,action:y},y,b))}}))}function Dg(o){function l(N){return cw(N,o)}Tu!==null&&cw(Tu,o),Eu!==null&&cw(Eu,o),xu!==null&&cw(xu,o),Ng.forEach(l),Pg.forEach(l);for(var h=0;h<$u.length;h++){var y=$u[h];y.blockedOn===o&&(y.blockedOn=null)}for(;0<$u.length&&(h=$u[0],h.blockedOn===null);)b4(h),h.blockedOn===null&&$u.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(y=0;y<h.length;y+=3){var b=h[y],_=h[y+1],x=b[Hr]||null;if(typeof _=="function")x||_4(h);else if(x){var A=null;if(_&&_.hasAttribute("formAction")){if(b=_,x=_[Hr]||null)A=x.formAction;else if(A$(b)!==null)continue}else A=x.action;typeof A=="function"?h[y+1]=A:(h.splice(y,3),y-=3),_4(h)}}}function R$(o){this._internalRoot=o}hw.prototype.render=R$.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(i(409));var h=l.current,y=Zn();f4(h,y,o,l,null,null)},hw.prototype.unmount=R$.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;f4(o.current,2,null,o,null,null),Wb(),l[$e]=null}};function hw(o){this._internalRoot=o}hw.prototype.unstable_scheduleHydration=function(o){if(o){var l=Ut();o={blockedOn:null,target:o,priority:l};for(var h=0;h<$u.length&&l!==0&&l<$u[h].priority;h++);$u.splice(h,0,o),h===0&&b4(o)}};var S4=t.version;if(S4!=="19.1.1")throw Error(i(527,S4,"19.1.1"));pe.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=d(l),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var wee={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pw.isDisabled&&pw.supportsFiber)try{Zc=pw.inject(wee),Xi=pw}catch{}}return Ug.createRoot=function(o,l){if(!n(o))throw Error(i(299));var h=!1,y="",b=FD,_=UD,x=jD,A=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(x=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(A=l.unstable_transitionCallbacks)),l=h4(o,1,!1,null,null,h,y,b,_,x,A,null),o[$e]=l.current,h$(o),new R$(l)},Ug.hydrateRoot=function(o,l,h){if(!n(o))throw Error(i(299));var y=!1,b="",_=FD,x=UD,A=jD,N=null,H=null;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(_=h.onUncaughtError),h.onCaughtError!==void 0&&(x=h.onCaughtError),h.onRecoverableError!==void 0&&(A=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(N=h.unstable_transitionCallbacks),h.formState!==void 0&&(H=h.formState)),l=h4(o,1,!0,l,h??null,y,b,_,x,A,N,H),l.context=p4(null),h=l.current,y=Zn(),y=Fy(y),b=uu(y),b.callback=null,cu(h,b,y),h=y,l.current.lanes=h,Jc(l,h),Jo(l),o[$e]=l.current,h$(o),new hw(l)},Ug.version="19.1.1",Ug}var P4;function Iee(){if(P4)return P$.exports;P4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),P$.exports=Cee(),P$.exports}var Nee=Iee();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var L4="popstate";function Pee(e={}){function t(n,s){let{pathname:a="/",search:c="",hash:d=""}=qh(n.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),w3("",{pathname:a,search:c,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){let a=n.document.querySelector("base"),c="";if(a&&a.getAttribute("href")){let d=n.location.href,f=d.indexOf("#");c=f===-1?d:d.slice(0,f)}return c+"#"+(typeof s=="string"?s:qv(s))}function i(n,s){Uo(n.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return Dee(t,r,i,e)}function ur(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Uo(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Lee(){return Math.random().toString(36).substring(2,10)}function D4(e,t){return{usr:e.state,key:e.key,idx:t}}function w3(e,t,r=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?qh(t):t,state:r,key:t&&t.key||i||Lee()}}function qv({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qh(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function Dee(e,t,r,i={}){let{window:n=document.defaultView,v5Compat:s=!1}=i,a=n.history,c="POP",d=null,f=g();f==null&&(f=0,a.replaceState({...a.state,idx:f},""));function g(){return(a.state||{idx:null}).idx}function v(){c="POP";let M=g(),R=M==null?null:M-f;f=M,d&&d({action:c,location:E.location,delta:R})}function w(M,R){c="PUSH";let I=w3(E.location,M,R);r&&r(I,M),f=g()+1;let k=D4(I,f),j=E.createHref(I);try{a.pushState(k,"",j)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;n.location.assign(j)}s&&d&&d({action:c,location:E.location,delta:1})}function S(M,R){c="REPLACE";let I=w3(E.location,M,R);r&&r(I,M),f=g();let k=D4(I,f),j=E.createHref(I);a.replaceState(k,"",j),s&&d&&d({action:c,location:E.location,delta:0})}function T(M){return kee(M)}let E={get action(){return c},get location(){return e(n,a)},listen(M){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(L4,v),d=M,()=>{n.removeEventListener(L4,v),d=null}},createHref(M){return t(n,M)},createURL:T,encodeLocation(M){let R=T(M);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:w,replace:S,go(M){return a.go(M)}};return E}function kee(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ur(r,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:qv(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function t7(e,t,r="/"){return Fee(e,t,r,!1)}function Fee(e,t,r,i){let n=typeof t=="string"?qh(t):t,s=Zl(n.pathname||"/",r);if(s==null)return null;let a=r7(e);Uee(a);let c=null;for(let d=0;c==null&&d<a.length;++d){let f=Jee(s);c=Zee(a[d],f,i)}return c}function r7(e,t=[],r=[],i="",n=!1){let s=(a,c,d=n,f)=>{let g={relativePath:f===void 0?a.path||"":f,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&d)return;ur(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let v=ql([i,g.relativePath]),w=r.concat(g);a.children&&a.children.length>0&&(ur(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),r7(a.children,t,w,v,d)),!(a.path==null&&!a.index)&&t.push({path:v,score:Hee(v,a.index),routesMeta:w})};return e.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))s(a,c);else for(let d of i7(a.path))s(a,c,!0,d)}),t}function i7(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,n=r.endsWith("?"),s=r.replace(/\?$/,"");if(i.length===0)return n?[s,""]:[s];let a=i7(i.join("/")),c=[];return c.push(...a.map(d=>d===""?s:[s,d].join("/"))),n&&c.push(...a),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function Uee(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Wee(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var jee=/^:[\w-]+$/,zee=3,Vee=2,Gee=1,qee=10,Bee=-2,k4=e=>e==="*";function Hee(e,t){let r=e.split("/"),i=r.length;return r.some(k4)&&(i+=Bee),t&&(i+=Vee),r.filter(n=>!k4(n)).reduce((n,s)=>n+(jee.test(s)?zee:s===""?Gee:qee),i)}function Wee(e,t){return e.length===t.length&&e.slice(0,-1).every((i,n)=>i===t[n])?e[e.length-1]-t[t.length-1]:0}function Zee(e,t,r=!1){let{routesMeta:i}=e,n={},s="/",a=[];for(let c=0;c<i.length;++c){let d=i[c],f=c===i.length-1,g=s==="/"?t:t.slice(s.length)||"/",v=OS({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),w=d.route;if(!v&&f&&r&&!i[i.length-1].route.index&&(v=OS({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(n,v.params),a.push({params:n,pathname:ql([s,v.pathname]),pathnameBase:ete(ql([s,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(s=ql([s,v.pathnameBase]))}return a}function OS(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=Yee(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let s=n[0],a=s.replace(/(.)\/+$/,"$1"),c=n.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:v},w)=>{if(g==="*"){let T=c[w]||"";a=s.slice(0,s.length-T.length).replace(/(.)\/+$/,"$1")}const S=c[w];return v&&!S?f[g]=void 0:f[g]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:e}}function Yee(e,t=!1,r=!0){Uo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,d)=>(i.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),i]}function Jee(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Uo(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Zl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function Xee(e,t="/"){let{pathname:r,search:i="",hash:n=""}=typeof e=="string"?qh(e):e;return{pathname:r?r.startsWith("/")?r:Qee(r,t):t,search:tte(i),hash:rte(n)}}function Qee(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function F$(e,t,r,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Kee(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function n7(e){let t=Kee(e);return t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase)}function s7(e,t,r,i=!1){let n;typeof e=="string"?n=qh(e):(n={...e},ur(!n.pathname||!n.pathname.includes("?"),F$("?","pathname","search",n)),ur(!n.pathname||!n.pathname.includes("#"),F$("#","pathname","hash",n)),ur(!n.search||!n.search.includes("#"),F$("#","search","hash",n)));let s=e===""||n.pathname==="",a=s?"/":n.pathname,c;if(a==null)c=r;else{let v=t.length-1;if(!i&&a.startsWith("..")){let w=a.split("/");for(;w[0]==="..";)w.shift(),v-=1;n.pathname=w.join("/")}c=v>=0?t[v]:"/"}let d=Xee(n,c),f=a&&a!=="/"&&a.endsWith("/"),g=(s||a===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var ql=e=>e.join("/").replace(/\/\/+/g,"/"),ete=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),tte=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rte=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ite(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var o7=["POST","PUT","PATCH","DELETE"];new Set(o7);var nte=["GET",...o7];new Set(nte);var ly=ne.createContext(null);ly.displayName="DataRouter";var nT=ne.createContext(null);nT.displayName="DataRouterState";ne.createContext(!1);var a7=ne.createContext({isTransitioning:!1});a7.displayName="ViewTransition";var ste=ne.createContext(new Map);ste.displayName="Fetchers";var ote=ne.createContext(null);ote.displayName="Await";var Ca=ne.createContext(null);Ca.displayName="Navigation";var _1=ne.createContext(null);_1.displayName="Location";var Ql=ne.createContext({outlet:null,matches:[],isDataRoute:!1});Ql.displayName="Route";var fI=ne.createContext(null);fI.displayName="RouteError";function ate(e,{relative:t}={}){ur(S1(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=ne.useContext(Ca),{hash:n,pathname:s,search:a}=T1(e,{relative:t}),c=s;return r!=="/"&&(c=s==="/"?r:ql([r,s])),i.createHref({pathname:c,search:a,hash:n})}function S1(){return ne.useContext(_1)!=null}function Bh(){return ur(S1(),"useLocation() may be used only in the context of a <Router> component."),ne.useContext(_1).location}var l7="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function u7(e){ne.useContext(Ca).static||ne.useLayoutEffect(e)}function lte(){let{isDataRoute:e}=ne.useContext(Ql);return e?_te():ute()}function ute(){ur(S1(),"useNavigate() may be used only in the context of a <Router> component.");let e=ne.useContext(ly),{basename:t,navigator:r}=ne.useContext(Ca),{matches:i}=ne.useContext(Ql),{pathname:n}=Bh(),s=JSON.stringify(n7(i)),a=ne.useRef(!1);return u7(()=>{a.current=!0}),ne.useCallback((d,f={})=>{if(Uo(a.current,l7),!a.current)return;if(typeof d=="number"){r.go(d);return}let g=s7(d,JSON.parse(s),n,f.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:ql([t,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[t,r,s,n,e])}ne.createContext(null);function T1(e,{relative:t}={}){let{matches:r}=ne.useContext(Ql),{pathname:i}=Bh(),n=JSON.stringify(n7(r));return ne.useMemo(()=>s7(e,JSON.parse(n),i,t==="path"),[e,n,i,t])}function cte(e,t){return c7(e,t)}function c7(e,t,r,i,n){ur(S1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=ne.useContext(Ca),{matches:a}=ne.useContext(Ql),c=a[a.length-1],d=c?c.params:{},f=c?c.pathname:"/",g=c?c.pathnameBase:"/",v=c&&c.route;{let I=v&&v.path||"";d7(f,!v||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let w=Bh(),S;if(t){let I=typeof t=="string"?qh(t):t;ur(g==="/"||I.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${I.pathname}" was given in the \`location\` prop.`),S=I}else S=w;let T=S.pathname||"/",E=T;if(g!=="/"){let I=g.replace(/^\//,"").split("/");E="/"+T.replace(/^\//,"").split("/").slice(I.length).join("/")}let M=t7(e,{pathname:E});Uo(v||M!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Uo(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=mte(M&&M.map(I=>Object.assign({},I,{params:Object.assign({},d,I.params),pathname:ql([g,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?g:ql([g,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),a,r,i,n);return t&&R?ne.createElement(_1.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},R):R}function dte(){let e=wte(),t=ite(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=ne.createElement(ne.Fragment,null,ne.createElement("p",null,"💿 Hey developer 👋"),ne.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ne.createElement("code",{style:s},"ErrorBoundary")," or"," ",ne.createElement("code",{style:s},"errorElement")," prop on your route.")),ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},t),r?ne.createElement("pre",{style:n},r):null,a)}var hte=ne.createElement(dte,null),pte=class extends ne.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?ne.createElement(Ql.Provider,{value:this.props.routeContext},ne.createElement(fI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function fte({routeContext:e,match:t,children:r}){let i=ne.useContext(ly);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),ne.createElement(Ql.Provider,{value:e},r)}function mte(e,t=[],r=null,i=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,a=r?.errors;if(a!=null){let f=s.findIndex(g=>g.route.id&&a?.[g.route.id]!==void 0);ur(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let c=!1,d=-1;if(r)for(let f=0;f<s.length;f++){let g=s[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:v,errors:w}=r,S=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||S){c=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((f,g,v)=>{let w,S=!1,T=null,E=null;r&&(w=a&&g.route.id?a[g.route.id]:void 0,T=g.route.errorElement||hte,c&&(d<0&&v===0?(d7("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,E=null):d===v&&(S=!0,E=g.route.hydrateFallbackElement||null)));let M=t.concat(s.slice(0,v+1)),R=()=>{let I;return w?I=T:S?I=E:g.route.Component?I=ne.createElement(g.route.Component,null):g.route.element?I=g.route.element:I=f,ne.createElement(fte,{match:g,routeContext:{outlet:f,matches:M,isDataRoute:r!=null},children:I})};return r&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?ne.createElement(pte,{location:r.location,revalidation:r.revalidation,component:T,error:w,children:R(),routeContext:{outlet:null,matches:M,isDataRoute:!0},unstable_onError:i}):R()},null)}function mI(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yte(e){let t=ne.useContext(ly);return ur(t,mI(e)),t}function gte(e){let t=ne.useContext(nT);return ur(t,mI(e)),t}function vte(e){let t=ne.useContext(Ql);return ur(t,mI(e)),t}function yI(e){let t=vte(e),r=t.matches[t.matches.length-1];return ur(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function bte(){return yI("useRouteId")}function wte(){let e=ne.useContext(fI),t=gte("useRouteError"),r=yI("useRouteError");return e!==void 0?e:t.errors?.[r]}function _te(){let{router:e}=yte("useNavigate"),t=yI("useNavigate"),r=ne.useRef(!1);return u7(()=>{r.current=!0}),ne.useCallback(async(n,s={})=>{Uo(r.current,l7),r.current&&(typeof n=="number"?e.navigate(n):await e.navigate(n,{fromRouteId:t,...s}))},[e,t])}var F4={};function d7(e,t,r){!t&&!F4[e]&&(F4[e]=!0,Uo(!1,r))}ne.memo(Ste);function Ste({routes:e,future:t,state:r,unstable_onError:i}){return c7(e,void 0,r,i,t)}function h7(e){ur(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Tte({basename:e="/",children:t=null,location:r,navigationType:i="POP",navigator:n,static:s=!1}){ur(!S1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),c=ne.useMemo(()=>({basename:a,navigator:n,static:s,future:{}}),[a,n,s]);typeof r=="string"&&(r=qh(r));let{pathname:d="/",search:f="",hash:g="",state:v=null,key:w="default"}=r,S=ne.useMemo(()=>{let T=Zl(d,a);return T==null?null:{location:{pathname:T,search:f,hash:g,state:v,key:w},navigationType:i}},[a,d,f,g,v,w,i]);return Uo(S!=null,`<Router basename="${a}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:ne.createElement(Ca.Provider,{value:c},ne.createElement(_1.Provider,{children:t,value:S}))}function Ete({children:e,location:t}){return cte(_3(e),t)}function _3(e,t=[]){let r=[];return ne.Children.forEach(e,(i,n)=>{if(!ne.isValidElement(i))return;let s=[...t,n];if(i.type===ne.Fragment){r.push.apply(r,_3(i.props.children,s));return}ur(i.type===h7,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ur(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=_3(i.props.children,s)),r.push(a)}),r}var h_="get",p_="application/x-www-form-urlencoded";function sT(e){return e!=null&&typeof e.tagName=="string"}function xte(e){return sT(e)&&e.tagName.toLowerCase()==="button"}function $te(e){return sT(e)&&e.tagName.toLowerCase()==="form"}function Mte(e){return sT(e)&&e.tagName.toLowerCase()==="input"}function Ate(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ote(e,t){return e.button===0&&(!t||t==="_self")&&!Ate(e)}var fw=null;function Rte(){if(fw===null)try{new FormData(document.createElement("form"),0),fw=!1}catch{fw=!0}return fw}var Cte=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function U$(e){return e!=null&&!Cte.has(e)?(Uo(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${p_}"`),null):e}function Ite(e,t){let r,i,n,s,a;if($te(e)){let c=e.getAttribute("action");i=c?Zl(c,t):null,r=e.getAttribute("method")||h_,n=U$(e.getAttribute("enctype"))||p_,s=new FormData(e)}else if(xte(e)||Mte(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||c.getAttribute("action");if(i=d?Zl(d,t):null,r=e.getAttribute("formmethod")||c.getAttribute("method")||h_,n=U$(e.getAttribute("formenctype"))||U$(c.getAttribute("enctype"))||p_,s=new FormData(c,e),!Rte()){let{name:f,type:g,value:v}=e;if(g==="image"){let w=f?`${f}.`:"";s.append(`${w}x`,"0"),s.append(`${w}y`,"0")}else f&&s.append(f,v)}}else{if(sT(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=h_,i=null,n=p_,a=e}return s&&n==="text/plain"&&(a=s,s=void 0),{action:i,method:r.toLowerCase(),encType:n,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gI(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Nte(e,t,r){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${r}`:t&&Zl(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function Pte(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Lte(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Dte(e,t,r){let i=await Promise.all(e.map(async n=>{let s=t.routes[n.route.id];if(s){let a=await Pte(s,r);return a.links?a.links():[]}return[]}));return jte(i.flat(1).filter(Lte).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function U4(e,t,r,i,n,s){let a=(d,f)=>r[f]?d.route.id!==r[f].route.id:!0,c=(d,f)=>r[f].pathname!==d.pathname||r[f].route.path?.endsWith("*")&&r[f].params["*"]!==d.params["*"];return s==="assets"?t.filter((d,f)=>a(d,f)||c(d,f)):s==="data"?t.filter((d,f)=>{let g=i.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(a(d,f)||c(d,f))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function kte(e,t,{includeHydrateFallback:r}={}){return Fte(e.map(i=>{let n=t.routes[i.route.id];if(!n)return[];let s=[n.module];return n.clientActionModule&&(s=s.concat(n.clientActionModule)),n.clientLoaderModule&&(s=s.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(s=s.concat(n.hydrateFallbackModule)),n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function Fte(e){return[...new Set(e)]}function Ute(e){let t={},r=Object.keys(e).sort();for(let i of r)t[i]=e[i];return t}function jte(e,t){let r=new Set;return new Set(t),e.reduce((i,n)=>{let s=JSON.stringify(Ute(n));return r.has(s)||(r.add(s),i.push({key:s,link:n})),i},[])}function p7(){let e=ne.useContext(ly);return gI(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function zte(){let e=ne.useContext(nT);return gI(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var vI=ne.createContext(void 0);vI.displayName="FrameworkContext";function f7(){let e=ne.useContext(vI);return gI(e,"You must render this element inside a <HydratedRouter> element"),e}function Vte(e,t){let r=ne.useContext(vI),[i,n]=ne.useState(!1),[s,a]=ne.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:v}=t,w=ne.useRef(null);ne.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let E=R=>{R.forEach(I=>{a(I.isIntersecting)})},M=new IntersectionObserver(E,{threshold:.5});return w.current&&M.observe(w.current),()=>{M.disconnect()}}},[e]),ne.useEffect(()=>{if(i){let E=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(E)}}},[i]);let S=()=>{n(!0)},T=()=>{n(!1),a(!1)};return r?e!=="intent"?[s,w,{}]:[s,w,{onFocus:jg(c,S),onBlur:jg(d,T),onMouseEnter:jg(f,S),onMouseLeave:jg(g,T),onTouchStart:jg(v,S)}]:[!1,w,{}]}function jg(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Gte({page:e,...t}){let{router:r}=p7(),i=ne.useMemo(()=>t7(r.routes,e,r.basename),[r.routes,e,r.basename]);return i?ne.createElement(Bte,{page:e,matches:i,...t}):null}function qte(e){let{manifest:t,routeModules:r}=f7(),[i,n]=ne.useState([]);return ne.useEffect(()=>{let s=!1;return Dte(e,t,r).then(a=>{s||n(a)}),()=>{s=!0}},[e,t,r]),i}function Bte({page:e,matches:t,...r}){let i=Bh(),{manifest:n,routeModules:s}=f7(),{basename:a}=p7(),{loaderData:c,matches:d}=zte(),f=ne.useMemo(()=>U4(e,t,d,n,i,"data"),[e,t,d,n,i]),g=ne.useMemo(()=>U4(e,t,d,n,i,"assets"),[e,t,d,n,i]),v=ne.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let T=new Set,E=!1;if(t.forEach(R=>{let I=n.routes[R.route.id];!I||!I.hasLoader||(!f.some(k=>k.route.id===R.route.id)&&R.route.id in c&&s[R.route.id]?.shouldRevalidate||I.hasClientLoader?E=!0:T.add(R.route.id))}),T.size===0)return[];let M=Nte(e,a,"data");return E&&T.size>0&&M.searchParams.set("_routes",t.filter(R=>T.has(R.route.id)).map(R=>R.route.id).join(",")),[M.pathname+M.search]},[a,c,i,n,f,t,e,s]),w=ne.useMemo(()=>kte(g,n),[g,n]),S=qte(g);return ne.createElement(ne.Fragment,null,v.map(T=>ne.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...r})),w.map(T=>ne.createElement("link",{key:T,rel:"modulepreload",href:T,...r})),S.map(({key:T,link:E})=>ne.createElement("link",{key:T,nonce:r.nonce,...E})))}function Hte(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var m7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{m7&&(window.__reactRouterVersion="7.8.2")}catch{}function Wte({basename:e,children:t,window:r}){let i=ne.useRef();i.current==null&&(i.current=Pee({window:r,v5Compat:!0}));let n=i.current,[s,a]=ne.useState({action:n.action,location:n.location}),c=ne.useCallback(d=>{ne.startTransition(()=>a(d))},[a]);return ne.useLayoutEffect(()=>n.listen(c),[n,c]),ne.createElement(Tte,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:n})}var y7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,g7=ne.forwardRef(function({onClick:t,discover:r="render",prefetch:i="none",relative:n,reloadDocument:s,replace:a,state:c,target:d,to:f,preventScrollReset:g,viewTransition:v,...w},S){let{basename:T}=ne.useContext(Ca),E=typeof f=="string"&&y7.test(f),M,R=!1;if(typeof f=="string"&&E&&(M=f,m7))try{let he=new URL(window.location.href),me=f.startsWith("//")?new URL(he.protocol+f):new URL(f),Oe=Zl(me.pathname,T);me.origin===he.origin&&Oe!=null?f=Oe+me.search+me.hash:R=!0}catch{Uo(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=ate(f,{relative:n}),[k,j,P]=Vte(i,w),X=Xte(f,{replace:a,state:c,target:d,preventScrollReset:g,relative:n,viewTransition:v});function ae(he){t&&t(he),he.defaultPrevented||X(he)}let fe=ne.createElement("a",{...w,...P,href:M||I,onClick:R||s?t:ae,ref:Hte(S,j),target:d,"data-discover":!E&&r==="render"?"true":void 0});return k&&!E?ne.createElement(ne.Fragment,null,fe,ne.createElement(Gte,{page:I})):fe});g7.displayName="Link";var Zte=ne.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:i="",end:n=!1,style:s,to:a,viewTransition:c,children:d,...f},g){let v=T1(a,{relative:f.relative}),w=Bh(),S=ne.useContext(nT),{navigator:T,basename:E}=ne.useContext(Ca),M=S!=null&&rre(v)&&c===!0,R=T.encodeLocation?T.encodeLocation(v).pathname:v.pathname,I=w.pathname,k=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;r||(I=I.toLowerCase(),k=k?k.toLowerCase():null,R=R.toLowerCase()),k&&E&&(k=Zl(k,E)||k);const j=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let P=I===R||!n&&I.startsWith(R)&&I.charAt(j)==="/",X=k!=null&&(k===R||!n&&k.startsWith(R)&&k.charAt(R.length)==="/"),ae={isActive:P,isPending:X,isTransitioning:M},fe=P?t:void 0,he;typeof i=="function"?he=i(ae):he=[i,P?"active":null,X?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let me=typeof s=="function"?s(ae):s;return ne.createElement(g7,{...f,"aria-current":fe,className:he,ref:g,style:me,to:a,viewTransition:c},typeof d=="function"?d(ae):d)});Zte.displayName="NavLink";var Yte=ne.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:i,replace:n,state:s,method:a=h_,action:c,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:v,...w},S)=>{let T=ere(),E=tre(c,{relative:f}),M=a.toLowerCase()==="get"?"get":"post",R=typeof c=="string"&&y7.test(c),I=k=>{if(d&&d(k),k.defaultPrevented)return;k.preventDefault();let j=k.nativeEvent.submitter,P=j?.getAttribute("formmethod")||a;T(j||k.currentTarget,{fetcherKey:t,method:P,navigate:r,replace:n,state:s,relative:f,preventScrollReset:g,viewTransition:v})};return ne.createElement("form",{ref:S,method:M,action:E,onSubmit:i?d:I,...w,"data-discover":!R&&e==="render"?"true":void 0})});Yte.displayName="Form";function Jte(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function v7(e){let t=ne.useContext(ly);return ur(t,Jte(e)),t}function Xte(e,{target:t,replace:r,state:i,preventScrollReset:n,relative:s,viewTransition:a}={}){let c=lte(),d=Bh(),f=T1(e,{relative:s});return ne.useCallback(g=>{if(Ote(g,t)){g.preventDefault();let v=r!==void 0?r:qv(d)===qv(f);c(e,{replace:v,state:i,preventScrollReset:n,relative:s,viewTransition:a})}},[d,c,f,r,i,t,e,n,s,a])}var Qte=0,Kte=()=>`__${String(++Qte)}__`;function ere(){let{router:e}=v7("useSubmit"),{basename:t}=ne.useContext(Ca),r=bte();return ne.useCallback(async(i,n={})=>{let{action:s,method:a,encType:c,formData:d,body:f}=Ite(i,t);if(n.navigate===!1){let g=n.fetcherKey||Kte();await e.fetch(g,r,n.action||s,{preventScrollReset:n.preventScrollReset,formData:d,body:f,formMethod:n.method||a,formEncType:n.encType||c,flushSync:n.flushSync})}else await e.navigate(n.action||s,{preventScrollReset:n.preventScrollReset,formData:d,body:f,formMethod:n.method||a,formEncType:n.encType||c,replace:n.replace,state:n.state,fromRouteId:r,flushSync:n.flushSync,viewTransition:n.viewTransition})},[e,t,r])}function tre(e,{relative:t}={}){let{basename:r}=ne.useContext(Ca),i=ne.useContext(Ql);ur(i,"useFormAction must be used inside a RouteContext");let[n]=i.matches.slice(-1),s={...T1(e||".",{relative:t})},a=Bh();if(e==null){s.search=a.search;let c=new URLSearchParams(s.search),d=c.getAll("index");if(d.some(g=>g==="")){c.delete("index"),d.filter(v=>v).forEach(v=>c.append("index",v));let g=c.toString();s.search=g?`?${g}`:""}}return(!e||e===".")&&n.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:ql([r,s.pathname])),qv(s)}function rre(e,{relative:t}={}){let r=ne.useContext(a7);ur(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=v7("useViewTransitionState"),n=T1(e,{relative:t});if(!r.isTransitioning)return!1;let s=Zl(r.currentLocation.pathname,i)||r.currentLocation.pathname,a=Zl(r.nextLocation.pathname,i)||r.nextLocation.pathname;return OS(n.pathname,a)!=null||OS(n.pathname,s)!=null}function u(e,t,r,i){var n,s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(s<3?n(a):s>3?n(t,r,a):n(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a}function hOe(e,t){return function(r,i){t(r,i,e)}}function pOe(e,t,r,i){function n(s){return s instanceof r?s:new r((function(a){a(s)}))}return new(r||(r=Promise))((function(s,a){function c(g){try{f(i.next(g))}catch(v){a(v)}}function d(g){try{f(i.throw(g))}catch(v){a(v)}}function f(g){g.done?s(g.value):n(g.value).then(c,d)}f((i=i.apply(e,[])).next())}))}function fOe(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,n;if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if(typeof i!="function")throw new TypeError("Object not disposable.");n&&(i=function(){try{n.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:i,async:r})}return t}var ire=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function mOe(e){function t(s){e.error=e.hasError?new ire(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var r,i=0;function n(){for(;r=e.stack.pop();)try{if(!r.async&&i===1)return i=0,e.stack.push(r),Promise.resolve().then(n);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(s).then(n,(function(a){return t(a),n()}))}else i|=1}catch(a){t(a)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return n()}const nre="modulepreload",sre=function(e){return"/capitals-map/"+e},j4={},ue=function(t,r,i){let n=Promise.resolve();if(r&&r.length>0){let d=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");n=d(r.map(f=>{if(f=sre(f),f in j4)return;j4[f]=!0;const g=f.endsWith(".css"),v=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${v}`))return;const w=document.createElement("link");if(w.rel=g?"stylesheet":nre,g||(w.as="script"),w.crossOrigin="",w.href=f,c&&w.setAttribute("nonce",c),document.head.appendChild(w),g)return new Promise((S,T)=>{w.addEventListener("load",S),w.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return n.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return t().catch(s)})};let fc;function V(e){return typeof fc[e]=="function"?fc[e]=fc[e](globalThis):fc[e]}fc=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},V.add=(e,t,r,i)=>{(i||fc[e]===void 0)&&(fc[e]=t),r&&V(e)},V.cache=fc,V.add("big-integer-warning-enabled",!0),V.add("esri-deprecation-warnings",!0),V.add("esri-tests-disable-screenshots",!1),V.add("esri-tests-use-full-window",!1),V.add("esri-tests-post-to-influx",!0),V.add("esri-cim-animations-enable-status","enabled"),V.add("esri-cim-animations-spotlight",!1),V.add("esri-cim-animations-freeze-time",!1),(()=>{V.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(V.add("host-browser",e),V.add("host-node",typeof globalThis.process=="object"&&globalThis.process.versions?.node&&globalThis.process.versions.v8),V.add("dom",e),V("host-browser")){const t=navigator,r=t.userAgent,i=t.appVersion,n=parseFloat(i);if(V.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),V.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),V.add("khtml",i.includes("Konqueror")?n:void 0),V.add("edge",parseFloat(r.split("Edge/")[1])||void 0),V.add("opr",parseFloat(r.split("OPR/")[1])||void 0),V.add("webkit",!V("wp")&&!V("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),V.add("chrome",!V("edge")&&!V("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),V.add("android",!V("wp")&&parseFloat(r.split("Android ")[1])||void 0),V.add("safari",!i.includes("Safari")||V("wp")||V("chrome")||V("android")||V("edge")||V("opr")?void 0:parseFloat(i.split("Version/")[1])),V.add("mac",i.includes("Macintosh")),!V("wp")&&/(iPhone|iPod|iPad)/.test(r)){const s=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",c=parseFloat(a.replace(/_/,".").replaceAll("_",""));V.add(s,c),V.add("ios",c)}V("webkit")||(!r.includes("Gecko")||V("wp")||V("khtml")||V("edge")||V.add("mozilla",n),V("mozilla")&&V.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&V.add("esri-mobile",t),r&&V.add("esri-iPhone",r),V.add("esri-geolocation",!!navigator.geolocation)}V.add("esri-wasm","WebAssembly"in globalThis),V.add("esri-performance-mode-frames-between-render",20),V.add("esri-force-performance-mode",!1),V.add("esri-shared-array-buffer",(()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t})),V.add("wasm-simd",(()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))})),V.add("esri-atomics","Atomics"in globalThis),V.add("esri-workers","Worker"in globalThis),V.add("web-feat:cache","caches"in globalThis),V.add("esri-workers-arraybuffer-transfer",!V("safari")||Number(V("safari"))>=12),V.add("workers-pool-size",8),V.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),V.add("featurelayer-simplify-payload-size-factors",[1,1,4]),V.add("featurelayer-fast-triangulation-enabled",!0),V.add("featurelayer-animation-enabled",!0),V.add("featurelayer-snapshot-enabled",!0),V.add("featurelayer-snapshot-initial-tolerance",0),V.add("featurelayer-snapshot-point-min-threshold",8e4),V.add("featurelayer-snapshot-point-max-threshold",4e5),V.add("featurelayer-snapshot-multipoint-min-threshold",2e4),V.add("featurelayer-snapshot-multipoint-max-threshold",1e5),V.add("featurelayer-snapshot-polygon-min-threshold",1e3),V.add("featurelayer-snapshot-polygon-max-threshold",2e3),V.add("featurelayer-snapshot-polyline-min-threshold",1e3),V.add("featurelayer-snapshot-polyline-max-threshold",2e3),V.add("featurelayer-snapshot-max-vertex-count",25e4),V.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!1),V.add("featurelayer-snapshot-concurrency",4),V.add("featurelayer-snapshot-coverage",.1),V.add("featurelayer-query-max-depth",4),V.add("featurelayer-query-pausing-enabled",!1),V.add("featurelayer-query-tile-concurrency",4),V.add("featurelayer-query-tile-max-features",6e5),V.add("featurelayer-advanced-symbols",!1),V.add("featurelayer-pbf",!0),V.add("featurelayer-pbf-statistics",!1),V.add("feature-layers-workers",!0),V.add("feature-polyline-generalization-factor",1),V.add("mapview-transitions-duration",200),V.add("mapview-essential-goto-duration",200),V.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),V.add("mapserver-pbf-version-support",10.81),V.add("mapservice-popup-identify-max-tolerance",20),V.add("request-queue-concurrency-hosted",16),V.add("request-queue-concurrency-non-hosted",4),V.add("curve-densification-coarse-segments",128),V.add("curve-densification-max-segments",2e3),V.add("curve-densification-min-segments",3),V.add("curve-densification-pixel-deviation",.5),V.add("view-readyState-waiting-delay",1e3),V.add("gradient-depth-bias",.01),V.add("gradient-depth-epsilon",1e-8),V.add("enable-feature:esri-compress-textures",!0),V("host-webworker")||V("host-browser")&&(V.add("esri-csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),V.add("esri-image-decode",(()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{V.add("esri-image-decode",!0,!0,!0)})).catch((()=>{V.add("esri-image-decode",!1,!0,!0)}))}return!1})),V.add("esri-url-encodes-apostrophe",(()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")})))})();function yOe(e){}function ore(e){return()=>e}function gOe(e){return e}var Pn;let are=(Pn=class{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Pn._m}getInt(){return this._seed=(Pn._a*this._seed+Pn._c)%Pn._m,this._seed}getFloat(){return this.getInt()/(Pn._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/Pn._m*i}},Pn._m=2147483647,Pn._a=48271,Pn._c=0,Pn);const lre=1.5,vOe=1/lre,bOe=.5;function wOe(e,t){return t?e.filter(((r,i,n)=>n.findIndex(t.bind(null,r))===i)):Array.from(new Set(e))}function ure(e,t,r,i,n,s,a){if(e==null&&i==null)return!0;t=Math.max(0,t),n=Math.max(0,n),r=Math.max(0,r<0?(e?.length??0)+r:r),s=Math.max(0,s<0?(i?.length??0)+s:s);const c=r-t;if(e==null||i==null||c!==s-n)return!1;if(a){for(let d=0;d<c;d++)if(!a(e[t+d],i[n+d]))return!1}else for(let d=0;d<c;d++)if(e[t+d]!==i[n+d])return!1;return!0}function oT(e,t,r){return ure(e,0,e?.length??0,t,0,t?.length??0,r)}function z4(e,t,r){let i,n;return r?(i=t.filter((s=>!e.some((a=>r(a,s))))),n=e.filter((s=>!t.some((a=>r(a,s)))))):(i=t.filter((s=>!e.includes(s))),n=e.filter((s=>!t.includes(s)))),{added:i,removed:n}}function _Oe(e){return e&&typeof e.length=="number"}let b7=class{constructor(){this.last=0}};const w7=new b7;function S3(e,t,r,i){i=i||w7;const n=Math.max(0,i.last-10);for(let a=n;a<r;++a)if(e[a]===t)return i.last=a,a;const s=Math.min(n,r);for(let a=0;a<s;++a)if(e[a]===t)return i.last=a,a;return-1}function cre(e,t,r,i){const n=e.length,s=S3(e,t,n,i);if(s!==-1)return e[s]=e[n-1],e.pop(),t}const ao=new Set;function dre(e,t,r=e.length,i=t.length,n,s){if(i===0||r===0)return r;ao.clear();for(let c=0;c<i;++c)ao.add(t[c]);n=n||w7;const a=Math.max(0,n.last-10);for(let c=a;c<r;++c)if(ao.has(e[c])&&(s?.push(e[c]),ao.delete(e[c]),e[c]=e[r-1],--r,--c,ao.size===0||r===0))return ao.clear(),r;for(let c=0;c<a;++c)if(ao.has(e[c])&&(s?.push(e[c]),ao.delete(e[c]),e[c]=e[r-1],--r,--c,ao.size===0||r===0))return ao.clear(),r;return ao.clear(),r}function TOe(e,t,r){const i=e.length;if(t>=i)return e.slice();const n=_7(r),s=new Set,a=[];for(;a.length<t;){const c=Math.floor(n()*i);s.has(c)||(s.add(c),a.push(e[c]))}return a}function _7(e){return e?(V4.seed=e,()=>V4.getFloat()):Math.random}const V4=new are;function EOe(e,t){if(!e)return e;const r=_7(t);for(let i=e.length-1;i>0;i--){const n=Math.floor(r()*(i+1)),s=e[i];e[i]=e[n],e[n]=s}return e}function bI(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function Yl(e,t){return e!=null}const xOe=[];function $Oe(e){return e instanceof ArrayBuffer}function wI(e){return e?.constructor?.name==="Int8Array"}function S7(e){return e?.constructor?.name==="Uint8Array"}function T7(e){return e?.constructor?.name==="Uint8ClampedArray"}function _I(e){return e?.constructor?.name==="Int16Array"}function E7(e){return e?.constructor?.name==="Uint16Array"}function SI(e){return e?.constructor?.name==="Int32Array"}function x7(e){return e?.constructor?.name==="Uint32Array"}function hre(e){return e?.constructor?.name==="Float16Array"}function aT(e){return e?.constructor?.name==="Float32Array"}function lT(e){return e?.constructor?.name==="Float64Array"}function pre(e){return"buffer"in e}const $7=1024;function MOe(e){return lT(e)||aT(e)||SI(e)||_I(e)||wI(e)}function AOe(e){return lT(e)||aT(e)}function OOe(e){return lT(e)?179769e303:hre(e)?65504:aT(e)?3402823e32:x7(e)?4294967295:E7(e)?65535:S7(e)||T7(e)?255:SI(e)?2147483647:_I(e)?32767:wI(e)?127:256}const ROe=-32768,COe=-2147483648;function fre(e,t){let r;for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function U(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=O7(e);if(t!=null)return t;if(RS(e))return e.clone();if(M7(e))return e.map(U);if(A7(e))throw new Error("Trying to clone an unclonable Accessor instance");const r={};for(const i of Object.getOwnPropertyNames(e))r[i]=U(e[i]);return r}function T3(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=O7(e);if(t!=null)return t;if(M7(e)){let i=!0;const n=e.map((s=>{const a=T3(s);return s!=null&&a==null&&(i=!1),a}));return i?n:null}if(RS(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(A7(e))return null;const r=new(Object.getPrototypeOf(e)).constructor;for(const i of Object.getOwnPropertyNames(e)){const n=e[i],s=T3(n);if(n!=null&&s==null)return null;r[i]=s}return r}function RS(e){return typeof e.clone=="function"}function M7(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function A7(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function G4(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function O7(e){if(wI(e)||S7(e)||T7(e)||_I(e)||E7(e)||SI(e)||x7(e)||aT(e)||lT(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,i]of e)t.set(r,U(i));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(U(r));return t}return null}function TI(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof e?.getTime=="function"&&typeof t?.getTime=="function"&&e.getTime()===t.getTime()||!1}function R7(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&oT(e,t):e instanceof Set?t instanceof Set&&yre(e,t):e instanceof Map?t instanceof Map&&gre(e,t):!!G4(e)&&G4(t)&&mre(e,t))}function mre(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const i of r)if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}function yre(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function gre(e,t){if(e.size!==t.size)return!1;for(const[r,i]of e){const n=t.get(r);if(n!==i||n===void 0&&!t.has(r))return!1}return!0}function EI(e,t,r=!1){return I7(e,t,r)}function uT(e,t){if(t!=null)return t[e]||C7(e.split("."),!1,t)}function ii(e,t,r){const i=e.split("."),n=i.pop(),s=C7(i,!0,r);s&&n&&(s[n]=t)}function q4(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const r=t;if(e.length!==r.length)return!0;for(let i=0;i<e.length;i++)if(q4(e[i],r[i]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in e)if(q4(e[r],t[r]))return!0;return!1}return e!==t}function C7(e,t,r){let i=r;for(const n of e){if(i==null)return;if(!(n in i)){if(!t)return;i[n]={}}i=i[n]}return i}function I7(e,t,r){return t?Object.keys(t).reduce(((i,n)=>{if(n==="__proto__")return i;let s=i[n],a=t[n];return s===a?i:s===void 0?(i[n]=U(a),i):(Array.isArray(a)||Array.isArray(i)?(s=s?Array.isArray(s)?i[n]=s.slice():i[n]=[s]:i[n]=[],a&&(Array.isArray(a)||(a=[a]),r?a.forEach((c=>{s.includes(c)||s.push(c)})):i[n]=a.slice())):a&&typeof a=="object"?i[n]=I7(s,a,r):i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[n]=a),i)}),e||{}):e}const ct={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(EI(ct,globalThis.esriConfig,!0),delete ct.has),!ct.assetsPath){{const e="4.33";ct.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}ct.defaultAssetsPath=ct.assetsPath}const vre=/\{([^}]+)\}/g;function B4(e){return e??""}function Hh(e,t){return t?e.replaceAll(vre,typeof t=="object"?(r,i)=>B4(uT(i,t)):(r,i)=>B4(t(i))):e}function IOe(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,(r=>t?.includes(r)?r:`\\${r}`))}function N7(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}let H4;function NOe(e){return H4??=new DOMParser,H4.parseFromString(e||"","text/html").body.innerText||""}function POe(e,t){return new RegExp(`{${t}}`,"ig").test(e)}function LOe(e,...t){let r=e[0];for(let i=0;i<t.length;++i)r+=t[i]+e[i+1];return r}const W4={info:0,warn:1,error:2,none:3};var Ir;let re=(Ir=class{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Ir._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=Ir.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,Ir._loggers.get(t)||new Ir({module:t})}_log(t,r,...i){if(this._matchLevel(t)){if(r!=="always"&&!Ir._throttlingDisabled){const n=wre(i),s=this._loggedMessages[t].get(n);if(r==="once"&&s!=null||r==="oncePerTick"&&s&&s>=Ir._tickCounter)return;this._loggedMessages[t].set(n,Ir._tickCounter),Ir._scheduleTickCounterIncrement()}for(const n of ct.log.interceptors)if(n(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;i!=null;){const n=i[t];if(n!=null)return n;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",bre)}_matchLevel(t){const r=ct.log.level||"warn";return W4[this._parentWithMember("level",r)]<=W4[t]}static _scheduleTickCounterIncrement(){Ir._tickCounterScheduled||(Ir._tickCounterScheduled=!0,Promise.resolve().then((()=>{Ir._tickCounter++,Ir._tickCounterScheduled=!1})))}},Ir._loggers=new Map,Ir._tickCounter=0,Ir._tickCounterScheduled=!1,Ir._throttlingDisabled=!1,Ir);function bre(e,t,...r){console[e](`[${t}]`,...r)}function wre(...e){return N7(JSON.stringify(e,(r,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]"))}function _re(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,((r,i)=>i===""?"$":(uT(i,t)??"").toString()))}let P7=class{constructor(t,r,i=void 0){this.name=t,this.details=i,this.message=(r&&_re(r,i))??""}toString(){return"["+this.name+"]: "+this.message}},z=class L7 extends P7{constructor(t,r,i){super(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return U(r)}catch{return"[object]"}})))}}catch(t){throw re.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new L7(t.name,t.message,t.details)}};z.prototype.type="error";function Bv(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}const Sre=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Tre={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function Z4(e){const t=e?.match(Sre);if(!t)return null;const[,r,i,n]=t;if(!r)return null;let s=null,a=null,c=null;const{devext:d,qaext:f,www:g}=Tre;if(i)if(s=r,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:c}=d);break;case"qa":({customBaseUrl:a,portalHostname:c}=f);break;default:return null}else({customBaseUrl:a,portalHostname:c}=g);else switch(r.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:c}=d);break;case"qaext":({customBaseUrl:a,portalHostname:c}=f);break;case"www":({customBaseUrl:a,portalHostname:c}=g);break;default:return null}return{customBaseUrl:a,isPortal:!1,portalHostname:c,urlKey:s}}function D7(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function k7(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,i=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):i.test(e)&&(e=e.replace(i,"https://qaext.arcgis.com")),e}function F7(e){const t=atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r.buffer}function Ere(e){const t=new Uint8Array(e);let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return btoa(r)}const xre=()=>re.getLogger("esri.core.urlUtils"),uy=ct.request,Y4="esri/config: esriConfig.request.proxyUrl is not set.",U7=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,j7=/^\s*http:/i,$re=/^\s*https:/i,Mre=/^\s*file:/i,z7=/:\d+$/,Are=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Rre=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Xf=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(Ore);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(Rre),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}};const mw={},Cre=new Xf(ct.applicationUrl);let Gi=Cre;const Ire=Nre();let xI=Ire;const $I=()=>Gi,FOe=()=>xI;function Nre(){const e=Gi.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${Gi.scheme}://${Gi.host}${Gi.port!=null?`:${Gi.port}`:""}`}${t}`}function Wi(e){if(!e)return null;const t={path:null,query:null},r=new Xf(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.slice(0,i),t.query=MI(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function MI(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const n=i.indexOf("=");let s,a;n<0?(s=decodeURIComponent(i),a=""):(s=decodeURIComponent(i.slice(0,n)),a=decodeURIComponent(i.slice(n+1)));let c=r[s];typeof c=="string"&&(c=r[s]=[c]),Array.isArray(c)?c.push(a):r[s]=a}return r}function Hv(e,t){return e?Object.keys(e).map((r=>{const i=e[r];if(i==null)return"";const n=encodeURIComponent(r)+"=",s=t?.[r];return s?n+encodeURIComponent(s(i)):Array.isArray(i)?i.map((a=>Bv(a)?n+encodeURIComponent(JSON.stringify(a)):n+encodeURIComponent(a))).join("&"):Bv(i)?n+encodeURIComponent(JSON.stringify(i)):n+encodeURIComponent(i)})).filter((r=>r)).join("&"):""}function V7(e=!1){let t,r=uy.proxyUrl;if(typeof e=="string"){t=jre(e);const i=cT(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw xre().warn(Y4),new z("urlUtils:proxy-not-set",Y4);return t&&x3()&&(r=II(r)),Wi(r)}function UOe(e,t=!1){const r=cT(e);let i,n;if(r){const s=AI(r.proxyUrl);i=s.path,n=s.query?MI(s.query):null}else if(t){const s=V7(e);i=s.path,n=s.query}if(i){const s=Wi(e);e=i+"?"+s.path;const a=Hv({...n,...s.query});a&&(e=`${e}?${a}`)}return e}const zg={path:"",query:""};function AI(e){const t=e.indexOf("?");return t!==-1?(zg.path=e.slice(0,t),zg.query=e.slice(t+1)):(zg.path=e,zg.query=null),zg}function G7(e){return e=(e=IS(e=Hre(e=AI(e).path),!0)).toLowerCase()}function Pre(e){const t={proxyUrl:e.proxyUrl,urlPrefix:G7(e.urlPrefix)},r=uy.proxyRules,i=t.urlPrefix;let n=r.length;for(let s=0;s<r.length;s++){const a=r[s].urlPrefix;if(i.indexOf(a)===0){if(i.length===a.length)return-1;n=s;break}a.indexOf(i)===0&&(n=s+1)}return r.splice(n,0,t),n}function cT(e){const t=uy.proxyRules,r=G7(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function Lre(e,t){if(!e||!t)return!1;e=CS(e),t=CS(t);const r=Z4(e),i=Z4(t);return r!=null&&i!=null?r.portalHostname===i.portalHostname:r==null&&i==null&&Sa(e,t,!0)}function q7(e,t){return e=CS(e),t=CS(t),IS(e)===IS(t)}function CS(e){const t=(e=Lo(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function E3(e,t=uy.interceptors){const r=i=>i instanceof RegExp?i.test(e):typeof i=="string"?e.startsWith(i):i==null;if(t){for(const i of t)if(Array.isArray(i.urls)){if(i.urls.some(r))return i}else if(r(i.urls))return i}return null}function Sa(e,t,r=!1){if(!e||!t)return!1;const i=M3(e),n=M3(t);return!(!r&&i.scheme!==n.scheme)&&i.host!=null&&n.host!=null&&i.host.toLowerCase()===n.host.toLowerCase()&&i.port===n.port}function OI(e){if(typeof e=="string"){if(!Fn(e))return!0;e=M3(e)}if(Sa(e,Gi))return!0;const t=uy.trustedServers||[];for(let r=0;r<t.length;r++){const i=Dre(t[r]);for(let n=0;n<i.length;n++)if(Sa(e,i[n]))return!0}return!1}function Dre(e){return mw[e]||(CI(e)||$a(e)?mw[e]=[new Xf(zs(e))]:mw[e]=[new Xf(`http://${e}`),new Xf(`https://${e}`)]),mw[e]}function zs(e,t=xI,r){return $a(e)?r?.preserveProtocolRelative?e:Gi.scheme==="http"&&Gi.authority===fs(e).slice(2)?`http:${e}`:`https:${e}`:CI(e)?e:Oh(e[0]==="/"?qre(t):t,e)}function RI(e,t=xI,r){if(e==null||!Fn(e))return e;const i=Lo(e),n=i.toLowerCase(),s=Lo(t).toLowerCase().replace(/\/+$/,""),a=r?Lo(r).toLowerCase().replace(/\/+$/,""):null;if(a&&s.indexOf(a)!==0)return e;const c=(v,w,S)=>(S=v.indexOf(w,S))===-1?v.length:S;let d=c(n,"/",n.indexOf("//")+2),f=-1;for(;n.slice(0,d+1)===s.slice(0,d)+"/"&&(f=d+1,d!==n.length);)d=c(n,"/",d+1);if(f===-1||a&&f<a.length)return e;e=i.slice(f);const g=s.slice(f-1).replaceAll(/[^/]+/g,"").length;if(g>0)for(let v=0;v<g;v++)e=`../${e}`;else e=`./${e}`;return e}function Lo(e){return e=Yre(e=Zre(e=Wre(e=zs(e=e.trim()))))}function Oh(...e){const t=e.filter(Yl);if(!t?.length)return;const r=[];if(Fn(t[0])){const n=t[0],s=n.indexOf("//");s!==-1&&(r.push(n.slice(0,s+1)),Vre(t[0])&&(r[0]+="/"),t[0]=n.slice(s+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce(((n,s)=>s?n.concat(s.split("/")):n),[]);for(let n=0;n<i.length;n++){const s=i[n];s===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!s&&n===i.length-1||s&&(s!=="."||r.length===0))&&r.push(s)}return r.join("/")}function fs(e,t=!1){if(e==null||cy(e)||Wh(e))return null;let r=e.indexOf("://");if(r===-1&&$a(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=IS(e,!0)),e}function Fn(e){return $a(e)||CI(e)}function cy(e){return e!=null&&e.slice(0,5)==="blob:"}function Wh(e){return e!=null&&e.slice(0,5)==="data:"}function kre(e){const t=jm(e);return t?.isBase64?F7(t.data):null}function jOe(e){return Ere(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const Fre=/^data:(.*?)(;base64)?,(.*)$/;function jm(e){const t=e.match(Fre);if(!t)return null;const[,r,i,n]=t;return{mediaType:r,isBase64:!!i,data:n}}function B7(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function Ure(e){return(await fetch(e)).blob()}function zOe(e){const t=kre(e);if(!t)return null;const r=jm(e);return new Blob([t],{type:r.mediaType})}function $a(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function CI(e){return e!=null&&U7.test(e)}function jre(e){return e!=null&&$re.test(e)||Gi.scheme==="https"&&$a(e)}function zre(e){return e!=null&&j7.test(e)||Gi.scheme==="http"&&$a(e)}function Vre(e){return e!=null&&Mre.test(e)}function II(e){return $a(e)?`https:${e}`:e.replace(j7,"https:")}function Gre(){return Gi.scheme==="http"}function x3(){return Gi.scheme==="https"}function IS(e,t=!1){return $a(e)?e.slice(2):(e=e.replace(U7,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function qre(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function Bre(e){let t=0;if(Fn(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function VOe(e,t){if(!e)return"";const r=Wi(e).path.replace(/\/+$/,""),i=r.slice(r.lastIndexOf("/")+1);if(!t?.length)return i;const n=new RegExp(`\\.(${t.join("|")})$`,"i");return i.replace(n,"")}function Hre(e){return e.endsWith("/")?e:`${e}/`}function H7(e){return e.replace(/\/+$/,"")}function Wre(e){if(/^https?:\/\//i.test(e)){const t=AI(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function Zre(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Yre(e){const t=uy.httpsDomains;if(!zre(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),z7.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return Gre()&&i===Gi.authority&&!Are.test(e)||(x3()&&i===Gi.authority||t&&t.some((n=>i===n||i.endsWith(`.${n}`)))||x3()&&!cT(e))&&(e=II(e)),e}function $3(e,t,r){if(!(t&&r&&e&&Fn(e)))return e;const i=e.indexOf("//"),n=e.indexOf("/",i+2),s=e.indexOf(":",i+2),a=Math.min(n<0?e.length:n,s<0?e.length:s);return e.slice(i+2,a).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(a)}`}function W7(e,t){const r=new URL(e);return r.host=t,r.port&&!z7.test(t)&&(r.port=""),r.toString()}function Jre(e){return new URL(e).host}function M3(e){return typeof e=="string"?new Xf(zs(e)):(e.scheme||(e.scheme=Gi.scheme),e)}function GOe(e){return Qre.test(e)}function Z7(e,t){const r=Wi(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function Xre(e,t,r){const i=Wi(e),n=i.query||{};return n[t]=String(r),`${i.path}?${Hv(n)}`}function j$(e,t){if(!t)return e;const r=Wi(e),i=r.query||{};for(const[s,a]of Object.entries(t))a!=null&&(i[s]=a);const n=Hv(i);return n?`${r.path}?${n}`:r.path}function Y7(e){if(e==null)return null;const t=e.match(J7);return t?t[2]:null}function J4(e){if(e==null)return null;const t=e.match(J7);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function qOe(e){return typeof e=="string"?jm(e)??{data:e}:new Promise(((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(jm(i.result)),i.onerror=n=>r(n)}))}const J7=/([^.]*)\.([^/]*)$/,Qre=/(^data:image\/svg|\.svg$)/i,X7="20250731",Q7="5a8834f8afaefbeafe979dfea5a1e79284cf577a";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const Kre="4.33";let nt,NI=Kre;NI="4.33.12";function BOe(e){nt=e}function HOe(e){const t=nt?.findCredential(e);return t?.token?Xre(e,"token",t.token):e}V("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),V("host-webworker");function eie(e,t){for(const r of e.values())if(t(r))return!0;return!1}function WOe(e,t){for(const r of e.values())if(t(r))return r;return null}function dy(e,t,r){const i=e.get(t);if(i!==void 0)return i;const n=r();return e.set(t,n),n}function ZOe(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const tie={remove:()=>{}};function ht(e){return e?{remove(){e&&(e(),e=void 0)}}:tie}function K7(e){e.forEach((t=>t?.remove()))}function YOe(e){K7(e),e.length=0}function Zh(e){return ht((()=>K7(e)))}function JOe(e){return ht((()=>e()?.remove()))}function XOe(e){return ht((()=>e?.abort()))}function QOe(e){return ht(e!=null?()=>e.destroy():void 0)}function rie(e){return typeof e=="object"&&!!e&&"remove"in e&&typeof e.remove=="function"}function KOe(e){rie(e)&&e.remove()}function eRe(e){return{[Symbol.dispose](){e.remove()}}}function iie(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return ht((()=>e.clearTimeout(i)))}}}const hy=iie(globalThis);function dT(e){return nie(e)||eV(e)}function nie(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function eV(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function py(e,t,r){if(!dT(e))throw new TypeError("target is not a Evented or EventTarget object");return eV(e)?sie(e,t,r):e.on(t,r)}function sie(e,t,r,i){if(Array.isArray(t)){const n=t.slice();for(const s of n)e.addEventListener(s,r,i);return ht((()=>{for(const s of n)e.removeEventListener(s,r,i)}))}return e.addEventListener(t,r,i),ht((()=>e.removeEventListener(t,r,i)))}function tV(e,t,r){if(!dT(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=py(e,t,(n=>{i.remove(),r.call(e,n)}));return i}function rV(e,t){if(e==null)throw new Error(t??"value is None")}function rr(e){return e?.destroy(),null}function tRe(e){return e?.dispose(),null}function ir(e){return e?.remove(),null}function zm(e){return e?.abort(),null}function rRe(e){return e?.release(),null}function oie(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function aie(e,t){let r;return e.some(((i,n)=>(r=t(i,n),r!=null))),r??void 0}function Zt(e="Aborted"){return new z("AbortError",e)}function Yt(e,t="Aborted"){if(Ws(e))throw Zt(t)}function E1(e){return e instanceof AbortSignal?e:e?.signal??void 0}function Ws(e){const t=E1(e);return t!=null&&t.aborted}function ya(e){if(Zi(e))throw e}function X4(e){if(!Zi(e))throw e}function jo(e,t){const r=E1(e);if(r!=null){if(!r.aborted)return tV(r,"abort",(()=>t()));t()}}function PI(e,t){const r=E1(e);if(r!=null)return Yt(r),tV(r,"abort",(()=>t(Zt())))}function iV(e,t){return E1(t)==null?e:new Promise(((r,i)=>{let n=jo(t,(()=>i(Zt())));const s=()=>{n=ir(n)};e.then(s,s),e.then(r,i)}))}function Zi(e){return e?.name==="AbortError"}async function A3(e){try{return await e}catch(t){if(!Zi(t))throw t;return}}async function LI(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),i=r.map((a=>e[a])),n=await LI(i),s={};return r.map(((a,c)=>s[a]=n[c])),s}const t=e;return Promise.allSettled(t).then((r=>Array.from(t,((i,n)=>{const s=r[n];return s.status==="fulfilled"?{promise:i,value:s.value}:{promise:i,error:s.reason}}))))}async function lie(e){return(await Promise.allSettled(e)).filter((t=>t.status==="fulfilled")).map((t=>t.value))}async function iRe(e){return(await Promise.allSettled(e)).filter((t=>t.status==="rejected")).map((t=>t.reason))}function nV(e,t=void 0,r){const i=new AbortController;return jo(r,(()=>i.abort())),new Promise(((n,s)=>{let a=setTimeout((()=>{a=0,n(t)}),e);jo(i,(()=>{a&&(clearTimeout(a),s(Zt()))}))}))}function nRe(e,t,r,i){const n=r&&"abort"in r?r:null;i!=null||n||(i=r);let s=setTimeout((()=>{s=0,n?.abort()}),t);const a=()=>i||new z("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");return e.then((c=>{if(s===0)throw a();return clearTimeout(s),c}),(c=>{throw clearTimeout(s),s===0?a():c}))}function uie(e,t){const r=new AbortController,i=setTimeout((()=>r.abort()),t);return jo(e,(()=>{r.abort(),clearTimeout(i)})),{...e,signal:r.signal}}function Ia(e){return e&&typeof e.then=="function"}function O3(e){return Ia(e)?e:Promise.resolve(e)}function DI(e,t=-1){let r,i,n,s,a=null;const c=(...d)=>{if(r){i=d,s&&s.reject(Zt()),s=ys();const w=s.promise;if(a){const S=a;a=null,S.abort()}return w}if(n=s||ys(),s=null,t>0){const w=new AbortController;r=O3(e(...d,w.signal));const S=r;nV(t).then((()=>{r===S&&(s?w.abort():a=w)}))}else r=1,r=O3(e(...d));const f=()=>{const w=i;i=n=r=a=null,w!=null&&c(...w)},g=r,v=n;return g.then(f,f),g.then(v.resolve,v.reject),v.promise};return c}function ys(){let e,t;const r=new Promise(((n,s)=>{e=n,t=s})),i=n=>{e(n)};return i.resolve=n=>e(n),i.reject=n=>t(n),i.timeout=(n,s)=>hy.setTimeout((()=>i.reject(s)),n),i.promise=r,i}function sRe(e,t){t.then(e.resolve,e.reject)}async function Q4(e){await Promise.resolve(),Yt(e)}function Yh(e,t){const r=t?.url?.path;if(e&&r&&(e=zs(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const i=RI(e,t.portalItem.itemUrl);i!=null&&cie.test(i)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(i).path)}return(e=R3(e,t?.portal))&&pT.test(e)?kI(e):e}function Rh(e,t,r=Vm.YES){if((e=e&&pT.test(e)?lV(e):e)==null)return e;!Fn(e)&&t?.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let i=zs(e);if(t){const n=t.verifyItemRelativeUrls?.rootPath||t.url?.path;if(n){const s=R3(n,t.portal),a=R3(i,t.portal);i=RI(a,s,s),i!=null&&i!==a&&i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=aV(i,t?.portal),Fn(i)&&(i=Lo(i)),t?.resources&&t?.portalItem&&!Fn(i)&&!Wh(i)&&r===Vm.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),i}function hT(e,t,r){return Yh(e,r)}function Ch(e,t,r,i){const n=Rh(e,i);n!==void 0&&(t[r]=n)}const pT=/\/items\/([^/]+)\/resources\/(.*)/,cie=/^\.\/resources\//;function sV(e){return(e?.match(pT)??null)?.[1]??null}function oV(e){const t=e?.match(pT)??null;if(t==null)return null;const r=t[2],i=r.lastIndexOf("/");if(i===-1){const{path:a,extension:c}=J4(r);return{prefix:null,filename:a,extension:c}}const{path:n,extension:s}=J4(r.slice(i+1));return{prefix:r.slice(0,i),filename:n,extension:s}}function aV(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?$3(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function R3(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,i=$I();return Sa(i,`${i.scheme}://${r}`)?$3(e,t.portalHostname,r):$3(e,r,t.portalHostname)}function kI(e){if(!e)return e||null;let t=e;return t&&nt&&!nt.findCredential(t)&&(t=k7(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function lV(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&nt&&!nt.findCredential(t)&&(t=k7(t)),t}var Vm;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(Vm||(Vm={}));const die=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Vm},ensureMainOnlineDomain:aV,fromCDNUrl:lV,fromJSON:Yh,itemIdFromResourceUrl:sV,prefixAndFilenameFromResourceUrl:oV,read:hT,toCDNUrl:kI,toJSON:Rh,write:Ch},Symbol.toStringTag,{value:"Module"})),uV={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},cV=Object.values(uV),dV=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${cV.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),hie=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${cV.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),pie=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function oRe(e){return dV.test(e)}function jc(e){if(e==null)return null;const t=Wi(e),r=t?.path.match(dV)||t?.path.match(hie);if(!r)return null;const[,i,n,s,a]=r,c=n.indexOf("/");return{title:FI(c!==-1?n.slice(c+1):n),serverType:uV[s.toLowerCase()],sublayer:a!=null&&a!==""?parseInt(a,10):null,url:{path:i}}}function fie(e){const t=Wi(e).path.match(pie);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function FI(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function mie(e,t){const r=[];if(e){const i=jc(e);i!=null&&i.title&&r.push(i.title)}if(t){const i=FI(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function NS(e){let t=fs(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(t)))}function yie(e,t){return e&&H7(Z7(e,t))}function gie(e){let{url:t}=e;if(!t)return{url:t};t=Z7(t,e.logger);const r=Wi(t),i=jc(r.path);let n;if(i!=null)i.sublayer!=null&&e.layer.layerId==null&&(n=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const s=fie(r.path);s!=null&&(t=s.serviceUrl,n=s.sublayerId)}return{url:H7(t),layerId:n}}function vie(e,t,r,i,n){Ch(t,i,"url",n),i.url&&e.layerId!=null&&(i.url=Oh(i.url,r,e.layerId.toString()))}function aRe(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),i=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),s=t.includes("/wmsserver");return r&&(i||n||s)}const bie=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function UI(e){if(!jI(e))return null;const t=i=>i instanceof RegExp?i.test(e):typeof i=="string"&&e.startsWith(i),r=ct.apiKeys;if(Array.isArray(r.scopes)){for(const i of r.scopes)if(Array.isArray(i.urls)){if(i.urls.some(t))return i.token}else if(t(i.urls))return i.token}return r.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(e)?r.basemapStyles:ct.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(e)?ct.apiKey:null}function C3(){return ct.apiKey!=null||ct.apiKeys.basemapStyles!=null}function wie(e,t){return t?jI(e):UI(e)!=null}function jI(e){const t=fs(e,!0);return!!t&&!bie.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function _ie(e,t,r=!1,i){return new Promise(((n,s)=>{if(Ws(i))return void s(K4());let a=()=>{f(),s(new Error(`Unable to load ${t}`))},c=()=>{const g=e;f(),n(g)},d=()=>{if(!e)return;const g=e;f(),g.src="",s(K4())};const f=()=>{V("esri-image-decode")||(e.removeEventListener("error",a),e.removeEventListener("load",c)),a=null,c=null,e=null,i?.removeEventListener("abort",d),d=null,r&&URL.revokeObjectURL(t)};i?.addEventListener("abort",d),V("esri-image-decode")?e.decode().then(c,a):(e.addEventListener("error",a),e.addEventListener("load",c))}))}function K4(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const hV="Timeout exceeded";function Sie(){return new Error(hV)}function lRe(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===hV}function Tie(e){ct.request.crossOriginNoCorsDomains||(ct.request.crossOriginNoCorsDomains={});const t=ct.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[fs(r)??""]=0:(t[fs("http://"+r)??""]=0,t[fs("https://"+r)??""]=0)}function Eie(e){const t=ct.request.crossOriginNoCorsDomains;if(t){let r=fs(e);if(r)return r=r.toLowerCase(),!Sa(r,$I())&&t[r]<Date.now()-36e5}return!1}async function xie(e){const t=Wi(e);e=t.path,t.query?.f==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const r=ct.request.crossOriginNoCorsDomains,i=fs(e);r&&i&&(r[i.toLowerCase()]=Date.now())}const I3=new Map;function $ie(e,t){const r=t?.preferredHost;if(!r||Sa(e,`https://${r}`,!0))return;const i=jc(e);if(!i||i.serverType!=="FeatureServer"||D7(e))return;const n=i.url.path.toLowerCase();I3.has(n)||I3.set(n,r)}function e5(e){const t=jc(e)?.url.path.toLowerCase();if(!t)return e;const r=I3.get(t);return r?W7(e,r):e}async function Ft(e,t){e instanceof URL&&(e=e.toString()),t?.query instanceof URLSearchParams&&(t.query=MI(t.query.toString().replaceAll("+"," ")));const r=Wh(e),i=cy(e);i||r||(e=Lo(e));const n={url:e,requestOptions:{...t}},s=S=>({data:S,getAllHeaders:Gm,getHeader:Gm,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),a=E3(e,Fs.internalInterceptors);if(a){const S=await r5(a,n);if(S!=null)return s(S)}let c=E3(e);if(c){const S=await r5(c,n);if(S!=null)return s(S);c.after||c.error||(c=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"&&(V("host-webworker")||V("host-node")))throw Do("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(t.method==="head"){if(t.body)throw Do("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(r||i)throw Do("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await Cie(),PS)return PS.execute(e,t);const d=new AbortController,f=jo(t,(()=>d.abort())),g={controller:d,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:c,params:n,redoRequest:!1,useIdentity:Fs.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},v=t.useRequestQueue?Die(g):P3(g),w=await v.finally((()=>f?.remove()));return c?.after?.(w),w}let PS,pV=!1;const Fs=ct.request,fV="FormData"in globalThis,Mie=new Set([499,498,403,401]),Aie=new Set(["COM_0056","COM_0057","SB_0008"]),Oie=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Gm=()=>null,LS=Symbol();function Rie(e){const t=fs(e);t&&!Ft._corsServers.includes(t)&&Ft._corsServers.push(t)}function t5(e){const t=fs(e);return!t||t.endsWith(".arcgis.com")||Ft._corsServers.includes(t)||OI(t)}function Do(e,t,r,i){let n;const s={url:r.url,requestOptions:r.requestOptions,getAllHeaders:Gm,getHeader:Gm,ssl:!1};if(t instanceof z)return t.details?(t.details=U(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=s,t;if(t){const a=i&&(()=>Array.from(i.headers)),c=i&&(g=>i.headers.get(g)),d=i?.status,f=t.message;f&&(n=f),a&&c&&(s.getAllHeaders=a,s.getHeader=c),s.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||d||0,s.subCode=t.subcode,s.messageCode=t.messageCode,typeof t.details=="string"?(s.messages=[t.details],n??=t.details):(s.messages=t.details,n??=s.messages?.[0]),s.raw=LS in t?t[LS]:t}return n??="Error",Zi(t)?Zt():new z(e,n,s)}async function Cie(){V("host-webworker")&&(!PS&&globalThis.invokeStaticMessage?PS=await ue(()=>import("./request-Dn9Y0E8r.js"),[]):pV=!0)}async function N3(){nt||await ue(()=>import("./IdentityManager-hnRHdkFT.js"),__vite__mapDeps([0,1]))}async function Iie(e){const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,n=r.body;let s=null,a=null;if(fV&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(a=n),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:Fs.priority,redirect:"follow",signal:i},(s||a)&&(e.fetchOptions.body=s||a),(pV||r.authMode==="anonymous")&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||r.query?.token||s?.get("token")),!e.hasToken){const c=UI(t);c&&(r.query??={},r.query.token=c,e.hasToken=!0)}if(e.useIdentity&&!e.hasToken&&!e.credential&&!e.credentialToken&&!mV(t)&&!Ws(i)){let c;r.authMode==="immediate"?(await N3(),c=await nt.getCredential(t,{signal:i})):r.authMode==="no-prompt"?(await N3(),c=await nt.getCredential(t,{prompt:!1,signal:i}).catch((()=>{}))):nt&&(c=nt.findCredential(t)),c&&(e.credential=c,e.credentialToken=c.token,e.useSSL=!!c.ssl)}}function mV(e){return Oie.some((t=>t.test(e)))}async function Nie(e){let t=e.params.url,r=e5(t);const i=e.params.requestOptions,n=e.fetchOptions??{},s=cy(t)||Wh(t),a=i.responseType||"json",c=s?0:i.timeout!=null?i.timeout:Fs.timeout;let d=!1;if(!s){e.useSSL&&(t=II(t));let S={...i.query};e.credentialToken&&(S.token=e.credentialToken);let T=Hv(S);V("esri-url-encodes-apostrophe")&&(T=T.replaceAll("'","%27"));const E=r.length+1+T.length;let M;d=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||E>Fs.maxUrlLength;const R=i.useProxy||!!cT(t);if(R){const I=V7(t);M=I.path,!d&&M.length+1+E>Fs.maxUrlLength&&(d=!0),I.query&&(S={...I.query,...S})}if(n.method==="HEAD"&&(d||R)){if(d)throw E>Fs.maxUrlLength?Do("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Do("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(R)throw Do("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}d?(n.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=j$(t,S):(n.body=Hv(S),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):t=j$(t,S),R&&(e.useProxy=!0,t=`${M}?${t}`),S.token&&fV&&n.body instanceof FormData&&!D7(t)&&n.body.set("token",S.token),i.hasOwnProperty("withCredentials")?e.withCredentials=i.withCredentials:Sa(t,$I())||(OI(t)||nt&&nt.findServerInfo(t)?.webTierAuth)&&(e.withCredentials=!0),e.withCredentials&&(n.credentials="include",Eie(t)&&await xie(d?j$(t,S):t)),r=e5(t)}let f,g,v=0,w=!1;c>0&&(v=setTimeout((()=>{w=!0,e.controller.abort()}),c));try{if(i.responseType==="native-request-init")g=n,g.url=r,i.signal?g.signal=i.signal:delete g.signal;else if(i.responseType!=="image"||n.cache!=="default"||n.method!=="GET"||d||Pie(i.headers)||!s&&!e.useProxy&&Fs.proxyUrl&&!t5(t)){if(Ft._beforeFetch&&await Ft._beforeFetch(t,n),f=await fetch(r,n),Ft._afterFetch&&await Ft._afterFetch(f),e.useProxy||Rie(t),i.responseType==="native")g=f;else if(n.method!=="HEAD")if(f.ok){switch(a){case"array-buffer":g=await f.arrayBuffer();break;case"blob":case"image":g=await f.blob();break;default:g=await f.text()}if(v&&(clearTimeout(v),v=0),a==="json"||a==="xml"||a==="document")if(g)switch(a){case"json":g=JSON.parse(g);break;case"xml":g=i5(g,"application/xml");break;case"document":g=i5(g,"text/html")}else g=null;if(g){if(a==="array-buffer"||a==="blob"){const S=f.headers.get("Content-Type");if(S&&/application\/json|text\/plain/i.test(S)&&g[a==="blob"?"size":"byteLength"]<=750)try{const T=await new Response(g).json();T.error&&(g=T)}catch{}}a==="image"&&g instanceof Blob&&(g=await n5(URL.createObjectURL(g),e,!0))}}else{g=await f.text();try{g=JSON.parse(g)}catch{}}}else g=await n5(r,e)}catch(S){if(S.name==="AbortError")throw w?Sie():Zt("Request canceled");if(!(!f&&S instanceof TypeError&&Fs.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||t5(t))throw S;e.redoRequest=!0,Pre({proxyUrl:Fs.proxyUrl,urlPrefix:fs(t)??""})}finally{v&&clearTimeout(v)}return[f,g]}async function r5(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(n){r=Do("request:interceptor",n,t)}if((i instanceof Error||i instanceof z)&&(r=Do("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function Pie(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function i5(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}Ft._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Ft._beforeFetch=void 0,Ft._afterFetch=void 0;const Lie=new Map;async function Die(e){const t=Fie(e.params.url);if(!t)return P3(e);const{QueueProcessor:r}=await ue(()=>import("./QueueProcessor-CcW63FRf.js"),[]);return dy(Lie,t.origin,(()=>{const n=t.isHosted?V("request-queue-concurrency-hosted"):V("request-queue-concurrency-non-hosted");return new r({concurrency:n,process:s=>{if(Ws(s.params.requestOptions))throw Do("",Zt("Request canceled"),s.params);return P3(s)}})})).push(e)}async function P3(e){let t,r;await Iie(e);try{do[t,r]=await Nie(e);while(!await kie(e,t,r))}catch(s){const a=Do("request:server",s,e.params,t);throw a.details.ssl=e.useSSL,e.interceptor?.error&&e.interceptor.error(a),a}const i=e.params.url;if(r)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&r.user?.username&&!OI(i)){const s=fs(i,!0);s&&Fs.trustedServers.push(s)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&Tie(r.authorizedCrossOriginNoCorsDomains)}else(e.params.requestOptions.responseType||"json")==="json"&&$ie(i,r);const n=e.credential;if(n&&nt){let a=nt.findServerInfo(n.server)?.owningSystemUrl;if(a){a=a.replace(/\/?$/,"/sharing");const c=nt.findCredential(a,n.userId);c&&nt._getIdenticalSvcIdx(a,c)===-1&&c.resources.unshift(a)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):Gm,getHeader:t?s=>t.headers.get(s):Gm,httpStatus:t?.status??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function kie(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let n,s;if(r&&(r.error&&typeof r.error=="object"?n=r.error:r.status==="error"&&Array.isArray(r.messages)&&(n={...r},n[LS]=r,n.details=r.messages)),!n&&!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[LS]=r,n;let a,c=null;n&&(s=Number(n.code),c=n.hasOwnProperty("subcode")?Number(n.subcode):null,a=n.messageCode,a=a?.toUpperCase());const d=i.authMode;if(s===403&&(c===4||n.message?.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(d!=="no-prompt"||s===498)&&s!==void 0&&Mie.has(s)&&!mV(e.params.url)&&(s!==403||(!a||!Aie.has(a))&&(c==null||c===2&&e.credentialToken))){await N3();try{const f=await nt.getCredential(e.params.url,{error:Do("request:server",n,e.params),credential:e.credential,prompt:d!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=f,e.credentialToken=f.token,e.useSSL=e.useSSL||f.ssl,!1}catch(f){if(d==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;n=f}}if(n)throw n;return!0}function n5(e,t,r=!1){const i=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Fs.priority,n.src=e,_ie(n,e,r,i)}function Fie(e){let t,r;return typeof e=="string"?(t=fs(e,!0),r=NS(e)):(t=e.origin,r=NS(e.toString())),t==null?null:{origin:t,isHosted:r}}function Uie(e){return e?.release&&typeof e.release=="function"}function jie(e){return e?.acquire&&typeof e.acquire=="function"}var Mc;let fy=(Mc=class{constructor(t,r,i,n=1,s=0){this._ctor=t,this._acquireFunction=r,this._releaseFunction=i,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s;for(let a=0;a<s;a++)this._pool[a]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let r;if(Mc.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let n=0;n<i;n++)this._pool[n]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):jie(r)&&r.acquire(...t),r}release(t){t&&!Mc.test.disabled&&(this._releaseFunction?this._releaseFunction(t):Uie(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}},Mc.test={disabled:!1},Mc);function zie(e){e.length=0}let ln=class{constructor(t=50,r=50){this._pool=new fy(Array,void 0,zie,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return z$.acquire()}static release(t){return z$.release(t)}static prune(){z$.prune()}};const z$=new ln(100),s5=new WeakMap;function Vie(e,t,r=!1){const i=`🛑 DEPRECATED - ${t}`;if(!r)return void e.warn(i);let n=s5.get(e);n||(n=new Set,s5.set(e,n)),n.has(t)||(n.add(t),e.warn(i))}const DS="https://www.esriurl.com/";function Gie(e,t,r,i={}){V("esri-deprecation-warnings")&&Oc(e,`This widget is deprecated. Use the ${t} component instead.`,{see:[`${t} component reference: ${DS}${r}/`,`Esri's move to web components: ${DS}components-transition-plan/`],replacement:`<${r}></${r}>`,warnOnce:!0,...i})}function qie(e,t,r,i={}){V("esri-deprecation-warnings")&&Oc(e,`This view model is deprecated. Use the ${t} component directly instead.`,{see:[`${t} component reference: ${DS}${r}/`,`Esri's move to web components: ${DS}components-transition-plan/`],replacement:`<${r}></${r}>`,warnOnce:!0,...i})}function cRe(e,t,r={}){V("esri-deprecation-warnings")&&Oc(e,`Module: ${t}`,r)}function yV(e,t,r={}){if(V("esri-deprecation-warnings")){const{moduleName:i}=r;Oc(e,`Function: ${(i?i+"::":"")+t+"()"}`,r)}}function gV(e,t,r={}){if(V("esri-deprecation-warnings")){const{moduleName:i}=r;Oc(e,`Property: ${(i?i+"::":"")+t}`,r)}}function Bie(e,t,r={}){V("esri-deprecation-warnings")&&Oc(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function Oc(e,t,r={}){if(V("esri-deprecation-warnings")){const{replacement:i,version:n,see:s,warnOnce:a}=r;let c=t;if(i&&(c+=`
	🛠️ Replacement: ${i}`),n&&(c+=`
	⚙️ Version: ${n}`),s)if(Array.isArray(s)){c+=`
	🔗 See for more details:`;for(const d of s)c+=`
		${d}`}else c+=`
	🔗 See ${s} for more details.`;Vie(e,c,a)}}function dRe(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function Hie(e,t){for(const r of e)if(r!=null&&t(r))return r}function kS(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let my=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach((r=>{t+=r.length})),t}add(t,r){if(kS(t)){const i=this._getOrCreateGroup(r);for(const n of t)a5(n)&&i.push(n)}else a5(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach((i=>i.forEach(t)));else{const i=this._getGroup(t);i&&r&&i.forEach(r)}}has(t){return this._groups.has(yw(t))}remove(t){if(typeof t!="string"&&kS(t)){for(const r of t)this.remove(r);return this}return this.has(t)?(o5(this._getGroup(t)),this._groups.delete(yw(t)),this):this}removeAll(){return this._groups.forEach(o5),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(yw(t),r),r}_getGroup(t){return this._groups.get(yw(t))}};function yw(e){return e||"_default_"}function o5(e){for(const t of e)t instanceof my?t.removeAll():t.remove()}function a5(e){return e!=null&&(!!e.remove||e instanceof my)}const vV=Symbol("Accessor-beforeDestroy");function gn(e){return e.__accessor__??null}function Wie(e,t){return e?.metadata?.[t]!=null}function f_(e,t,r){return r?FS(e,t,{policy:r,path:""}):FS(e,t,null)}function FS(e,t,r){return t?Object.keys(t).reduce(((i,n)=>{const s=n;if(s==="__proto__")return i;let a=null,c="merge";if(r&&(a=r.path?`${r.path}.${n}`:n,c=r.policy(a)),c==="replace"||c==="replace-arrays"&&Array.isArray(i[s]))return i[s]=t[s],i;if(i[s]===void 0)return i[s]=U(t[s]),i;let d=i[s],f=t[s];if(d===f)return i;if(Array.isArray(f)||Array.isArray(i))d=d?Array.isArray(d)?i[s]=d.slice():i[s]=[d]:i[s]=[],f&&(Array.isArray(f)||(f=[f]),f.forEach((g=>{d.includes(g)||d.push(g)})));else if(f&&typeof f=="object")if(r){const g=r.path;r.path=a,i[s]=FS(d,f,r),r.path=g}else i[s]=FS(d,f,null);else i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[s]=f);return i}),e||{}):e}function bV(e){return Array.isArray(e)?e:e.split(".")}function l5(e){return e.includes(",")?e.split(",").map((t=>t.trim())):[e.trim()]}function Zie(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...l5(r));return t}return l5(e)}function wV(e,t,r,i){const n=Zie(t);if(n.length!==1){const s=n.map((a=>i(e,a,r)));return Zh(s)}return i(e,n[0],r)}function _V(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.at(n)}const i=gn(t);return Wie(i,r)?i.get(r):t[r]}function SV(e,t,r){if(e==null)return e;const i=_V(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:SV(i,t,r+1)}function x1(e,t,r=0){return typeof t!="string"||t.includes(".")?SV(e,bV(t),r):_V(t,e)}function Io(e,t){return x1(e,t)}function u5(e,t){return x1(t,e)!==void 0}const ls={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};function $1(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const i in t)t[i]=U(t[i]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function M1(e,t){const r=$1(e);let i=r[t];return i||(i=r[t]={}),i}function Yie(e,t){return f_(e,t,Xie)}const Jie=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Xie(e){return Jie.test(e)?"replace":"merge"}let Qie=class{constructor(t,r){this._observers=t,this._observer=r}remove(){bI(this._observers,this._observer)}},TV=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return Kie;this._observers==null&&(this._observers=[]);const r=this._observers;let i=!1,n=!1;const s=r.length;for(let a=0;a<s;++a){const c=r[a];if(c.destroyed)n=!0;else if(c===t){i=!0;break}}return i||(r.push(t),n&&this._removeDestroyedObservers()),new Qie(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let i=0;for(let n=0;n<r;++n){for(;n+i<r&&t[n+i].destroyed;)++i;if(i>0){if(!(n+i<r))break;t[n]=t[n+i]}}t.length=r-i}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const Kie=ht();var Ke;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(Ke||(Ke={}));const L3=Ke.USER+1;function Ul(e){switch(e){case"defaults":return Ke.DEFAULTS;case"service":return Ke.SERVICE;case"portal-item":return Ke.PORTAL_ITEM;case"web-scene":return Ke.WEB_SCENE;case"web-map":return Ke.WEB_MAP;case"link-chart":return Ke.LINK_CHART;case"user":return Ke.USER;default:return null}}function Wv(e){switch(e){case Ke.DEFAULTS:return"defaults";case Ke.SERVICE:return"service";case Ke.PORTAL_ITEM:return"portal-item";case Ke.WEB_SCENE:return"web-scene";case Ke.WEB_MAP:return"web-map";case Ke.LINK_CHART:return"link-chart";case Ke.USER:return"user"}}function ene(e){return Wv(e)}const Kt={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let fT=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){this.accessed?.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach((t=>{this._handles.push(t.observe(this._observer))})),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const US=new fT,f0=[];let hv=US;function Le(e){hv.onAccessed(e)}let m_=!1,y_=!1;function Jl(e,t,r){if(m_)return zI(e,t,r);let i=null;return EV(e),i=t.call(r),xV(),i}function tne(e,t){return Jl(US,e,t)}function zI(e,t,r){const i=m_;m_=!0,EV(e);let n=null;try{n=t.call(r)}catch(s){y_&&re.getLogger("esri.core.accessorSupport.tracking").error(s)}return xV(),m_=i,n}function EV(e){hv=e,f0.push(e)}function xV(){const e=f0.length;if(e>1){const t=f0.pop();hv=f0[e-2],t.onTrackingEnd()}else if(e===1){const t=f0.pop();hv=US,t.onTrackingEnd()}else hv=US}function $V(e,t){if(t.flags&Kt.DepTrackingInitialized)return;t.flags|=Kt.DepTrackingInitialized;const r=y_;y_=!1,t.flags&Kt.AutoTracked?zI(t.trackingTarget,t.metadata.get,e):MV(e,t),y_=r}const rne=[];function MV(e,t){t.flags&Kt.ExplicitlyTracking||(t.flags|=Kt.ExplicitlyTracking,zI(t.trackingTarget,(()=>{const r=t.metadata.dependsOn||rne;for(const i of r)if(typeof i!="string"||i.includes(".")){const n=bV(i);for(let s=0,a=e;s<n.length&&a!=null&&typeof a=="object";++s)a=c5(a,n[s],s!==n.length-1)}else c5(e,i,!1)})),t.flags&=-129)}function c5(e,t,r){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const n=gn(e);if(n){const s=n.propertiesByName.get(i);s&&(Le(s),$V(e,s))}return r?e[i]:void 0}let d5=class extends TV{constructor(t,r){super(),this.propertyName=t,this.metadata=r,this.trackingTarget=new fT(this),this.flags=0,this.flags=Kt.Dirty|(r.nonNullable?Kt.NonNullable:0)|(r.hasOwnProperty("value")?Kt.HasDefaultValue:0)|(r.get===void 0?Kt.DepTrackingInitialized:0)|(r.dependsOn===void 0?Kt.AutoTracked:0)}destroy(){this.flags&Kt.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&Le(this);const r=t.store,i=this.propertyName,n=this.flags,s=r.get(i);if(n&Kt.Computing||~n&Kt.Dirty&&r.has(i))return s;this.flags|=Kt.Computing;const a=t.host;let c;n&Kt.AutoTracked?c=Jl(this.trackingTarget,this.metadata.get,a):(MV(a,this),c=this.metadata.get.call(a)),this.flags|=Kt.DepTrackingInitialized,r.set(i,c,Ke.COMPUTED);const d=r.get(i);return d===s?this.flags&=-2:tne(this.commit,this),this.flags&=-5,d}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&Kt.Overridden&&(this.flags|=Kt.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onCommitted()}}},ine=class AV{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new AV;return this._values.forEach(((i,n)=>{t&&t.has(n)||r.set(n,U(i))})),r}get(t){return this._values.get(t)}originOf(){return Ke.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}isAtOrigin(t,r){return this.has(t)}isBelowOrigin(t,r){return!this.has(t)}forEach(t){this._values.forEach(t)}};function Up(e,t,r){return e!==void 0}function h5(e,t,r,i){return e!==void 0&&(!(r==null&&e.flags&Kt.NonNullable)||(i.lifecycle,!1))}let nne=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=ls.INITIALIZING,this.store=new ine,this.mutable=!0,this._origin=Ke.USER;const r=this.host.constructor.__accessorMetadata__;for(const i in r){const n=new d5(i,r[i]);this.propertiesByName.set(i,n)}this.metadata=r}initialize(){this.lifecycle=ls.CONSTRUCTING}constructed(){this.lifecycle=ls.CONSTRUCTED}destroy(){this.lifecycle=ls.DESTROYED,this.propertiesByName.forEach((t=>t.destroy()))}get initialized(){return this.lifecycle!==ls.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(!Up(r))return;if(r.metadata.get)return r.getComputed(this);this.mutable&&Le(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.propertiesByName.get(t);if(i!==void 0&&i.flags&Kt.HasDefaultValue)return"defaults"}return Wv(r)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if(Up(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.propertiesByName.get(t);Up(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const n=this.propertiesByName.get(r);if(!Up(n))return"";const s=new fT,a=Jl(s,(()=>n.metadata.get?.call(t)));let c=`${i}${t.declaredClass.split(".").pop()}.${r}: ${a}
`;const d=s.accessed??new Set;if(d.size===0)return c;i+="  ";for(const f of d)f instanceof d5&&(c+=`${i}${f.propertyName}: undefined
`);return c}setAtOrigin(t,r,i){const n=this.propertiesByName.get(t);if(Up(n))return this._setAtOrigin(n,r,i)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.flags&Kt.Overridden)}clearOrigin(t,r){const i=this.store,n=this.propertiesByName.get(t);if(!Up(n))return;const s=i.isAtOrigin(t,r)&&!(n.flags&Kt.Overridden);i.delete(t,r),s&&n.notifyChange()}clearOverride(t){const r=this.propertiesByName.get(t);r&&r.flags&Kt.Overridden&&(r.flags&=-3,r.notifyChange())}override(t,r){const i=this.propertiesByName.get(t);if(!h5(i,t,r,this))return;const n=i.metadata.cast;if(n){const s=this._cast(n,r),{valid:a,value:c}=s;if(V$.release(s),!a)return;r=c}i.flags|=Kt.Overridden,this._internalSet(i,r)}set(t,r){const i=this.propertiesByName.get(t);if(!h5(i,t,r,this))return;const n=i.metadata.cast;if(n){const a=this._cast(n,r),{valid:c,value:d}=a;if(V$.release(a),!c)return;r=d}const s=i.metadata.set;s?s.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=Ul(t)}getDefaultOrigin(){return Wv(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==ls.INITIALIZING?this._origin:Ke.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const n=this.store,s=t.propertyName;if(n.isAtOrigin(s,i)&&TI(r,n.get(s))&&~t.flags&Kt.Overridden)return;const a=n.isBelowOrigin(s,i)||n.isAtOrigin(s,i);a&&t.invalidate(),n.set(s,r,i),a&&t.commit(),$V(this.host,t)}_cast(t,r){const i=V$.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}},sne=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const V$=new fy(sne);function jS(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))jS(e,i,t[i]);else{if(t.includes(".")){const n=t.split("."),s=n.splice(-1,1)[0];return void jS(Io(e,n),s,r)}const i=e.__accessor__;i!=null&&one(t,i),e[t]=r}}function one(e,t){if(V("esri-unknown-property-errors")&&!ane(e,t))throw new z("set:unknown-property",lne(e,t))}function ane(e,t){return t.metadata[e]!=null}function lne(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let une;function cne(){return une}var p5;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(p5||(p5={}));let OV=class extends fy{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const gw=[];function zS(e){gw.push(e),gw.length===1&&queueMicrotask((()=>{const t=gw.slice();gw.length=0;for(const r of t)r()}))}let pv=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort(((t,r)=>t-r))[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce(((t,r)=>t+r),0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var D3;(function(e){const t=(s,a,c,d)=>{let f=a,g=a;const v=c>>>1,w=s[f-1];for(;g<=v;){g=f<<1,g<c&&d(s[g-1],s[g])<0&&++g;const S=s[g-1];if(d(S,w)<=0)break;s[f-1]=S,f=g}s[f-1]=w},r=(s,a)=>s<a?-1:s>a?1:0;function i(s,a,c,d){a===void 0&&(a=0),c===void 0&&(c=s.length),d===void 0&&(d=r);for(let g=c>>>1;g>a;g--)t(s,g,c,d);const f=a+1;for(let g=c-1;g>a;g--){const v=s[a];s[a]=s[g],s[g]=v,t(s,f,g,d)}}function*n(s,a,c,d){a===void 0&&(a=0),c===void 0&&(c=s.length),d===void 0&&(d=r);for(let g=c>>>1;g>a;g--)t(s,g,c,d),yield;const f=a+1;for(let g=c-1;g>a;g--){const v=s[a];s[a]=s[g],s[g]=v,t(s,f,g,d),yield}}e.sort=i,e.iterableSort=n})(D3||(D3={}));const f5=D3,dne=1.5,hne=1.1;let fv=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new b7,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>m5(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let i=0;i<this._length;i++){const n=this.data[i];t(n)&&r.push(n)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const i=this.data.indexOf(t,r);return i!==-1&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,m5(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=S3(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(S3(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=dre(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const i=this.data[t];this.data[t]=this.data[r],this.data[r]=i}sort(t){f5.sort(this.data,0,this.length,t)}iterableSort(t){return f5.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}find(t,r){const{data:i,length:n}=this;for(let s=0;s<n;++s)if(t.call(r,i[s]))return i[s]}filterInPlace(t,r){let i=0;for(let n=0;n<this._length;++n){const s=this.data[n];t.call(r,s,n,this.data)&&(this.data[n]=this.data[i],this.data[i]=s,i++)}if(this._deallocator)for(let n=i;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=i,this._shrink(),this}forAll(t,r){const{data:i,length:n}=this;for(let s=0;s<n;++s)t.call(r,i[s],s,i)}forEach(t,r){this.data.slice(0,this.length).forEach(t,r)}map(t,r){const i=new Array(this.length);for(let n=0;n<this.length;++n)i[n]=t.call(r,this.data[n],n,this.data);return i}reduce(t,r){let i=r;for(let n=0;n<this.length;++n)i=t(i,this.data[n],n,this.data);return i}has(t){const r=this.length,i=this.data;for(let n=0;n<r;++n)if(i[n]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function m5(e){e.data.length>dne*e.length&&(e.data.length=Math.floor(e.length*hne))}function SRe(e){return e}function pne(e){return 1e3*e}function TRe(e){return e}function ERe(e){return .001*e}let fne=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},mne=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},k3=0;const Vg={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},F3=["prepare","preRender","render","postRender","update","finish"],U3=[],Ih=new fv;let yne=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,RV()}};function gne(){fh!=null&&(cancelAnimationFrame(fh),fh=requestAnimationFrame(VI))}function RV(){fh==null&&(k3=performance.now(),fh=requestAnimationFrame(VI))}const VS={frameTasks:Ih,willDispatch:!1,clearFrameTasks:vne,dispatch:IV,executeFrameTasks:bne,reschedule:gne};function A1(e){const t=new mne(e);return U3.push(t),VS.willDispatch||(VS.willDispatch=!0,zS(IV)),t}function qm(e){const t=new fne(e);return Ih.push(t),RV(),new yne(t)}let fh=null;function vne(e=!1){Ih.forAll((t=>{t.removed=!0})),e&&CV()}function VI(){const e=performance.now();fh=null,fh=Ih.some((r=>!r.paused&&!r.removed))?requestAnimationFrame(VI):null,VS.executeFrameTasks(e)}function bne(e){const t=e-k3;k3=e;const r=1e3/60,i=Math.max(0,t-r);Vg.time=e,Vg.frameDuration=r-i;for(let n=0;n<F3.length;n++){const s=performance.now(),a=F3[n];Ih.forAll((c=>{c.paused||c.removed||(n===0&&c.ticks++,c.phases[a]&&(Vg.elapsedFrameTime=performance.now()-e,Vg.deltaTime=c.ticks===0?0:t,c.phases[a]?.call(c,Vg)))})),Tne[n].push(performance.now()-s)}CV(),Ene.push(performance.now()-e)}const vw=new fv;function CV(){Ih.forAll((e=>{e.removed&&vw.push(e)})),Ih.removeUnorderedMany(vw.data,vw.length),vw.clear()}function IV(){for(;U3.length;){const e=U3.shift();e.isActive&&e.callback()}VS.willDispatch=!1}function wne(e=1,t){const r=ys(),i=()=>{Ws(t)?r.reject(Zt()):e===0?r():(--e,zS((()=>i())))};return i(),r.promise}function _ne(e){return wne(1,e)}async function Sne(e){await _ne(e),await new Promise((t=>requestAnimationFrame((()=>{e?.aborted||t()}))))}const Tne=F3.map((e=>new pv(e))),Ene=new pv("total");function NV(e,t){for(const r of e.values())if(t(r))return!0;return!1}function GS(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function y5(e,t){return t!=null&&e.add(t),e}function GI(e,t){const r=new Set;return GS(r,e),GS(r,t),r}function xne(e,t){const r=new Set;for(const i of t)e.has(i)&&r.add(i);return r}function ARe(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function ORe(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function $ne(e,t){const r=new Set(e);for(const i of t)r.delete(i);return r}function Mne(e,t){return $ne(GI(e,t),xne(e,t))}let Ane=0;function g_(){return++Ane}let mT=class extends fT{constructor(t){super(new One(t)),this._observer&&g5.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&g5.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}},One=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=Rne}};const g5=new FinalizationRegistry((e=>{e.deref()?.destroy()}));function Rne(){}let Qf=!1;const qS=[];function PV(e,t){let r=new mT(s),i=null,n=!1;function s(){if(!r||n)return;if(Qf)return void kV(s);const c=i;r.clear(),Qf=!0,n=!0,i=Jl(r,e),n=!1,Qf=!1,t(i,c),FV()}function a(){r&&(r.destroy(),r=null,i=null)}return n=!0,i=Jl(r,e),n=!1,ht(a)}function LV(e,t){let r=new mT(n),i=null;function n(){t(i,a)}function s(){r&&(r.destroy(),r=null),i=null}function a(){return r?(r.clear(),i=Jl(r,e),i):null}return a(),ht(s)}function DV(e,t){let r=!1,i=!1;const n=!!t?.sync;let s=new mT((()=>{r||i||(i=!0,n?a():queueMicrotask(a))}));function a(){i=!1,s&&!r&&(Qf?kV(a):(s.clear(),Qf=!0,r=!0,Jl(s,e),r=!1,Qf=!1,FV()))}function c(){s&&(s.destroy(),s=null)}return r=!0,Jl(s,e),r=!1,ht(c)}function kV(e){qS.includes(e)||qS.unshift(e)}function FV(){for(;qS.length;)qS.pop()()}var mv;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(mv||(mv={}));var Sh;let qI=(Sh=class{constructor(){this.uid=g_(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,n,s){return this.pool.acquire(mv.Untracked,t,r,i,n,s,TI)}static acquireTracked(t,r,i,n){return this.pool.acquire(mv.Tracked,t,r,i,null,null,n)}notify(t,r){this.type===mv.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,i,n,s,a,c){this.uid=g_(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=n,this.target=s,this.path=a,this.equals=c}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=g_(),this.removed=!0}},Sh.pool=new OV(Sh),Sh);const v_=new ln,Bl=new Set;let BS;function HS(e){Bl.delete(e),Bl.add(e),BS||(BS=A1(Nne))}function Cne(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function Ine(e){for(const t of Bl.values())t.target===e&&(t.removed=!0)}function Nne(){let e=10;for(;BS&&e--;){BS=null;const t=Pne(),r=v_.acquire();for(const i of t){const n=i.uid;Cne(i),n===i.uid&&i.removed&&r.push(i)}for(const i of Bl)i.removed&&(r.push(i),Bl.delete(i));for(const i of r)qI.pool.release(i);v_.release(r),v_.release(t),j3.forEach((i=>i()))}}function Pne(){const e=v_.acquire();e.length=Bl.size;let t=0;for(const r of Bl)e[t]=r,++t;return Bl.clear(),e}const j3=new Set;function Lne(e){return j3.add(e),ht((()=>j3.delete(e)))}function Dne(e,t,r){let i=wV(e,t,r,((n,s,a)=>{let c,d,f=LV((()=>x1(n,s)),((g,v)=>{n.__accessor__?.lifecycle===ls.DESTROYED||c&&c.uid!==d?i.remove():(c||(c=qI.acquireUntracked(g,a,v,n,s),d=c.uid),HS(c))}));return ht((()=>{f.remove(),c&&(c.uid!==d||c.removed||(c.removed=!0,HS(c)),c=null),i=f=null}))}));return i}function kne(e,t,r){const i=wV(e,t,r,((n,s,a)=>{let c=!1;return PV((()=>x1(n,s)),((d,f)=>{n.__accessor__.lifecycle!==ls.DESTROYED?c||(c=!0,TI(f,d)||a.call(n,d,f,s,n),c=!1):i.remove()}))}));return i}function Fne(e,t,r,i=!1){return e.__accessor__&&e.__accessor__.lifecycle!==ls.DESTROYED?i?kne(e,t,r):Dne(e,t,r):ht()}function Une(e,t,r){let i,n,s=LV(e,((a,c)=>{i&&i.uid!==n?s.remove():(i||(i=qI.acquireTracked(a,t,c,r),n=i.uid),HS(i))}));return ht((()=>{s.remove(),i&&(i.uid!==n||i.removed||(i.removed=!0,HS(i)),i=null),s=null}))}function jne(e,t,r){let i=!1;return PV(e,((n,s)=>{i||(i=!0,r(s,n)||t(n,s),i=!1)}))}function zne(e,t,r=!1,i=R7){return r?jne(e,t,i):Une(e,t,i)}function v5(e){return NV(Bl,(t=>t.oldValue===e))}const mh=()=>re.getLogger("esri.core.accessorSupport.ensureTypes");function Vne(e){if(e==null)return e;const t=new Date(e);return isNaN(t.getTime())?(mh().error("Accessor#set",`Invalid date value: '${e}', falling back to current date`),new Date):t}function Gne(e){return e==null?e:!!e}function O1(e){return e==null?e:e.toString()}function un(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function BI(e){return e==null?e:Math.round(parseFloat(e))}function qne(e){return null}function Bne(e,t){return r=>{let i=e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function UV(e){return e?.constructor&&e.constructor.__accessorMetadata__!==void 0}function WS(e,t){return t!=null&&e&&!(t instanceof e)}function jV(e){return e&&"isCollection"in e}function b5(e){return e?.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function Hne(e,t){if(!t?.constructor||!jV(t.constructor))return z3(e,t)?t:new e(t);const r=b5(e.prototype.itemType),i=b5(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(z3(e,t),t):new e(t):t}function z3(e,t){return!!UV(t)&&(mh().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+yT(e)+"'"),!0)}function R1(e,t){return t==null?t:jV(e)?Hne(e,t):WS(e,t)?z3(e,t)?t:new e(t):t}function yT(e){return e?.prototype?.declaredClass||"unknown"}const Wne=new WeakMap;function Zne(e){switch(e){case Number:return t=>un(t);case dt:return BI;case Boolean:return Gne;case String:return O1;case Date:return Vne;case gT:return qne;default:return dy(Wne,e,(()=>R1.bind(null,e)))}}function Br(e,t){const r=Zne(e);return arguments.length===1?r:r(t)}function Zv(e,t,r){return arguments.length===1?Zv.bind(null,e):t&&(Array.isArray(t)?t.map((i=>e(i,r))):[e(t,r)])}function Yne(e,t){return arguments.length===1?Zv((r=>Br(e,r))):Zv((r=>Br(e,r)),t)}function zV(e,t,r){return t!==0&&Array.isArray(r)?r.map((i=>zV(e,t-1,i))):e(r)}function ZS(e,t,r){if(arguments.length===2)return s=>ZS(e,t,s);if(!r)return r;r=zV(e,t,r);let i=t,n=r;for(;i>0&&Array.isArray(n);)i--,n=n[0];if(n!==void 0)for(let s=0;s<i;s++)r=[r];return r}function Jne(e,t,r){return arguments.length===2?ZS((i=>Br(e,i)),t):ZS((i=>Br(e,i)),t,r)}function VV(e){return!!Array.isArray(e)&&!e.some((t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)}))}function V3(e,t){if(arguments.length===2)return V3(e).call(null,t);const r=new Set,i=e.filter((c=>typeof c!="function")),n=e.filter((c=>typeof c=="function"));for(const c of e)typeof c!="string"&&typeof c!="number"||r.add(c);let s=null,a=null;return(c,d)=>{if(c==null)return c;const f=typeof c,g=f==="string"||f==="number";return g&&(r.has(c)||n.some((v=>f==="string"&&v===String||f==="number"&&v===Number)))||f==="object"&&n.some((v=>!WS(c,v)))?c:(g&&i.length?(s||(s=i.map((v=>typeof v=="string"?`'${v}'`:`${v}`)).join(", ")),mh().error("Accessor#set",`'${c}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof c=="object"&&n.length?(a||(a=n.map((v=>yT(v))).join(", ")),mh().error("Accessor#set",`'${c}' is not a valid value for this property, value must be one of ${a}`)):mh().error("Accessor#set",`'${c}' is not a valid value for this property`),d&&(d.valid=!1),null)}}function Ma(e,t){if(arguments.length===2)return Ma(e).call(null,t);const r={},i=[],n=[];for(const d in e.typeMap){const f=e.typeMap[d];r[d]=Br(f),i.push(yT(f)),n.push(d)}const s=()=>`'${i.join("', '")}'`,a=()=>`'${n.join("', '")}'`,c=typeof e.key=="string"?d=>d[e.key]:e.key;return d=>{if(e.base&&!WS(e.base,d)||d==null)return d;const f=c(d)||e.defaultKeyValue,g=r[f];if(!g)return mh().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${a()})`),null;if(!WS(e.typeMap[f],d))return d;if(typeof e.key=="string"&&!UV(d)){const v={};for(const w in d)w!==e.key&&(v[w]=d[w]);return g(v)}return g(d)}}let dt=class{},gT=class{};const PRe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Xne(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function GV(e){switch(e.type){case"native":return Br(e.value);case"array":return Zv(GV(e.value));case"one-of":return Qne(e);default:return null}}function Qne(e){let t=null;return(r,i)=>q3(r,e)?r:(t==null&&(t=G3(e)),mh().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function G3(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case dt:return"integer";case Date:return"date";case gT:return"null";default:return yT(e.value)}case"array":return`array of ${G3(e.value)}`;case"one-of":{const t=e.values.map((r=>G3(r)));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function q3(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case dt:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case gT:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some((r=>!q3(r,t.value)));case"one-of":return t.values.some((r=>q3(e,r)))}}function p(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),n=M1(t,r);i&&(i.get||i.set?(n.get=i.get||n.get,n.set=i.set||n.set):"value"in i&&("value"in e&&re.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=i.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const s=e.aliasOf;if(s){const d=typeof s=="string"?s:s.source,f=typeof s=="string"?null:s.overridable===!0;let g;n.dependsOn=[d],n.get=function(){let v=Io(this,d);if(typeof v=="function"){g||(g=d.split(".").slice(0,-1).join("."));const w=Io(this,g);w&&(v=v.bind(w))}return v},n.readOnly||(n.set=f?function(v){this._override(r,v)}:function(v){jS(this,d,v)})}const a=e.type,c=e.types;if(!n.cast){let d;a?d=Kne(a):c&&(d=Array.isArray(c)?Zv(Ma(c[0])):Ma(c)),e.cast=ese(e.cast,d)}Yie(n,e),e.range&&(n.cast=Bne(n.cast,e.range))}}function HI(e,t,r){const i=M1(e,r);i.json||(i.json={});let n=i.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function Kne(e){let t=0,r=e;if(Xne(e))return GV(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if(VV(i))return t===0?V3(i):ZS(V3(i),t);if(t===1)return Yne(i);if(t>1)return Jne(i,t);const n=e;return n.from?n.from:Br(n)}function ese(e,t){if(e||t)return e?t?(r,i)=>t(e(r,i),i):e:t}function tse(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const n=t[i];r[i].forEach((s=>{t[s]=n})),delete t[i]}}}let gs=class extends P7{constructor(t,r,i){super(t,r,i)}};gs.prototype.type="warning";function qV(e){return!!e&&e.prototype?.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const B3=()=>re.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function w5(e,t,r){e&&(!r&&!t.read||t.read?.reader||t.read?.enabled===!1||nse(e)&&ii("read.reader",yy(e),t))}function yy(e){const t=e.ndimArray??0;if(t>1)return ise(e);if(t===1)return _5(e);if("type"in e&&HV(e.type)){const r=e.type.prototype?.itemType?.Type,i=_5(typeof r=="function"?{type:r}:{types:r});return(n,s,a)=>{const c=i(n,s,a);return c&&new e.type(c)}}return WI(e)}function WI(e){return"type"in e?rse(e.type):sse(e.types)}function rse(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void B3().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const s=new e;return s.read(t,i),s}:e.fromJSON}function BV(e,t,r,i){return i!==0&&Array.isArray(t)?t.map((n=>BV(e,n,r,i-1))):e(t,void 0,r)}function ise(e){const t=WI(e),r=BV.bind(null,t),i=e.ndimArray??0;return(n,s,a)=>{if(n==null)return n;n=r(n,a,i);let c=i,d=n;for(;c>0&&Array.isArray(d);)c--,d=d[0];if(d!==void 0)for(let f=0;f<c;f++)n=[n];return n}}function _5(e){const t=WI(e);return(r,i,n)=>{if(r==null)return r;if(Array.isArray(r)){const a=[];for(const c of r){const d=t(c,void 0,n);d!==void 0&&a.push(d)}return a}const s=t(r,void 0,n);return s!==void 0?[s]:void 0}}function HV(e){if(!qV(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?ZI(t.Type):WV(t.Type))}function nse(e){return"types"in e?WV(e.types):ZI(e.type)}function ZI(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||HV(e))}function WV(e){for(const t in e.typeMap)if(!ZI(e.typeMap[t]))return!1;return!0}function sse(e){let t=null;const r=e.errorContext??"type",i=e.validate;return(n,s,a)=>{if(n==null)return n;const c=typeof n;if(c!=="object")return void B3().error(`Expected JSON value of type 'object' to deserialize, but got '${c}'`);t||(t=ose(e));const d=e.key;if(typeof d!="string")return;const f=n[d],g=f?t[f]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!g){const w=`Type '${f||"unknown"}' is not supported`;return a?.messages&&n&&a.messages.push(new gs(`${r}:unsupported`,w,{definition:n,context:a})),void B3().error(w)}const v=new g;return v.read(n,a),i?i(v):v}}function ose(e){const t={};for(const r in e.typeMap){const i=e.typeMap[r],n=$1(i.prototype);if(typeof e.key=="function")continue;const s=n[e.key];if(!s)continue;if(s.json?.type&&Array.isArray(s.json.type)&&s.json.type.length===1&&typeof s.json.type[0]=="string"){t[s.json.type[0]]=i;continue}const a=s.json?.write;if(!a?.writer){t[r]=i;continue}const c=a.target,d=typeof c=="string"?c:e.key,f={};a.writer(r,f,d),f[d]&&(t[f[d]]=i)}return t}function ase(e){if(e.json||(e.json={}),T5(e.json),E5(e.json),S5(e.json),e.json.origins)for(const t in e.json.origins)T5(e.json.origins[t]),E5(e.json.origins[t]),S5(e.json.origins[t]);return!0}function S5(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function T5(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function E5(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function x5(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=e?.ndimArray??0;e&&(r===1||"type"in e&&qV(e.type))?t.write.writer=cse:r>1?t.write.writer=dse(r):t.types?Array.isArray(t.types)?t.write.writer=use(t.types[0]):t.write.writer=lse(t.types):t.write.writer=Yv}function lse(e){return(t,r,i,n)=>t?ZV(t,e,n)?Yv(t,r,i,n):void 0:Yv(t,r,i,n)}function ZV(e,t,r){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(r?.messages){const i=t.errorContext??"type",n=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new z(`${i}:unsupported`,n,{definition:e,context:r})),re.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function use(e){return(t,r,i,n)=>!t||!Array.isArray(t)?Yv(t,r,i,n):Yv(t.filter((s=>ZV(s,e,n))),r,i,n)}function Yv(e,t,r,i){ii(r,YS(e,i),t)}function YS(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?JS(e):e}function JS(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function cse(e,t,r,i){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map((s=>YS(s,i))),typeof n.toArray=="function"&&(n=n.toArray())):n=[YS(e,i)],ii(r,n,t)}function YV(e,t,r){return r!==0&&Array.isArray(e)?e.map((i=>YV(i,t,r-1))):YS(e,t)}function dse(e){return(t,r,i,n)=>{let s;if(t===null)s=null;else{s=YV(t,n,e);let a=e,c=s;for(;a>0&&Array.isArray(c);)a--,c=c[0];if(c!==void 0)for(let d=0;d<a;d++)s=[s]}ii(i,s,r)}}function hse(e,t){return YI(e,"any",t?.origin)}function H3(e,t){return YI(e,"read",t?.origin)}function JV(e,t){return YI(e,"write",t?.origin)}function YI(e,t,r){let i=e?.json;if(i?.origins&&r){let n;n=r==="link-chart"?i.origins[r]&&(t==="any"||t in i.origins[r])?i.origins[r]:i.origins["web-map"]:i.origins[r],n&&(t==="any"||t in n)&&(i=n)}return i}function pse(e){const t=fse(e);if(e.json.origins)for(const r in e.json.origins){const i=e.json.origins[r],n=i.types?mse(i):t;w5(n,i,!1),i.types&&!i.write&&e.json.write?.enabled&&(i.write={...e.json.write}),x5(n,i)}w5(t,e.json,!0),x5(t,e.json)}function fse(e){return e.json.types?W3(e.json):e.type?XV(e):W3(e)}function mse(e){return e.type?XV(e):W3(e)}function XV(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!VV(r);)r=r[0],t++;return{type:r,ndimArray:t}}function W3(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function yse(e){ase(e)&&(tse(e),pse(e))}const G$=new Set,q$=new Set;function O(e){return t=>{e??="esri.core.Accessor",t.prototype.declaredClass=e,vse(t);const r=[],i=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!G$.has(n.initialize)&&(G$.add(n.initialize),r.push(n.initialize)),n.hasOwnProperty("destroy")&&!q$.has(n.destroy)&&(q$.add(n.destroy),i.push(n.destroy)),n=Object.getPrototypeOf(n);G$.clear(),q$.clear();const s=class extends t{constructor(...c){if(super(...c),this.constructor===s&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let d=r.length-1;d>=0;d--)r[d].call(this)}}),i.length){let d=!1;const f=this[vV];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!d){this.__accessor__.lifecycle=ls.DESTROYING,d=!0,f.call(this);for(let g=0;g<i.length;g++)i[g].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=$1(t.prototype),s.prototype.declaredClass=e;const a=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:a,configurable:!0}),s}}function gse(e,t){return t.get==null?function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i===void 0)return;r.mutable&&Le(i);const n=r.store;return n.has(e)?n.get(e):i.metadata.value}:function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i!==void 0)return i.getComputed(r)}}function vse(e){const t=e.prototype,r=$1(t),i={};for(const n of Object.getOwnPropertyNames(r)){const s=r[n];yse(s),i[n]={enumerable:!0,configurable:!0,get:gse(n,s),set(a){const c=this.__accessor__;if(c!==void 0){if(c.mutable)return c.initialized&&s.readOnly?$5("read-only",n):c.lifecycle===ls.CONSTRUCTED&&s.constructOnly?$5("construct-only",n):void c.set(n,a)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:a})}}}Object.defineProperties(e.prototype,i)}const $5=(e,t)=>{re.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var M5,A5;function bse(e){if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor?.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Au=Symbol("Accessor-Handles"),B$=Symbol("Accessor-Initialized");var Ac;let Ae=(Ac=class{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const s=this;class a extends s{constructor(...d){super(...d),this.inherited=null,n&&n.apply(this,d)}}$1(a.prototype);for(const c in t){const d=t[c];a.prototype[c]=typeof d=="function"?function(...f){const g=this.inherited;let v;this.inherited=function(...w){if(s.prototype[c])return s.prototype[c].apply(this,w)};try{v=d.apply(this,f)}catch(w){throw this.inherited=g,w}return this.inherited=g,v}:t[c]}for(const c in r){const d=bse(r[c]);p(d)(a.prototype,c)}return O(i)(a)}static freeze(t){return t instanceof Ac?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof Ac?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){if(this[M5]=null,this[A5]=!1,this.constructor===Ac)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new nne(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=this.normalizeCtorArgs?.apply(this,t)??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[B$]=!0}initialize(){}[vV](){this[Au]=rr(this[Au])}destroy(){this.destroyed||(Ine(this),this.__accessor__.destroy(),cne()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[B$]}get destroyed(){return this.__accessor__?.lifecycle===ls.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===ls.DESTROYING||!1}commitProperty(t){Io(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return jS(this,t,r),this}watch(t,r,i){return yV(re.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),Fne(this,t,r,i)}addHandles(t,r){if(this.destroyed){const i=Array.isArray(t)?t:[t];for(const n of i)n.remove();return}(this[Au]??=new my).add(t,r)}removeHandles(t){this[Au]?.remove(t)}removeAllHandles(){this[Au]?.removeAll()}removeHandlesReference(t){this[Au]?.removeReference(t)}hasHandles(t){return this[Au]?.has(t)===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}},M5=Au,A5=B$,Ac),b_=class QV{constructor(){this._emitter=new QV.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(n=null){this._target=n,this._listenersMap=null}clear(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,s){let a=this._listenersMap?.get(n);if(!a)return!1;const c=this._target||this;let d=!1;for(const f of a.slice()){const g="deref"in f?f.deref():f;g?g?.call(c,s):d=!0}return d&&(a=a.filter((f=>!("deref"in f)||f.deref()!=null)),this._listenersMap.set(n,a)),a.length>0}on(n,s){if(Array.isArray(n)){const c=n.map((d=>this.on(d,s)));return Zh(c)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const a=this._listenersMap.get(n)||[];return a.push(s),this._listenersMap.set(n,a),ht((()=>{const c=this._listenersMap?.get(n),d=c?.indexOf(s)??-1;d>=0&&c.splice(d,1)}))}once(n,s){const a=this.on(n,(c=>{a.remove(),("deref"in s?s.deref():s)?.call(null,c)}));return a}hasEventListener(n){const s=this._listenersMap?.get(n);return s!=null&&s.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let n=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(s,a){return this._emitter.emit(s,a)}on(s,a){return this._emitter.on(s,a)}once(s,a){return this._emitter.once(s,a)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=u([O("esri.core.Evented")],n),n};let r=class extends Ae{constructor(){super(...arguments),this._emitter=new b_.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,n){return this._emitter.emit(i,n)}on(i,n){return this._emitter.on(i,n)}once(i,n){return this._emitter.once(i,n)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=u([O("esri.core.Evented.EventedAccessor")],r),e.EventedAccessor=r})(b_||(b_={}));const Na=b_;var St;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(St||(St={}));function JI(e){return(t,r)=>{t[r]=e}}let C1=class extends TV{notify(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onInvalidated(),i.onCommitted()}}};var nl;let wse=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},_se=class{constructor(t,r,i,n,s){this.target=t,this.added=r,this.removed=i,this.start=n,this.deleteCount=s}};const Ms=new fy(wse,void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}));function O5(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function H$(e){return e?e instanceof Qu?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function W$(e){if(e?.length)return e[0]}function Sse(e,t,r,i){const n=Math.min(e.length-r,t.length-i);let s=0;for(;s<n&&e[r+s]===t[i+s];)s++;return s}function KV(e,t,r,i){t&&t.forEach(((n,s,a)=>{e.push(n),KV(e,r.call(i,n,s,a),r,i)}))}const Ou=new Set,Ru=new Set,Cu=new Set,Z$=new Map;let Tse=0;var Th;let Qu=(Th=class extends Na.EventedAccessor{static isCollection(t){return t!=null&&t instanceof nl}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new C1,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Tse++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof nl?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Le(this._observable),this._items}set items(t){this._emitBeforeChanges(St.ADD)||(this._splice(0,this.length,H$(t)),this._emitAfterChanges(St.ADD))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t))}on(t,r){if(this.destroyed)return ht();if(t==="change"){const i=this._chgListeners,n={removed:!1,callback:r};return i.push(n),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),ht((()=>{n.removed=!0,i.splice(i.indexOf(n),1)}))}return this._emitter.on(t,r)}once(t,r){const i="deref"in r?()=>r.deref():()=>r,n=this.on(t,(s=>{i()?.call(null,s),n.remove()}));return n}add(t,r){if(Le(this._observable),this._emitBeforeChanges(St.ADD))return this;const i=this.getNextIndex(r??null);return this._splice(i,0,[t]),this._emitAfterChanges(St.ADD),this}addMany(t,r=this._items.length){if(Le(this._observable),!t?.length)return this;if(this._emitBeforeChanges(St.ADD))return this;const i=this.getNextIndex(r);return this._splice(i,0,H$(t)),this._emitAfterChanges(St.ADD),this}at(t){if(Le(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(Le(this._observable),!this.length||this._emitBeforeChanges(St.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(St.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Le(this._observable),this._createNewInstance({items:this._items.map(U)})}concat(...t){Le(this._observable);const r=t.map(H$);return this._createNewInstance({items:this._items.concat(...r)})}drain(t,r){if(Le(this._observable),!this.length||this._emitBeforeChanges(St.REMOVE))return;const i=this._splice(0,this.length),n=i.length;for(let s=0;s<n;s++)t.call(r,i[s],s,i);this._emitAfterChanges(St.REMOVE)}destroyAll(){this.drain(O5)}destroyMany(t){const r=this.removeMany(t);return r.forEach(O5),r}every(t,r){return Le(this._observable),this._items.every(t,r)}filter(t,r){Le(this._observable);const i=arguments.length===2?this._items.filter(t,r):this._items.filter(t);return this._createNewInstance({items:i})}find(t,r){return Le(this._observable),this._items.find(t,r)}findIndex(t,r){return Le(this._observable),this._items.findIndex(t,r)}flatten(t,r){Le(this._observable);const i=[];return KV(i,this,t,r),new nl(i)}forEach(t,r){return Le(this._observable),this._items.forEach(t,r)}getItemAt(t){return Le(this._observable),this._items[t]}getNextIndex(t){Le(this._observable);const r=this.length;return(t=t??r)<0?t=0:t>r&&(t=r),t}includes(t,r=0){return Le(this._observable),this._items.includes(t,r)}indexOf(t,r=0){return Le(this._observable),this._items.indexOf(t,r)}join(t=","){return Le(this._observable),this._items.join(t)}lastIndexOf(t,r=this.length-1){return Le(this._observable),this._items.lastIndexOf(t,r)}map(t,r){Le(this._observable);const i=this._items.map(t,r);return new nl({items:i})}reorder(t,r=this.length-1){Le(this._observable);const i=this.indexOf(t);if(i!==-1){if(r<0?r=0:r>=this.length&&(r=this.length-1),i!==r){if(this._emitBeforeChanges(St.MOVE))return t;this._splice(i,1),this._splice(r,0,[t]),this._emitAfterChanges(St.MOVE)}return t}}pop(){if(Le(this._observable),!this.length||this._emitBeforeChanges(St.REMOVE))return;const t=W$(this._splice(this.length-1,1));return this._emitAfterChanges(St.REMOVE),t}push(...t){return Le(this._observable),this._emitBeforeChanges(St.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(St.ADD)),this.length}reduce(t,r){Le(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,r):i.reduce(t)}reduceRight(t,r){Le(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,r):i.reduceRight(t)}remove(t){return Le(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(Le(this._observable),t<0||t>=this.length||this._emitBeforeChanges(St.REMOVE))return;const r=W$(this._splice(t,1));return this._emitAfterChanges(St.REMOVE),r}removeMany(t){if(Le(this._observable),!t?.length||this._emitBeforeChanges(St.REMOVE))return[];const r=t instanceof nl?t.toArray():t,i=this._items,n=[],s=r.length;for(let a=0;a<s;a++){const c=r[a],d=i.indexOf(c);if(d>-1){const f=1+Sse(r,i,a+1,d+1),g=this._splice(d,f);g&&g.length>0&&n.push.apply(n,g),a+=f-1}}return this._emitAfterChanges(St.REMOVE),n}reverse(){if(Le(this._observable),this._emitBeforeChanges(St.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(St.MOVE),this}shift(){if(Le(this._observable),!this.length||this._emitBeforeChanges(St.REMOVE))return;const t=W$(this._splice(0,1));return this._emitAfterChanges(St.REMOVE),t}slice(t=0,r=this.length){return Le(this._observable),this._createNewInstance({items:this._items.slice(t,r)})}some(t,r){return Le(this._observable),this._items.some(t,r)}sort(t){if(Le(this._observable),!this.length||this._emitBeforeChanges(St.MOVE)||!this._requiresSort(t))return this;const r=this._splice(0,this.length);return arguments.length?r.sort(t):r.sort(),this._splice(0,0,r),this._emitAfterChanges(St.MOVE),this}_requiresSort(t=(r,i)=>r===i?0:r<i?-1:1){const r=this.length-1;for(let i=0;i<r;i++)if(t(this.items[i],this.items[i+1])>0)return!0;return!1}splice(t,r,...i){Le(this._observable),arguments.length===1&&(r=this.length),r??=0;const n=(r?St.REMOVE:0)|(i.length?St.ADD:0);if(this._emitBeforeChanges(n))return[];const s=this._splice(t,r,i)||[];return this._emitAfterChanges(n),s}toArray(){return Le(this._observable),this._items.slice()}toJSON(t){return Le(this._observable),this.toArray().map((r=>Bv(r)?r.toJSON(t):r))}toLocaleString(){return Le(this._observable),this._items.toLocaleString()}toString(){return Le(this._observable),this._items.toString()}unshift(...t){return Le(this._observable),!t.length||this._emitBeforeChanges(St.ADD)||(this._splice(0,0,t),this._emitAfterChanges(St.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,r,i){const n=this._items,s=this.itemType;let a,c;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=A1((()=>this._dispatchChange()))),t<0&&(t+=this.length),r){if(c=n.splice(t,r),this.hasEventListener("before-remove")){const d=Ms.acquire();d.target=this,d.cancellable=!0;for(let f=0,g=c.length;f<g;f++)a=c[f],d.reset(a),this.emit("before-remove",d),d.defaultPrevented&&(c.splice(f,1),n.splice(t,0,a),t+=1,f-=1,g-=1);Ms.release(d)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const d=Ms.acquire();d.target=this,d.cancellable=!1;const f=c.length;for(let g=0;g<f;g++)d.reset(c[g]),this.emit("after-remove",d);Ms.release(d)}}if(i?.length){if(s){const v=[];for(const w of i){const S=s.ensureType(w);S==null&&w!=null||v.push(S)}i=v}const d=this.hasEventListener("before-add"),f=this.hasEventListener("after-add"),g=t===this.length;if(d||f){const v=Ms.acquire();v.target=this,v.cancellable=!0;const w=Ms.acquire();w.target=this,w.cancellable=!1;for(const S of i)d?(v.reset(S),this.emit("before-add",v),v.defaultPrevented||(g?n.push(S):n.splice(t++,0,S),this._set("length",n.length),f&&(w.reset(S),this.emit("after-add",w)))):(g?n.push(S):n.splice(t++,0,S),this._set("length",n.length),w.reset(S),this.emit("after-add",w));Ms.release(w),Ms.release(v)}else{if(g)for(const v of i)n.push(v);else n.splice(t,0,...i);this._set("length",n.length)}}if((i?.length||c?.length)&&this._notifyChangeEvent(i,c),this.hasEventListener("after-splice")){const d=new _se(this,i,c,t,r);this.emit("after-splice",d)}return c}_emitBeforeChanges(t){let r=!1;if(this.hasEventListener("before-changes")){const i=Ms.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),r=i.defaultPrevented,Ms.release(i)}return r}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const r=Ms.acquire();r.target=this,r.cancellable=!1,r.type=t,this.emit("after-changes",r),Ms.release(r)}this._observable.notify()}_notifyChangeEvent(t,r){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:r})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const r of t){const i=r.changes;Ou.clear(),Ru.clear(),Cu.clear();for(const{added:f,removed:g}of i){if(f)if(Cu.size===0&&Ru.size===0)for(const v of f)Ou.add(v);else for(const v of f)Ru.has(v)?(Cu.add(v),Ru.delete(v)):Cu.has(v)||Ou.add(v);if(g)if(Cu.size===0&&Ou.size===0)for(const v of g)Ru.add(v);else for(const v of g)Ou.has(v)?Ou.delete(v):(Cu.delete(v),Ru.add(v))}const n=ln.acquire();Ou.forEach((f=>{n.push(f)}));const s=ln.acquire();Ru.forEach((f=>{s.push(f)}));const a=this._items,c=r.items,d=ln.acquire();if(Cu.forEach((f=>{c.indexOf(f)!==a.indexOf(f)&&d.push(f)})),r.listeners&&(n.length||s.length||d.length)){const f={target:this,added:n,removed:s,moved:d},g=r.listeners.length;for(let v=0;v<g;v++){const w=r.listeners[v];w.removed||w.callback.call(this,f)}}ln.release(n),ln.release(s),ln.release(d)}Ou.clear(),Ru.clear(),Cu.clear()}},nl=Th,Th.ofType=t=>{if(!t)return nl;if(Z$.has(t))return Z$.get(t);let r=null;if(typeof t=="function")r=t.prototype.declaredClass;else if(t.base)r=t.base.prototype.declaredClass;else for(const n in t.typeMap){const s=t.typeMap[n].prototype.declaredClass;r?r+=` | ${s}`:r=s}let i=class extends nl{};return u([JI({Type:t,ensureType:typeof t=="function"?Br(t):Ma(t)})],i.prototype,"itemType",void 0),i=u([O(`esri.core.Collection<${r}>`)],i),Z$.set(t,i),i},Th);u([p()],Qu.prototype,"_updating",void 0),u([p()],Qu.prototype,"length",void 0),u([p()],Qu.prototype,"items",null),u([p({readOnly:!0})],Qu.prototype,"updating",null),Qu=nl=u([O("esri.core.Collection")],Qu);const ge=Qu;function Xl(e,t,r=ge){return t||(t=new r),t===e||(t.removeAll(),Ese(e)?t.addMany(e):e&&t.add(e)),t}function eG(e){return e}function Ese(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}let xse=class tG{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new tG;return this._values.forEach(((i,n)=>{t&&t.has(n)||r.set(n,U(i.value),i.origin)})),r}get(t,r){r=this._normalizeOrigin(r);const i=this._values.get(t);return r==null||i?.origin===r?i?.value:void 0}originOf(t){return this._values.get(t)?.origin??Ke.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter((i=>this._values.get(i)?.origin===t))}set(t,r,i){if((i=this._normalizeOrigin(i))===Ke.DEFAULTS){const n=this._values.get(t);if(n?.origin!=null&&n.origin>i)return}this._values.set(t,new $se(r,i))}delete(t,r){(r=this._normalizeOrigin(r))!=null&&this._values.get(t)?.origin!==r||this._values.delete(t)}has(t,r){return(r=this._normalizeOrigin(r))!=null?this._values.get(t)?.origin===r:this._values.has(t)}isAtOrigin(t,r){return r=this._normalizeOrigin(r),this.has(t,r)&&this.originOf(t)===r}isBelowOrigin(t,r){return r=this._normalizeOrigin(r),!this.has(t)||this.originOf(t)<r}forEach(t){this._values.forEach((({value:r},i)=>t(r,i)))}_normalizeOrigin(t){if(t!=null)return t===Ke.DEFAULTS?t:Ke.USER}},$se=class{constructor(t,r){this.value=t,this.origin=r}};function rG(e,t,r){t.keys().forEach((n=>{r.set(n,t.get(n),Ke.DEFAULTS)}));const i=e.metadata;Object.keys(i).forEach((n=>{e.internalGet(n)&&r.set(n,e.internalGet(n),Ke.DEFAULTS)}))}function Mse(e,t,r){if(!e?.read||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.includes(".")&&i.indexOf(t)===0&&u5(i,r))return!0}else for(const n of i)if(n===t||n.includes(".")&&n.indexOf(t)===0&&u5(n,r))return!0;return!1}function Ase(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Ose(e,t,r,i,n){let s=H3(t[r],n);Ase(s)&&(e[r]=!0);for(const a of Object.getOwnPropertyNames(t))s=H3(t[a],n),Mse(s,r,i)&&(e[a]=!0)}function Rse(e,t,r,i){const n=r.metadata,s=hse(n[t],i),a=s?.default;if(a===void 0)return;const c=typeof a=="function"?a.call(e,t,i):a;c!==void 0&&r.set(t,c)}const iG={origin:"service"};function nG(e,t,r=iG){if(!t||typeof t!="object")return;const i=gn(e),n=i.metadata,s={};for(const a of Object.getOwnPropertyNames(t))Ose(s,n,a,t,r);i.setDefaultOrigin(r.origin);for(const a of Object.getOwnPropertyNames(s)){const c=H3(n[a],r).read,d=c?.source;let f;f=d&&typeof d=="string"?x1(t,d):t[a],c?.reader&&(f=c.reader.call(e,f,t,r)),f!==void 0&&i.set(a,f)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const a of Object.getOwnPropertyNames(n))s[a]||Rse(e,a,i,r)}i.setDefaultOrigin("user")}function Cse(e,t,r,i=iG){const n={...i,messages:[]};r(n),n.messages?.forEach((s=>{s.type!=="warning"||e.loaded?i?.messages&&i.messages.push(s):e.loadWarnings.push(s)}))}function Ise(e,t,r,i,n){const s={};return t.write?.writer?.call(e,i,s,r,n),s}function sG(e,t,r,i,n,s){if(!i?.write)return!1;const a=Io(e,r);if(!n&&i.write.overridePolicy){const c=i.write.overridePolicy.call(e,a,r,s??void 0);c!==void 0&&(n=c)}if(n||(n=i.write),!n||n.enabled===!1||n.layerContainerTypes&&s?.layerContainerType&&!n.layerContainerTypes.includes(s.layerContainerType))return!1;if((a===null&&!n.allowNull&&!n.writerEnsuresNonNull||a===void 0)&&n.isRequired){const c=new z("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return c&&s?.messages?s.messages.push(c):c&&!s&&re.getLogger("esri.core.accessorSupport.write").error(c.name,c.message),!1}return!(a===void 0||a===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===Ke.DEFAULTS)&&Nse(e,r,s,i,a)||!n.ignoreOrigin&&s?.origin&&t.store.multipleOriginsSupported&&t.store.originOf(r)<Ul(s.origin))}function Nse(e,t,r,i,n){const s=i.default;if(s===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const a=s.call(e,t,r??void 0);return oT(a,n)}return!1}return s===n}function Pse(e,t,r,i){const n=gn(e),s=n.metadata,a=JV(s[t],i);return!!a&&sG(e,n,t,a,r,i)}function oG(e,t,r){if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return f_(t,e.toJSON(r));const i=gn(e),n=i.metadata;for(const s in n){const a=JV(n[s],r);if(!sG(e,i,s,a,void 0,r))continue;const c=Io(e,s),d=Ise(e,a,a.write&&typeof a.write.target=="string"?a.write.target:s,c,r);Object.keys(d).length>0&&(t=f_(t,d),r?.resources?.pendingOperations?.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then((()=>f_(t,d,(()=>"replace-arrays"))))),r?.writtenProperties&&r.writtenProperties.push({target:e,propName:s,oldOrigin:ene(i.store.originOf(s)),newOrigin:r.origin}))}return t}const aG=e=>{let t=class extends e{constructor(...r){super(...r);const i=gn(this),n=i.store,s=new xse;i.store=s,rG(i,n,s)}read(r,i){nG(this,r,i)}write(r,i){return oG(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return Lse.call(this,r,i)}};return t=u([O("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Lse(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let m0=class extends aG(Ae){};m0=u([O("esri.core.JSONSupport")],m0),(function(e){e.JSONSupportMixin=aG})(m0||(m0={}));const K=m0;var Ku;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Ku||(Ku={}));let Dse=class{constructor(){this._resolver=ys(),this._status=Ku.PENDING,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=Ku.RESOLVED,this._cleanUp()}),(()=>{this._status=Ku.REJECTED,this._cleanUp()})),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Ku.RESOLVED}isRejected(){return this._status===Ku.REJECTED}isFulfilled(){return this._status!==Ku.PENDING}abort(){this._resolver.reject(Zt())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=ys(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then((()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve()}),(n=>{this.isFulfilled()||this._allPromise!==i||Zi(n)||this._resolver.reject(n)})),t.resolve()}};const lG=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new Dse,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then((()=>this)).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=u([O("esri.core.Promise")],t),t};let jl=class extends lG(Ae){};jl=u([O("esri.core.Promise")],jl),(function(e){e.EsriPromiseMixin=lG})(jl||(jl={}));const kse="not-loaded",Fse="loading",Use="failed",R5="loaded",uG=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((i=>{const n=this.load.bind(this);this.load=s=>{const a=new Promise(((c,d)=>{const f=PI(s,d);this.destroyed&&d(new z("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(c,d).finally((()=>{f&&f.remove()}))}));if(this.loadStatus===kse){this._set("loadStatus",Fse);const c=this._loadController=new AbortController;n({signal:c.signal})}return i(),a}}))),this.when((()=>{this._set("loadStatus",R5),this._loadController=null}),(i=>{this._set("loadStatus",Use),this._set("loadError",i),this._loadController=null}))}destroy(){this._loadController&&(this._loadController=zm(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===R5}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new z("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return u([p({readOnly:!0})],t.prototype,"loaded",null),u([p({readOnly:!0})],t.prototype,"loadError",void 0),u([p({clonable:!1})],t.prototype,"loadStatus",void 0),u([p({type:[gs],readOnly:!0})],t.prototype,"loadWarnings",null),t=u([O("esri.core.Loadable")],t),t};let cs=class extends uG(jl){};cs=u([O("esri.core.Loadable")],cs),(function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=uG,e.isLoadable=t})(cs||(cs={}));function qRe(e,t,r){return LI(e.map(((i,n)=>t.apply(r,[i,n]))))}async function jse(e,t,r){return(await LI(e.map(((i,n)=>t.apply(r,[i,n]))))).map((i=>i.value))}function XI(e){return{ok:!0,value:e}}function QI(e){return{ok:!1,error:e}}function zse(e){return e!=null&&e.ok===!0?e.value:null}function Vse(e){return e!=null&&e.ok===!1?e.error:null}async function vT(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return XI(await e)}catch(t){return QI(t)}}async function Gse(e){try{return XI(await e)}catch(t){return ya(t),QI(t)}}function bT(e,t){return new Uu(e,t)}let Uu=class extends Ae{get value(){return zse(this._result)}get error(){return Vse(this._result)}get finished(){return this._result!=null}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=zm(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=t(i),this.promise.then((n=>{this._result=XI(n),this._cleanup()}),(n=>{this._result=QI(n),this._cleanup()})),this._abortHandle=jo(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=ir(this._abortHandle),this._abortController=null}};u([p()],Uu.prototype,"value",null),u([p()],Uu.prototype,"error",null),u([p()],Uu.prototype,"finished",null),u([p()],Uu.prototype,"promise",void 0),u([p()],Uu.prototype,"_result",void 0),Uu=u([O("esri.core.asyncUtils.ReactiveTask")],Uu);async function cG(e,t){return await e.load(),qse(e,t)}async function qse(e,t){const r=[],i=(...s)=>{for(const a of s)a!=null&&(Array.isArray(a)?i(...a):ge.isCollection(a)?a.forEach((c=>i(c))):cs.isLoadable(a)&&r.push(a))};t(i);let n=null;if(await jse(r,(async s=>{const a=await vT(Bse(s)?s.loadAll():s.load());a.ok!==!1||n||(n=a)})),n)throw n.error;return e}function Bse(e){return"loadAll"in e&&typeof e.loadAll=="function"}function de(e,t,r){let i,n;return t===void 0?(n=e,i=[void 0]):typeof t!="string"?(n=e,i=[void 0],r=t):(n=t,i=Array.isArray(e)?e:[e]),(s,a)=>{const c=s.constructor.prototype;for(const d of i){const f=HI(s,d,n);f.write&&typeof f.write=="object"||(f.write={}),r&&(f.write.target=r),f.write.writer=c[a]}}}let tt=class{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=Hse(t),this.apiValues=C5(this._apiToJSON),this.jsonValues=C5(this._jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,n,s)=>{const a=this.toJSON(i);a!==void 0&&ii(s,a,n)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?null:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function Hse(e){const t={};for(const r in e)t[e[r]]=r;return t}function C5(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function wi(){return function(e,t){return new tt(e,{ignoreUnknown:!0,...t})}}let KI=class{constructor(t,r,i,n,s,a){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i,this.atmosphereHeight=n,this.scaleHeight=s;const c=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*c,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=a||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const dr=new KI(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Ta=new KI(3396190,1/169.8944472236118,23e4,6e4,.111),Rc=new KI(1737400,0,0,0,0);function gr(e){if(!ct.assetsPath)throw re.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new z("assets:path-not-set","config.assetsPath is not set");return Oh(ct.assetsPath,e)}let Y$,D=null;function eN(){return!!D}function Wse(){return!!V("esri-wasm")}function dG(){return Y$||(Y$=ue(()=>import("./pe-wasm-DzdsRf4N.js"),[]).then((({default:e})=>e({locateFile:t=>gr(`esri/geometry/support/${t}`)}))).then((e=>{fG(e)})),Y$)}var Z3,tr;(function(e){function t(s,a,c){D.ensureCache.prepare();const d=Xd(c),f=c===d,g=D.ensureFloat64(d),v=D._pe_geog_to_proj(D.getPointer(s),a,g);return v&&uc(c,a,g,f),v}function r(s,a,c,d){switch(d){case tr.PE_TRANSFORM_P_TO_G:return i(s,a,c);case tr.PE_TRANSFORM_G_TO_P:return t(s,a,c)}return 0}function i(s,a,c){return n(s,a,c,0)}function n(s,a,c,d){D.ensureCache.prepare();const f=Xd(c),g=c===f,v=D.ensureFloat64(f),w=D._pe_proj_to_geog_center(D.getPointer(s),a,v,d);return w&&uc(c,a,v,g),w}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=n})(Z3||(Z3={})),(function(e){function t(){e.PE_BUFFER_MAX=D.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=D.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=D.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=D.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=D.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=D.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=D.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=D.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=D.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=D.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=D.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=D.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=D.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=D.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=D.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=D.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=D.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=D.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=D.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=D.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=D.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=D.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=D.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=D.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=D.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=D.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=D.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=D.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=D.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=D.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=D.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=D.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t})(tr||(tr={}));let hG=null;var Y3;(function(e){const t={},r={},i=S=>{const T=S.getType();switch(T){case tr.PE_TYPE_GEOGCS:S=D.castObject(S,D.PeGeogcs);break;case tr.PE_TYPE_PROJCS:S=D.castObject(S,D.PeProjcs);break;case tr.PE_TYPE_GEOGTRAN:S=D.castObject(S,D.PeGeogtran);break;default:T&tr.PE_TYPE_UNIT&&(S=D.castObject(S,D.PeUnit))}return S};function n(){D.PeFactory.prototype.initialize(null)}function s(S){return a(tr.PE_TYPE_COORDSYS,S)}function a(S,T){let E=null,M=t[S];if(M||(M={},t[S]=M),M.hasOwnProperty(String(T))&&(E=M[T],D.compare(E,D.NULL)&&(E=null)),!E){const R=D.PeFactory.prototype.factoryByType(S,T);D.compare(R,D.NULL)||(E=i(R),M[T]=E)}return E}function c(S,T){let E=null,M=r[S];if(M||(M={},r[S]=M),M.hasOwnProperty(T)&&(E=M[T],D.compare(E,D.NULL)&&(E=null)),!E){const R=D.PeFactory.prototype.fromString(S,T);D.compare(R,D.NULL)||(E=i(R),M[T]=E)}return E}function d(S){return a(tr.PE_TYPE_GEOGCS,S)}function f(S){return a(tr.PE_TYPE_GEOGTRAN,S)}function g(S){return D.PeFactory.prototype.getCode(S)}function v(S){return a(tr.PE_TYPE_PROJCS,S)}function w(S){return a(tr.PE_TYPE_UNIT,S)}e.initialize=n,e.coordsys=s,e.factoryByType=a,e.fromString=c,e.geogcs=d,e.geogtran=f,e.getCode=g,e.projcs=v,e.unit=w})(Y3||(Y3={}));let pG=null;var XS,J3,X3,Q3,K3,eA,QS,tA,KS,e2,rA;function fG(e){function t(s,a,c){s[a]=c(s[a])}D=e,tr.init(),XS.init(),QS.init(),KS.init(),e2.init(),hG=class extends D.PeDouble{constructor(s=NaN){super(s)}destroy(){D.destroy(this)}[Symbol.dispose](){this.destroy()}},pG=class extends D.PeGCSExtent{destroy(){D.destroy(this)}[Symbol.dispose](){this.destroy()}};const r=[D.PeAngunit,D.PeDatum,D.PeGeogcs,D.PeGeogtran,D.PeObject,D.PeParameter,D.PePrimem,D.PeProjcs,D.PeSpheroid,D.PeUnit];for(const s of r)t(s.prototype,"getName",(a=>function(){return a.call(this,new Array(tr.PE_NAME_MAX))}));for(const s of[D.PeGeogtran,D.PeProjcs])t(s.prototype,"getParameters",(a=>function(){const c=new Array(tr.PE_PARM_MAX);let d=a.call(this);for(let f=0;f<c.length;f++){const g=D.getValue(d,"*");c[f]=g?D.wrapPointer(g,D.PeParameter):null,d+=Int32Array.BYTES_PER_ELEMENT}return c}));t(D.PeHorizon.prototype,"getCoord",(s=>function(a=!1){const c=this.getSize();if(!c)return null;const d=[];return uc(d,c,s.call(this),a),d})),t(D.PeGTlistExtendedEntry.prototype,"getEntries",(s=>{const a=D._pe_getPeGTlistExtendedGTsSize();return function(){let c=null;const d=s.call(this);if(!D.compare(d,D.NULL)){c=[d];const f=this.getSteps();if(f>1){const g=D.getPointer(d);for(let v=1;v<f;v++)c.push(D.wrapPointer(g+a*v,D.PeGTlistExtendedGTs))}}return c}}));const i=D._pe_getPeHorizonSize(),n=s=>function(){let a=this._cache;if(a||(a=new Map,this._cache=a),a.has(s))return a.get(s);let c=null;const d=s.call(this);if(!D.compare(d,D.NULL)){c=[d];const f=d.getNump();if(f>1){const g=D.getPointer(d);for(let v=1;v<f;v++)c.push(D.wrapPointer(g+i*v,D.PeHorizon))}}return a.set(s,c),c};t(D.PeProjcs.prototype,"horizonGcsGenerate",n),t(D.PeProjcs.prototype,"horizonPcsGenerate",n),D.PeObject.prototype.toString=function(s=tr.PE_STR_OPTS_NONE){D.ensureCache.prepare();const a=D.getPointer(this),c=D.ensureInt8(new Array(tr.PE_BUFFER_MAX));return D.UTF8ToString(D._pe_object_to_string_ext(a,s,c))},D.PeGeogcs.prototype.destroy=function(){this.Delete(),So(this),this.ptr=0},D.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},D.PeProjcs.prototype.destroy=function(){this.Delete(),So(this),this.ptr=0},D.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function So(e){if(!e)return;const t=D.getClass(e);if(!t)return;const r=D.getCache(t);if(!r)return;const i=D.getPointer(e);i&&delete r[i]}function bw(e,t){const r=[],i=new Array(t);for(let n=0;n<e;n++)r.push(D.ensureInt8(i));return r}function Xd(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function uc(e,t,r,i=!1){if(i)for(let n=0;n<2*t;n++)e[n]=D.getValue(r+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let s=0;s<t;s++)n&&(e[s]=new Array(2)),e[s][0]=D.getValue(r,"double"),e[s][1]=D.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=D.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=D._pe_getPeGTlistExtendedEntrySize()}function i(n,s,a,c,d,f){let g=null;const v=new D.PeInteger(f);try{const w=D.PeGTlistExtended.prototype.getGTlist(n,s,a,c,d,v);if((f=v.val)&&(g=[w],f>1)){const S=D.getPointer(w);for(let T=1;T<f;T++)g.push(D.wrapPointer(S+t*T,D.PeGTlistExtendedEntry))}}finally{D.destroy(v)}return g}e.init=r,e.getGTlist=i})(XS||(XS={})),(function(e){function t(r){if(r?.length){for(const i of r)So(i),i.getEntries().forEach((n=>{So(n);const s=n.getGeogtran();So(s),s.getParameters().forEach(So),[s.getGeogcs1(),s.getGeogcs2()].forEach((a=>{So(a);const c=a.getDatum();So(c),So(c.getSpheroid()),So(a.getPrimem()),So(a.getUnit())}))}));D.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t})(J3||(J3={})),(function(e){function t(r,i,n,s,a){D.ensureCache.prepare();const c=Xd(n),d=n===c,f=D.ensureFloat64(c);let g=0;s&&(g=D.ensureFloat64(s));const v=D._pe_geog_to_geog(D.getPointer(r),i,f,g,a);return v&&uc(n,i,f,d),v}e.geogToGeog=t})(X3||(X3={})),(function(e){function t(s,a,c,d,f,g,v,w){D.PeLineType.prototype.geodesic_coordinate(s,a,c,d,f,g,v,w)}function r(s,a,c,d,f,g,v,w,S){D.PeLineType.prototype.geodetic_coordinate(s,a,c,d,f,g,v,w,S)}function i(s,a,c,d,f,g,v,w,S,T){D.PeLineType.prototype.geodetic_distance(s,a,c,d,f,g,v,w,S,T)}function n(s,a,c,d,f,g,v,w,S){D.PeLineType.prototype.great_elliptic_distance(s,a,c,d,f,g,v,w,S)}e.geodesicCoordinate=t,e.geodeticCoordinate=r,e.geodeticDistance=i,e.greatEllipticDistance=n})(Q3||(Q3={})),(function(e){function t(a,c){return D.PeMath.prototype.phi_to_eta(a,c)}function r(a,c){return D.PeMath.prototype.eta_to_phi(a,c)}function i(a,c){return D.PeMath.prototype.phi_to_phig(a,c)}function n(a,c,d){return D.PeMath.prototype.q(a,c,d)}function s(a,c){return D.PeMath.prototype.q90(a,c)}e.phiToEta=t,e.etaToPhi=r,e.phiToPhig=i,e.q=n,e.q90=s})(K3||(K3={})),(function(e){const t=(f,g,v,w,S,T)=>{let E,M;switch(D.ensureCache.prepare(),f){case"dd":E=D._pe_geog_to_dd,M=tr.PE_DD_MAX;break;case"ddm":E=D._pe_geog_to_ddm,M=tr.PE_DDM_MAX;break;case"dms":E=D._pe_geog_to_dms,M=tr.PE_DMS_MAX}let R=0;g&&(R=D.getPointer(g));const I=Xd(w),k=D.ensureFloat64(I),j=bw(v,M),P=E(R,v,k,S,D.ensureInt32(j));if(P)for(let X=0;X<v;X++)T[X]=D.UTF8ToString(j[X]);return P},r=(f,g,v,w,S)=>{let T;switch(D.ensureCache.prepare(),f){case"dd":T=D._pe_dd_to_geog;break;case"ddm":T=D._pe_ddm_to_geog;break;case"dms":T=D._pe_dms_to_geog}let E=0;g&&(E=D.getPointer(g));const M=w.map((j=>D.ensureString(j))),R=D.ensureInt32(M),I=D.ensureFloat64(new Array(2*v)),k=T(E,v,R,I);return k&&uc(S,v,I),k};function i(f,g,v,w,S){return t("dms",f,g,v,w,S)}function n(f,g,v,w){return r("dms",f,g,v,w)}function s(f,g,v,w,S){return t("ddm",f,g,v,w,S)}function a(f,g,v,w){return r("ddm",f,g,v,w)}function c(f,g,v,w,S){return t("dd",f,g,v,w,S)}function d(f,g,v,w){return r("dd",f,g,v,w)}e.geogToDms=i,e.dmsToGeog=n,e.geogToDdm=s,e.ddmToGeog=a,e.geogToDd=c,e.ddToGeog=d})(eA||(eA={})),(function(e){function t(){e.PE_MGRS_STYLE_NEW=D.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=D.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=D.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=D.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=D.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(n,s,a,c,d,f,g){D.ensureCache.prepare();let v=0;n&&(v=D.getPointer(n));const w=Xd(a),S=D.ensureFloat64(w),T=bw(s,tr.PE_MGRS_MAX),E=D.ensureInt32(T),M=D._pe_geog_to_mgrs_extended(v,s,S,c,d,f,E);if(M)for(let R=0;R<s;R++)g[R]=D.UTF8ToString(T[R]);return M}function i(n,s,a,c,d){D.ensureCache.prepare();let f=0;n&&(f=D.getPointer(n));const g=a.map((T=>D.ensureString(T))),v=D.ensureInt32(g),w=D.ensureFloat64(new Array(2*s)),S=D._pe_mgrs_to_geog_extended(f,s,v,c,w);return S&&uc(d,s,w),S}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=i})(QS||(QS={})),(function(e){function t(i,n,s,a,c,d,f){D.ensureCache.prepare();let g=0;i&&(g=D.getPointer(i));const v=Xd(s),w=D.ensureFloat64(v),S=bw(n,tr.PE_MGRS_MAX),T=D.ensureInt32(S),E=D._pe_geog_to_usng(g,n,w,a,c,d,T);if(E)for(let M=0;M<n;M++)f[M]=D.UTF8ToString(S[M]);return E}function r(i,n,s,a){D.ensureCache.prepare();let c=0;i&&(c=D.getPointer(i));const d=s.map((w=>D.ensureString(w))),f=D.ensureInt32(d),g=D.ensureFloat64(new Array(2*n)),v=D._pe_usng_to_geog(c,n,f,g);return v&&uc(a,n,g),v}e.geogToUsng=t,e.usngToGeog=r})(tA||(tA={})),(function(e){function t(){e.PE_UTM_OPTS_NONE=D.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=D.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=D.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(n,s,a,c,d){D.ensureCache.prepare();let f=0;n&&(f=D.getPointer(n));const g=Xd(a),v=D.ensureFloat64(g),w=bw(s,tr.PE_UTM_MAX),S=D.ensureInt32(w),T=D._pe_geog_to_utm(f,s,v,c,S);if(T)for(let E=0;E<s;E++)d[E]=D.UTF8ToString(w[E]);return T}function i(n,s,a,c,d){D.ensureCache.prepare();let f=0;n&&(f=D.getPointer(n));const g=a.map((T=>D.ensureString(T))),v=D.ensureInt32(g),w=D.ensureFloat64(new Array(2*s)),S=D._pe_utm_to_geog(f,s,v,c,w);return S&&uc(d,s,w),S}e.init=t,e.geogToUtm=r,e.utmToGeog=i})(KS||(KS={})),(function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=D.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=D.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=D.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=D.PePCSInfo.prototype.PE_POLE_POINT}function i(n,s=e.PE_PCSINFO_OPTION_DOMAIN){let a=null,c=null;return t.has(n)&&(c=t.get(n),c[s]&&(a=c[s])),a||(a=D.PePCSInfo.prototype.generate(n,s),c||(c=[],t.set(n,c)),c[s]=a),a}e.init=r,e.generate=i})(e2||(e2={})),(function(e){function t(){return D.PeVersion.prototype.version_string()}e.versionString=t})(rA||(rA={}));const Zse=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return Z3},get PeDefs(){return tr},get PeDouble(){return hG},get PeFactory(){return Y3},get PeGCSExtent(){return pG},get PeGTTransformations(){return X3},get PeGTlistExtended(){return XS},get PeGTlistExtendedEntry(){return J3},get PeLineType(){return Q3},get PeMath(){return K3},get PeNotationDms(){return eA},get PeNotationMgrs(){return QS},get PeNotationUsng(){return tA},get PeNotationUtm(){return KS},get PePCSInfo(){return e2},get PeVersion(){return rA},_init:fG,get _pe(){return D},isLoaded:eN,isSupported:Wse,load:dG},Symbol.toStringTag,{value:"Module"}));var Nh;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(Nh||(Nh={}));let m;const $={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(m=2e3;m<=2045;m++)$[m]=0;for(m=2056;m<=2065;m++)$[m]=0;for(m=2067;m<=2135;m++)$[m]=0;for(m=2137;m<=2154;m++)$[m]=0;for(m=2161;m<=2170;m++)$[m]=0;for(m=2172;m<=2193;m++)$[m]=0;for(m=2195;m<=2198;m++)$[m]=0;for(m=2200;m<=2203;m++)$[m]=0;for(m=2205;m<=2217;m++)$[m]=0;for(m=2222;m<=2224;m++)$[m]=1;for(m=2225;m<=2250;m++)$[m]=2;for(m=2251;m<=2253;m++)$[m]=1;for(m=2257;m<=2264;m++)$[m]=2;for(m=2274;m<=2279;m++)$[m]=2;for(m=2280;m<=2282;m++)$[m]=1;for(m=2283;m<=2289;m++)$[m]=2;for(m=2290;m<=2292;m++)$[m]=0;for(m=2308;m<=2313;m++)$[m]=0;for(m=2315;m<=2491;m++)$[m]=0;for(m=2494;m<=2866;m++)$[m]=0;for(m=2867;m<=2869;m++)$[m]=1;for(m=2870;m<=2888;m++)$[m]=2;for(m=2891;m<=2895;m++)$[m]=2;for(m=2896;m<=2898;m++)$[m]=1;for(m=2902;m<=2908;m++)$[m]=2;for(m=2915;m<=2920;m++)$[m]=2;for(m=2921;m<=2923;m++)$[m]=1;for(m=2924;m<=2930;m++)$[m]=2;for(m=2931;m<=2962;m++)$[m]=0;for(m=2964;m<=2968;m++)$[m]=2;for(m=2969;m<=2973;m++)$[m]=0;for(m=2975;m<=2991;m++)$[m]=0;for(m=2995;m<=3051;m++)$[m]=0;for(m=3054;m<=3079;m++)$[m]=0;for(m=3081;m<=3088;m++)$[m]=0;for(m=3092;m<=3101;m++)$[m]=0;for(m=3106;m<=3138;m++)$[m]=0;for(m=3146;m<=3151;m++)$[m]=0;for(m=3153;m<=3166;m++)$[m]=0;for(m=3168;m<=3172;m++)$[m]=0;for(m=3174;m<=3203;m++)$[m]=0;for(m=3294;m<=3358;m++)$[m]=0;for(m=3367;m<=3403;m++)$[m]=0;for(m=3408;m<=3416;m++)$[m]=0;for(m=3417;m<=3438;m++)$[m]=2;for(m=3441;m<=3446;m++)$[m]=2;for(m=3447;m<=3450;m++)$[m]=0;for(m=3451;m<=3459;m++)$[m]=2;for(m=3460;m<=3478;m++)$[m]=0;for(m=3554;m<=3559;m++)$[m]=0;for(m=3560;m<=3570;m++)$[m]=2;for(m=3571;m<=3581;m++)$[m]=0;for(m=3594;m<=3597;m++)$[m]=0;for(m=3601;m<=3604;m++)$[m]=0;for(m=3637;m<=3639;m++)$[m]=0;for(m=3665;m<=3667;m++)$[m]=0;for(m=3693;m<=3695;m++)$[m]=0;for(m=3701;m<=3727;m++)$[m]=0;for(m=3728;m<=3739;m++)$[m]=2;for(m=3740;m<=3751;m++)$[m]=0;for(m=3753;m<=3760;m++)$[m]=2;for(m=3761;m<=3773;m++)$[m]=0;for(m=3775;m<=3777;m++)$[m]=0;for(m=3779;m<=3781;m++)$[m]=0;for(m=3783;m<=3785;m++)$[m]=0;for(m=3788;m<=3791;m++)$[m]=0;for(m=3797;m<=3802;m++)$[m]=0;for(m=3814;m<=3816;m++)$[m]=0;for(m=3825;m<=3829;m++)$[m]=0;for(m=3832;m<=3841;m++)$[m]=0;for(m=3844;m<=3852;m++)$[m]=0;for(m=3873;m<=3885;m++)$[m]=0;for(m=3890;m<=3893;m++)$[m]=0;for(m=3907;m<=3912;m++)$[m]=0;for(m=3942;m<=3950;m++)$[m]=0;for(m=3968;m<=3970;m++)$[m]=0;for(m=3973;m<=3976;m++)$[m]=0;for(m=3986;m<=3989;m++)$[m]=0;for(m=3994;m<=3997;m++)$[m]=0;for(m=4048;m<=4051;m++)$[m]=0;for(m=4056;m<=4063;m++)$[m]=0;for(m=4093;m<=4096;m++)$[m]=0;for(m=4390;m<=4398;m++)$[m]=0;for(m=4399;m<=4413;m++)$[m]=2;for(m=4418;m<=4433;m++)$[m]=2;for(m=4455;m<=4457;m++)$[m]=2;for(m=4484;m<=4489;m++)$[m]=0;for(m=4491;m<=4554;m++)$[m]=0;for(m=4568;m<=4589;m++)$[m]=0;for(m=4652;m<=4656;m++)$[m]=0;for(m=4766;m<=4800;m++)$[m]=0;for(m=5014;m<=5016;m++)$[m]=0;for(m=5069;m<=5072;m++)$[m]=0;for(m=5105;m<=5130;m++)$[m]=0;for(m=5167;m<=5188;m++)$[m]=0;for(m=5253;m<=5259;m++)$[m]=0;for(m=5269;m<=5275;m++)$[m]=0;for(m=5292;m<=5311;m++)$[m]=0;for(m=5329;m<=5331;m++)$[m]=0;for(m=5343;m<=5349;m++)$[m]=0;for(m=5355;m<=5357;m++)$[m]=0;for(m=5387;m<=5389;m++)$[m]=0;for(m=5459;m<=5463;m++)$[m]=0;for(m=5479;m<=5482;m++)$[m]=0;for(m=5518;m<=5520;m++)$[m]=0;for(m=5530;m<=5539;m++)$[m]=0;for(m=5550;m<=5552;m++)$[m]=0;for(m=5562;m<=5583;m++)$[m]=0;for(m=5623;m<=5625;m++)$[m]=2;for(m=5631;m<=5639;m++)$[m]=0;for(m=5649;m<=5653;m++)$[m]=0;for(m=5663;m<=5680;m++)$[m]=0;for(m=5682;m<=5685;m++)$[m]=0;for(m=5875;m<=5877;m++)$[m]=0;for(m=5896;m<=5899;m++)$[m]=0;for(m=5921;m<=5940;m++)$[m]=0;for(m=6050;m<=6125;m++)$[m]=0;for(m=6244;m<=6275;m++)$[m]=0;for(m=6328;m<=6348;m++)$[m]=0;for(m=6350;m<=6356;m++)$[m]=0;for(m=6366;m<=6372;m++)$[m]=0;for(m=6381;m<=6387;m++)$[m]=0;for(m=6393;m<=6404;m++)$[m]=0;for(m=6480;m<=6483;m++)$[m]=0;for(m=6511;m<=6514;m++)$[m]=0;for(m=6579;m<=6581;m++)$[m]=0;for(m=6619;m<=6624;m++)$[m]=0;for(m=6625;m<=6627;m++)$[m]=2;for(m=6628;m<=6632;m++)$[m]=0;for(m=6634;m<=6637;m++)$[m]=0;for(m=6669;m<=6692;m++)$[m]=0;for(m=6707;m<=6709;m++)$[m]=0;for(m=6720;m<=6723;m++)$[m]=0;for(m=6732;m<=6738;m++)$[m]=0;for(m=6931;m<=6933;m++)$[m]=0;for(m=6956;m<=6959;m++)$[m]=0;for(m=7005;m<=7007;m++)$[m]=0;for(m=7057;m<=7070;m++)$[m]=2;for(m=7074;m<=7082;m++)$[m]=0;for(m=7109;m<=7118;m++)$[m]=0;for(m=7119;m<=7127;m++)$[m]=1;for(m=7374;m<=7376;m++)$[m]=0;for(m=7528;m<=7586;m++)$[m]=0;for(m=7587;m<=7645;m++)$[m]=2;for(m=7692;m<=7696;m++)$[m]=0;for(m=7755;m<=7787;m++)$[m]=0;for(m=7791;m<=7795;m++)$[m]=0;for(m=7799;m<=7801;m++)$[m]=0;for(m=7803;m<=7805;m++)$[m]=0;for(m=7825;m<=7831;m++)$[m]=0;for(m=7845;m<=7859;m++)$[m]=0;for(m=8013;m<=8032;m++)$[m]=0;for(m=8065;m<=8068;m++)$[m]=1;for(m=8518;m<=8529;m++)$[m]=2;for(m=8533;m<=8536;m++)$[m]=2;for(m=8538;m<=8540;m++)$[m]=2;for(m=8677;m<=8679;m++)$[m]=0;for(m=8836;m<=8840;m++)$[m]=0;for(m=8857;m<=8859;m++)$[m]=0;for(m=8908;m<=8910;m++)$[m]=0;for(m=9154;m<=9159;m++)$[m]=0;for(m=9205;m<=9218;m++)$[m]=0;for(m=9271;m<=9273;m++)$[m]=0;for(m=9295;m<=9297;m++)$[m]=0;for(m=9356;m<=9360;m++)$[m]=0;for(m=9404;m<=9407;m++)$[m]=0;for(m=9476;m<=9482;m++)$[m]=0;for(m=9487;m<=9494;m++)$[m]=0;for(m=9697;m<=9699;m++)$[m]=0;for(m=9821;m<=9865;m++)$[m]=0;for(m=10285;m<=10291;m++)$[m]=0;for(m=10314;m<=10317;m++)$[m]=0;for(m=10448;m<=10465;m++)$[m]=0;for(m=10726;m<=10729;m++)$[m]=0;for(m=10731;m<=10733;m++)$[m]=0;for(m=11114;m<=11118;m++)$[m]=0;for(m=20004;m<=20032;m++)$[m]=0;for(m=20047;m<=20049;m++)$[m]=0;for(m=20062;m<=20092;m++)$[m]=0;for(m=20135;m<=20138;m++)$[m]=0;for(m=20248;m<=20258;m++)$[m]=0;for(m=20348;m<=20358;m++)$[m]=0;for(m=20436;m<=20440;m++)$[m]=0;for(m=20822;m<=20824;m++)$[m]=0;for(m=20904;m<=20932;m++)$[m]=0;for(m=20934;m<=20936;m++)$[m]=0;for(m=21004;m<=21032;m++)$[m]=0;for(m=21035;m<=21037;m++)$[m]=0;for(m=21095;m<=21097;m++)$[m]=0;for(m=21148;m<=21150;m++)$[m]=0;for(m=21207;m<=21264;m++)$[m]=0;for(m=21307;m<=21364;m++)$[m]=0;for(m=21413;m<=21423;m++)$[m]=0;for(m=21453;m<=21463;m++)$[m]=0;for(m=21473;m<=21483;m++)$[m]=0;for(m=21780;m<=21782;m++)$[m]=0;for(m=21891;m<=21894;m++)$[m]=0;for(m=21896;m<=21899;m++)$[m]=0;for(m=22171;m<=22177;m++)$[m]=0;for(m=22181;m<=22187;m++)$[m]=0;for(m=22191;m<=22197;m++)$[m]=0;for(m=22207;m<=22222;m++)$[m]=0;for(m=22229;m<=22232;m++)$[m]=0;for(m=22234;m<=22236;m++)$[m]=0;for(m=22243;m<=22250;m++)$[m]=0;for(m=22262;m<=22265;m++)$[m]=0;for(m=22307;m<=22322;m++)$[m]=0;for(m=22348;m<=22357;m++)$[m]=0;for(m=22407;m<=22422;m++)$[m]=0;for(m=22462;m<=22465;m++)$[m]=0;for(m=22521;m<=22525;m++)$[m]=0;for(m=22607;m<=22622;m++)$[m]=0;for(m=22641;m<=22646;m++)$[m]=0;for(m=22648;m<=22657;m++)$[m]=0;for(m=22707;m<=22722;m++)$[m]=0;for(m=22762;m<=22765;m++)$[m]=0;for(m=22807;m<=22822;m++)$[m]=0;for(m=22991;m<=22994;m++)$[m]=0;for(m=23028;m<=23038;m++)$[m]=0;for(m=23301;m<=23333;m++)$[m]=2;for(m=23830;m<=23853;m++)$[m]=0;for(m=23866;m<=23872;m++)$[m]=0;for(m=23877;m<=23884;m++)$[m]=0;for(m=23886;m<=23894;m++)$[m]=0;for(m=23946;m<=23948;m++)$[m]=0;for(m=24311;m<=24313;m++)$[m]=0;for(m=24342;m<=24347;m++)$[m]=0;for(m=24370;m<=24374;m++)$[m]=10;for(m=24375;m<=24381;m++)$[m]=0;for(m=24718;m<=24721;m++)$[m]=0;for(m=24817;m<=24821;m++)$[m]=0;for(m=24877;m<=24882;m++)$[m]=0;for(m=24891;m<=24893;m++)$[m]=0;for(m=25391;m<=25395;m++)$[m]=0;for(m=25828;m<=25838;m++)$[m]=0;for(m=26191;m<=26195;m++)$[m]=0;for(m=26391;m<=26393;m++)$[m]=0;for(m=26701;m<=26722;m++)$[m]=0;for(m=26729;m<=26799;m++)$[m]=2;for(m=26801;m<=26803;m++)$[m]=2;for(m=26811;m<=26813;m++)$[m]=2;for(m=26847;m<=26870;m++)$[m]=2;for(m=26891;m<=26899;m++)$[m]=0;for(m=26901;m<=26923;m++)$[m]=0;for(m=26929;m<=26946;m++)$[m]=0;for(m=26948;m<=26998;m++)$[m]=0;for(m=27037;m<=27040;m++)$[m]=0;for(m=27205;m<=27232;m++)$[m]=0;for(m=27258;m<=27260;m++)$[m]=0;for(m=27391;m<=27398;m++)$[m]=0;for(m=27561;m<=27564;m++)$[m]=0;for(m=27571;m<=27574;m++)$[m]=0;for(m=27581;m<=27584;m++)$[m]=0;for(m=27591;m<=27594;m++)$[m]=0;for(m=27700;m<=27707;m++)$[m]=0;for(m=28191;m<=28193;m++)$[m]=0;for(m=28348;m<=28358;m++)$[m]=0;for(m=28402;m<=28432;m++)$[m]=0;for(m=28462;m<=28492;m++)$[m]=0;for(m=29118;m<=29122;m++)$[m]=0;for(m=29168;m<=29172;m++)$[m]=0;for(m=29177;m<=29185;m++)$[m]=0;for(m=29187;m<=29195;m++)$[m]=0;for(m=29900;m<=29903;m++)$[m]=0;for(m=30161;m<=30179;m++)$[m]=0;for(m=30491;m<=30494;m++)$[m]=0;for(m=30729;m<=30732;m++)$[m]=0;for(m=31251;m<=31259;m++)$[m]=0;for(m=31265;m<=31268;m++)$[m]=0;for(m=31275;m<=31279;m++)$[m]=0;for(m=31281;m<=31297;m++)$[m]=0;for(m=31461;m<=31469;m++)$[m]=0;for(m=31491;m<=31495;m++)$[m]=0;for(m=31917;m<=31922;m++)$[m]=0;for(m=31965;m<=32e3;m++)$[m]=0;for(m=32001;m<=32003;m++)$[m]=2;for(m=32005;m<=32031;m++)$[m]=2;for(m=32033;m<=32060;m++)$[m]=2;for(m=32064;m<=32067;m++)$[m]=2;for(m=32074;m<=32077;m++)$[m]=2;for(m=32081;m<=32086;m++)$[m]=0;for(m=32107;m<=32130;m++)$[m]=0;for(m=32133;m<=32159;m++)$[m]=0;for(m=32164;m<=32167;m++)$[m]=2;for(m=32180;m<=32199;m++)$[m]=0;for(m=32201;m<=32260;m++)$[m]=0;for(m=32301;m<=32360;m++)$[m]=0;for(m=32401;m<=32460;m++)$[m]=0;for(m=32501;m<=32560;m++)$[m]=0;for(m=32601;m<=32662;m++)$[m]=0;for(m=32664;m<=32667;m++)$[m]=2;for(m=32701;m<=32761;m++)$[m]=0;for(m=53001;m<=53004;m++)$[m]=0;for(m=53008;m<=53019;m++)$[m]=0;for(m=53021;m<=53032;m++)$[m]=0;for(m=53034;m<=53037;m++)$[m]=0;for(m=53042;m<=53046;m++)$[m]=0;for(m=53074;m<=53080;m++)$[m]=0;for(m=54001;m<=54004;m++)$[m]=0;for(m=54008;m<=54019;m++)$[m]=0;for(m=54021;m<=54032;m++)$[m]=0;for(m=54034;m<=54037;m++)$[m]=0;for(m=54042;m<=54046;m++)$[m]=0;for(m=54048;m<=54053;m++)$[m]=0;for(m=54074;m<=54080;m++)$[m]=0;for(m=54090;m<=54096;m++)$[m]=0;for(m=54098;m<=54101;m++)$[m]=0;for(m=65161;m<=65163;m++)$[m]=0;for(m=102001;m<=102040;m++)$[m]=0;for(m=102042;m<=102063;m++)$[m]=0;for(m=102065;m<=102067;m++)$[m]=0;for(m=102070;m<=102117;m++)$[m]=0;for(m=102122;m<=102216;m++)$[m]=0;for(m=102221;m<=102377;m++)$[m]=0;for(m=102382;m<=102388;m++)$[m]=0;for(m=102389;m<=102398;m++)$[m]=2;for(m=102399;m<=102444;m++)$[m]=0;for(m=102445;m<=102447;m++)$[m]=2;for(m=102448;m<=102458;m++)$[m]=0;for(m=102459;m<=102468;m++)$[m]=2;for(m=102469;m<=102499;m++)$[m]=0;for(m=102500;m<=102519;m++)$[m]=1;for(m=102520;m<=102524;m++)$[m]=0;for(m=102525;m<=102529;m++)$[m]=2;for(m=102530;m<=102588;m++)$[m]=0;for(m=102590;m<=102598;m++)$[m]=0;for(m=102601;m<=102603;m++)$[m]=0;for(m=102605;m<=102628;m++)$[m]=0;for(m=102629;m<=102646;m++)$[m]=2;for(m=102648;m<=102700;m++)$[m]=2;for(m=102701;m<=102703;m++)$[m]=0;for(m=102707;m<=102730;m++)$[m]=2;for(m=102733;m<=102758;m++)$[m]=2;for(m=102767;m<=102900;m++)$[m]=0;for(m=102901;m<=102933;m++)$[m]=2;for(m=102934;m<=102950;m++)$[m]=13;for(m=102951;m<=102963;m++)$[m]=0;for(m=102965;m<=102969;m++)$[m]=0;for(m=102971;m<=102973;m++)$[m]=0;for(m=102975;m<=102989;m++)$[m]=0;for(m=102990;m<=102992;m++)$[m]=1;for(m=102997;m<=103002;m++)$[m]=0;for(m=103003;m<=103008;m++)$[m]=2;for(m=103009;m<=103011;m++)$[m]=0;for(m=103012;m<=103014;m++)$[m]=2;for(m=103019;m<=103021;m++)$[m]=0;for(m=103022;m<=103024;m++)$[m]=2;for(m=103029;m<=103031;m++)$[m]=0;for(m=103032;m<=103034;m++)$[m]=2;for(m=103065;m<=103068;m++)$[m]=0;for(m=103074;m<=103076;m++)$[m]=0;for(m=103077;m<=103079;m++)$[m]=1;for(m=103080;m<=103082;m++)$[m]=0;for(m=103083;m<=103085;m++)$[m]=2;for(m=103090;m<=103093;m++)$[m]=0;for(m=103097;m<=103099;m++)$[m]=0;for(m=103100;m<=103102;m++)$[m]=2;for(m=103107;m<=103109;m++)$[m]=0;for(m=103110;m<=103112;m++)$[m]=2;for(m=103113;m<=103116;m++)$[m]=0;for(m=103117;m<=103120;m++)$[m]=2;for(m=103153;m<=103157;m++)$[m]=0;for(m=103158;m<=103162;m++)$[m]=2;for(m=103163;m<=103165;m++)$[m]=0;for(m=103166;m<=103168;m++)$[m]=1;for(m=103169;m<=103171;m++)$[m]=2;for(m=103186;m<=103188;m++)$[m]=0;for(m=103189;m<=103191;m++)$[m]=2;for(m=103192;m<=103195;m++)$[m]=0;for(m=103196;m<=103199;m++)$[m]=2;for(m=103200;m<=103224;m++)$[m]=0;for(m=103225;m<=103227;m++)$[m]=1;for(m=103232;m<=103237;m++)$[m]=0;for(m=103238;m<=103243;m++)$[m]=2;for(m=103244;m<=103246;m++)$[m]=0;for(m=103247;m<=103249;m++)$[m]=2;for(m=103254;m<=103256;m++)$[m]=0;for(m=103257;m<=103259;m++)$[m]=2;for(m=103264;m<=103266;m++)$[m]=0;for(m=103267;m<=103269;m++)$[m]=2;for(m=103300;m<=103375;m++)$[m]=0;for(m=103381;m<=103383;m++)$[m]=0;for(m=103384;m<=103386;m++)$[m]=1;for(m=103387;m<=103389;m++)$[m]=0;for(m=103390;m<=103392;m++)$[m]=2;for(m=103397;m<=103399;m++)$[m]=0;for(m=103400;m<=103471;m++)$[m]=2;for(m=103476;m<=103478;m++)$[m]=0;for(m=103479;m<=103481;m++)$[m]=2;for(m=103486;m<=103488;m++)$[m]=0;for(m=103489;m<=103491;m++)$[m]=2;for(m=103492;m<=103495;m++)$[m]=0;for(m=103496;m<=103499;m++)$[m]=2;for(m=103528;m<=103543;m++)$[m]=0;for(m=103544;m<=103548;m++)$[m]=2;for(m=103549;m<=103551;m++)$[m]=0;for(m=103552;m<=103554;m++)$[m]=1;for(m=103555;m<=103557;m++)$[m]=2;for(m=103558;m<=103560;m++)$[m]=0;for(m=103571;m<=103573;m++)$[m]=0;for(m=103574;m<=103576;m++)$[m]=2;for(m=103577;m<=103580;m++)$[m]=0;for(m=103581;m<=103583;m++)$[m]=2;for(m=103595;m<=103694;m++)$[m]=0;for(m=103696;m<=103699;m++)$[m]=0;for(m=103700;m<=103793;m++)$[m]=2;for(m=103794;m<=103890;m++)$[m]=0;for(m=103891;m<=103896;m++)$[m]=2;for(m=103900;m<=103971;m++)$[m]=2;for(m=103972;m<=103977;m++)$[m]=0;for(m=112e3;m<=112101;m++)$[m]=0;const mG=[102100,102113,3857,3785,900913],Yse=[104905,104971],Jse=[4326,...mG,...Yse],Jv=[-20037508342788905e-9,20037508342788905e-9],iA=[-20037508342787e-6,20037508342787e-6],J$={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:Jv,origin:iA,dx:1e-5},yG={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Jv,origin:iA,dx:1e-5},102100:J$,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Jv,origin:iA,dx:1e-5},3857:J$,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:J$};function ni(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const r=e.wkid,i=t.wkid;if(r!=null||i!=null){if(r===i||Aa(e)&&Aa(t))return!0;const a=e.latestWkid;if(a!=null&&i===a)return!0;const c=t.latestWkid;return c!=null&&r===c}let n,s;return e.wkt2&&t.wkt2?(n=e.wkt2,s=t.wkt2):e.wkt&&t.wkt&&(n=e.wkt,s=t.wkt),!(!n||!s)&&n.toUpperCase()===s.toUpperCase()}function fn(e){const t=e?.wkid;return t!=null&&t>=2e3&&yG[t]||null}function gG(e){if(!e)return;const{wkid:t,vcsWkid:r}=e;if(t)return r?JSON.stringify({wkid:t,vcsWkid:r}):String(t);const i=e.wkt||e.wkt2;return JSON.stringify(i?r?{wkt:i,vcsWkid:r}:{wkt:i}:{})}function gy(e){if(!ds(e))return!1;const{wkid:t}=e;if(t)return $[t]==null;const r=e.wkt2||e.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function Xse(e){return!(vG(e)||bG(e))}function Ph(e){return e?.wkid===4326}function ZRe(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function I5(e){return e?.wkid===Nh.CGCS2000}function Aa(e){const t=e?.wkid;return t!=null&&t>=2e3&&mG.includes(t)}function Qse(e){return e?.wkid===32662}function wT(e){return e===Nh.GCSMARS2000||e===Nh.GCSMARS2000_SPHERE}function vG(e){return wT(e?.wkid)}function _T(e){return e===Nh.GCSMOON2000}function bG(e){return _T(e?.wkid)}function Kse(e){const t=e?.wkid;return t!=null&&t>=2e3&&Jse.includes(t)}function ds(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const wG={wkid:4326,wkt:Hh(yG[4326].wkTemplate,{Central_Meridian:"0.0"})},_G={wkid:102100,latestWkid:3857},eoe={wkid:32662};function tN(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const toe=tN(dr),rN=tN(Ta),iN=tN(Rc),roe={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${dr.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},ioe=rN.wkt.toUpperCase(),noe=iN.wkt.toUpperCase();function soe(e){if(e!=null&&ds(e)){const t=e.wkid,r=e.wkt2??e.wkt;if(wT(t))return Ta;const i=r?.toUpperCase();if(r&&i===ioe)return Ta;if(_T(t)||i&&i===noe)return Rc}return dr}function YRe(e){return wT(e)?Ta:_T(e)?Rc:dr}function t2(e){return ni(e,toe)}function Cc(e){return t2(e)||ni(e,rN)||ni(e,iN)}const SG=39.37,ooe=dr.radius*Math.PI/200,TG=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Bm=$,EG=/UNIT\[([^\]]+)]/i,aoe=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),loe=wi()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),lo=e=>e*e,Iu=e=>e*e*e,Xv={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:lo(.001)},"square-centimeters":{inBaseUnits:lo(.01)},"square-decimeters":{inBaseUnits:lo(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:lo(1e3)},"square-inches":{inBaseUnits:lo(.0254)},"square-feet":{inBaseUnits:lo(.3048)},"square-yards":{inBaseUnits:lo(.9144)},"square-miles":{inBaseUnits:lo(1609.344)},"square-nautical-miles":{inBaseUnits:lo(1852)},"square-us-feet":{inBaseUnits:lo(1200/3937)},acres:{inBaseUnits:.0015625*lo(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Iu(.001)},"cubic-centimeters":{inBaseUnits:1e3*Iu(.01)},"cubic-decimeters":{inBaseUnits:1e3*Iu(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Iu(1e3)},"cubic-inches":{inBaseUnits:1e3*Iu(.0254)},"cubic-feet":{inBaseUnits:1e3*Iu(.3048)},"cubic-yards":{inBaseUnits:1e3*Iu(.9144)},"cubic-miles":{inBaseUnits:1e3*Iu(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},uoe=(()=>{const e={};for(const t in Xv)for(const r in Xv[t].units)e[r]=t;return e})();function coe(e,t,r){return e*Xv[r].units[t].inBaseUnits}function doe(e,t,r){return e/Xv[r].units[t].inBaseUnits}const hoe=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],poe=["metric","imperial"],xG=[...poe,...hoe],foe=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function nA(e){const t=uoe[e];if(!t)throw new Error("unknown type");return t}function N5(e,t=null){return t=t||nA(e),Xv[t].baseUnit===e}function br(e,t,r){if(t===r)return e;const i=nA(t);if(i!==nA(r))throw new Error("incompatible units");const n=N5(t,i)?e:coe(e,t,i);return N5(r,i)?n:doe(n,r,i)}function JRe(e,t,r,i=!1){if(!i&&gy(t))throw new Error("Unable to convert from an angular unit to a linear unit.");const n=Jh(t);return n!==r&&(e=n?br(e,n,r):br(e*=Xs(t),"meters",r)),e}function XRe(e,t,r,i=!1){if(!i&&gy(r))throw new Error("Unable to convert from a linear unit to an angular unit.");const n=Jh(r);return t!==n&&(e=n?br(e,t,n):br(e,t,"meters")/Xs(r)),e}function moe(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function QRe(e){return moe(e)}function KRe(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function eCe(e,t){const r=br(e,t,"meters");return Math.abs(r)<3e3?"meters":"kilometers"}function tCe(e,t){const r=br(e,t,"meters");return Math.abs(r)<1e5?"meters":"kilometers"}function rCe(e,t){const r=br(e,t,"feet");return Math.abs(r)<1e3?"feet":"miles"}function iCe(e,t){const r=br(e,t,"feet");return Math.abs(r)<1e5?"feet":"miles"}function nCe(e,t){const r=br(e,t,"square-meters");return Math.abs(r)<3e6?"square-meters":"square-kilometers"}function sCe(e,t){const r=br(e,t,"square-feet");return Math.abs(r)<1e6?"square-feet":"square-miles"}function yoe(e,t,r){return br(e,t,"meters")/(r*Math.PI/180)}function nN(e){return loe.fromJSON(e.toLowerCase())||null}function r2(e){if(e!=null&&!Xse(e))return 1;const t=Xs(e);return t>1e5?1:t}function $G(e){return Xs(e)>=soe(e).metersPerDegree?"meters":Jh(e)}function Xs(e,t=dr.metersPerDegree){return goe(e,!0)??t}function goe(e,t=!1){const r=e?.wkid??null,i=e?.wkt2??e?.wkt??null;let n=null;if(r){if(wT(r))return Ta.metersPerDegree;if(_T(r))return Rc.metersPerDegree;n=Bm.values[Bm[r]],!n&&t&&aoe.has(r)&&(n=ooe)}else i&&(OG(i)?n=P5(TG.exec(i),n):AG(i)&&(n=P5(EG.exec(i),n)));return n}function oCe(e){return gy(e)?1:Xs(e)}function P5(e,t){return e?.[1]?MG(e[1]):t}function MG(e){return parseFloat(e.split(",")[1])}function Jh(e){const t=e?.wkid??null,r=e?.wkt2??e?.wkt??null;let i=null;if(t)i=Bm.units[Bm[t]];else if(r){const n=OG(r)?TG:AG(r)?EG:null;if(n){const s=n.exec(r);s?.[1]&&(i=boe(s[1]))}}return i!=null?nN(i):null}function aCe(e){const t=Jh(e);return t!=null&&xG.includes(t)?t:null}function lCe(e){const t=$G(e);return t!=null&&xG.includes(t)?t:null}function uCe(e){const t=Jh(e);return t==null?null:foe.get(t)}function AG(e){return/^GEOCCS/i.test(e)}function OG(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const voe=1e-7;function boe(e){let r=/[\\"']{1}([^\\"']+)/.exec(e)?.[1];if(!r||!nN(r)){const i=MG(e);r=null;const n=Bm.values;for(let s=0;s<n.length;++s)if(Math.abs(i-n[s])<voe){r=Bm.units[s];break}}return r}function cCe(e){const t=Jh(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const woe={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},_oe={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Soe={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},Toe=wi()(woe),Eoe=wi()(_oe),dCe=wi()(Soe);var Qo,wa;let Ee=(wa=class extends K{static fromJSON(t){if(!t)return null;if(t?.wkid===102100)return Qo.WebMercator;if(t?.wkid===4326)return Qo.WGS84;const r=new Qo;return r.read(t),r}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return Ph(this)}get isWebMercator(){return Aa(this)}get isGeographic(){return gy(this)}get isWrappable(){return Kse(this)}get metersPerUnit(){return Xs(this)}get unit(){return Jh(this)||(this.isGeographic?"degrees":null)}writeWkt(t,r){this.wkid||(r.wkt=t)}clone(){if(this===Qo.WGS84)return new Qo(wG);if(this===Qo.WebMercator)return new Qo(_G);const t=new Qo;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(t.wkt=this.wkt),this.wkt2!=null&&(t.wkt2=this.wkt2)),this.imageCoordinateSystem&&(t.imageCoordinateSystem=U(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:r,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:n}=t.imageCoordinateSystem,s=this.imageCoordinateSystem;return r==null||n?JSON.stringify(s)===JSON.stringify(t.imageCoordinateSystem):i?s.id===r&&s.referenceServiceName===i:s.id===r}return ni(this,t)}toJSON(t){return this.write(void 0,t)}},Qo=wa,wa.GCS_NAD_1927=null,wa.WGS84=null,wa.WebMercator=null,wa.PlateCarree=null,wa);u([p({readOnly:!0})],Ee.prototype,"isWGS84",null),u([p({readOnly:!0})],Ee.prototype,"isWebMercator",null),u([p({readOnly:!0})],Ee.prototype,"isGeographic",null),u([p({readOnly:!0})],Ee.prototype,"isWrappable",null),u([p({type:dt,json:{write:!0}})],Ee.prototype,"latestWkid",void 0),u([p({readOnly:!0})],Ee.prototype,"metersPerUnit",null),u([p({readOnly:!0})],Ee.prototype,"unit",null),u([p({type:dt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Ee.prototype,"wkid",void 0),u([p({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Ee.prototype,"wkt",void 0),u([de("wkt"),de("web-scene","wkt")],Ee.prototype,"writeWkt",null),u([p({type:String,json:{write:!1}})],Ee.prototype,"wkt2",void 0),u([p({type:dt,json:{write:!0}})],Ee.prototype,"vcsWkid",void 0),u([p({type:dt,json:{write:!0}})],Ee.prototype,"latestVcsWkid",void 0),u([p()],Ee.prototype,"imageCoordinateSystem",void 0),Ee=Qo=u([O("esri.geometry.SpatialReference")],Ee),Ee.prototype.toJSON.isDefaultToJSON=!0,Ee.GCS_NAD_1927=Ae.freeze(new Ee({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Ee.WGS84=Ae.freeze(new Ee(wG)),Ee.WebMercator=Ae.freeze(new Ee(_G)),Ee.PlateCarree=Ae.freeze(new Ee(eoe));function le(e,t,r){let i,n;return t===void 0||Array.isArray(t)?(n=e,r=t,i=[void 0]):(n=t,i=Array.isArray(e)?e:[e]),(s,a)=>{const c=s.constructor.prototype;i.forEach((d=>{const f=HI(s,d,n);f.read&&typeof f.read=="object"||(f.read={}),f.read.reader=c[a],r&&(f.read.source=(f.read.source||[]).concat(r))}))}}let yi=class extends K{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Ee.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,r){if(t instanceof Ee)return t;if(t!=null){const i=new Ee;return i.read(t,r),i}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,r){this.cache[t]=r}};u([p()],yi.prototype,"type",void 0),u([p({readOnly:!0})],yi.prototype,"cache",null),u([p({readOnly:!0})],yi.prototype,"extent",null),u([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],yi.prototype,"hasM",void 0),u([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],yi.prototype,"hasZ",void 0),u([p({type:Ee,json:{write:!0},value:Ee.WGS84})],yi.prototype,"spatialReference",void 0),u([le("spatialReference")],yi.prototype,"readSpatialReference",null),yi=u([O("esri.geometry.Geometry")],yi);const xoe=Object.prototype.toString;function $oe(e){const t="__accessorMetadata__"in e?Br(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Moe.apply(this,r)}}function Moe(e,t,r,i){M1(e,t).cast=i}function Aoe(e){return(t,r)=>{M1(t,e).cast=t[r]}}function wt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&xoe.call(e[0])==="[object Function]"?$oe(e[0]):e.length===1&&typeof e[0]=="string"?Aoe(e[0]):void 0}function Hm(e){if(e&&typeof e=="object"&&"type"in e&&e.type==="mesh")throw new z("internal:mesh","Mesh geometries are not supported for this operation")}function Ooe(e){e.forEach(Hm)}const Roe=57.29577951308232,Coe=.017453292519943;function L5(e){return e*Roe}function D5(e){return e*Coe}function pCe(e){return Math.PI/2-2*Math.atan(Math.exp(-e/dr.radius))}function sA(e){return e.wkid!=null||e.wkt!=null}const X$=[0,0];function i2(e,t,r,i,n){const s=e,a=n;if(a.spatialReference=r,"x"in s&&"x"in a)[a.x,a.y]=t(s.x,s.y,X$,i);else if("xmin"in s&&"xmin"in a)[a.xmin,a.ymin]=t(s.xmin,s.ymin,X$,i),[a.xmax,a.ymax]=t(s.xmax,s.ymax,X$,i);else if("paths"in s&&"paths"in a||"rings"in s&&"rings"in a){const c="paths"in s?s.paths:s.rings,d=[];let f;for(let g=0;g<c.length;g++){const v=c[g];f=[],d.push(f);for(let w=0;w<v.length;w++)f.push(t(v[w][0],v[w][1],[0,0],i)),v[w].length>2&&f[w].push(v[w][2]),v[w].length>3&&f[w].push(v[w][3])}"paths"in a?a.paths=d:a.rings=d}else if("points"in s&&"points"in a){const c=s.points,d=[];for(let f=0;f<c.length;f++)d[f]=t(c[f][0],c[f][1],[0,0],i),c[f].length>2&&d[f].push(c[f][2]),c[f].length>3&&d[f].push(c[f][3]);a.points=d}return n}function w_(e,t){const r=e&&(sA(e)?e:e.spatialReference),i=t&&(sA(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!ni(i,r)||Aa(i)&&Ph(r)||Aa(r)&&Ph(i))}function ST(e,t){if(e==null)return null;const r=e.spatialReference,i=t&&(sA(t)?t:t.spatialReference);return w_(r,i)?ni(r,i)?U(e):Aa(i)?i2(e,Df,Ee.WebMercator,!1,U(e)):Ph(i)?i2(e,TT,Ee.WGS84,!1,U(e)):null:null}function Df(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=D5(t);return r[0]=D5(e)*dr.radius,r[1]=dr.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function TT(e,t,r=[0,0],i=!1){if(e===Jv[0])r[0]=-180;else if(e===Jv[1])r[0]=180;else{const n=L5(e/dr.radius);r[0]=i?n:n-360*Math.floor((n+180)/360)}return r[1]=L5(Math.PI/2-2*Math.atan(Math.exp(-t/dr.radius))),r}function yh(e,t=!1,r=U(e)){return Hm(e),Hm(r),i2(e,Df,Ee.WebMercator,t,r)}function kf(e,t=!1,r=U(e)){return Hm(e),Hm(r),i2(e,TT,Ee.WGS84,t,r)}function RG(e,t){const r=e.x-t.x,i=e.y-t.y,n=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(r*r+i*i+n*n)}function Ioe(e){return CG(e,IG)?.[0]??null}function Noe(e){return CG(e,IG)?.[1]??null}function CG({x:e,y:t,spatialReference:r},i=[0,0]){if(r){if(Aa(r))return TT(e,t,i);if(gy(r))return i[0]=e,i[1]=t,i}return null}const IG=[0,0];var __;const Q$=[0,0];function k5(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Pe=__=class extends yi{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Ae.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,i,n){let s;if(Array.isArray(e))s=e,n=t,e=s[0],t=s[1],r=s[2],i=s[3];else if(e&&typeof e=="object"){if(s=e,e=s.x!=null?s.x:s.longitude,t=s.y!=null?s.y:s.latitude,r=s.z,i=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new Ee(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)re.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)re.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&n?.isWebMercator){const c=Df(s.longitude,s.latitude,Q$);e=c[0],t=c[1]}}}else k5(r)?(n=r,r=null):k5(i)&&(n=i,i=null);const a={x:e,y:t};return a.x==null&&a.y!=null?re.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):a.y==null&&a.x!=null&&re.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(a.spatialReference=n),r!=null&&(a.z=r),i!=null&&(a.m=i),a}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return Noe(this)}set latitude(e){const{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",Df(r,e,Q$)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return Ioe(this)}set longitude(e){const{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",Df(e,t,Q$)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new __;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return __.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:r,z:i,m:n,spatialReference:s}=this,{z:a,m:c}=e;let{x:d,y:f,spatialReference:g}=e;if(!s.equals(g))if(s.isWebMercator&&g.isWGS84)[d,f]=Df(d,f),g=s;else{if(!s.isWGS84||!g.isWebMercator)return!1;[d,f]=TT(d,f),g=s}return t===d&&r===f&&i===a&&n===c&&s.wkid===g.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=fn(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,n=2*i;let s;return t>i?(s=Math.ceil(Math.abs(t-i)/n),t-=s*n):t<r&&(s=Math.ceil(Math.abs(t-r)/n),t+=s*n),this._set("x",t),this}distance(e){return RG(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};u([p({readOnly:!0})],Pe.prototype,"cache",null),u([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Pe.prototype,"hasM",null),u([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Pe.prototype,"hasZ",null),u([p({type:Number})],Pe.prototype,"latitude",null),u([p({type:Number})],Pe.prototype,"longitude",null),u([p({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),wt((e=>isNaN(e)?e:un(e)))],Pe.prototype,"x",void 0),u([de("x")],Pe.prototype,"writeX",null),u([le("x")],Pe.prototype,"readX",null),u([p({type:Number,json:{write:!0}})],Pe.prototype,"y",void 0),u([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Pe.prototype,"z",void 0),u([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Pe.prototype,"m",void 0),Pe=__=u([O("esri.geometry.Point")],Pe),Pe.prototype.toJSON.isDefaultToJSON=!0;const K$=[0,0];function I1(e,t){return t!=null&&tn(e,t.x,t.y,t.z)}function fCe(e,t){if(!t.points?.length)return!1;for(const r of t.points)if(!Wm(e,r))return!1;return!0}function Poe(e,t){const{xmin:r,ymin:i,zmin:n,xmax:s,ymax:a,zmax:c}=t;return e.hasZ&&t.hasZ?tn(e,r,i,n)&&tn(e,r,a,n)&&tn(e,s,a,n)&&tn(e,s,i,n)&&tn(e,r,i,c)&&tn(e,r,a,c)&&tn(e,s,a,c)&&tn(e,s,i,c):tn(e,r,i)&&tn(e,r,a)&&tn(e,s,a)&&tn(e,s,i)}function Wm(e,t){return tn(e,t[0],t[1])}function Loe(e,t){return tn(e,t[0],t[1],t[2])}function tn(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function sN(e,t){return K$[1]=t.y,K$[0]=t.x,Doe(e,K$)}function Doe(e,t){return oN(e.rings,t)}function oN(e,t){if(!e)return!1;if(koe(e))return F5(!1,e,t);let r=!1;for(let i=0,n=e.length;i<n;i++)r=F5(r,e[i],t);return r}function koe(e){return!Array.isArray(e[0][0])}function F5(e,t,r){const[i,n]=r;let s=e,a=0;for(let c=0,d=t.length;c<d;c++){a++,a===d&&(a=0);const[f,g]=t[c],[v,w]=t[a];(g<n&&w>=n||w<n&&g>=n)&&f+(n-g)/(w-g)*(v-f)<i&&(s=!s)}return s}function Foe(e,t){return I1(e,t)}function Uoe(e,t){const r=e.hasZ&&t.hasZ;let i,n,s;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1}return!0}function joe(e,t){const{points:r,hasZ:i}=t,n=i?Loe:Wm;for(const s of r)if(n(e,s))return!0;return!1}const Lh=[0,0],Dh=[0,0],kh=[0,0],Fh=[0,0],zoe=[Lh,Dh,kh,Fh],NG=[[kh,Lh],[Lh,Dh],[Dh,Fh],[Fh,kh]];function Voe(e,t){return Goe(e,t.rings)}function Goe(e,t){Lh[0]=e.xmin,Lh[1]=e.ymax,Dh[0]=e.xmax,Dh[1]=e.ymax,kh[0]=e.xmin,kh[1]=e.ymin,Fh[0]=e.xmax,Fh[1]=e.ymin;for(const r of zoe)if(oN(t,r))return!0;for(const r of t){if(!r.length)continue;let i=r[0];if(Wm(e,i))return!0;for(let n=1;n<r.length;n++){const s=r[n];if(Wm(e,s)||PG(i,s,NG))return!0;i=s}}return!1}function qoe(e,t){Lh[0]=e.xmin,Lh[1]=e.ymax,Dh[0]=e.xmax,Dh[1]=e.ymax,kh[0]=e.xmin,kh[1]=e.ymin,Fh[0]=e.xmax,Fh[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let n=i[0];if(Wm(e,n))return!0;for(let s=1;s<i.length;s++){const a=i[s];if(Wm(e,a)||PG(n,a,NG))return!0;n=a}}return!1}const ui=[0,0];function Boe(e){for(let t=0;t<e.length;t++){const r=e[t];for(let n=0;n<r.length-1;n++){const s=r[n],a=r[n+1];for(let c=t+1;c<e.length;c++)for(let d=0;d<e[c].length-1;d++){const f=e[c][d],g=e[c][d+1];if(oA(s,a,f,g,ui)&&!(ui[0]===s[0]&&ui[1]===s[1]||ui[0]===f[0]&&ui[1]===f[1]||ui[0]===a[0]&&ui[1]===a[1]||ui[0]===g[0]&&ui[1]===g[1]))return!0}}const i=r.length;if(!(i<=4))for(let n=0;n<i-3;n++){let s=i-1;n===0&&(s=i-2);const a=r[n],c=r[n+1];for(let d=n+2;d<s;d++){const f=r[d],g=r[d+1];if(oA(a,c,f,g,ui)&&!(ui[0]===a[0]&&ui[1]===a[1]||ui[0]===f[0]&&ui[1]===f[1]||ui[0]===c[0]&&ui[1]===c[1]||ui[0]===g[0]&&ui[1]===g[1]))return!0}}}return!1}function PG(e,t,r){for(let i=0;i<r.length;i++)if(oA(e,t,r[i][0],r[i][1]))return!0;return!1}function oA(e,t,r,i,n){const[s,a]=e,[c,d]=t,[f,g]=r,[v,w]=i,S=v-f,T=s-f,E=c-s,M=w-g,R=a-g,I=d-a,k=M*E-S*I;if(k===0)return!1;const j=(S*R-M*T)/k,P=(E*R-I*T)/k;return j>=0&&j<=1&&P>=0&&P<=1&&(n&&(n[0]=s+j*(c-s),n[1]=a+j*(d-a)),!0)}function Hoe(e){switch(e){case"esriGeometryEnvelope":case"extent":return Uoe;case"esriGeometryMultipoint":case"multipoint":return joe;case"esriGeometryPoint":case"point":return Foe;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return Voe;case"esriGeometryPolyline":case"polyline":return qoe}}var mo;function Woe(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Nu(e,t,r){return t==null?r:r==null?t:e(t,r)}let Xe=mo=class extends yi{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,n){return Woe(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Ee.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:n??Ee.WGS84}}static fromPoint(e){return new mo({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Pe({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new mo;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&w_(t,r)&&(e=t.isWebMercator?yh(e):kf(e,!0)),e.type==="point"?I1(this,e):e.type==="extent"&&Poe(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&w_(t,r)&&(e=t.isWebMercator?yh(e):kf(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!ni(t,r)&&w_(t,r)&&(e=t.isWebMercator?yh(e):kf(e,!0)),Hoe(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Nu(Math.min,this.zmin,e.zmin),this.zmax=Nu(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Nu(Math.min,this.mmin,e.mmin),this.mmax=Nu(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Nu(Math.max,this.zmin,e.zmin),this.zmax=Nu(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Nu(Math.max,this.mmin,e.mmin),this.mmax=Nu(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=fn(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?kf(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=eM(i.x,e).x),this.spatialReference=new Ee(Hh((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,n=this.xmin,s=this.xmax;return n>=r&&n<=i&&s>=r&&s<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;const n=r??fn(i);if(n==null)return this;const s=this._getParts(n).map((d=>d.extent));if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(e)return this._shiftCM(n);if(t)return s;let a=!0,c=!0;return s.forEach((d=>{d.hasZ||(a=!1),d.hasM||(c=!1)})),{rings:s.map((d=>{const f=[[d.xmin,d.ymin],[d.xmin,d.ymax],[d.xmax,d.ymax],[d.xmax,d.ymin],[d.xmin,d.ymin]];if(a){const g=(d.zmax-d.zmin)/2;for(let v=0;v<f.length;v++)f[v].push(g)}if(c){const g=(d.mmax-d.mmin)/2;for(let v=0;v<f.length;v++)f[v].push(g)}return f})),hasZ:a,hasM:c,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:s,spatialReference:a}=this,c=this.width,d=this.xmin,f=this.xmax;let g;e=e||fn(a);const[v,w]=e.valid;g=eM(this.xmin,e);const S=g.x,T=g.frameId;g=eM(this.xmax,e);const E=g.x,M=g.frameId,R=S===E&&c>0;if(c>2*w){const I=new mo(d<f?S:E,n,w,s,a),k=new mo(v,n,d<f?E:S,s,a),j=new mo(0,n,w,s,a),P=new mo(v,n,0,s,a),X=[],ae=[];I.contains(j)&&X.push(T),I.contains(P)&&ae.push(T),k.contains(j)&&X.push(M),k.contains(P)&&ae.push(M);for(let fe=T+1;fe<M;fe++)X.push(fe),ae.push(fe);t.push({extent:I,frameIds:[T]},{extent:k,frameIds:[M]},{extent:j,frameIds:X},{extent:P,frameIds:ae})}else S>E||R?t.push({extent:new mo(S,n,w,s,a),frameIds:[T]},{extent:new mo(v,n,E,s,a),frameIds:[M]}):t.push({extent:new mo(S,n,E,s,a),frameIds:[T]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const n={};r&&(n.zmin=this.zmin,n.zmax=this.zmax),i&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<t.length;s++)t[s].extent.set(n)}return t}};function eM(e,t){const[r,i]=t.valid,n=2*i;let s,a=0;return e>i?(s=Math.ceil(Math.abs(e-i)/n),e-=s*n,a=s):e<r&&(s=Math.ceil(Math.abs(e-r)/n),e+=s*n,a=-s),{x:e,frameId:a}}u([p({readOnly:!0})],Xe.prototype,"cache",null),u([p({readOnly:!0})],Xe.prototype,"center",null),u([p({readOnly:!0})],Xe.prototype,"extent",null),u([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Xe.prototype,"hasM",null),u([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Xe.prototype,"hasZ",null),u([p({readOnly:!0})],Xe.prototype,"height",null),u([p({readOnly:!0})],Xe.prototype,"width",null),u([p({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Xe.prototype,"xmin",void 0),u([p({type:Number,json:{write:!0}})],Xe.prototype,"ymin",void 0),u([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Xe.prototype,"mmin",void 0),u([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Xe.prototype,"zmin",void 0),u([p({type:Number,json:{write:!0}})],Xe.prototype,"xmax",void 0),u([p({type:Number,json:{write:!0}})],Xe.prototype,"ymax",void 0),u([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Xe.prototype,"mmax",void 0),u([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Xe.prototype,"zmax",void 0),Xe=mo=u([O("esri.geometry.Extent")],Xe),Xe.prototype.toJSON.isDefaultToJSON=!0;let yv;const Zoe=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,aA=globalThis.document?.documentElement;function LG(){const e=aA?.getAttribute("lang"),t=globalThis.navigator?.language;return Zoe??e??t??"en"}function Un(){return yv===void 0&&(yv=LG()),yv}const Yoe=/^(?<language>[a-z]{2,3})(?:-[a-z]{3})?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function aN(e=Un()){return Yoe.exec(e)?.groups}const S_=[];function DG(e){return S_.push(e),ht((()=>{S_.splice(S_.indexOf(e),1)}))}const T_=[];function lN(e){return T_.push(e),ht((()=>T_.splice(T_.indexOf(e),1)))}function U5(){const e=LG();yv!==e&&([...T_].forEach((t=>t(e))),yv=e,[...S_].forEach((t=>t(e))))}globalThis.addEventListener?.("languagechange",U5),aA&&new MutationObserver((()=>{U5()})).observe(aA,{attributeFilter:["lang"]});let ww;function Joe(e){return ww&&!ww.destroyed||(ww=e()),ww}var lA;const Xoe=new tt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let wr=lA=class extends Ae{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new lA({categories:this.categories?U(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map((a=>Array.isArray(a)?JSON.stringify(a):a)));let i="";if(this.extent){const a=ST(this.extent,Ee.WGS84);a!=null&&(i=`${a.xmin},${a.ymin},${a.xmax},${a.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const s={categories:r,bbox:i,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map((a=>Xoe.toJSON(a.trim()))).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};u([p()],wr.prototype,"categories",void 0),u([p()],wr.prototype,"disableExtraQuery",void 0),u([p({type:Xe})],wr.prototype,"extent",void 0),u([p()],wr.prototype,"filter",void 0),u([p()],wr.prototype,"num",void 0),u([p()],wr.prototype,"query",void 0),u([p()],wr.prototype,"sortField",void 0),u([p()],wr.prototype,"sortOrder",null),u([p()],wr.prototype,"start",void 0),wr=lA=u([O("esri.portal.PortalQueryParams")],wr);var uA;let yr=uA=class extends K{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t&&this.portal?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.portal?.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then((t=>{const r=t.categorySchema||[];return r.some((i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas"))?this._fetchCategorySchemaSet("LivingAtlas",e):r}))}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new z("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new uA({sourceJSON:e});return t.read(e),t}queryItems(e,t){let r=Br(wr,e);const i=this.portal;return parseFloat(i.currentVersion)>5?(r=r||new wr,i.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new wr,r.query="group:"+this.id+(r.query?" "+r.query:""),i.queryItems(r,t))}_fetchCategorySchemaSet(e,t){const r=this.portal;return r.fetchSelf(r.authMode,!0,t).then((i=>{const n=i.contentCategorySetsGroupQuery;if(n){const s=new wr({disableExtraQuery:!0,num:1,query:n});return r.queryGroups(s,t)}throw new z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((i=>{if(i.total){const n=i.results[0],s=new wr({num:1,query:`typekeywords:"${e}"`});return n.queryItems(s,t)}throw new z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((i=>i.total?i.results[0].fetchData("json",t).then((n=>{const s=n?.categorySchema;return s?.length?s:[]})):[]))}};u([p()],yr.prototype,"access",void 0),u([p({type:Date})],yr.prototype,"created",void 0),u([p()],yr.prototype,"description",void 0),u([p()],yr.prototype,"id",void 0),u([p()],yr.prototype,"isInvitationOnly",void 0),u([p({type:Date})],yr.prototype,"modified",void 0),u([p()],yr.prototype,"owner",void 0),u([p()],yr.prototype,"portal",void 0),u([p()],yr.prototype,"snippet",void 0),u([p()],yr.prototype,"sortField",void 0),u([p()],yr.prototype,"sortOrder",void 0),u([p()],yr.prototype,"sourceJSON",void 0),u([p()],yr.prototype,"tags",void 0),u([p()],yr.prototype,"thumbnail",void 0),u([p({readOnly:!0})],yr.prototype,"thumbnailUrl",null),u([p()],yr.prototype,"title",void 0),u([p({readOnly:!0})],yr.prototype,"url",null),yr=uA=u([O("esri.portal.PortalGroup")],yr);let xd=class extends Ae{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};u([p()],xd.prototype,"nextQueryParams",void 0),u([p()],xd.prototype,"queryParams",void 0),u([p()],xd.prototype,"results",void 0),u([p()],xd.prototype,"total",void 0),xd=u([O("esri.portal.PortalQueryResult")],xd);let sl=class extends K{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new z("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};u([p({type:Date})],sl.prototype,"created",void 0),u([p()],sl.prototype,"id",void 0),u([p()],sl.prototype,"portal",void 0),u([p()],sl.prototype,"title",void 0),u([p({readOnly:!0})],sl.prototype,"url",null),u([p()],sl.prototype,"username",void 0),sl=u([O("esri.portal.PortalFolder")],sl);var cA;let $t=cA=class extends K{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.id}`:null}get url(){const e=this.portal?.restUrl;return e?`${e}/community/users/${this.id}`:null}addItem(e){const t=e&&e.item,r=e?.data,i=e?.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),r!=null&&(typeof r=="string"?n.query.text=r:typeof r=="object"&&(n.query.text=JSON.stringify(r))));let s=this.userContentUrl;return i&&(s+="/"+(typeof i=="string"?i:i.id)),this.portal.request(s+"/addItem",n).then((a=>(t.id=a.id,t.portal=this.portal,t.loaded?t.reload():t.load())))}async deleteItem(e,t=!1){let r=this.userContentUrl;e.ownerFolder&&(r+="/"+e.ownerFolder);const i=t?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${e.id}/delete`,{method:"post",query:i}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const r=this.userContentUrl+"/deleteItems",i=[],n=e.map((s=>s.id));if(n.length){const s={method:"post",query:{items:n.join(","),permanentDelete:t}},a=await this.portal.request(r,s);for(const c of a.results){const d=e.find((v=>c.itemId===v.id)),f=c.success;let g=null;f?(d.id=null,d.portal=null):c.error&&(g=new z("portal:delete-item-failed",c.error.message,c.error)),i.push({item:d,success:f,error:g})}}return i}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then((t=>{let r;return r=t&&t.folders?t.folders.map((i=>{const n=sl.fromJSON(i);return n.portal=this.portal,n})):[],r}))}fetchGroups(){return this.portal.request(this.url??"").then((e=>{let t;return t=e&&e.groups?e.groups.map((r=>{const i=yr.fromJSON(r);return i.portal=this.portal,i})):[],t}))}async fetchItems(e){e??={};let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:r}=await ue(()=>Promise.resolve().then(()=>kG),void 0),i={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},n=await this.portal.request(t,{query:i});let s;return n?.items?(s=n.items.map((a=>{const c=r.fromJSON(a);return c.portal=this.portal,c})),await Promise.all(s.map((a=>a.load()))),{items:s,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then((e=>e.tags))}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new yr({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new z("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const r=this.userContentUrl,i=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(r+`/items/${e.id}/restore`,{method:"post",query:i})}toJSON(){throw new z("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new cA({sourceJSON:e});return t.read(e),t}};u([p()],$t.prototype,"access",void 0),u([p({type:Date})],$t.prototype,"created",void 0),u([p()],$t.prototype,"culture",void 0),u([p()],$t.prototype,"description",void 0),u([p()],$t.prototype,"email",void 0),u([p()],$t.prototype,"favGroupId",void 0),u([p()],$t.prototype,"fullName",void 0),u([p()],$t.prototype,"id",void 0),u([p({type:Date})],$t.prototype,"modified",void 0),u([p()],$t.prototype,"orgId",void 0),u([p()],$t.prototype,"portal",void 0),u([p()],$t.prototype,"preferredView",void 0),u([p()],$t.prototype,"privileges",void 0),u([p()],$t.prototype,"region",void 0),u([p()],$t.prototype,"role",void 0),u([p()],$t.prototype,"roleId",void 0),u([p()],$t.prototype,"sourceJSON",void 0),u([p()],$t.prototype,"thumbnail",void 0),u([p({readOnly:!0})],$t.prototype,"thumbnailUrl",null),u([p()],$t.prototype,"units",void 0),u([p({readOnly:!0})],$t.prototype,"userContentUrl",null),u([p({readOnly:!0})],$t.prototype,"url",null),u([p()],$t.prototype,"username",void 0),u([p()],$t.prototype,"userLicenseTypeId",void 0),u([p()],$t.prototype,"userType",void 0),$t=cA=u([O("esri.portal.PortalUser")],$t);var Xn;let Gg;const j5={PortalGroup:()=>Promise.resolve({default:yr}),PortalItem:()=>ue(()=>Promise.resolve().then(()=>kG),void 0),PortalUser:()=>Promise.resolve({default:$t})};var _a;let se=(_a=class extends K.JSONSupportMixin(cs){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=ct.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){z5.unregister(this),this.defaultBasemap=rr(this.defaultBasemap),this.defaultDevBasemap=rr(this.defaultDevBasemap),this.defaultVectorBasemap=rr(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=ir(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const r of t)ct.request.trustedServers.includes(r)||ct.request.trustedServers.push(r);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){const t=this.user?.orgId,r=!t||this.canSearchPublic;return this.id&&!r?` AND orgid:${this.id}`:null}get hasAPIKey(){return wie(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const r=t.indexOf("/sharing");t=r>0?t.slice(0,r):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,r=this.thumbnail;return t&&r?this._normalizeSSL(t+"/portals/self/resources/"+r):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let r=null;return t&&(r=$t.fromJSON(t),r.portal=this),r}load(t){const r=ue(()=>Promise.resolve().then(()=>zue),void 0).then((({default:i})=>{Yt(t),Gg=i})).then((()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t))).then((i=>{if(!this.hasAPIKey&&nt){const n=nt;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==Xn.AUTH_MODE_AUTO&&this.authMode!==Xn.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",Qoe(new WeakRef(this))),z5.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)}));return this.addResolvingPromise(r),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),r=(await ue(async()=>{const{default:i}=await import("./ElevationLayer-9YBRB8M_.js");return{default:i}},__vite__mapDeps([2,3,4,5,6,7,8]))).default;return t?t.map((i=>new r({id:i.id,url:i.url}))):[]}async fetchBasemaps(t,r){const i=await this._fetchBasemaps(t,r);if(r?.include3d===!0&&this.use3dBasemaps!==!1){const n=await this._fetchBasemaps3D(t,r);i.unshift(...n)}return i}async fetchDefault3DBasemap(t){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const r=new wr;r.query=this.default3DBasemapQuery,r.disableExtraQuery=!0;const i=(await this.queryItems(r,t)).results.find((n=>n.type==="Web Scene"));return i?new Gg({portalItem:i}):null}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then((r=>r.categorySchema)):Ws(t)?Promise.reject(Zt()):Promise.resolve([])}async fetchClassificationSchema(t){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",t).then((r=>r.classificationSchema)):null}fetchFeaturedGroups(t){const r=this.featuredGroups,i=new wr({num:100,sortField:"title"});if(r?.length){const n=[];for(const s of r)n.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=n.join(" OR "),this.queryGroups(i,t).then((s=>s.results))}return Ws(t)?Promise.reject(Zt()):Promise.resolve([])}fetchRegions(t){const r=this.user?.culture||this.culture||Un();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:r}})}fetchSettings(t){const r=this.user?.culture||this.culture||Un();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:r}})}static getDefault(){return Joe((()=>new Xn))}queryGroups(t,r){return this.queryPortal("/community/groups",t,"PortalGroup",r)}queryItems(t,r){return this.queryPortal("/search",t,"PortalItem",r)}queryUsers(t,r){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",r)}fetchSelf(t=this.authMode,r=!1,i){const n=this.restUrl+"/portals/self",s={authMode:t,query:{culture:Un().toLowerCase()},withCredentials:!0,...i};return s.authMode==="auto"&&(s.authMode="no-prompt"),r&&(s.query.default=!0),this.request(n,s)}queryPortal(t,r,i,n){const s=Br(wr,r),a=c=>this.request(this.restUrl+t,{...s.toRequestOptions(this),...n}).then((d=>{const f=s.clone();return f.start=d.nextStart,new xd({nextQueryParams:f,queryParams:s,total:d.total,results:Xn._resultsToTypedArray(c,{portal:this},d,n)})})).then((d=>Promise.all(d.results.map((f=>typeof f.when=="function"?f.when():d))).then((()=>d),(f=>(ya(f),d)))));return i&&j5[i]?j5[i]().then((({default:c})=>(Yt(n),a(c)))):a()}signIn(){if(this.hasAPIKey)return this.load().then((()=>{if(!this.user)throw new z("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")}));if(this.authMode===Xn.AUTH_MODE_ANONYMOUS||this.authMode===Xn.AUTH_MODE_NO_PROMPT&&!nt)return Promise.reject(new z("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=r=>Promise.resolve().then((()=>this.loadStatus==="not-loaded"?(r||(this.authMode="immediate"),this.load().then((()=>null))):this.loadStatus==="loading"?this.load().then((()=>this.credential?null:(this.credential=r,this.fetchSelf("immediate")))):this.user&&this.credential===r?null:(this.credential=r,this.fetchSelf("immediate")))).then((i=>{i&&(this.sourceJSON=i,this.read(i))}));return nt?nt.getCredential(this.restUrl,{prompt:this.authMode!==Xn.AUTH_MODE_NO_PROMPT}).then((r=>t(r))):t(this.credential)}normalizeUrl(t){const r=this.credential?.token;return this._normalizeSSL(r?t+(t.includes("?")?"&":"?")+"token="+r:t)}requestToTypedArray(t,r,i){return this.request(t,r).then((n=>{const s=Xn._resultsToTypedArray(i,{portal:this},n);return Promise.all(s.map((a=>typeof a.when=="function"?a.when():n))).then((()=>s),(()=>s))}))}request(t,r={}){const i={f:"json",...r.query},{authMode:n=this.authMode===Xn.AUTH_MODE_ANONYMOUS||this.authMode===Xn.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:a=!1,method:c="auto",responseType:d="json",signal:f}=r,g={authMode:n,body:s,cacheBust:a,method:c,query:i,responseType:d,timeout:0,signal:f};return r.withCredentials&&(g.withCredentials=!0),Ft(this._normalizeSSL(t),g).then((v=>v.data))}toJSON(){throw new z("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Xn({sourceJSON:t})}_getHelperService(t){const r=this.helperServices&&this.helperServices[t];if(!r)throw new z("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return r}async _fetchBasemaps(t,r){const i=new wr;i.query=t||(C3()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const n=await this.queryGroups(i,r);if(!n.total)return[];const s=n.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc";const a=await s.queryItems(i,r);return a.total?a.results.filter((c=>c.type==="Web Map")).map((c=>new Gg({portalItem:c}))):[]}async _fetchBasemaps3D(t,r){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];if(C3())return[];const n=new wr({query:i,disableExtraQuery:!0}),s=await this.queryGroups(n,r);if(!s.total)return[];const a=s.results[0];n.num=100,n.query='type:"Web Scene"',n.sortField=a.sortField||"name",n.sortOrder=a.sortOrder||"desc";const c=await a.queryItems(n,r);return c.total?c.results.filter((d=>d.type==="Web Scene")).map((d=>new Gg({portalItem:d}))):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const r=Gg.fromJSON(t);return r.portalItem={portal:this},r}return null}static _resultsToTypedArray(t,r,i,n){let s;if(i){const a=n!=null?n.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||r)&&(s=s.map((c=>{const d=Object.assign(t?t.fromJSON(c):c,r);return typeof d.load=="function"&&d.load(a),d})))}else s=[];return s}},Xn=_a,_a.AUTH_MODE_ANONYMOUS="anonymous",_a.AUTH_MODE_AUTO="auto",_a.AUTH_MODE_IMMEDIATE="immediate",_a.AUTH_MODE_NO_PROMPT="no-prompt",_a);u([p()],se.prototype,"access",void 0),u([p()],se.prototype,"allSSL",void 0),u([p()],se.prototype,"authMode",void 0),u([p()],se.prototype,"authorizedCrossOriginDomains",void 0),u([le("authorizedCrossOriginDomains")],se.prototype,"readAuthorizedCrossOriginDomains",null),u([p()],se.prototype,"basemapGalleryGroupQuery",void 0),u([p({json:{name:"3DBasemapGalleryGroupQuery"}})],se.prototype,"basemapGalleryGroupQuery3D",void 0),u([p()],se.prototype,"bingKey",void 0),u([p()],se.prototype,"canListApps",void 0),u([p()],se.prototype,"canListData",void 0),u([p()],se.prototype,"canListPreProvisionedItems",void 0),u([p()],se.prototype,"canProvisionDirectPurchase",void 0),u([p()],se.prototype,"canSearchPublic",void 0),u([p()],se.prototype,"canShareBingPublic",void 0),u([p()],se.prototype,"canSharePublic",void 0),u([p()],se.prototype,"canSignInArcGIS",void 0),u([p()],se.prototype,"canSignInIDP",void 0),u([p()],se.prototype,"colorSetsGroupQuery",void 0),u([p()],se.prototype,"commentsEnabled",void 0),u([p({type:Date})],se.prototype,"created",void 0),u([p()],se.prototype,"credential",void 0),u([p()],se.prototype,"culture",void 0),u([p()],se.prototype,"currentVersion",void 0),u([p()],se.prototype,"customBaseUrl",void 0),u([p()],se.prototype,"default3DBasemapQuery",void 0),u([p()],se.prototype,"defaultBasemap",void 0),u([le("defaultBasemap")],se.prototype,"readDefaultBasemap",null),u([p()],se.prototype,"defaultDevBasemap",void 0),u([le("defaultDevBasemap")],se.prototype,"readDefaultDevBasemap",null),u([p({type:Xe})],se.prototype,"defaultExtent",void 0),u([p()],se.prototype,"defaultVectorBasemap",void 0),u([le("defaultVectorBasemap")],se.prototype,"readDefaultVectorBasemap",null),u([p()],se.prototype,"description",void 0),u([p()],se.prototype,"devBasemapGalleryGroupQuery",void 0),u([p()],se.prototype,"eueiEnabled",void 0),u([p({readOnly:!0})],se.prototype,"extraQuery",null),u([p()],se.prototype,"featuredGroups",void 0),u([p()],se.prototype,"featuredItemsGroupQuery",void 0),u([p()],se.prototype,"galleryTemplatesGroupQuery",void 0),u([p()],se.prototype,"layoutGroupQuery",void 0),u([p()],se.prototype,"livingAtlasGroupQuery",void 0),u([p({readOnly:!0})],se.prototype,"hasAPIKey",null),u([p()],se.prototype,"hasCategorySchema",void 0),u([p()],se.prototype,"hasClassificationSchema",void 0),u([p()],se.prototype,"helpBase",void 0),u([p()],se.prototype,"helperServices",void 0),u([p()],se.prototype,"helpMap",void 0),u([p()],se.prototype,"homePageFeaturedContent",void 0),u([p()],se.prototype,"homePageFeaturedContentCount",void 0),u([p()],se.prototype,"httpPort",void 0),u([p()],se.prototype,"httpsPort",void 0),u([p()],se.prototype,"id",void 0),u([p()],se.prototype,"ipCntryCode",void 0),u([p({readOnly:!0})],se.prototype,"isOrganization",null),u([p()],se.prototype,"isPortal",void 0),u([p()],se.prototype,"isReadOnly",void 0),u([p({readOnly:!0})],se.prototype,"itemPageUrl",null),u([p()],se.prototype,"layerTemplatesGroupQuery",void 0),u([p()],se.prototype,"maxTokenExpirationMinutes",void 0),u([p({type:Date})],se.prototype,"modified",void 0),u([p()],se.prototype,"name",void 0),u([p()],se.prototype,"portalHostname",void 0),u([p()],se.prototype,"portalMode",void 0),u([p()],se.prototype,"portalProperties",void 0),u([p()],se.prototype,"region",void 0),u([p()],se.prototype,"recycleBinEnabled",void 0),u([p({readOnly:!0})],se.prototype,"restUrl",null),u([p()],se.prototype,"rotatorPanels",void 0),u([p()],se.prototype,"showHomePageDescription",void 0),u([p()],se.prototype,"sourceJSON",void 0),u([p()],se.prototype,"staticImagesUrl",void 0),u([p({json:{name:"2DStylesGroupQuery"}})],se.prototype,"stylesGroupQuery2d",void 0),u([p({json:{name:"stylesGroupQuery"}})],se.prototype,"stylesGroupQuery3d",void 0),u([p()],se.prototype,"supportsHostedServices",void 0),u([p()],se.prototype,"symbolSetsGroupQuery",void 0),u([p()],se.prototype,"templatesGroupQuery",void 0),u([p()],se.prototype,"thumbnail",void 0),u([p({readOnly:!0})],se.prototype,"thumbnailUrl",null),u([p()],se.prototype,"units",void 0),u([p()],se.prototype,"url",void 0),u([p()],se.prototype,"urlKey",void 0),u([le("urlKey")],se.prototype,"readUrlKey",null),u([p()],se.prototype,"user",void 0),u([le("user")],se.prototype,"readUser",null),u([p()],se.prototype,"use3dBasemaps",void 0),u([p()],se.prototype,"useDefault3dBasemap",void 0),u([p()],se.prototype,"useStandardizedQuery",void 0),u([p()],se.prototype,"useVectorBasemaps",void 0),u([p()],se.prototype,"vectorBasemapGalleryGroupQuery",void 0),se=Xn=u([O("esri.portal.Portal")],se);const z5=new FinalizationRegistry((e=>{e.remove()}));function Qoe(e){const t=nt;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch((()=>{}))}}let ol=class extends Ae{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t?.portalItem&&t.path?{...t,path:V5(t.path,t.portalItem)}:t}set path(t){t!=null&&Fn(t)?re.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return V5(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const i=this.cdnUrl;if(i==null)throw new z("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:t,query:{token:this.portalItem.apiKey,_ts:r?.cacheBust?Date.now():null},signal:r?.signal})}async update(t,r){const{addOrUpdateResources:i}=await ue(()=>import("./resourceUtils-ChRSj-wK.js"),[]);return await i(this.portalItem,[{resource:this,content:t,compress:r?.compress,access:r?.access}],"update",r),this}hasPath(){return this.path!=null}};function V5(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&Fn(e)&&(e=RI(e,t.itemUrl)),e?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}u([p()],ol.prototype,"portalItem",void 0),u([p({type:String,value:null})],ol.prototype,"path",null),u([wt("path")],ol.prototype,"_castPath",null),u([p({type:String,readOnly:!0})],ol.prototype,"url",null),u([p({type:String,readOnly:!0})],ol.prototype,"cdnUrl",null),u([p({type:String,readOnly:!0})],ol.prototype,"itemRelativeUrl",null),ol=u([O("esri.portal.PortalItemResource")],ol);let nh=class extends Ae{constructor(t){super(t),this.created=null,this.rating=null}};u([p({type:Date})],nh.prototype,"created",void 0),u([p()],nh.prototype,"rating",void 0),nh=u([O("esri.portal.PortalRating")],nh);var $d;const Koe=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),eae=new Set(["KML","GeoJson","CSV"]);let Ge=$d=class extends K.JSONSupportMixin(cs){static from(e){return R1($d,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Geocoding Service"?r="Locator":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e?.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="Raster function template"?r="Raster Function Template":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?r="Instant App":e==="Insights Page"?r="Insights Report":e==="Excalibur Imagery Project"?r="Excalibur Project":e==="3DTiles Service"?r="3D tiles layer":e==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(e){return e&&e.length?new Xe(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type?.toLowerCase()||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let n,s=!1,a=!1,c=!1,d=!1,f=!1,g=!1,v=!1,w=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(a=t.includes("Table"),c=t.includes("Route Layer"),d=t.includes("Markup"),f=t.includes("Spatiotemporal"),g=t.includes("UtilityNetwork"),n=f&&a?"spatiotemporaltable":a?"table":c?"routelayer":d?"markup":f?"spatiotemporal":g?"utilitynetwork":s?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(f=t.includes("Spatiotemporal"),v=t.includes("Relational"),n=f||v?"mapimages":s||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):n=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?n="maps":e==="web scene"?n=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?n="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?n="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?n="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?n="datafiles":e==="360 vr experience"?n="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?n="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?n="addindesktop":e==="pdf"?n="pdf":e==="microsoft word"?n="word":e==="microsoft excel"?n="excel":e==="microsoft powerpoint"?n="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?n="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?n="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?n="layersgray":e==="analysis model"?n="analysismodel":e==="scene package"?n="scenepackage":e==="3dtiles package"?n="3dtileslayerpackage":e==="3dtiles service"?n="3dtileslayer":e==="mobile scene package"?n="mobilescenepackage":e==="tile package"||e==="compact tile package"?n="tilepackage":e==="task file"?n="taskfile":e==="report template"?n="report-template":e==="statistical data collection"?n="statisticaldatacollection":e==="insights workbook"?n="workbook":e==="insights model"?n="insightsmodel":e==="insights page"?n="insightspage":e==="insights theme"?n="insightstheme":e==="hub initiative"?n="hubinitiative":e==="hub page"?n="hubpage":e==="hub site application"?n="hubsite":e==="hub event"?n="hubevent":e==="hub project"?n="hubproject":e==="relational database connection"?n="relationaldatabaseconnection":e==="big data file share"?n="datastorecollection":e==="image collection"?n="imagecollection":e==="desktop style"?n="desktopstyle":e==="style"?n=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?n="dashboard":e==="raster function template"?n="rasterprocessingtemplate":e==="vector tile package"?n="vectortilepackage":e==="ortho mapping project"?n="orthomappingproject":e==="ortho mapping template"?n="orthomappingtemplate":e==="solution"?n="solutions":e==="geopackage"?n="geopackage":e==="deep learning package"?n="deeplearningpackage":e==="real time analytic"?n="realtimeanalytics":e==="reality mapping project"?n="realitymappingproject":e==="big data analytic"?n="bigdataanalytics":e==="feed"?n="feed":e==="excalibur imagery project"?n="excaliburimageryproject":e==="notebook"?n="notebook":e==="storymap"?n="storymap":e==="survey123 add in"?n="survey123addin":e==="mission"?n="mission":e==="mission report"?n="missionreport":e==="mission template"?n="missiontemplate":e==="quickcapture project"?n="quickcaptureproject":e==="pro report"?n="proreport":e==="pro report template"?n="proreporttemplate":e==="urban model"?n="urbanmodel":e==="urban project"?n="urbanproject":e==="web experience"?n="experiencebuilder":e==="web experience template"?n="webexperiencetemplate":e==="experience builder widget"?n="experiencebuilderwidget":e==="experience builder widget package"?n="experiencebuilderwidgetpackage":e==="workflow"?n="workflow":e==="kernel gateway connection"?n="kernelgatewayconnection":e==="insights script"?n="insightsscript":e==="hub initiative template"?n="hubinitiativetemplate":e==="storymap theme"?n="storymaptheme":e==="knowledge graph"?n="knowledgegraph":e==="knowledge graph layer"?n="knowledgegraphlayer":e==="knowledge studio project"?n="knowledgestudio":e==="native application"?n="nativeapp":e==="native application installer"?n="nativeappinstaller":e==="web link chart"?n="linkchart":e==="knowledge graph web investigation"?n="investigation":e==="ogcfeatureserver"?n="features":e==="pro presentation"?n="propresentation":e==="pro project"?n="proproject":e==="insights workbook package"?n="insightsworkbookpackage":e==="apache parquet"?n="apacheparquet":e==="notebook code snippet library"?n="notebookcodesnippets":e==="suitability model"?n="suitabilitymodel":e==="esri classifier definition"?n="classifierdefinition":e==="esri classification schema"?n="classificationschema":e==="insights data engineering workbook"?n="dataengineeringworkbook":e==="insights data engineering model"?n="dataengineeringmodel":e==="deep learning studio project"?n="deeplearningproject":e==="discussion"?n="discussion":e==="allsource project"?n="allsourceproject":e==="api key"?n="apikey":e==="data pipeline"?n="datapipelines":e==="group layer"?(w=t.includes("Map"),n=w?"layergroup2d":"layergroup"):n=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",n?gr(r+n+i+".png"):null}get isLayer(){return this.type!=null&&Koe.has(this.type)}get itemCdnUrl(){return kI(this.itemUrl)}get itemPageUrl(){const e=this.portal?.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){const e=this.portal?.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`)??null:null}get userItemUrl(){const e=this.portal?.restUrl;if(!e)return null;const t=this.owner||this.portal?.user?.id;return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=se.getDefault()),r=t.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{})).then((i=>{this.sourceJSON=i,this.read(i)}));return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}},r=e instanceof nh?e.rating:e;return r==null||isNaN(r)||typeof e!="number"||(t.query.rating=r),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new nh({rating:r,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:U(this.applicationProxies),avgRating:this.avgRating,categories:U(this.categories),classification:U(this.classification),created:U(this.created),culture:this.culture,description:this.description,extent:U(this.extent),groupCategories:U(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:U(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:U(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:U(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:U(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new $d({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){const e=this.toJSON();for(const t of["tags","typeKeywords","categories"])e[t]=e[t]?.join(", ");for(const t of["extent","classification"]){const r=e[t];r&&(e[t]=JSON.stringify(r))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new nh(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},$d)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then((e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const t=e?.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then((()=>this.reload()))})):Promise.reject(new z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new z("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await t.signIn();const{copyResources:i,folder:n,tags:s,title:a}=e||{},c={method:"post",query:{copyPrivateResources:i==="all",folder:typeof n=="string"?n:n?.id,includeResources:!!i,tags:s?.join(","),title:a}},{itemId:d}=await t.request(`${r}/copy`,c);return new $d({id:d,portal:t})}updateThumbnail(e){return this.id?this.load().then((()=>this.portal.signIn())).then((()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")Wh(t)?i.query={data:t}:i.query={url:zs(t)},r!=null&&(i.query.filename=r);else{const n=new FormData;r!=null?n.append("file",t,r):n.append("file",t),i.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,i).then((()=>this.reload()))})):Promise.reject(new z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await ue(()=>import("./resourceUtils-ChRSj-wK.js"),[]);return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResources:i}=await ue(()=>import("./resourceUtils-ChRSj-wK.js"),[]);return e.portalItem=this,await i(this,[{resource:e,content:t,compress:r?.compress,access:r?.access}],"add",r),e}async removeResource(e,t){const{removeResource:r}=await ue(()=>import("./resourceUtils-ChRSj-wK.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new z("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await ue(()=>import("./resourceUtils-ChRSj-wK.js"),[]);return t(this,e)}resourceFromPath(e){return new ol({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:U(this.categories),classification:U(this.classification),created:this.created?.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:U(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:U(this.typeKeywords),url:this.url};return fre(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new $d({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};u([p({type:["private","shared","org","public"]})],Ge.prototype,"access",void 0),u([p()],Ge.prototype,"accessInformation",void 0),u([p({type:String})],Ge.prototype,"apiKey",void 0),u([p({json:{read:{source:"appProxies"}}})],Ge.prototype,"applicationProxies",void 0),u([p()],Ge.prototype,"avgRating",void 0),u([p()],Ge.prototype,"categories",void 0),u([p()],Ge.prototype,"classification",void 0),u([p({type:Date})],Ge.prototype,"created",void 0),u([p()],Ge.prototype,"culture",void 0),u([p()],Ge.prototype,"description",void 0),u([p({readOnly:!0})],Ge.prototype,"displayName",null),u([p({type:Xe})],Ge.prototype,"extent",void 0),u([le("extent")],Ge.prototype,"readExtent",null),u([p()],Ge.prototype,"groupCategories",void 0),u([p({readOnly:!0})],Ge.prototype,"iconUrl",null),u([p()],Ge.prototype,"id",void 0),u([p({readOnly:!0})],Ge.prototype,"isLayer",null),u([p({type:Boolean,readOnly:!0})],Ge.prototype,"isOrgItem",void 0),u([p()],Ge.prototype,"itemControl",void 0),u([p({readOnly:!0})],Ge.prototype,"itemPageUrl",null),u([p({readOnly:!0})],Ge.prototype,"itemUrl",null),u([p()],Ge.prototype,"licenseInfo",void 0),u([p({type:Date})],Ge.prototype,"modified",void 0),u([p()],Ge.prototype,"name",void 0),u([p()],Ge.prototype,"numComments",void 0),u([p()],Ge.prototype,"numRatings",void 0),u([p()],Ge.prototype,"numViews",void 0),u([p()],Ge.prototype,"owner",void 0),u([p()],Ge.prototype,"ownerFolder",void 0),u([p({type:se})],Ge.prototype,"portal",void 0),u([p()],Ge.prototype,"screenshots",void 0),u([p()],Ge.prototype,"size",void 0),u([p()],Ge.prototype,"snippet",void 0),u([p()],Ge.prototype,"sourceJSON",void 0),u([p({type:String})],Ge.prototype,"sourceUrl",void 0),u([p({type:String})],Ge.prototype,"spatialReference",void 0),u([p()],Ge.prototype,"tags",void 0),u([p()],Ge.prototype,"thumbnail",void 0),u([p({readOnly:!0})],Ge.prototype,"thumbnailUrl",null),u([p()],Ge.prototype,"title",void 0),u([p()],Ge.prototype,"type",void 0),u([p()],Ge.prototype,"typeKeywords",void 0),u([p({type:String,json:{read(e,t){if(eae.has(t.type)){const r=this.portal?.restUrl;e||=r&&this.id?`${r}/content/items/${this.id}/data`:null}return e}}})],Ge.prototype,"url",void 0),u([p({readOnly:!0})],Ge.prototype,"userItemUrl",null),Ge=$d=u([O("esri.portal.PortalItem")],Ge);const kG=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Ge}},Symbol.toStringTag,{value:"Module"})),FG={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function tae(e){return e in FG}function G5(e){if(tae(e)){const t=FG[e];return t===!0?e:t}return null}const y0=[],Kf=new Map;function q5(e){for(const t of Kf.keys())zG(e.pattern,t)&&Kf.delete(t)}function rae(e){return y0.includes(e)||(q5(e),y0.unshift(e)),ht((()=>{const t=y0.indexOf(e);t>-1&&(y0.splice(t,1),q5(e))}))}async function UG(e){const t=Un();Kf.has(e)||Kf.set(e,iae(e,t));const r=Kf.get(e);return r&&await nae.add(r),r}function jG(e){const t=aN(e);return t?G5(e)??G5(t.language):null}async function iae(e,t){const r=[];for(const i of y0)if(zG(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(n){r.push(n)}throw r.length?new z("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new z("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function zG(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}lN((()=>{Kf.clear()}));const nae=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=ys())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function sae(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,r=await UG("esri/t9n/basemaps");return r[e]||r[t]}const dA={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return gr("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return gr("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return gr("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return gr("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return gr("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return gr("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return gr("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return gr("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return gr("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return gr("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return gr("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return gr("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return gr("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return gr("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return gr("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return gr("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return gr("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}},zo="system",Ic="unknown",Nc="UTC",oae=Intl.DateTimeFormat().resolvedOptions().timeZone,B5=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class Xh extends Error{}class aae extends Xh{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class lae extends Xh{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class uae extends Xh{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Ff extends Xh{}class VG extends Xh{constructor(t){super(`Invalid unit ${t}`)}}class Ui extends Xh{}class Pu extends Xh{constructor(){super("Zone is an abstract class")}}const be="numeric",Vo="short",ms="long",n2={year:be,month:be,day:be},GG={year:be,month:Vo,day:be},cae={year:be,month:Vo,day:be,weekday:Vo},qG={year:be,month:ms,day:be},BG={year:be,month:ms,day:be,weekday:ms},HG={hour:be,minute:be},WG={hour:be,minute:be,second:be},ZG={hour:be,minute:be,second:be,timeZoneName:Vo},YG={hour:be,minute:be,second:be,timeZoneName:ms},JG={hour:be,minute:be,hourCycle:"h23"},XG={hour:be,minute:be,second:be,hourCycle:"h23"},QG={hour:be,minute:be,second:be,hourCycle:"h23",timeZoneName:Vo},KG={hour:be,minute:be,second:be,hourCycle:"h23",timeZoneName:ms},eq={year:be,month:be,day:be,hour:be,minute:be},tq={year:be,month:be,day:be,hour:be,minute:be,second:be},rq={year:be,month:Vo,day:be,hour:be,minute:be},iq={year:be,month:Vo,day:be,hour:be,minute:be,second:be},dae={year:be,month:Vo,day:be,weekday:Vo,hour:be,minute:be},nq={year:be,month:ms,day:be,hour:be,minute:be,timeZoneName:Vo},sq={year:be,month:ms,day:be,hour:be,minute:be,second:be,timeZoneName:Vo},oq={year:be,month:ms,day:be,weekday:ms,hour:be,minute:be,timeZoneName:ms},aq={year:be,month:ms,day:be,weekday:ms,hour:be,minute:be,second:be,timeZoneName:ms};class Qh{get type(){throw new Pu}get name(){throw new Pu}get ianaName(){return this.name}get isUniversal(){throw new Pu}offsetName(t,r){throw new Pu}formatOffset(t,r){throw new Pu}offset(t){throw new Pu}equals(t){throw new Pu}get isValid(){throw new Pu}}let tM=null;class ET extends Qh{static get instance(){return tM===null&&(tM=new ET),tM}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return vq(t,r,i)}formatOffset(t,r){return gv(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}const hA=new Map;function hae(e){let t=hA.get(e);return t===void 0&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),hA.set(e,t)),t}const pae={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function fae(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,n,s,a,c,d,f,g]=i;return[a,n,s,c,d,f,g]}function mae(e,t){const r=e.formatToParts(t),i=[];for(let n=0;n<r.length;n++){const{type:s,value:a}=r[n],c=pae[s];s==="era"?i[c]=a:Je(c)||(i[c]=parseInt(a,10))}return i}const rM=new Map;class zn extends Qh{static create(t){let r=rM.get(t);return r===void 0&&rM.set(t,r=new zn(t)),r}static resetCache(){rM.clear(),hA.clear()}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=zn.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return vq(t,r,i,this.name)}formatOffset(t,r){return gv(this.offset(t),r)}offset(t){if(!this.valid)return NaN;const r=new Date(t);if(isNaN(r))return NaN;const i=hae(this.name);let[n,s,a,c,d,f,g]=i.formatToParts?mae(i,r):fae(i,r);c==="BC"&&(n=-Math.abs(n)+1);const w=$T({year:n,month:s,day:a,hour:d===24?0:d,minute:f,second:g,millisecond:0});let S=+r;const T=S%1e3;return S-=T>=0?T:1e3+T,(w-S)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let H5={};function yae(e,t={}){const r=JSON.stringify([e,t]);let i=H5[r];return i||(i=new Intl.ListFormat(e,t),H5[r]=i),i}const pA=new Map;function fA(e,t={}){const r=JSON.stringify([e,t]);let i=pA.get(r);return i===void 0&&(i=new Intl.DateTimeFormat(e,t),pA.set(r,i)),i}const mA=new Map;function gae(e,t={}){const r=JSON.stringify([e,t]);let i=mA.get(r);return i===void 0&&(i=new Intl.NumberFormat(e,t),mA.set(r,i)),i}const yA=new Map;function vae(e,t={}){const{base:r,...i}=t,n=JSON.stringify([e,i]);let s=yA.get(n);return s===void 0&&(s=new Intl.RelativeTimeFormat(e,t),yA.set(n,s)),s}let g0=null;function bae(){return g0||(g0=new Intl.DateTimeFormat().resolvedOptions().locale,g0)}const gA=new Map;function lq(e){let t=gA.get(e);return t===void 0&&(t=new Intl.DateTimeFormat(e).resolvedOptions(),gA.set(e,t)),t}const vA=new Map;function wae(e){let t=vA.get(e);if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in t||(t={...uq,...t}),vA.set(e,t)}return t}function _ae(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let i,n;try{i=fA(e).resolvedOptions(),n=e}catch{const d=e.substring(0,r);i=fA(d).resolvedOptions(),n=d}const{numberingSystem:s,calendar:a}=i;return[n,s,a]}}function Sae(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function Tae(e){const t=[];for(let r=1;r<=12;r++){const i=_e.utc(2009,r,1);t.push(e(i))}return t}function Eae(e){const t=[];for(let r=1;r<=7;r++){const i=_e.utc(2016,11,13+r);t.push(e(i))}return t}function _w(e,t,r,i){const n=e.listingMode();return n==="error"?null:n==="en"?r(t):i(t)}function xae(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||lq(e.locale).numberingSystem==="latn"}class $ae{constructor(t,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:n,floor:s,...a}=i;if(!r||Object.keys(a).length>0){const c={useGrouping:!1,...i};i.padTo>0&&(c.minimumIntegerDigits=i.padTo),this.inf=gae(t,c)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):pN(t,3);return Vr(r,this.padTo)}}}class Mae{constructor(t,r,i){this.opts=i,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const a=-1*(t.offset/60),c=a>=0?`Etc/GMT+${a}`:`Etc/GMT${a}`;t.offset!==0&&zn.create(c).valid?(n=c,this.dt=t):(n="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,n=t.zone.name):(n="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=fA(r,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:i}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Aae{constructor(t,r,i){this.opts={style:"long",...i},!r&&yq()&&(this.rtf=vae(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):Jae(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const uq={firstDay:1,minimalDays:4,weekend:[6,7]};class At{static fromOpts(t){return At.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,i,n,s=!1){const a=t||_r.defaultLocale,c=a||(s?"en-US":bae()),d=r||_r.defaultNumberingSystem,f=i||_r.defaultOutputCalendar,g=wA(n)||_r.defaultWeekSettings;return new At(c,d,f,g,a)}static resetCache(){g0=null,pA.clear(),mA.clear(),yA.clear(),gA.clear(),vA.clear()}static fromObject({locale:t,numberingSystem:r,outputCalendar:i,weekSettings:n}={}){return At.create(t,r,i,n)}constructor(t,r,i,n,s){const[a,c,d]=_ae(t);this.locale=a,this.numberingSystem=r||c||null,this.outputCalendar=i||d||null,this.weekSettings=n,this.intl=Sae(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=xae(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:At.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,wA(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return _w(this,t,_q,()=>{const i=r?{month:t,day:"numeric"}:{month:t},n=r?"format":"standalone";return this.monthsCache[n][t]||(this.monthsCache[n][t]=Tae(s=>this.extract(s,i,"month"))),this.monthsCache[n][t]})}weekdays(t,r=!1){return _w(this,t,Eq,()=>{const i=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},n=r?"format":"standalone";return this.weekdaysCache[n][t]||(this.weekdaysCache[n][t]=Eae(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[n][t]})}meridiems(){return _w(this,void 0,()=>xq,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[_e.utc(2016,11,13,9),_e.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return _w(this,t,$q,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[_e.utc(-40,1,1),_e.utc(2017,1,1)].map(i=>this.extract(i,r,"era"))),this.eraCache[t]})}extract(t,r,i){const n=this.dtFormatter(t,r),s=n.formatToParts(),a=s.find(c=>c.type.toLowerCase()===i);return a?a.value:null}numberFormatter(t={}){return new $ae(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new Mae(t,this.intl,r)}relFormatter(t={}){return new Aae(this.intl,this.isEnglish(),t)}listFormatter(t={}){return yae(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||lq(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:gq()?wae(this.locale):uq}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let iM=null;class qr extends Qh{static get utcInstance(){return iM===null&&(iM=new qr(0)),iM}static instance(t){return t===0?qr.utcInstance:new qr(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new qr(MT(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${gv(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${gv(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return gv(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class Oae extends Qh{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function cc(e,t){if(Je(e)||e===null)return t;if(e instanceof Qh)return e;if(Lae(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?ET.instance:r==="utc"||r==="gmt"?qr.utcInstance:qr.parseSpecifier(r)||zn.create(e)}else return Ec(e)?qr.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new Oae(e)}const uN={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},W5={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Rae=uN.hanidec.replace(/[\[|\]]/g,"").split("");function Cae(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(uN.hanidec)!==-1)t+=Rae.indexOf(e[r]);else for(const n in W5){const[s,a]=W5[n];i>=s&&i<=a&&(t+=i-s)}}return parseInt(t,10)}else return t}const bA=new Map;function Iae(){bA.clear()}function uo({numberingSystem:e},t=""){const r=e||"latn";let i=bA.get(r);i===void 0&&(i=new Map,bA.set(r,i));let n=i.get(t);return n===void 0&&(n=new RegExp(`${uN[r]}${t}`),i.set(t,n)),n}let Z5=()=>Date.now(),Y5="system",J5=null,X5=null,Q5=null,K5=60,e6,t6=null;class _r{static get now(){return Z5}static set now(t){Z5=t}static set defaultZone(t){Y5=t}static get defaultZone(){return cc(Y5,ET.instance)}static get defaultLocale(){return J5}static set defaultLocale(t){J5=t}static get defaultNumberingSystem(){return X5}static set defaultNumberingSystem(t){X5=t}static get defaultOutputCalendar(){return Q5}static set defaultOutputCalendar(t){Q5=t}static get defaultWeekSettings(){return t6}static set defaultWeekSettings(t){t6=wA(t)}static get twoDigitCutoffYear(){return K5}static set twoDigitCutoffYear(t){K5=t%100}static get throwOnInvalid(){return e6}static set throwOnInvalid(t){e6=t}static resetCaches(){At.resetCache(),zn.resetCache(),_e.resetCache(),Iae()}}class No{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const cq=[0,31,59,90,120,151,181,212,243,273,304,334],dq=[0,31,60,91,121,152,182,213,244,274,305,335];function Gs(e,t){return new No("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function cN(e,t,r){const i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const n=i.getUTCDay();return n===0?7:n}function hq(e,t,r){return r+(N1(e)?dq:cq)[t-1]}function pq(e,t){const r=N1(e)?dq:cq,i=r.findIndex(s=>s<t),n=t-r[i];return{month:i+1,day:n}}function dN(e,t){return(e-t+7)%7+1}function s2(e,t=4,r=1){const{year:i,month:n,day:s}=e,a=hq(i,n,s),c=dN(cN(i,n,s),r);let d=Math.floor((a-c+14-t)/7),f;return d<1?(f=i-1,d=Qv(f,t,r)):d>Qv(i,t,r)?(f=i+1,d=1):f=i,{weekYear:f,weekNumber:d,weekday:c,...AT(e)}}function r6(e,t=4,r=1){const{weekYear:i,weekNumber:n,weekday:s}=e,a=dN(cN(i,1,t),r),c=em(i);let d=n*7+s-a-7+t,f;d<1?(f=i-1,d+=em(f)):d>c?(f=i+1,d-=em(i)):f=i;const{month:g,day:v}=pq(f,d);return{year:f,month:g,day:v,...AT(e)}}function nM(e){const{year:t,month:r,day:i}=e,n=hq(t,r,i);return{year:t,ordinal:n,...AT(e)}}function i6(e){const{year:t,ordinal:r}=e,{month:i,day:n}=pq(t,r);return{year:t,month:i,day:n,...AT(e)}}function n6(e,t){if(!Je(e.localWeekday)||!Je(e.localWeekNumber)||!Je(e.localWeekYear)){if(!Je(e.weekday)||!Je(e.weekNumber)||!Je(e.weekYear))throw new Ff("Cannot mix locale-based week fields with ISO-based week fields");return Je(e.localWeekday)||(e.weekday=e.localWeekday),Je(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Je(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Nae(e,t=4,r=1){const i=xT(e.weekYear),n=qs(e.weekNumber,1,Qv(e.weekYear,t,r)),s=qs(e.weekday,1,7);return i?n?s?!1:Gs("weekday",e.weekday):Gs("week",e.weekNumber):Gs("weekYear",e.weekYear)}function Pae(e){const t=xT(e.year),r=qs(e.ordinal,1,em(e.year));return t?r?!1:Gs("ordinal",e.ordinal):Gs("year",e.year)}function fq(e){const t=xT(e.year),r=qs(e.month,1,12),i=qs(e.day,1,o2(e.year,e.month));return t?r?i?!1:Gs("day",e.day):Gs("month",e.month):Gs("year",e.year)}function mq(e){const{hour:t,minute:r,second:i,millisecond:n}=e,s=qs(t,0,23)||t===24&&r===0&&i===0&&n===0,a=qs(r,0,59),c=qs(i,0,59),d=qs(n,0,999);return s?a?c?d?!1:Gs("millisecond",n):Gs("second",i):Gs("minute",r):Gs("hour",t)}function Je(e){return typeof e>"u"}function Ec(e){return typeof e=="number"}function xT(e){return typeof e=="number"&&e%1===0}function Lae(e){return typeof e=="string"}function Dae(e){return Object.prototype.toString.call(e)==="[object Date]"}function yq(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function gq(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function kae(e){return Array.isArray(e)?e:[e]}function s6(e,t,r){if(e.length!==0)return e.reduce((i,n)=>{const s=[t(n),n];return i&&r(i[0],s[0])===i[0]?i:s},null)[1]}function Fae(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function Zm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function wA(e){if(e==null)return null;if(typeof e!="object")throw new Ui("Week settings must be an object");if(!qs(e.firstDay,1,7)||!qs(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!qs(t,1,7)))throw new Ui("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function qs(e,t,r){return xT(e)&&e>=t&&e<=r}function Uae(e,t){return e-t*Math.floor(e/t)}function Vr(e,t=2){const r=e<0;let i;return r?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function ec(e){if(!(Je(e)||e===null||e===""))return parseInt(e,10)}function fd(e){if(!(Je(e)||e===null||e===""))return parseFloat(e)}function hN(e){if(!(Je(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function pN(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function N1(e){return e%4===0&&(e%100!==0||e%400===0)}function em(e){return N1(e)?366:365}function o2(e,t){const r=Uae(t-1,12)+1,i=e+(t-r)/12;return r===2?N1(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function $T(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function o6(e,t,r){return-dN(cN(e,1,t),r)+t-1}function Qv(e,t=4,r=1){const i=o6(e,t,r),n=o6(e+1,t,r);return(em(e)-i+n)/7}function _A(e){return e>99?e:e>_r.twoDigitCutoffYear?1900+e:2e3+e}function vq(e,t,r,i=null){const n=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const a={timeZoneName:t,...s},c=new Intl.DateTimeFormat(r,a).formatToParts(n).find(d=>d.type.toLowerCase()==="timezonename");return c?c.value:null}function MT(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,n=r<0||Object.is(r,-0)?-i:i;return r*60+n}function bq(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new Ui(`Invalid unit value ${e}`);return t}function a2(e,t){const r={};for(const i in e)if(Zm(e,i)){const n=e[i];if(n==null)continue;r[t(i)]=bq(n)}return r}function gv(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${Vr(r,2)}:${Vr(i,2)}`;case"narrow":return`${n}${r}${i>0?`:${i}`:""}`;case"techie":return`${n}${Vr(r,2)}${Vr(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function AT(e){return Fae(e,["hour","minute","second","millisecond"])}const jae=["January","February","March","April","May","June","July","August","September","October","November","December"],wq=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],zae=["J","F","M","A","M","J","J","A","S","O","N","D"];function _q(e){switch(e){case"narrow":return[...zae];case"short":return[...wq];case"long":return[...jae];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Sq=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Tq=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Vae=["M","T","W","T","F","S","S"];function Eq(e){switch(e){case"narrow":return[...Vae];case"short":return[...Tq];case"long":return[...Sq];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const xq=["AM","PM"],Gae=["Before Christ","Anno Domini"],qae=["BC","AD"],Bae=["B","A"];function $q(e){switch(e){case"narrow":return[...Bae];case"short":return[...qae];case"long":return[...Gae];default:return null}}function Hae(e){return xq[e.hour<12?0:1]}function Wae(e,t){return Eq(t)[e.weekday-1]}function Zae(e,t){return _q(t)[e.month-1]}function Yae(e,t){return $q(t)[e.year<0?0:1]}function Jae(e,t,r="always",i=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&s){const v=e==="days";switch(t){case 1:return v?"tomorrow":`next ${n[e][0]}`;case-1:return v?"yesterday":`last ${n[e][0]}`;case 0:return v?"today":`this ${n[e][0]}`}}const a=Object.is(t,-0)||t<0,c=Math.abs(t),d=c===1,f=n[e],g=i?d?f[1]:f[2]||f[1]:d?n[e][0]:e;return a?`${c} ${g} ago`:`in ${c} ${g}`}function a6(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const Xae={D:n2,DD:GG,DDD:qG,DDDD:BG,t:HG,tt:WG,ttt:ZG,tttt:YG,T:JG,TT:XG,TTT:QG,TTTT:KG,f:eq,ff:rq,fff:nq,ffff:oq,F:tq,FF:iq,FFF:sq,FFFF:aq};class qi{static create(t,r={}){return new qi(t,r)}static parseFormat(t){let r=null,i="",n=!1;const s=[];for(let a=0;a<t.length;a++){const c=t.charAt(a);c==="'"?(i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),r=null,i="",n=!n):n||c===r?i+=c:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=c,r=c)}return i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(t){return Xae[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return Vr(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(S,T)=>this.loc.extract(t,S,T),a=S=>t.isOffsetFixed&&t.offset===0&&S.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,S.format):"",c=()=>i?Hae(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),d=(S,T)=>i?Zae(t,S):s(T?{month:S}:{month:S,day:"numeric"},"month"),f=(S,T)=>i?Wae(t,S):s(T?{weekday:S}:{weekday:S,month:"long",day:"numeric"},"weekday"),g=S=>{const T=qi.macroTokenToFormatOpts(S);return T?this.formatWithSystemDefault(t,T):S},v=S=>i?Yae(t,S):s({era:S},"era"),w=S=>{switch(S){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return c();case"d":return n?s({day:"numeric"},"day"):this.num(t.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return f("short",!0);case"cccc":return f("long",!0);case"ccccc":return f("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return f("short",!1);case"EEEE":return f("long",!1);case"EEEEE":return f("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return d("short",!0);case"LLLL":return d("long",!0);case"LLLLL":return d("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(t.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return d("short",!1);case"MMMM":return d("long",!1);case"MMMMM":return d("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(t.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return v("short");case"GG":return v("long");case"GGGGG":return v("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return g(S)}};return a6(qi.parseFormat(r),w)}formatDurationFromString(t,r){const i=d=>{switch(d[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=d=>f=>{const g=i(f);return g?this.num(d.get(g),f.length):f},s=qi.parseFormat(r),a=s.reduce((d,{literal:f,val:g})=>f?d:d.concat(g),[]),c=t.shiftTo(...a.map(i).filter(d=>d));return a6(s,n(c))}}const Mq=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function vy(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function by(...e){return t=>e.reduce(([r,i,n],s)=>{const[a,c,d]=s(t,n);return[{...r,...a},c||i,d]},[{},null,1]).slice(0,2)}function wy(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const n=r.exec(e);if(n)return i(n)}return[null,null]}function Aq(...e){return(t,r)=>{const i={};let n;for(n=0;n<e.length;n++)i[e[n]]=ec(t[r+n]);return[i,null,r+n]}}const Oq=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Qae=`(?:${Oq.source}?(?:\\[(${Mq.source})\\])?)?`,fN=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Rq=RegExp(`${fN.source}${Qae}`),mN=RegExp(`(?:T${Rq.source})?`),Kae=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ele=/(\d{4})-?W(\d\d)(?:-?(\d))?/,tle=/(\d{4})-?(\d{3})/,rle=Aq("weekYear","weekNumber","weekDay"),ile=Aq("year","ordinal"),nle=/(\d{4})-(\d\d)-(\d\d)/,Cq=RegExp(`${fN.source} ?(?:${Oq.source}|(${Mq.source}))?`),sle=RegExp(`(?: ${Cq.source})?`);function tm(e,t,r){const i=e[t];return Je(i)?r:ec(i)}function ole(e,t){return[{year:tm(e,t),month:tm(e,t+1,1),day:tm(e,t+2,1)},null,t+3]}function _y(e,t){return[{hours:tm(e,t,0),minutes:tm(e,t+1,0),seconds:tm(e,t+2,0),milliseconds:hN(e[t+3])},null,t+4]}function P1(e,t){const r=!e[t]&&!e[t+1],i=MT(e[t+1],e[t+2]),n=r?null:qr.instance(i);return[{},n,t+3]}function L1(e,t){const r=e[t]?zn.create(e[t]):null;return[{},r,t+1]}const ale=RegExp(`^T?${fN.source}$`),lle=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function ule(e){const[t,r,i,n,s,a,c,d,f]=e,g=t[0]==="-",v=d&&d[0]==="-",w=(S,T=!1)=>S!==void 0&&(T||S&&g)?-S:S;return[{years:w(fd(r)),months:w(fd(i)),weeks:w(fd(n)),days:w(fd(s)),hours:w(fd(a)),minutes:w(fd(c)),seconds:w(fd(d),d==="-0"),milliseconds:w(hN(f),v)}]}const cle={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function yN(e,t,r,i,n,s,a){const c={year:t.length===2?_A(ec(t)):ec(t),month:wq.indexOf(r)+1,day:ec(i),hour:ec(n),minute:ec(s)};return a&&(c.second=ec(a)),e&&(c.weekday=e.length>3?Sq.indexOf(e)+1:Tq.indexOf(e)+1),c}const dle=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function hle(e){const[,t,r,i,n,s,a,c,d,f,g,v]=e,w=yN(t,n,i,r,s,a,c);let S;return d?S=cle[d]:f?S=0:S=MT(g,v),[w,new qr(S)]}function ple(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const fle=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,mle=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,yle=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function l6(e){const[,t,r,i,n,s,a,c]=e;return[yN(t,n,i,r,s,a,c),qr.utcInstance]}function gle(e){const[,t,r,i,n,s,a,c]=e;return[yN(t,c,r,i,n,s,a),qr.utcInstance]}const vle=vy(Kae,mN),ble=vy(ele,mN),wle=vy(tle,mN),_le=vy(Rq),Iq=by(ole,_y,P1,L1),Sle=by(rle,_y,P1,L1),Tle=by(ile,_y,P1,L1),Ele=by(_y,P1,L1);function xle(e){return wy(e,[vle,Iq],[ble,Sle],[wle,Tle],[_le,Ele])}function $le(e){return wy(ple(e),[dle,hle])}function Mle(e){return wy(e,[fle,l6],[mle,l6],[yle,gle])}function Ale(e){return wy(e,[lle,ule])}const Ole=by(_y);function Rle(e){return wy(e,[ale,Ole])}const Cle=vy(nle,sle),Ile=vy(Cq),Nle=by(_y,P1,L1);function Ple(e){return wy(e,[Cle,Iq],[Ile,Nle])}const u6="Invalid Duration",Nq={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Lle={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...Nq},As=146097/400,jp=146097/4800,Dle={years:{quarters:4,months:12,weeks:As/7,days:As,hours:As*24,minutes:As*24*60,seconds:As*24*60*60,milliseconds:As*24*60*60*1e3},quarters:{months:3,weeks:As/28,days:As/4,hours:As*24/4,minutes:As*24*60/4,seconds:As*24*60*60/4,milliseconds:As*24*60*60*1e3/4},months:{weeks:jp/7,days:jp,hours:jp*24,minutes:jp*24*60,seconds:jp*24*60*60,milliseconds:jp*24*60*60*1e3},...Nq},sh=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],kle=sh.slice(0).reverse();function Lu(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new bt(i)}function Pq(e,t){let r=t.milliseconds??0;for(const i of kle.slice(1))t[i]&&(r+=t[i]*e[i].milliseconds);return r}function c6(e,t){const r=Pq(e,t)<0?-1:1;sh.reduceRight((i,n)=>{if(Je(t[n]))return i;if(i){const s=t[i]*r,a=e[n][i],c=Math.floor(s/a);t[n]+=c*r,t[i]-=c*a*r}return n},null),sh.reduce((i,n)=>{if(Je(t[n]))return i;if(i){const s=t[i]%1;t[i]-=s,t[n]+=s*e[i][n]}return n},null)}function Fle(e){const t={};for(const[r,i]of Object.entries(e))i!==0&&(t[r]=i);return t}class bt{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let i=r?Dle:Lle;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||At.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,r){return bt.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new Ui(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new bt({values:a2(t,bt.normalizeUnit),loc:At.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(Ec(t))return bt.fromMillis(t);if(bt.isDuration(t))return t;if(typeof t=="object")return bt.fromObject(t);throw new Ui(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=Ale(t);return i?bt.fromObject(i,r):bt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=Rle(t);return i?bt.fromObject(i,r):bt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new Ui("need to specify a reason the Duration is invalid");const i=t instanceof No?t:new No(t,r);if(_r.throwOnInvalid)throw new uae(i);return new bt({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new VG(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?qi.create(this.loc,i).formatDurationFromString(this,t):u6}toHuman(t={}){if(!this.isValid)return u6;const r=sh.map(i=>{const n=this.values[i];return Je(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(n)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=pN(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},_e.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Pq(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=bt.fromDurationLike(t),i={};for(const n of sh)(Zm(r.values,n)||Zm(this.values,n))&&(i[n]=r.get(n)+this.get(n));return Lu(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=bt.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=bq(t(this.values[i],i));return Lu(this,{values:r},!0)}get(t){return this[bt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...a2(t,bt.normalizeUnit)};return Lu(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i,matrix:n}={}){const a={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:n,conversionAccuracy:i};return Lu(this,a)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return c6(this.matrix,t),Lu(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=Fle(this.normalize().shiftToAll().toObject());return Lu(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(a=>bt.normalizeUnit(a));const r={},i={},n=this.toObject();let s;for(const a of sh)if(t.indexOf(a)>=0){s=a;let c=0;for(const f in i)c+=this.matrix[f][a]*i[f],i[f]=0;Ec(n[a])&&(c+=n[a]);const d=Math.trunc(c);r[a]=d,i[a]=(c*1e3-d*1e3)/1e3}else Ec(n[a])&&(i[a]=n[a]);for(const a in i)i[a]!==0&&(r[s]+=a===s?i[a]:i[a]/this.matrix[s][a]);return c6(this.matrix,r),Lu(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return Lu(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(const i of sh)if(!r(this.values[i],t.values[i]))return!1;return!0}}const zp="Invalid Interval";function Ule(e,t){return!e||!e.isValid?vr.invalid("missing or invalid start"):!t||!t.isValid?vr.invalid("missing or invalid end"):t<e?vr.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class vr{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new Ui("need to specify a reason the Interval is invalid");const i=t instanceof No?t:new No(t,r);if(_r.throwOnInvalid)throw new lae(i);return new vr({invalid:i})}static fromDateTimes(t,r){const i=qg(t),n=qg(r),s=Ule(i,n);return s??new vr({start:i,end:n})}static after(t,r){const i=bt.fromDurationLike(r),n=qg(t);return vr.fromDateTimes(n,n.plus(i))}static before(t,r){const i=bt.fromDurationLike(r),n=qg(t);return vr.fromDateTimes(n.minus(i),n)}static fromISO(t,r){const[i,n]=(t||"").split("/",2);if(i&&n){let s,a;try{s=_e.fromISO(i,r),a=s.isValid}catch{a=!1}let c,d;try{c=_e.fromISO(n,r),d=c.isValid}catch{d=!1}if(a&&d)return vr.fromDateTimes(s,c);if(a){const f=bt.fromISO(n,r);if(f.isValid)return vr.after(s,f)}else if(d){const f=bt.fromISO(i,r);if(f.isValid)return vr.before(c,f)}}return vr.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const i=this.start.startOf(t,r);let n;return r?.useLocaleWeeks?n=this.end.reconfigure({locale:i.locale}):n=this.end,n=n.startOf(t,r),Math.floor(n.diff(i,t).get(t))+(n.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?vr.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(qg).filter(a=>this.contains(a)).sort((a,c)=>a.toMillis()-c.toMillis()),i=[];let{s:n}=this,s=0;for(;n<this.e;){const a=r[s]||this.e,c=+a>+this.e?this.e:a;i.push(vr.fromDateTimes(n,c)),n=c,s+=1}return i}splitBy(t){const r=bt.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,n=1,s;const a=[];for(;i<this.e;){const c=this.start.plus(r.mapUnits(d=>d*n));s=+c>+this.e?this.e:c,a.push(vr.fromDateTimes(i,s)),i=s,n+=1}return a}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:vr.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return vr.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((n,s)=>n.s-s.s).reduce(([n,s],a)=>s?s.overlaps(a)||s.abutsStart(a)?[n,s.union(a)]:[n.concat([s]),a]:[n,a],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const n=[],s=t.map(d=>[{time:d.s,type:"s"},{time:d.e,type:"e"}]),a=Array.prototype.concat(...s),c=a.sort((d,f)=>d.time-f.time);for(const d of c)i+=d.type==="s"?1:-1,i===1?r=d.time:(r&&+r!=+d.time&&n.push(vr.fromDateTimes(r,d.time)),r=null);return vr.merge(n)}difference(...t){return vr.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:zp}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=n2,r={}){return this.isValid?qi.create(this.s.loc.clone(r),t).formatInterval(this):zp}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:zp}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:zp}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:zp}toFormat(t,{separator:r=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:zp}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):bt.invalid(this.invalidReason)}mapEndpoints(t){return vr.fromDateTimes(t(this.s),t(this.e))}}class Sw{static hasDST(t=_r.defaultZone){const r=_e.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return zn.isValidZone(t)}static normalizeZone(t){return cc(t,_r.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||At.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||At.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||At.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||At.create(r,i,s)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||At.create(r,i,s)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||At.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||At.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return At.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return At.create(r,null,"gregory").eras(t)}static features(){return{relative:yq(),localeWeek:gq()}}}function d6(e,t){const r=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(bt.fromMillis(i).as("days"))}function jle(e,t,r){const i=[["years",(d,f)=>f.year-d.year],["quarters",(d,f)=>f.quarter-d.quarter+(f.year-d.year)*4],["months",(d,f)=>f.month-d.month+(f.year-d.year)*12],["weeks",(d,f)=>{const g=d6(d,f);return(g-g%7)/7}],["days",d6]],n={},s=e;let a,c;for(const[d,f]of i)r.indexOf(d)>=0&&(a=d,n[d]=f(e,t),c=s.plus(n),c>t?(n[d]--,e=s.plus(n),e>t&&(c=e,n[d]--,e=s.plus(n))):e=c);return[e,n,c,a]}function zle(e,t,r,i){let[n,s,a,c]=jle(e,t,r);const d=t-n,f=r.filter(v=>["hours","minutes","seconds","milliseconds"].indexOf(v)>=0);f.length===0&&(a<t&&(a=n.plus({[c]:1})),a!==n&&(s[c]=(s[c]||0)+d/(a-n)));const g=bt.fromObject(s,i);return f.length>0?bt.fromMillis(d,i).shiftTo(...f).plus(g):g}const Vle="missing Intl.DateTimeFormat.formatToParts support";function Et(e,t=r=>r){return{regex:e,deser:([r])=>t(Cae(r))}}const Gle=" ",Lq=`[ ${Gle}]`,Dq=new RegExp(Lq,"g");function qle(e){return e.replace(/\./g,"\\.?").replace(Dq,Lq)}function h6(e){return e.replace(/\./g,"").replace(Dq," ").toLowerCase()}function co(e,t){return e===null?null:{regex:RegExp(e.map(qle).join("|")),deser:([r])=>e.findIndex(i=>h6(r)===h6(i))+t}}function p6(e,t){return{regex:e,deser:([,r,i])=>MT(r,i),groups:t}}function Tw(e){return{regex:e,deser:([t])=>t}}function Ble(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Hle(e,t){const r=uo(t),i=uo(t,"{2}"),n=uo(t,"{3}"),s=uo(t,"{4}"),a=uo(t,"{6}"),c=uo(t,"{1,2}"),d=uo(t,"{1,3}"),f=uo(t,"{1,6}"),g=uo(t,"{1,9}"),v=uo(t,"{2,4}"),w=uo(t,"{4,6}"),S=M=>({regex:RegExp(Ble(M.val)),deser:([R])=>R,literal:!0}),E=(M=>{if(e.literal)return S(M);switch(M.val){case"G":return co(t.eras("short"),0);case"GG":return co(t.eras("long"),0);case"y":return Et(f);case"yy":return Et(v,_A);case"yyyy":return Et(s);case"yyyyy":return Et(w);case"yyyyyy":return Et(a);case"M":return Et(c);case"MM":return Et(i);case"MMM":return co(t.months("short",!0),1);case"MMMM":return co(t.months("long",!0),1);case"L":return Et(c);case"LL":return Et(i);case"LLL":return co(t.months("short",!1),1);case"LLLL":return co(t.months("long",!1),1);case"d":return Et(c);case"dd":return Et(i);case"o":return Et(d);case"ooo":return Et(n);case"HH":return Et(i);case"H":return Et(c);case"hh":return Et(i);case"h":return Et(c);case"mm":return Et(i);case"m":return Et(c);case"q":return Et(c);case"qq":return Et(i);case"s":return Et(c);case"ss":return Et(i);case"S":return Et(d);case"SSS":return Et(n);case"u":return Tw(g);case"uu":return Tw(c);case"uuu":return Et(r);case"a":return co(t.meridiems(),0);case"kkkk":return Et(s);case"kk":return Et(v,_A);case"W":return Et(c);case"WW":return Et(i);case"E":case"c":return Et(r);case"EEE":return co(t.weekdays("short",!1),1);case"EEEE":return co(t.weekdays("long",!1),1);case"ccc":return co(t.weekdays("short",!0),1);case"cccc":return co(t.weekdays("long",!0),1);case"Z":case"ZZ":return p6(new RegExp(`([+-]${c.source})(?::(${i.source}))?`),2);case"ZZZ":return p6(new RegExp(`([+-]${c.source})(${i.source})?`),2);case"z":return Tw(/[a-z_+-/]{1,256}?/i);case" ":return Tw(/[^\S\n\r]/);default:return S(M)}})(e)||{invalidReason:Vle};return E.token=e,E}const Wle={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Zle(e,t,r){const{type:i,value:n}=e;if(i==="literal"){const d=/^\s+$/.test(n);return{literal:!d,val:d?" ":n}}const s=t[i];let a=i;i==="hour"&&(t.hour12!=null?a=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?a="hour12":a="hour24":a=r.hour12?"hour12":"hour24");let c=Wle[a];if(typeof c=="object"&&(c=c[s]),c)return{literal:!1,val:c}}function Yle(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function Jle(e,t,r){const i=e.match(t);if(i){const n={};let s=1;for(const a in r)if(Zm(r,a)){const c=r[a],d=c.groups?c.groups+1:1;!c.literal&&c.token&&(n[c.token.val[0]]=c.deser(i.slice(s,s+d))),s+=d}return[i,n]}else return[i,{}]}function Xle(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return Je(e.z)||(r=zn.create(e.z)),Je(e.Z)||(r||(r=new qr(e.Z)),i=e.Z),Je(e.q)||(e.M=(e.q-1)*3+1),Je(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Je(e.u)||(e.S=hN(e.u)),[Object.keys(e).reduce((s,a)=>{const c=t(a);return c&&(s[c]=e[a]),s},{}),r,i]}let sM=null;function Qle(){return sM||(sM=_e.fromMillis(1555555555555)),sM}function Kle(e,t){if(e.literal)return e;const r=qi.macroTokenToFormatOpts(e.val),i=jq(r,t);return i==null||i.includes(void 0)?e:i}function kq(e,t){return Array.prototype.concat(...e.map(r=>Kle(r,t)))}class Fq{constructor(t,r){if(this.locale=t,this.format=r,this.tokens=kq(qi.parseFormat(r),t),this.units=this.tokens.map(i=>Hle(i,t)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,n]=Yle(this.units);this.regex=RegExp(i,"i"),this.handlers=n}}explainFromTokens(t){if(this.isValid){const[r,i]=Jle(t,this.regex,this.handlers),[n,s,a]=i?Xle(i):[null,null,void 0];if(Zm(i,"a")&&Zm(i,"H"))throw new Ff("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:i,result:n,zone:s,specificOffset:a}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Uq(e,t,r){return new Fq(e,r).explainFromTokens(t)}function eue(e,t,r){const{result:i,zone:n,specificOffset:s,invalidReason:a}=Uq(e,t,r);return[i,n,s,a]}function jq(e,t){if(!e)return null;const i=qi.create(t,e).dtFormatter(Qle()),n=i.formatToParts(),s=i.resolvedOptions();return n.map(a=>Zle(a,e,s))}const oM="Invalid DateTime",f6=864e13;function v0(e){return new No("unsupported zone",`the zone "${e.name}" is not supported`)}function aM(e){return e.weekData===null&&(e.weekData=s2(e.c)),e.weekData}function lM(e){return e.localWeekData===null&&(e.localWeekData=s2(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function md(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new _e({...r,...t,old:r})}function zq(e,t,r){let i=e-t*60*1e3;const n=r.offset(i);if(t===n)return[i,t];i-=(n-t)*60*1e3;const s=r.offset(i);return n===s?[i,n]:[e-Math.min(n,s)*60*1e3,Math.max(n,s)]}function Ew(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function E_(e,t,r){return zq($T(e),t,r)}function m6(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:i,month:n,day:Math.min(e.c.day,o2(i,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},a=bt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),c=$T(s);let[d,f]=zq(c,r,e.zone);return a!==0&&(d+=a,f=e.zone.offset(d)),{ts:d,o:f}}function Vp(e,t,r,i,n,s){const{setZone:a,zone:c}=r;if(e&&Object.keys(e).length!==0||t){const d=t||c,f=_e.fromObject(e,{...r,zone:d,specificOffset:s});return a?f:f.setZone(c)}else return _e.invalid(new No("unparsable",`the input "${n}" can't be parsed as ${i}`))}function xw(e,t,r=!0){return e.isValid?qi.create(At.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function uM(e,t){const r=e.c.year>9999||e.c.year<0;let i="";return r&&e.c.year>=0&&(i+="+"),i+=Vr(e.c.year,r?6:4),t?(i+="-",i+=Vr(e.c.month),i+="-",i+=Vr(e.c.day)):(i+=Vr(e.c.month),i+=Vr(e.c.day)),i}function y6(e,t,r,i,n,s){let a=Vr(e.c.hour);return t?(a+=":",a+=Vr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(a+=":")):a+=Vr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(a+=Vr(e.c.second),(e.c.millisecond!==0||!i)&&(a+=".",a+=Vr(e.c.millisecond,3))),n&&(e.isOffsetFixed&&e.offset===0&&!s?a+="Z":e.o<0?(a+="-",a+=Vr(Math.trunc(-e.o/60)),a+=":",a+=Vr(Math.trunc(-e.o%60))):(a+="+",a+=Vr(Math.trunc(e.o/60)),a+=":",a+=Vr(Math.trunc(e.o%60)))),s&&(a+="["+e.zone.ianaName+"]"),a}const Vq={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},tue={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},rue={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Gq=["year","month","day","hour","minute","second","millisecond"],iue=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],nue=["year","ordinal","hour","minute","second","millisecond"];function sue(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new VG(e);return t}function g6(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return sue(e)}}function oue(e){if(b0===void 0&&(b0=_r.now()),e.type!=="iana")return e.offset(b0);const t=e.name;let r=SA.get(t);return r===void 0&&(r=e.offset(b0),SA.set(t,r)),r}function v6(e,t){const r=cc(t.zone,_r.defaultZone);if(!r.isValid)return _e.invalid(v0(r));const i=At.fromObject(t);let n,s;if(Je(e.year))n=_r.now();else{for(const d of Gq)Je(e[d])&&(e[d]=Vq[d]);const a=fq(e)||mq(e);if(a)return _e.invalid(a);const c=oue(r);[n,s]=E_(e,c,r)}return new _e({ts:n,zone:r,loc:i,o:s})}function b6(e,t,r){const i=Je(r.round)?!0:r.round,n=(a,c)=>(a=pN(a,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(a,c)),s=a=>r.calendary?t.hasSame(e,a)?0:t.startOf(a).diff(e.startOf(a),a).get(a):t.diff(e,a).get(a);if(r.unit)return n(s(r.unit),r.unit);for(const a of r.units){const c=s(a);if(Math.abs(c)>=1)return n(c,a)}return n(e>t?-0:0,r.units[r.units.length-1])}function w6(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}let b0;const SA=new Map;class _e{constructor(t){const r=t.zone||_r.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new No("invalid input"):null)||(r.isValid?null:v0(r));this.ts=Je(t.ts)?_r.now():t.ts;let n=null,s=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[n,s]=[t.old.c,t.old.o];else{const c=Ec(t.o)&&!t.old?t.o:r.offset(this.ts);n=Ew(this.ts,c),i=Number.isNaN(n.year)?new No("invalid input"):null,n=i?null:n,s=i?null:c}this._zone=r,this.loc=t.loc||At.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new _e({})}static local(){const[t,r]=w6(arguments),[i,n,s,a,c,d,f]=r;return v6({year:i,month:n,day:s,hour:a,minute:c,second:d,millisecond:f},t)}static utc(){const[t,r]=w6(arguments),[i,n,s,a,c,d,f]=r;return t.zone=qr.utcInstance,v6({year:i,month:n,day:s,hour:a,minute:c,second:d,millisecond:f},t)}static fromJSDate(t,r={}){const i=Dae(t)?t.valueOf():NaN;if(Number.isNaN(i))return _e.invalid("invalid input");const n=cc(r.zone,_r.defaultZone);return n.isValid?new _e({ts:i,zone:n,loc:At.fromObject(r)}):_e.invalid(v0(n))}static fromMillis(t,r={}){if(Ec(t))return t<-f6||t>f6?_e.invalid("Timestamp out of range"):new _e({ts:t,zone:cc(r.zone,_r.defaultZone),loc:At.fromObject(r)});throw new Ui(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(Ec(t))return new _e({ts:t*1e3,zone:cc(r.zone,_r.defaultZone),loc:At.fromObject(r)});throw new Ui("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=cc(r.zone,_r.defaultZone);if(!i.isValid)return _e.invalid(v0(i));const n=At.fromObject(r),s=a2(t,g6),{minDaysInFirstWeek:a,startOfWeek:c}=n6(s,n),d=_r.now(),f=Je(r.specificOffset)?i.offset(d):r.specificOffset,g=!Je(s.ordinal),v=!Je(s.year),w=!Je(s.month)||!Je(s.day),S=v||w,T=s.weekYear||s.weekNumber;if((S||g)&&T)throw new Ff("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(w&&g)throw new Ff("Can't mix ordinal dates with month/day");const E=T||s.weekday&&!S;let M,R,I=Ew(d,f);E?(M=iue,R=tue,I=s2(I,a,c)):g?(M=nue,R=rue,I=nM(I)):(M=Gq,R=Vq);let k=!1;for(const me of M){const Oe=s[me];Je(Oe)?k?s[me]=R[me]:s[me]=I[me]:k=!0}const j=E?Nae(s,a,c):g?Pae(s):fq(s),P=j||mq(s);if(P)return _e.invalid(P);const X=E?r6(s,a,c):g?i6(s):s,[ae,fe]=E_(X,f,i),he=new _e({ts:ae,zone:i,o:fe,loc:n});return s.weekday&&S&&t.weekday!==he.weekday?_e.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${he.toISO()}`):he.isValid?he:_e.invalid(he.invalid)}static fromISO(t,r={}){const[i,n]=xle(t);return Vp(i,n,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,n]=$le(t);return Vp(i,n,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,n]=Mle(t);return Vp(i,n,r,"HTTP",r)}static fromFormat(t,r,i={}){if(Je(t)||Je(r))throw new Ui("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=i,a=At.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[c,d,f,g]=eue(a,t,r);return g?_e.invalid(g):Vp(c,d,i,`format ${r}`,t,f)}static fromString(t,r,i={}){return _e.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,n]=Ple(t);return Vp(i,n,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new Ui("need to specify a reason the DateTime is invalid");const i=t instanceof No?t:new No(t,r);if(_r.throwOnInvalid)throw new aae(i);return new _e({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const i=jq(t,At.fromObject(r));return i?i.map(n=>n?n.val:null).join(""):null}static expandFormat(t,r={}){return kq(qi.parseFormat(t),At.fromObject(r)).map(n=>n.val).join("")}static resetCache(){b0=void 0,SA.clear()}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?aM(this).weekYear:NaN}get weekNumber(){return this.isValid?aM(this).weekNumber:NaN}get weekday(){return this.isValid?aM(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?lM(this).weekday:NaN}get localWeekNumber(){return this.isValid?lM(this).weekNumber:NaN}get localWeekYear(){return this.isValid?lM(this).weekYear:NaN}get ordinal(){return this.isValid?nM(this.c).ordinal:NaN}get monthShort(){return this.isValid?Sw.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Sw.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Sw.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Sw.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,i=$T(this.c),n=this.zone.offset(i-t),s=this.zone.offset(i+t),a=this.zone.offset(i-n*r),c=this.zone.offset(i-s*r);if(a===c)return[this];const d=i-a*r,f=i-c*r,g=Ew(d,a),v=Ew(f,c);return g.hour===v.hour&&g.minute===v.minute&&g.second===v.second&&g.millisecond===v.millisecond?[md(this,{ts:d}),md(this,{ts:f})]:[this]}get isInLeapYear(){return N1(this.year)}get daysInMonth(){return o2(this.year,this.month)}get daysInYear(){return this.isValid?em(this.year):NaN}get weeksInWeekYear(){return this.isValid?Qv(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Qv(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:n}=qi.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:n}}toUTC(t=0,r={}){return this.setZone(qr.instance(t),r)}toLocal(){return this.setZone(_r.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=cc(t,_r.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(r||i){const s=t.offset(this.ts),a=this.toObject();[n]=E_(a,s,t)}return md(this,{ts:n,zone:t})}else return _e.invalid(v0(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const n=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return md(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=a2(t,g6),{minDaysInFirstWeek:i,startOfWeek:n}=n6(r,this.loc),s=!Je(r.weekYear)||!Je(r.weekNumber)||!Je(r.weekday),a=!Je(r.ordinal),c=!Je(r.year),d=!Je(r.month)||!Je(r.day),f=c||d,g=r.weekYear||r.weekNumber;if((f||a)&&g)throw new Ff("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&a)throw new Ff("Can't mix ordinal dates with month/day");let v;s?v=r6({...s2(this.c,i,n),...r},i,n):Je(r.ordinal)?(v={...this.toObject(),...r},Je(r.day)&&(v.day=Math.min(o2(v.year,v.month),v.day))):v=i6({...nM(this.c),...r});const[w,S]=E_(v,this.o,this.zone);return md(this,{ts:w,o:S})}plus(t){if(!this.isValid)return this;const r=bt.fromDurationLike(t);return md(this,m6(this,r))}minus(t){if(!this.isValid)return this;const r=bt.fromDurationLike(t).negate();return md(this,m6(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const i={},n=bt.normalizeUnit(t);switch(n){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(n==="weeks")if(r){const s=this.loc.getStartOfWeek(),{weekday:a}=this;a<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?qi.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):oM}toLocaleString(t=n2,r={}){return this.isValid?qi.create(this.loc.clone(r),t).formatDateTime(this):oM}toLocaleParts(t={}){return this.isValid?qi.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const a=t==="extended";let c=uM(this,a);return c+="T",c+=y6(this,a,r,i,n,s),c}toISODate({format:t="extended"}={}){return this.isValid?uM(this,t==="extended"):null}toISOWeekDate(){return xw(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:s=!1,format:a="extended"}={}){return this.isValid?(n?"T":"")+y6(this,a==="extended",r,t,i,s):null}toRFC2822(){return xw(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return xw(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?uM(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(r||t)&&(i&&(n+=" "),r?n+="z":t&&(n+="ZZ")),xw(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():oM}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return bt.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=kae(r).map(bt.normalizeUnit),a=t.valueOf()>this.valueOf(),c=a?this:t,d=a?t:this,f=zle(c,d,s,n);return a?f.negate():f}diffNow(t="milliseconds",r={}){return this.diff(_e.now(),t,r)}until(t){return this.isValid?vr.fromDateTimes(this,t):this}hasSame(t,r,i){if(!this.isValid)return!1;const n=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(r,i)<=n&&n<=s.endOf(r,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||_e.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(n=t.unit,s=void 0),b6(r,this.plus(i),{...t,numeric:"always",units:n,unit:s})}toRelativeCalendar(t={}){return this.isValid?b6(t.base||_e.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(_e.isDateTime))throw new Ui("min requires all arguments be DateTimes");return s6(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(_e.isDateTime))throw new Ui("max requires all arguments be DateTimes");return s6(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:n=null,numberingSystem:s=null}=i,a=At.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return Uq(a,t,r)}static fromStringExplain(t,r,i={}){return _e.fromFormatExplain(t,r,i)}static buildFormatParser(t,r={}){const{locale:i=null,numberingSystem:n=null}=r,s=At.fromOpts({locale:i,numberingSystem:n,defaultToEN:!0});return new Fq(s,t)}static fromFormatParser(t,r,i={}){if(Je(t)||Je(r))throw new Ui("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=i,a=At.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!a.equals(r.locale))throw new Ui(`fromFormatParser called with a locale of ${a}, but the format parser was created for ${r.locale}`);const{result:c,zone:d,specificOffset:f,invalidReason:g}=r.explainFromTokens(t);return g?_e.invalid(g):Vp(c,d,i,`format ${r.format}`,t,f)}static get DATE_SHORT(){return n2}static get DATE_MED(){return GG}static get DATE_MED_WITH_WEEKDAY(){return cae}static get DATE_FULL(){return qG}static get DATE_HUGE(){return BG}static get TIME_SIMPLE(){return HG}static get TIME_WITH_SECONDS(){return WG}static get TIME_WITH_SHORT_OFFSET(){return ZG}static get TIME_WITH_LONG_OFFSET(){return YG}static get TIME_24_SIMPLE(){return JG}static get TIME_24_WITH_SECONDS(){return XG}static get TIME_24_WITH_SHORT_OFFSET(){return QG}static get TIME_24_WITH_LONG_OFFSET(){return KG}static get DATETIME_SHORT(){return eq}static get DATETIME_SHORT_WITH_SECONDS(){return tq}static get DATETIME_MED(){return rq}static get DATETIME_MED_WITH_SECONDS(){return iq}static get DATETIME_MED_WITH_WEEKDAY(){return dae}static get DATETIME_FULL(){return nq}static get DATETIME_FULL_WITH_SECONDS(){return sq}static get DATETIME_HUGE(){return oq}static get DATETIME_HUGE_WITH_SECONDS(){return aq}}function qg(e){if(_e.isDateTime(e))return e;if(e&&e.valueOf&&Ec(e.valueOf()))return _e.fromJSDate(e);if(e&&typeof e=="object")return _e.fromObject(e);throw new Ui(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const aue="shortOffset";function lue(e){return"timeZoneIANA"in e}function uue(e){return e.startsWith("UTC")}function l2(e,t=!1){return{json:{read:{source:e,reader:(r,i)=>i[e]?x_(i[e]):null},write:!!t&&{allowNull:!0,writer(r,i){i[e]=r?cue(r):null}}}}}function x_(e,t=zo){return e?lue(e)?e.timeZoneIANA:due(e,t):t}function cue(e){return{timeZoneIANA:e}}function due(e,t=zo){if(!e||!B5.has(e.timeZone))return t;const r=B5.get(e.timeZone);return uue(e.timeZone)||e.respectsDaylightSaving?r:hue(r)}function hue(e){const t=_e.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${qr.instance(-r).formatOffset(0,"narrow")}`}function bCe(e,t,r,i,n){if(t&&n==="date")return{timeZone:Nc,timeZoneName:void 0};const s=i.timeStyle||i.hour,a=r===Ic;return{timeZone:a?n==="timestamp-offset"?void 0:e??Nc:r,timeZoneName:a&&s?aue:void 0}}function pue(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map((i=>i.toLowerCase())));return e===zo||e===Ic||t.has(e.toLowerCase())||r.has(e.toLowerCase())}const fue={year:void 0,month:void 0,day:void 0,weekday:void 0},mue={hour:void 0,minute:void 0,second:void 0},qq={timeZone:Nc},Xo={year:"numeric",month:"numeric",day:"numeric"},Bg={year:"numeric",month:"long",day:"numeric"},Hg={year:"numeric",month:"short",day:"numeric"},Wg={year:"numeric",month:"long",weekday:"long",day:"numeric"},tc={hour:"numeric",minute:"numeric"},Md={...tc,second:"numeric"},Bq={hourCycle:"h23"},Zg={...tc,...Bq},Yg={...Md,...Bq},Hq={"short-date":Xo,"short-date-short-time":{...Xo,...tc},"short-date-short-time-24":{...Xo,...Zg},"short-date-long-time":{...Xo,...Md},"short-date-long-time-24":{...Xo,...Yg},"short-date-le":Xo,"short-date-le-short-time":{...Xo,...tc},"short-date-le-short-time-24":{...Xo,...Zg},"short-date-le-long-time":{...Xo,...Md},"short-date-le-long-time-24":{...Xo,...Yg},"long-month-day-year":Bg,"long-month-day-year-short-time":{...Bg,...tc},"long-month-day-year-short-time-24":{...Bg,...Zg},"long-month-day-year-long-time":{...Bg,...Md},"long-month-day-year-long-time-24":{...Bg,...Yg},"day-short-month-year":Hg,"day-short-month-year-short-time":{...Hg,...tc},"day-short-month-year-short-time-24":{...Hg,...Zg},"day-short-month-year-long-time":{...Hg,...Md},"day-short-month-year-long-time-24":{...Hg,...Yg},"long-date":Wg,"long-date-short-time":{...Wg,...tc},"long-date-short-time-24":{...Wg,...Zg},"long-date-long-time":{...Wg,...Md},"long-date-long-time-24":{...Wg,...Yg},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":tc,"long-time":Md},yue=wi()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),Wq={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},gue=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2)),vue=gue.find((({type:e})=>e==="month"))?.value.toLowerCase();function Zq(){const e=Un(),t=aN(e)?.language;return(t&&Wq[t])??e}vue!=="mart"&&(Wq.bs="sr-Latn-CS");let TA=new WeakMap;const OT=Hq["short-date-short-time"];function bue(e){let t=TA.get(e);if(!t){const r=Zq(),i=vN(e.timeZone??zo),n={...e,timeZone:i};t=new Intl.DateTimeFormat(r,n),TA.set(e,t)}return t}function wCe(e){return Hq[e]}function gN(e,t=OT){return bue(t).format(e)}function _Ce(e,t=OT){return gN(new Date(e),{...t,...qq,...mue})}function SCe(e,t=OT){return gN(new Date(`1970-01-01T${e}Z`),{...t,...qq,...fue})}function TCe(e,t=OT){if(t.timeZone)return gN(new Date(e),t);const r=_e.fromISO(e,{setZone:!0}),i=r.offset===0?Nc:t.timeZone,n={...t,timeZone:i};return r.toLocaleString(n,{locale:Zq()})}function vN(e){switch(e){case zo:return oae;case Ic:return Nc;default:return e}}lN((()=>{TA=new WeakMap}));const wue={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let $_=new WeakMap,Yq={};function EA(e){const t=e||Yq;if(!$_.has(t)){const r=Un(),i=aN(r)?.language,n=i&&wue[i]||r;$_.set(t,new Intl.NumberFormat(n,e))}return $_.get(t)}function ECe(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function xCe(e,t){return Object.is(e,-0)&&(e=0),EA(t).format(e)}function $Ce(e,t=Un()){if(!e)return null;let r=_6.get(t);if(!r){const i=EA().formatToParts(12345.6),n=[...EA({useGrouping:!1}).format(9876543210)].reverse(),s=new Map(n.map(((v,w)=>[v,w]))),a=new RegExp(`[${i.find((v=>v.type==="group"))?.value}]`,"g"),c=new RegExp(`[${i.find((v=>v.type==="decimal"))?.value}]`),d=new RegExp(`[${n.join("")}]`,"g"),f=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,g=/[-\u2212\u2013\u2014\u2015]/g;r=v=>{if((v=v.trim().replaceAll(a,"").replace(c,".").replace(d,(S=>String(s.get(S)))).replaceAll(f,"").replaceAll(g,"-"))==="")return null;const w=Number(v);return isNaN(w)?null:w},_6.set(t,r)}return r(e)}lN((()=>{$_=new WeakMap,Yq={}}));const _6=new Map;async function _ue(e,t,r,i){const n=t.exec(r);if(!n)throw new z("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const s=n[1]?`${n[1]}/`:"",a=n[2],c=jG(i),d=`${s}${a}.json`,f=c?`${s}${a}_${c}.json`:d;let g;try{g=await S6(e(f))}catch(v){if(f===d)throw new z("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:v});try{g=await S6(e(d))}catch(w){throw new z("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:w})}}return g}async function S6(e){if(T6.fetchBundleAsset!=null)return T6.fetchBundleAsset(e);const t=await Ft(e,{responseType:"text"});return JSON.parse(t.data)}let Sue=class{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let n;n=typeof i=="string"?s=>new URL(s,new URL(i,window.location.href)).href:i instanceof URL?s=>new URL(s,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,r){return _ue(this.getAssetUrl,this.matcher,t,r)}};function Tue(e){return new Sue(e)}const T6={};rae(Tue({pattern:"esri/",location:gr}));let al=class extends Ae{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const t=this.language;let r=t==="local"||t==="global"?t:jG(t??Un())??"global";return r=r==="no"?"nb":r,r}};u([p()],al.prototype,"apiKey",void 0),u([p()],al.prototype,"id",void 0),u([p()],al.prototype,"language",void 0),u([p()],al.prototype,"places",void 0),u([p()],al.prototype,"serviceUrl",void 0),u([p()],al.prototype,"worldview",void 0),al=u([O("esri.support.BasemapStyle")],al);const Eue=al;function je(e,t,r={}){return bN(e,t,r,Jq)}function Zs(e,t,r={}){return bN(e,t,r,Xq)}function bN(e,t,r={},i){let n=null;const s=r.once?(a,c)=>{i(a)&&(ir(n),t(a,c))}:(a,c)=>{i(a)&&t(a,c)};if(n=zne(e,s,r.sync,r.equals),r.initial){const a=e();s(a,a)}return n}function Uh(e,t,r,i={}){let n=null,s=null,a=null;function c(){n&&s&&(s.remove(),i.onListenerRemove?.(n),n=null,s=null)}function d(g){i.once&&i.once&&ir(a),r(g)}const f=je(e,((g,v)=>{c(),dT(g)&&(n=g,s=py(g,t,d),i.onListenerAdd?.(g))}),{sync:i.sync,initial:!0});return a=ht((()=>{f.remove(),c()})),a}function wN(e,t){return xue(e,Xq,t)}function xue(e,t,r){if(Ws(r))return Promise.reject(Zt());const i=e();if(t?.(i))return Promise.resolve(i);let n=null;function s(){n=ir(n)}return new Promise(((a,c)=>{n=Zh([jo(r,(()=>{s(),c(Zt())})),bN(e,(d=>{s(),a(d)}),{sync:!1,once:!0},t??Jq)])}))}function Jq(e){return!0}function Xq(e){return!!e}function OCe(e,t,r={}){let i=!1;const n=je(e,((s,a)=>{i||t(s,a)}),r);return{remove(){n.remove()},pause(){i=!0},resume(){i=!1}}}const Oa={sync:!0},Hi={initial:!0},an={sync:!0,initial:!0},$w=new WeakMap;function Qq(e){return!e.destroyed&&($w.has(e)||e.addHandles([je((()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||Qq(t))}),(t=>$w.set(e,t)),an),ht((()=>$w.delete(e)))]),$w.get(e))}function RCe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}function CCe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="graphics"}function $ue(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="map-image"}function Mue(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="knowledge-graph"&&"layers"in e}function ICe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="knowledge-graph-sublayer"}function E6(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function nf(e){return e?.type==="subtype-sublayer"}const NCe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function xA(e){const t=e?.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function PCe(e){return e==="integrated-mesh"||e==="integrated-mesh-3dtiles"}function RT(e){return e?.type==="feature"&&!e.url&&e.source?.type==="memory"}function LCe(e){const t=e?.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&e?.source?.type==="feature-layer"}async function _N(e,t){const r=nt?.findServerInfo(e);if(r?.currentVersion!=null)return r.owningSystemUrl||null;const i=e.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const n=`${e.slice(0,i)}/rest/info`,s=t!=null?t.signal:null,{data:a}=await Ft(n,{query:{f:"json"},responseType:"json",signal:s});return a?.owningSystemUrl||null}function Kq(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Aue(e){return Kq(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function Oue(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function Rue(e){return!!Oue(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}function Cue(e,t){return null}function DCe(e){return null}function $A(e){return!e||e.type==="Feature Service"&&!e.sourceUrl}function kCe(e,t){!t||!$A(e)||Cue(e.url)}const Iue=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),eB=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),Nue=new Set([...eB,"link-chart"]);function Pue(e){switch(e.layerContainerType){case"basemap":return Iue;case"operational-layers":return e.origin==="link-chart"?Nue:eB;default:return null}}function Lue(e,t){if(t.restrictedWebMapWriting){const r=Pue(t);return r==null||r.has(e.type)&&!RT(e)}return!0}function Due(e,t){if(t)if(RT(e)){const r=uT("featureCollection.layers",t),i=r?.[0]?.layerDefinition;i&&x6(e,i)}else e.type!=="group"&&x6(e,t)}function x6(e,t){"maxScale"in e&&(t.maxScale=JS(e.maxScale)??void 0),"minScale"in e&&(t.minScale=JS(e.minScale)??void 0)}function kue(e,t){if(Due(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=JS(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(RT(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function $6(e,t,r){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return r?.messages&&r.messages.push(new z("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(RT(e)&&!e.isTable)t=e.resourceInfo;else if(Lue(e,r)){const i={};return e.write(i,r)?i:null}return t!=null&&kue(e,t=U(t)),t}var w0;let Fue=0,Qn=w0=class extends K.JSONSupportMixin(cs){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Fue++,this.baseLayers=new ge,this.referenceLayers=new ge;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type==="elevation"&&re.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=i=>{i.parent=null};this.addHandles([this.baseLayers.on("after-add",(i=>t(i.item))),this.referenceLayers.on("after-add",(i=>t(i.item))),this.baseLayers.on("after-remove",(i=>r(i.item))),this.referenceLayers.on("after-remove",(i=>r(i.item)))])}initialize(){this.when().catch((e=>{re.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const r of e)r.destroy();const t=this.referenceLayers.toArray();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=rr(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Xl(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach((n=>{const s=$6(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);s!=null&&i.push(s)})),this.referenceLayers.forEach((n=>{const s=$6(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);s!=null&&(n.type!=="scene"&&(s.isReference=!0),i.push(s))}))),t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",Xl(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return cG(this,(e=>{e(this.baseLayers,this.referenceLayers)}))}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map((t=>RS(t)?t.clone():t)),referenceLayers:this.referenceLayers.map((t=>RS(t)?t.clone():t))};return this.loaded&&(e.loadStatus="loaded"),new w0({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t?.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((r=>{const i=U(r);return i.url&&$a(i.url)&&(i.url=`https:${i.url}`),i.templateUrl&&$a(i.templateUrl)&&(i.templateUrl=`https:${i.templateUrl}`),i}))),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r,style:i}=this;Yt(e);const n=[];if(t){const s=t.context?t.context.url:null;if(n.push(this._loadLayersFromJSON(t.data,s,e)),t.data.id&&!t.data.title){const a=t.data.id;n.push(sae(a).then((c=>{c&&this.read({title:c},t.context)})))}}else r?n.push(this._loadFromItem(r,e)):i&&n.push(this._loadFromStylesService(i,e));await Promise.all(n)}async _loadLayersFromJSON(e,t,r){const i=this.resourceInfo?.context,n=this.portalItem?.portal||i?.portal||null,s=jue[i?.origin||""]??"web-map",{populateOperationalLayers:a}=await ue(async()=>{const{populateOperationalLayers:d}=await import("./layersCreator-D5NlyfN7.js");return{populateOperationalLayers:d}},__vite__mapDeps([9,10,11,12,13,14])),c=[];if(Yt(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const d={context:{...i,origin:s,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},f=w=>s==="web-scene"&&w.layerType==="ArcGISSceneServiceLayer"||w.isReference,g=a(this.baseLayers,e.baseMapLayers.filter((w=>!f(w))),d);c.push(g);const v=a(this.referenceLayers,e.baseMapLayers.filter(f),d);c.push(v)}await Promise.allSettled(c)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),n=Wi(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:Uue[e.type||""]??"web-map",portal:e.portal||se.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||se.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}async _loadFromStylesService(e,t){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,i=`${r}/styles/${e.id}/self`,n=`${r}/webmaps/${e.id}`,s=e.apiKey??ct.apiKeys.basemapStyles,[a,c]=await Promise.all([(await Ft(i,{query:{token:s},signal:t?.signal})).data,(await Ft(n,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:s},signal:t?.signal})).data]);this.thumbnailUrl??=a.thumbnailUrl;const d=Wi(n);if(this._set("resourceInfo",{data:c.baseMap??{},context:{origin:"web-map",url:d}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:c.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,d,t),s)for(const f of[...this.baseLayers,...this.referenceLayers])"apiKey"in f&&(f.apiKey=s)}static fromId(e){const t=dA[e];return t?t.itemId?new w0({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):w0.fromJSON(t,t.is3d?{origin:"web-scene",portal:new se({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}};u([p({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:ge}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],Qn.prototype,"baseLayers",null),u([p({type:String,json:{origins:{"web-scene":{write:!0}}}})],Qn.prototype,"id",void 0),u([p({type:Ge})],Qn.prototype,"portalItem",void 0),u([p()],Qn.prototype,"referenceLayers",null),u([p({readOnly:!0})],Qn.prototype,"resourceInfo",void 0),u([p({type:Ee})],Qn.prototype,"spatialReference",void 0),u([p({type:Eue})],Qn.prototype,"style",void 0),u([p()],Qn.prototype,"thumbnailUrl",void 0),u([p({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Qn.prototype,"title",void 0),u([de("title")],Qn.prototype,"writeTitle",null),Qn=w0=u([O("esri.Basemap")],Qn);const Uue={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},jue={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},vv=Qn,zue=Object.freeze(Object.defineProperty({__proto__:null,default:vv},Symbol.toStringTag,{value:"Module"})),u2={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function tB(e){return!!u2[e]||!!u2[e.toLowerCase()]}function SN(e){return u2[e]??u2[e.toLowerCase()]}function Vue(e){return[...SN(e)]}function cM(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function rB(e,t,r,i=1){const n=(e%360+360)%360/360,s=r<=.5?r*(t+1):r+t-r*t,a=2*r-s;return[Math.round(255*cM(a,s,n+1/3)),Math.round(255*cM(a,s,n)),Math.round(255*cM(a,s,n-1/3)),i]}function Gue(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,n=t?1:17,s=t?e.length===9:e.length===5;let a=+("0x"+e.slice(1));if(isNaN(a))return null;const c=[0,0,0,1];let d;return s&&(d=a&i,a>>=r,c[3]=n*d/255),d=a&i,a>>=r,c[2]=n*d,d=a&i,a>>=r,c[1]=n*d,d=a&i,a>>=r,c[0]=n*d,c}function iB(e){if(e[0]!=="#"||isNaN(+`0x${e.slice(1)}`))return null;switch(e.length){case 4:case 5:{const t=parseInt(e.slice(1,2),16),r=parseInt(e.slice(2,3),16),i=parseInt(e.slice(3,4),16),n=e.length===4?15:parseInt(e.slice(4),16);return[t+16*t,r+16*r,i+16*i,(n+16*n)/255]}case 7:case 9:return[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16),(e.length===7?255:parseInt(e.slice(7),16))/255];default:return null}}function nB(e){const t=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(t){const r=t[2].split(/\s*,\s*/),i=t[1];if(i==="rgb"&&r.length===3||i==="rgba"&&r.length===4){const n=r[0];if(n.charAt(n.length-1)==="%"){const s=r.map((a=>2.56*parseFloat(a)));return r.length===4&&(s[3]=parseFloat(r[3])),M6(s)}return M6(r.map((s=>parseFloat(s))))}if(i==="hsl"&&r.length===3||i==="hsla"&&r.length===4)return rB(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100,parseFloat(r[3]??"1"))}return null}function M6(e){return e[0]=rm(e[0]),e[1]=rm(e[1]),e[2]=rm(e[2]),e[3]=e.length===4?oB(e[3]):1,e}function sB(e){let t=tB(e)?SN(e):null;return t??=nB(e),t??=iB(e),t}function FCe(e){const t=sB(e);return t!=null?[t[0]/255,t[1]/255,t[2]/255,t[3]]:null}function oB(e){return aB(e,0,1)}function rm(e){return Math.round(aB(e,0,255))}function aB(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}const UCe=2.2,A6=new Float32Array(1);function jCe(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Ys(e,t,r){return Math.min(Math.max(e,t),r)}function zCe(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function _0(e,t,r){return e+(t-e)*r}function VCe(e,t,r,i,n){return _0(i,n,(e-t)/(r-t))}function D1(e){return e*Math.PI/180}function lB(e){return 180*e/Math.PI}function GCe(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function qCe(e){return Math.acos(Ys(e,-1,1))}function que(e){return Math.asin(Ys(e,-1,1))}function ko(e,t,r=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=r}function uB(e,t,r=1e-6){return!ko(e,t,r)&&e>t}function MA(e,t,r=1e-6){return!ko(e,t,r)&&e<t}function Bue(e,t,r=1e-6){return ko(e,t,r)||e>t}const c2=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function AA(e){return c2.setFloat64(0,e),c2.getBigInt64(0)}function Hue(e){return c2.setBigInt64(0,e),c2.getFloat64(0)}const M_=BigInt("1000000"),Wue=cB(1);function cB(e){const t=AA(e=Math.abs(e)),r=Hue(t<=M_?M_:t-M_);return Math.abs(e-r)}function BCe(e,t,r=Wue){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(r!=null&&cB(Math.min(Math.abs(e),Math.abs(t)))<r)return Math.abs(e-t)<=r;const i=AA(e),n=AA(t);return i<0!=n<0?!1:!((i<n?n-i:i-n)>M_)}function HCe(e,t,r=1e-6){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;const i=Math.abs(e-t),n=Math.abs(e),s=Math.abs(t);if(e===0||t===0||n<1e-12&&s<1e-12){if(i>.01*r)return!1}else if(i/(n+s)>r)return!1;return!0}function WCe(e){return dB(Math.max(-O6,Math.min(e,O6)))}function dB(e){return A6[0]=e,A6[0]}function ZCe(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],i=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(ko(t,1)&&ko(r,1)&&ko(i,1))}const O6=dB(34028234663852886e22);function YCe(e,t,r){if(r===void 0||+r==0)return Math[e](t);if(t=+t,r=+r,isNaN(t)||typeof r!="number"||r%1!=0)return NaN;let i=t.toString().split("e");return i=(t=Math[e](+(i[0]+"e"+(i[1]?+i[1]-r:-r)))).toString().split("e"),+(i[0]+"e"+(i[1]?+i[1]+r:r))}function Mw(e){return Ys(BI(e),0,255)}function Aw(e,t){const r=e.toString(16).padStart(2,"0");return t?r.slice(0,1):r}let A_=class xn{static blendColors(t,r,i,n=new xn){return n.r=Math.round(t.r+(r.r-t.r)*i),n.g=Math.round(t.g+(r.g-t.g)*i),n.b=Math.round(t.b+(r.b-t.b)*i),n.a=t.a+(r.a-t.a)*i,n._sanitize()}static fromRgb(t,r){const i=nB(t);return i?xn.fromArray(i,r):null}static fromHex(t,r=new xn){const i=iB(t);return i?xn.fromArray(i,r):null}static fromArray(t,r=new xn){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=sB(t);return i?xn.fromArray(i,r):null}static fromJSON(t){return t!=null?new xn([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?xn.fromString(t,this):Array.isArray(t)?xn.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof xn||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const r=t?.capitalize??!1,i=t?.digits??6,n=i===3||i===4,s=i===4||i===8,a=`#${Aw(this.r,n)}${Aw(this.g,n)}${Aw(this.b,n)}${s?Aw(Math.round(255*this.a),n):""}`;return r?a.toUpperCase():a}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=xn.AlphaMode.ALWAYS){const r=Mw(this.r),i=Mw(this.g),n=Mw(this.b);return t===xn.AlphaMode.ALWAYS||this.a!==1?[r,i,n,Mw(255*this.a)]:[r,i,n]}clone(){return new xn(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=rm(this.r),this.g=rm(this.g),this.b=rm(this.b),this.a=oB(this.a),this}_set(t,r,i,n){this.r=t,this.g=r,this.b=i,this.a=n}};A_.prototype.declaredClass="esri.Color",(function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"})(A_||(A_={}));const De=A_;function Ne(e,t={}){const r=e instanceof tt?e:new tt(e,t),{alwaysWriteDefaults:i,default:n,ignoreUnknown:s=!0,name:a,nonNullable:c,readOnly:d=!1}=t;return p({type:s?r.apiValues:String,json:{type:r.jsonValues,default:n,name:a,read:!d&&{reader:r.read},write:{writer:r.write,alwaysWriteDefaults:i}},nonNullable:c,readOnly:d})}var OA;let O_=OA=class extends K{constructor(e){super(e),this.type="none"}clone(){return new OA({type:this.type})}};u([Ne({none:"none",stayAbove:"stay-above"}),p({json:{write:{isRequired:!0}}})],O_.prototype,"type",void 0),O_=OA=u([O("esri.ground.NavigationConstraint")],O_);const Zue=Symbol("GroundInstance");function CT(e){const t=BI(100*(1-e));return Math.max(0,Math.min(t,100))}function Kv(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var R6,RA,e7;let ll=RA=(e7=class extends K.JSONSupportMixin(cs){constructor(e){super(e),this[R6]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new ge;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&re.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",(i=>t(i.item))),this.layers.on("after-remove",(i=>r(i.item)))])}initialize(){this.when().catch((e=>{Zi(e)||re.getLogger(this).error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)rr(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}get layers(){return this._get("layers")}set layers(e){this._set("layers",Xl(e,this._get("layers")))}writeLayers(e,t,r,i){const n=[];e&&(i={...i,layerContainerType:"ground"},e.forEach((s=>{if("write"in s){const a={};ore(s)().write(a,i)&&n.push(a)}else i?.messages&&i.messages.push(new z("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))}))),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return cG(this,(e=>{e(this.layers)}))}async queryElevation(e,t){await this.load({signal:t?.signal});const{ElevationQuery:r}=await ue(()=>import("./ElevationQuery-DU2kQH00.js"),[]);Yt(t);const i=new r,n=this.layers.filter(C6).toArray();return i.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t?.signal});const{ElevationQuery:r}=await ue(()=>import("./ElevationQuery-DU2kQH00.js"),[]);Yt(t);const i=new r,n=this.layers.filter(C6).toArray();return i.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:U(this.surfaceColor),navigationConstraint:U(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new RA({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,r){const i=t?.origin||"web-scene",n=t?.portal||null,s=t?.url||null,{populateOperationalLayers:a}=await ue(async()=>{const{populateOperationalLayers:d}=await import("./layersCreator-D5NlyfN7.js");return{populateOperationalLayers:d}},__vite__mapDeps([9,10,11,12,13,14]));Yt(r);const c=[];if(e.layers&&Array.isArray(e.layers)){const d={context:{origin:i,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};c.push(a(this.layers,e.layers,d))}await Promise.allSettled(c)}},R6=Zue,e7);function Yue(e){return e&&"createElevationSampler"in e}function C6(e){return e.type==="elevation"||Yue(e)}u([p({json:{read:!1,write:{isRequired:!0}}})],ll.prototype,"layers",null),u([de("layers")],ll.prototype,"writeLayers",null),u([p({readOnly:!0})],ll.prototype,"resourceInfo",void 0),u([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:dt,read:{reader:Kv,source:"transparency"},write:{writer:(e,t)=>{t.transparency=CT(e)},target:"transparency"}}})],ll.prototype,"opacity",void 0),u([p({type:De,json:{type:[dt],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],ll.prototype,"surfaceColor",void 0),u([p({type:O_,json:{write:!0}})],ll.prototype,"navigationConstraint",void 0),ll=RA=u([O("esri.Ground")],ll);const d2=ll;let ba=class extends ge{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(DV((()=>this._refresh()),Oa))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let r=0;for(const i of t)i!=null&&(r=this._processCollection(r,i));this.splice(r)}_createNewInstance(t){return new ge(t)}_processCollection(t,r){if(!r)return t;const i=this.itemFilterFunction??(n=>!!n);for(const n of r)if(n){if(i(n)){const s=this.indexOf(n,t);s>=0?s!==t&&this.reorder(n,t):this.add(n,t),++t}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const a of s)t=this._processCollection(t,a);else t=this._processCollection(t,s)}}return t}};u([p()],ba.prototype,"getCollections",void 0),u([p()],ba.prototype,"getChildrenFunction",void 0),u([p()],ba.prototype,"itemFilterFunction",void 0),ba=u([O("esri.core.CollectionFlattener")],ba);const hB=e=>{let t=class extends e{clone(){const r=gn(this);rV(r,"unable to clone instance of non-accessor class");const i=r.metadata,n=r.store,s={},a=new Map;for(const d in i){const f=i[d],g=n?.originOf(d),v=f.clonable;if(f.readOnly||v===!1||g!==Ke.USER&&g!==Ke.DEFAULTS&&g!==Ke.WEB_MAP&&g!==Ke.WEB_SCENE)continue;const w=this[d];let S=null;S=typeof v=="function"?v(w):v==="reference"?w:T3(w),w!=null&&S==null||(g===Ke.DEFAULTS?a.set(d,S):s[d]=S)}const c=new(Object.getPrototypeOf(this)).constructor(s);if(a.size){const d=gn(c)?.store;if(d)for(const[f,g]of a)d.set(f,g,Ke.DEFAULTS)}return c}};return t=u([O("esri.core.Clonable")],t),t};let S0=class extends hB(Ae){};S0=u([O("esri.core.Clonable")],S0),(function(e){e.ClonableMixin=hB})(S0||(S0={}));const We=S0,Jue="randomUUID"in crypto;function Sy(){if(Jue)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function QCe(){return`{${Sy().toUpperCase()}}`}function Xue(){return`{${Sy()}}`}function Que(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const Gp={Base64:0,Hex:1,String:2,Raw:3},im=8,pB=(1<<im)-1;function mc(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function Kue(e){const t=[];for(let r=0,i=e.length*im;r<i;r+=im)t[r>>5]|=(e.charCodeAt(r/im)&pB)<<r%32;return t}function ece(e){const t=[];for(let r=0,i=32*e.length;r<i;r+=im)t.push(String.fromCharCode(e[r>>5]>>>r%32&pB));return t.join("")}function tce(e){const t="0123456789abcdef",r=[];for(let i=0,n=4*e.length;i<n;i++)r.push(t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15));return r.join("")}function rce(e){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=[];for(let n=0,s=4*e.length;n<s;n+=3){const a=(e[n>>2]>>n%4*8&255)<<16|(e[n+1>>2]>>(n+1)%4*8&255)<<8|e[n+2>>2]>>(n+2)%4*8&255;for(let c=0;c<4;c++)8*n+6*c>32*e.length?i.push("="):i.push(r.charAt(a>>6*(3-c)&63))}return i.join("")}function ice(e,t){return e<<t|e>>>32-t}function IT(e,t,r,i,n,s){return mc(ice(mc(mc(t,e),mc(i,s)),n),r)}function Ii(e,t,r,i,n,s,a){return IT(t&r|~t&i,e,t,n,s,a)}function Ni(e,t,r,i,n,s,a){return IT(t&i|r&~i,e,t,n,s,a)}function Pi(e,t,r,i,n,s,a){return IT(t^r^i,e,t,n,s,a)}function Li(e,t,r,i,n,s,a){return IT(r^(t|~i),e,t,n,s,a)}function nce(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let r=1732584193,i=-271733879,n=-1732584194,s=271733878;for(let a=0;a<e.length;a+=16){const c=r,d=i,f=n,g=s;r=Ii(r,i,n,s,e[a],7,-680876936),s=Ii(s,r,i,n,e[a+1],12,-389564586),n=Ii(n,s,r,i,e[a+2],17,606105819),i=Ii(i,n,s,r,e[a+3],22,-1044525330),r=Ii(r,i,n,s,e[a+4],7,-176418897),s=Ii(s,r,i,n,e[a+5],12,1200080426),n=Ii(n,s,r,i,e[a+6],17,-1473231341),i=Ii(i,n,s,r,e[a+7],22,-45705983),r=Ii(r,i,n,s,e[a+8],7,1770035416),s=Ii(s,r,i,n,e[a+9],12,-1958414417),n=Ii(n,s,r,i,e[a+10],17,-42063),i=Ii(i,n,s,r,e[a+11],22,-1990404162),r=Ii(r,i,n,s,e[a+12],7,1804603682),s=Ii(s,r,i,n,e[a+13],12,-40341101),n=Ii(n,s,r,i,e[a+14],17,-1502002290),i=Ii(i,n,s,r,e[a+15],22,1236535329),r=Ni(r,i,n,s,e[a+1],5,-165796510),s=Ni(s,r,i,n,e[a+6],9,-1069501632),n=Ni(n,s,r,i,e[a+11],14,643717713),i=Ni(i,n,s,r,e[a],20,-373897302),r=Ni(r,i,n,s,e[a+5],5,-701558691),s=Ni(s,r,i,n,e[a+10],9,38016083),n=Ni(n,s,r,i,e[a+15],14,-660478335),i=Ni(i,n,s,r,e[a+4],20,-405537848),r=Ni(r,i,n,s,e[a+9],5,568446438),s=Ni(s,r,i,n,e[a+14],9,-1019803690),n=Ni(n,s,r,i,e[a+3],14,-187363961),i=Ni(i,n,s,r,e[a+8],20,1163531501),r=Ni(r,i,n,s,e[a+13],5,-1444681467),s=Ni(s,r,i,n,e[a+2],9,-51403784),n=Ni(n,s,r,i,e[a+7],14,1735328473),i=Ni(i,n,s,r,e[a+12],20,-1926607734),r=Pi(r,i,n,s,e[a+5],4,-378558),s=Pi(s,r,i,n,e[a+8],11,-2022574463),n=Pi(n,s,r,i,e[a+11],16,1839030562),i=Pi(i,n,s,r,e[a+14],23,-35309556),r=Pi(r,i,n,s,e[a+1],4,-1530992060),s=Pi(s,r,i,n,e[a+4],11,1272893353),n=Pi(n,s,r,i,e[a+7],16,-155497632),i=Pi(i,n,s,r,e[a+10],23,-1094730640),r=Pi(r,i,n,s,e[a+13],4,681279174),s=Pi(s,r,i,n,e[a],11,-358537222),n=Pi(n,s,r,i,e[a+3],16,-722521979),i=Pi(i,n,s,r,e[a+6],23,76029189),r=Pi(r,i,n,s,e[a+9],4,-640364487),s=Pi(s,r,i,n,e[a+12],11,-421815835),n=Pi(n,s,r,i,e[a+15],16,530742520),i=Pi(i,n,s,r,e[a+2],23,-995338651),r=Li(r,i,n,s,e[a],6,-198630844),s=Li(s,r,i,n,e[a+7],10,1126891415),n=Li(n,s,r,i,e[a+14],15,-1416354905),i=Li(i,n,s,r,e[a+5],21,-57434055),r=Li(r,i,n,s,e[a+12],6,1700485571),s=Li(s,r,i,n,e[a+3],10,-1894986606),n=Li(n,s,r,i,e[a+10],15,-1051523),i=Li(i,n,s,r,e[a+1],21,-2054922799),r=Li(r,i,n,s,e[a+8],6,1873313359),s=Li(s,r,i,n,e[a+15],10,-30611744),n=Li(n,s,r,i,e[a+6],15,-1560198380),i=Li(i,n,s,r,e[a+13],21,1309151649),r=Li(r,i,n,s,e[a+4],6,-145523070),s=Li(s,r,i,n,e[a+11],10,-1120210379),n=Li(n,s,r,i,e[a+2],15,718787259),i=Li(i,n,s,r,e[a+9],21,-343485551),r=mc(r,c),i=mc(i,d),n=mc(n,f),s=mc(s,g)}return[r,i,n,s]}function TN(e,t=Gp.Hex){const r=t||Gp.Base64,i=nce(Kue(e),e.length*im);switch(r){case Gp.Raw:return i;case Gp.Hex:return tce(i);case Gp.String:return ece(i);case Gp.Base64:return rce(i)}}function sce(e){return e&&"getAtOrigin"in e&&"originOf"in e}function CA(e){return EN[oce(e)]||lce}function oce(e){return e.type==="json"?"application/json":e.type==="blob"?e.blob.type:ace(e.url)}function ace(e){const t=Y7(e);return IA[t]||fB}const EN={},fB="text/plain",lce=EN[fB],IA={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const e in IA)EN[IA[e]]=e;function uce(e){const t=e?.origins??[void 0];return(r,i)=>{const n=cce(e,r,i);for(const s of t){const a=HI(r,s,i);for(const c in n)a[c]=n[c]}}}function cce(e,t,r){if(e?.type==="resource")return dce(e,t,r);switch(e?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:i,write:n}=die;return{read:i,write:n}}}}function dce(e,t,r){const i=M1(t,r);return{type:String,read:(n,s,a)=>{const c=hT(n,s,a);return i.type===String?c:typeof i.type=="function"?new i.type({url:c}):void 0},write:{isRequired:i.json?.write?.isRequired,writer(n,s,a,c){if(!c?.resources)return typeof n=="string"?void(s[a]=Rh(n,c)):void(s[a]=n.write({},c));const d=fce(n),f=Rh(d,{...c,verifyItemRelativeUrls:c?.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},Vm.NO),g=i.type!==String&&(!sce(this)||c?.origin&&this.originIdOf(r)>Ul(c.origin)),v={object:this,propertyName:r,value:n,targetUrl:f,dest:s,targetPropertyName:a,context:c,params:e};c?.portalItem&&f&&!Fn(f)?g&&e?.contentAddressed?NA(v):g?hce(v):pce(v):c?.portalItem&&(f==null||sV(f)!=null||cy(f)||g)?NA(v):s[a]=f}}}}function NA(e){const{targetUrl:t,params:r,value:i,context:n,dest:s,targetPropertyName:a}=e;if(!n.portalItem)return;const c=oV(t),d=yB(i,t,n);if(r?.contentAddressed&&d.type!=="json")return void n.messages?.push(new z("persistable:contentAddressingUnsupported",`Property "${a}" is trying to serializing a resource with content of type ${d.type} with content addressing. Content addressing is only supported for json resources.`,{content:d}));const f=r?.contentAddressed&&d.type==="json"?TN(d.jsonString):c?.filename??Sy(),g=Oh(r?.prefix??c?.prefix,f),v=`${g}.${CA(d)}`;if(r?.contentAddressed&&n.resources&&d.type==="json"){const T=n.resources.toKeep.find((({resource:E})=>E.path===v))??n.resources.toAdd.find((({resource:E})=>E.path===v));if(T)return void(s[a]=T.resource.itemRelativeUrl)}const w=n.portalItem.resourceFromPath(v);cy(t)&&n.resources&&n.resources.pendingOperations.push(Ure(t).then((T=>{w.path=`${g}.${CA({type:"blob",blob:T})}`,s[a]=w.itemRelativeUrl})).catch((()=>{})));const S=r?.compress??!1;n.resources&&mB({...e,resource:w,content:d,compress:S,updates:n.resources.toAdd}),s[a]=w.itemRelativeUrl}function hce(e){const{context:t,targetUrl:r,params:i,value:n,dest:s,targetPropertyName:a}=e;if(!t.portalItem)return;const c=t.portalItem.resourceFromPath(r),d=yB(n,r,t),f=CA(d),g=Y7(c.path),v=i?.compress??!1;f===g?(t.resources&&mB({...e,resource:c,content:d,compress:v,updates:t.resources.toUpdate}),s[a]=r):NA(e)}function pce({context:e,targetUrl:t,dest:r,targetPropertyName:i}){e.portalItem&&e.resources&&(e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(t),compress:!1}),r[i]=t)}function mB({object:e,propertyName:t,updates:r,resource:i,content:n,compress:s}){const a=c=>{mce(e,t,c)};r.push({resource:i,content:n,compress:s,finish:a})}function yB(e,t,r){return typeof e=="string"?{type:"url",url:t}:{type:"json",jsonString:JSON.stringify(e.toJSON(r))}}function fce(e){return e==null?null:typeof e=="string"?e:e.url}function mce(e,t,r){typeof e[t]=="string"?e[t]=r.url:e[t].url=r.url}let R_=class extends We.ClonableMixin(K){constructor(t){super(t),this.color=null}};u([p({type:De,json:{type:[dt],write:!0}})],R_.prototype,"color",void 0),R_=u([O("esri.effects.FocusAreaOutline")],R_);const yce=R_;function eIe(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t}function gce(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var h2;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(h2||(h2={}));function tIe(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,r=e.hasM;if(e.type==="point")return r&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:r?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice();if(e.type==="polyline")return e.paths.slice();if(e.type==="multipoint")return e.points.slice();if(e.type==="extent"){const i=e.clone().normalize();if(!i)return null;let n=!1,s=!1;return i.forEach((a=>{a.hasZ&&(n=!0),a.hasM&&(s=!0)})),i.map((a=>{const c=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(n&&a.hasZ){const d=.5*(a.zmax-a.zmin);for(let f=0;f<c.length;f++)c[f].push(d)}if(s&&a.hasM){const d=.5*(a.mmax-a.mmin);for(let f=0;f<c.length;f++)c[f].push(d)}return c}))}return null}function NT(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}return Math.sqrt(r*r+i*i)}function gB(e,t,r){const i=e[0]+r*(t[0]-e[0]),n=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,n,e[2]+r*(t[2]-e[2])]:[i,n]}function vce(e,t,r,i){return bce(e,t,r[i],r[i+1])}function bce(e,t,r,i){const[n,s]=t,[a,c]=r,[d,f]=i,g=d-a,v=f-c,w=g*g+v*v,S=(n-a)*g+(s-c)*v,T=Math.min(1,Math.max(0,S/w));return e[0]=a+g*T,e[1]=c+v*T,e}function rIe(e,t,r,i,n,s){let a=r,c=i,d=n-a,f=s-c;if(d!==0||f!==0){const g=((e-a)*d+(t-c)*f)/(d*d+f*f);g>1?(a=n,c=s):g>0&&(a+=d*g,c+=f*g)}return d=e-a,f=t-c,d*d+f*f}function vB(e,t){return gB(e,t,.5)}function iIe(e){const t=e.length;let r=0;for(let i=0;i<t-1;++i)r+=NT(e[i],e[i+1]);return r}function nIe(e,t){if(t<=0)return e[0];const r=e.length;let i=0;for(let n=0;n<r-1;++n){const s=NT(e[n],e[n+1]);if(t-i<s){const a=(t-i)/s;return gB(e[n],e[n+1],a)}i+=s}return e[r-1]}function bB(e,t=h2.X,r=h2.Y){let i=0;const n=e.length;let s=e[0];for(let a=1;a<n;a++){const c=e[a];i+=(c[t]-s[t])*(c[r]+s[r]),s=c}if(wB(e)){const a=e[0];i+=(a[t]-s[t])*(a[r]+s[r])}return i>=0}function wB(e){const t=e.length;return t>0&&!oT(e[0],e[t-1])}function sIe(e){"rings"in e&&(wce(e),_ce(e))}function wce(e){if("rings"in e)for(const t of e.rings)wB(t)&&t.push(t[0].slice())}function _ce(e){if(!("rings"in e)||e.rings.length===0||bB(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function oIe(e){return e.type!=="polygon"&&e.type!=="polyline"||Sce(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function Sce(e,t){const r=fn(t);if(!r)return;const i=r.valid[0],n=r.valid[1],s=n-i;for(const a of e){let c=1/0,d=-1/0;for(const g of a){const v=Tce(g[0],i,n);c=Math.min(c,v),d=Math.max(d,v),g[0]=v}const f=d-c;s-f<f&&a.forEach((g=>{g[0]<0&&(g[0]+=s)}))}}function Tce(e,t,r){const i=r-t;return e<t?r-(t-e)%i:e>r?t+(e-t)%i:e}function aIe(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[r,i]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return r.length===i.length&&r.every(((n,s)=>n.length===i[s].length))}function lIe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function Ece(e){return e?xce(e.rings,e.hasZ??!1):null}function xce(e,t){if(!e?.length)return null;const r=[],i=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,a=e.length;s<a;s++){const c=_B(e[s],t,n);c&&i.push(c)}if(i.sort(((s,a)=>{let c=s[2]-a[2];return c===0&&t&&(c=s[4]-a[4]),c})),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||t&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){const s=e[0]&&e[0].length?$ce(e[0],t):null;if(!s)return null;r[0]=s[0],r[1]=s[1],t&&s.length>2&&(r[2]=s[2])}return r}function _B(e,t,r){let i=0,n=0,s=0,a=0,c=0;const d=e.length?e[0][0]:0,f=e.length?e[0][1]:0,g=e.length&&t?e[0][2]:0;for(let w=0;w<e.length;w++){const S=e[w],T=e[(w+1)%e.length],[E,M,R]=S,I=E-d,k=M-f,[j,P,X]=T,ae=j-d,fe=P-f,he=I*fe-ae*k;if(a+=he,i+=(I+ae)*he,n+=(k+fe)*he,t&&S.length>2&&T.length>2){const me=R-g,Oe=X-g,Se=I*Oe-ae*me;s+=(me+Oe)*Se,c+=Se}E<r[0]&&(r[0]=E),E>r[1]&&(r[1]=E),M<r[2]&&(r[2]=M),M>r[3]&&(r[3]=M),t&&(R<r[4]&&(r[4]=R),R>r[5]&&(r[5]=R))}if(a>0&&(a*=-1),c>0&&(c*=-1),!a)return null;a*=.5,c*=.5;const v=[i/(6*a)+d,n/(6*a)+f,a];return t&&(r[4]===r[5]||c===0?(v[3]=(r[4]+r[5])/2,v[4]=0):(v[3]=s/(6*c)+g,v[4]=c)),v}function uIe(e,t){let r=0,i=0,n=0;e.nextPoint();const s=e.pathSize?e.x:0,a=e.pathSize?e.y:0;for(let c=0;c<e.pathSize;c++){e.seekInPath(c);const d=[e.x,e.y];e.seekInPath((c+1)%e.pathSize);const f=[e.x,e.y],[g,v]=d,w=g-s,S=v-a,[T,E]=f,M=T-s,R=E-a,I=w*R-M*S;n+=I,r+=(w+M)*I,i+=(S+R)*I,g<t[0]&&(t[0]=g),g>t[1]&&(t[1]=g),v<t[2]&&(t[2]=v),v>t[3]&&(t[3]=v)}return n>0&&(n*=-1),n?(n*=.5,[r/(6*n)+s,i/(6*n)+a,n]):null}function $ce(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let n=0,s=0,a=0,c=0;for(let d=0,f=e.length;d<f-1;d++){const g=e[d],v=e[d+1];if(g&&v){r[0]=g[0],r[1]=g[1],i[0]=v[0],i[1]=v[1],t&&g.length>2&&v.length>2&&(r[2]=g[2],i[2]=v[2]);const w=NT(r,i);if(w){n+=w;const S=vB(g,v);s+=w*S[0],a+=w*S[1],t&&S.length>2&&(c+=w*S[2])}}}return n>0?t?[s/n,a/n,c/n]:[s/n,a/n]:e.length?e[0]:null}function Mce(e){const{hasZ:t,totalSize:r}=e;if(r===0)return null;const i=[],n=[],s=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const a=_B(gce(e),e.hasZ,s);a&&n.push(a)}if(n.sort(((a,c)=>{let d=a[2]-c[2];return d===0&&t&&(d=a[4]-c[4]),d})),n.length&&(i[0]=n[0][0],i[1]=n[0][1],t&&(i[2]=n[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){e.reset(),e.nextPath();const a=e.pathSize?Ace(e):null;if(!a)return null;i[0]=a[0],i[1]=a[1],t&&a.length>2&&(i[2]=a[2])}return i}function Ace(e){const{hasZ:t}=e,r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let n=0,s=0,a=0,c=0;if(e.nextPoint()){let d=e.x,f=e.y,g=e.z;for(;e.nextPoint();){const v=e.x,w=e.y,S=e.z;r[0]=d,r[1]=f,i[0]=v,i[1]=w,t&&(r[2]=g,i[2]=S);const T=NT(r,i);if(T){n+=T;const E=vB(r,i);s+=T*E[0],a+=T*E[1],t&&E.length>2&&(c+=T*E[2])}d=v,f=w,g=S}}return n>0?t?[s/n,a/n,c/n]:[s/n,a/n]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const Oce=1e-6;function cIe(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<Oce){const n=Mce(e);return n?[n[0],n[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const i=[e.x,e.y];for(e.reset();e.nextPath();)Cce(r,i,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=i[0],r[1]+=i[1],r}const Rce=1/3;function Cce(e,t,r){if(!e||!r||r.pathSize<3)return null;r.nextPoint();const i=r.x,n=r.y;r.nextPoint();let s,a=r.x-i,c=r.y-n,d=0,f=0;for(;r.nextPoint();)d=r.x-i,f=r.y-n,s=.5*Rce*(d*c-f*a),e[0]+=s*(a+d),e[1]+=s*(c+f),a=d,c=f;const g=r.getCurrentRingArea(),v=[i,n];return v[0]-=t[0],v[1]-=t[1],v[0]*=g,v[1]*=g,e[0]+=v[0],e[1]+=v[1],e}function pn(e=Lce){return[e[0],e[1],e[2],e[3]]}function SB(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function dIe(e,t,r,i,n=pn()){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function hIe(e,t=pn()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function Ice(e,t,r=new Xe){return r.xmin=e[0],r.ymin=e[1],r.xmax=e[2],r.ymax=e[3],r.spatialReference=t,r}function pIe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function fIe(e,t,r){if(t!=null)if("length"in t)PA(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else SB(r,e)}function mIe(e,t,r=e){const i=t.length;let n=e[0],s=e[1],a=e[2],c=e[3];for(let d=0;d<i;d++){const f=t[d];n=Math.min(n,f[0]),s=Math.min(s,f[1]),a=Math.max(a,f[0]),c=Math.max(c,f[1])}return r[0]=n,r[1]=s,r[2]=a,r[3]=c,r}function yIe(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function xN(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function $N(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function gIe(e){return xN(e)*$N(e)}function vIe(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function bIe(e){const t=xN(e),r=$N(e);return Math.sqrt(t*t+r*r)}function wIe(e,t){return Nce(e,t.x,t.y)}function Nce(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function _Ie(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function SIe(e,t,r){return Math.max(t[0],e[0])-r<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])-r<=Math.min(t[3],e[3])}function Pce(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function TIe(e,t,r,i=e){return i[0]=e[0]+t,i[1]=e[1]+r,i[2]=e[2]+t,i[3]=e[3]+r,i}function EIe(e){return e?SB(e,I6):pn(I6)}function PA(e){return e!=null&&e.length===4}function xIe(e,t){return PA(e)&&PA(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const I6=[1/0,1/0,-1/0,-1/0],Lce=[0,0,0,0];function TB(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function EB(e){return e.points!==void 0}function xB(e){return e.x!==void 0&&e.y!==void 0}function $B(e){return e.paths!==void 0}function MB(e){return e.rings!==void 0}function AB(e){function t(r,i){return r==null?i:i==null?r:e(r,i)}return t}const yc=AB(Math.min),gc=AB(Math.max);function $Ie(e,t){return $B(t)?Ym(e,t.paths,!1,!1):MB(t)?Ym(e,t.rings,!1,!1):EB(t)?MN(e,t.points,!1,!1,!1,!1):TB(t)?OB(e,t):(xB(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function MIe(e){let t,r,i,n;for(e.reset(),t=i=1/0,r=n=-1/0;e.nextPath();){const s=Dce(e);t=Math.min(s[0],t),i=Math.min(s[1],i),r=Math.max(s[2],r),n=Math.max(s[3],n)}return pn([t,i,r,n])}function Dce(e){let t,r,i,n;for(t=i=1/0,r=n=-1/0;e.nextPoint();)t=Math.min(e.x,t),i=Math.min(e.y,i),r=Math.max(e.x,r),n=Math.max(e.y,n);return pn([t,i,r,n])}function AIe(e,t){return $B(t)?Ym(e,t.paths,!0,!1):MB(t)?Ym(e,t.rings,!0,!1):EB(t)?MN(e,t.points,!0,!1,!0,!1):TB(t)?OB(e,t,!0,!1,!0,!1):(xB(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Ym(e,t,r,i){const n=r?3:2;if(!t.length||!t[0].length)return null;let s,a,c,d,[f,g]=t[0][0],[v,w]=t[0][0];for(let S=0;S<t.length;S++){const T=t[S];for(let E=0;E<T.length;E++){const M=T[E],[R,I]=M;if(f=yc(f,R),g=yc(g,I),v=gc(v,R),w=gc(w,I),r&&M.length>2){const k=M[2];s=yc(s,k),a=gc(a,k)}if(i&&M.length>n){const k=M[n];c=yc(s,k),d=gc(a,k)}}}return r?i?(e[0]=f,e[1]=g,e[2]=s,e[3]=c,e[4]=v,e[5]=w,e[6]=a,e[7]=d,e.length=8,e):(e[0]=f,e[1]=g,e[2]=s,e[3]=v,e[4]=w,e[5]=a,e.length=6,e):i?(e[0]=f,e[1]=g,e[2]=c,e[3]=v,e[4]=w,e[5]=d,e.length=6,e):(e[0]=f,e[1]=g,e[2]=v,e[3]=w,e.length=4,e)}function OB(e,t,r,i,n,s){const a=t.xmin,c=t.xmax,d=t.ymin,f=t.ymax;let g=t.zmin,v=t.zmax,w=t.mmin,S=t.mmax;return n?(g=g||0,v=v||0,s?(w=w||0,S=S||0,e[0]=a,e[1]=d,e[2]=g,e[3]=w,e[4]=c,e[5]=f,e[6]=v,e[7]=S,e):(e[0]=a,e[1]=d,e[2]=g,e[3]=c,e[4]=f,e[5]=v,e)):s?(w=w||0,S=S||0,e[0]=a,e[1]=d,e[2]=w,e[3]=c,e[4]=f,e[5]=S,e):(e[0]=a,e[1]=d,e[2]=c,e[3]=f,e)}function MN(e,t,r,i,n,s){const a=r?3:2,c=i&&s,d=r&&n;if(!t.length||!t[0].length)return null;let f,g,v,w,[S,T]=t[0],[E,M]=t[0];for(let R=0;R<t.length;R++){const I=t[R],[k,j]=I;if(S=yc(S,k),T=yc(T,j),E=gc(E,k),M=gc(M,j),d&&I.length>2){const P=I[2];f=yc(f,P),g=gc(g,P)}if(c&&I.length>a){const P=I[a];v=yc(f,P),w=gc(g,P)}}return n?(f=f||0,g=g||0,s?(v=v||0,w=w||0,e[0]=S,e[1]=T,e[2]=f,e[3]=v,e[4]=E,e[5]=M,e[6]=g,e[7]=w,e):(e[0]=S,e[1]=T,e[2]=f,e[3]=E,e[4]=M,e[5]=g,e)):s?(v=v||0,w=w||0,e[0]=S,e[1]=T,e[2]=v,e[3]=E,e[4]=M,e[5]=w,e):(e[0]=S,e[1]=T,e[2]=E,e[3]=M,e)}function kce(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Fce(e){return e.points!==void 0}function Uce(e){return e.x!==void 0&&e.y!==void 0}function jce(e){return e.paths!==void 0}function zce(e){return e.rings!==void 0}const AN=[];function RB(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function CB(e,t,r,i,n,s){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:n,zmax:s}}function IB(e,t,r,i,n,s){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:n,mmax:s}}function NB(e,t,r,i,n,s,a,c){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:n,ymax:s,zmax:a,mmax:c}}function ON(e,t=!1,r=!1){return t?r?NB(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):CB(e[0],e[1],e[2],e[3],e[4],e[5]):r?IB(e[0],e[1],e[2],e[3],e[4],e[5]):RB(e[0],e[1],e[2],e[3])}function OIe(e){return e?kce(e)?e:Uce(e)?Gce(e):zce(e)?PB(e):jce(e)?LB(e):Fce(e)?Vce(e):null:null}function Vce(e){const{hasZ:t,hasM:r,points:i}=e;return ON(MN(AN,i,t??!1,r??!1),t,r)}function Gce(e){const{x:t,y:r,z:i,m:n}=e,s=n!=null;return i!=null?s?NB(t,r,i,n,t,r,i,n):CB(t,r,i,t,r,i):s?IB(t,r,n,t,r,n):RB(t,r,t,r)}function PB(e){const{hasZ:t,hasM:r,rings:i}=e,n=Ym(AN,i,t??!1,r??!1);return n?ON(n,t,r):null}function LB(e){const{hasZ:t,hasM:r,paths:i}=e,n=Ym(AN,i,t??!1,r??!1);return n?ON(n,t,r):null}function Jm(e,t,r=!1){let{hasM:i,hasZ:n}=e;Array.isArray(t)?t.length!==4||i||n?t.length===3&&r&&!i?(n=!0,i=!1):t.length===3&&i&&n&&(i=!1,n=!1):(i=!0,n=!0):(n=!n&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=i}var C_;function N6(e){return!Array.isArray(e[0])}function qce(e){return typeof e[0]?.[0]=="number"}function Bce(e){if(!e)return;let{rings:t,hasM:r,hasZ:i,spatialReference:n}=e;switch(t??=[],qce(t)&&(t=[t]),t[0]?.[0]?.length){case 4:i??=!0,r??=!0;break;case 3:i??=r!==!0,r??=!i;break;default:i??=!1,r??=!1}return n??=Ee.WGS84,{...e,hasM:r,hasZ:i,rings:t,spatialReference:n}}let er=C_=class extends yi{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:r}=e;let i=!1,n=!1;for(const a of t)a.hasZ&&(i=!0),a.hasM&&(n=!0);const s={rings:t.map((a=>{const c=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(i&&a.hasZ){const d=a.zmin+.5*(a.zmax-a.zmin);for(let f=0;f<c.length;f++)c[f].push(d)}if(n&&a.hasM){const d=a.mmin+.5*(a.mmax-a.mmin);for(let f=0;f<c.length;f++)c[f].push(d)}return c})),spatialReference:r};return i&&(s.hasZ=!0),n&&(s.hasM=!0),new C_(s)}constructor(e){super(Bce(e)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const e=Ece(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Pe;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}writeCurveRings(e,t){t.curveRings=U(e)}get extent(){const e=PB(this),{spatialReference:t}=this;return e?new Xe({...e,spatialReference:t}):null}get isSelfIntersecting(){return gV(re.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),Boe(this.rings)}writeRings(e,t){t.rings=U(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(N6(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new C_;return e.spatialReference=this.spatialReference,e.rings=U(this.rings),e.curveRings=U(this.curveRings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;if(t!=null!=(r!=null)||t!=null&&r!=null&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([n,s,a,c],[d,f,g,v])=>n===d&&s===f&&(a==null&&g==null||a===g)&&(c==null&&v==null||c===v);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],a=e.rings[n];if(!oT(s,a,i))return!1}return!0}contains(e){if(!e)return!1;const t=ST(e,this.spatialReference);return sN(this,t??e)}isClockwise(e){const t=N6(e)?e.map((r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y])):e;return bB(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new Pe(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new Pe(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new Pe(r[0],r[1],r[2],r[3],this.spatialReference):new Pe(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Jm(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Pe(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map((n=>new Pe(n,r)));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(Jm(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([p({readOnly:!0})],er.prototype,"cache",null),u([p({readOnly:!0})],er.prototype,"centroid",null),u([p({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],er.prototype,"curveRings",void 0),u([de("curveRings")],er.prototype,"writeCurveRings",null),u([p({readOnly:!0})],er.prototype,"extent",null),u([p({readOnly:!0})],er.prototype,"isSelfIntersecting",null),u([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],er.prototype,"rings",void 0),u([de("rings")],er.prototype,"writeRings",null),er=C_=u([O("esri.geometry.Polygon")],er),er.prototype.toJSON.isDefaultToJSON=!0;function zc(){return[0,0,0]}function Hce(e){return[e[0],e[1],e[2]]}function Ty(e,t,r){return[e,t,r]}function Wce(e,t,r){return[e,t,r]}function Zce(e,t=zc()){const r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function DB(){return zc()}function kB(){return Ty(1,1,1)}function FB(){return Ty(1,0,0)}function UB(){return Ty(0,1,0)}function jB(){return Ty(0,0,1)}const Yce=DB(),Jce=kB(),Xce=FB(),Qce=UB(),Kce=jB();Object.freeze(Object.defineProperty({__proto__:null,ONES:Jce,UNIT_X:Xce,UNIT_Y:Qce,UNIT_Z:Kce,ZEROS:Yce,clone:Hce,create:zc,freeze:Wce,fromArray:Zce,fromValues:Ty,ones:kB,unitX:FB,unitY:UB,unitZ:jB,zeros:DB},Symbol.toStringTag,{value:"Module"}));var LA;function P6(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function ede(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Eo=LA=class extends yi{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return{};const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):ede(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=r.points?.[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Xe,r=this.hasZ,i=this.hasM,n=r?3:2,s=e[0],a=P6(Math.min),c=P6(Math.max);let d,f,g,v,[w,S]=s,[T,E]=s;for(let M=0,R=e.length;M<R;M++){const I=e[M],[k,j]=I;if(w=a(w,k),S=a(S,j),T=c(T,k),E=c(E,j),r&&I.length>2){const P=I[2];d=a(d,P),g=c(g,P)}if(i&&I.length>n){const P=I[n];f=a(f,P),v=c(v,P)}}return t.xmin=w,t.ymin=S,t.xmax=T,t.ymax=E,t.spatialReference=this.spatialReference,r?(t.zmin=d,t.zmax=g):(t.zmin=void 0,t.zmax=void 0),i?(t.mmin=f,t.mmax=v):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=U(this.points)}addPoint(e){return Jm(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:U(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new LA(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new Pe(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Pe(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Jm(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};u([p({readOnly:!0})],Eo.prototype,"cache",null),u([p()],Eo.prototype,"extent",null),u([p({type:[[Number]],json:{write:{isRequired:!0}}})],Eo.prototype,"points",void 0),u([de("points")],Eo.prototype,"writePoints",null),Eo=LA=u([O("esri.geometry.Multipoint")],Eo),Eo.prototype.toJSON.isDefaultToJSON=!0;var DA;function tde(e){return!Array.isArray(e[0])}function rde(e){return typeof e[0]?.[0]=="number"}function ide(e){if(!e)return;let{paths:t,hasM:r,hasZ:i,spatialReference:n}=e;switch(t??=[],rde(t)&&(t=[t]),t[0]?.[0]?.length){case 4:i??=!0,r??=!0;break;case 3:i??=r!==!0,r??=!i;break;default:i??=!1,r??=!1}return n??=Ee.WGS84,{...e,hasM:r,hasZ:i,paths:t,spatialReference:n}}let Gr=DA=class extends yi{constructor(e){super(ide(e)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(e,t){t.curvePaths=U(e)}get extent(){const e=LB(this),{spatialReference:t}=this;return e?new Xe({...e,spatialReference:t}):null}writePaths(e,t){t.paths=U(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(tde(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new DA;return e.spatialReference=this.spatialReference,e.paths=U(this.paths),e.curvePaths=U(this.curvePaths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new Pe(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new Pe(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new Pe(r[0],r[1],r[2],r[3],this.spatialReference):new Pe(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Jm(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map((n=>new Pe(n,r)));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Pe(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(Jm(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([p({readOnly:!0})],Gr.prototype,"cache",null),u([p({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Gr.prototype,"curvePaths",void 0),u([de("curvePaths")],Gr.prototype,"writeCurvePaths",null),u([p({readOnly:!0})],Gr.prototype,"extent",null),u([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],Gr.prototype,"paths",void 0),u([de("paths")],Gr.prototype,"writePaths",null),Gr=DA=u([O("esri.geometry.Polyline")],Gr),Gr.prototype.toJSON.isDefaultToJSON=!0;const RIe=Math.PI/180,CIe=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Du=dr.radius,ho=dr.eccentricitySquared,nde={a1:Du*ho,a2:Du*ho*Du*ho,a3:Du*ho*ho/2,a4:Du*ho*Du*ho*2.5,a5:Du*ho+Du*ho*ho/2,a6:1-ho},IIe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:dr.radius,f:dr.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Rc.radius,f:Rc.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Ta.radius,f:Ta.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Ta.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var q;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(q||(q={}));const sde={[q.WGS84]:{[q.CGCS2000]:Xt,[q.GCSMARS2000]:null,[q.GCSMOON2000]:null,[q.LON_LAT]:Xt,[q.SPHERICAL_ECEF]:wv,[q.SPHERICAL_MARS_PCPF]:null,[q.SPHERICAL_MOON_PCPF]:null,[q.UNKNOWN]:null,[q.WEB_MERCATOR]:nm,[q.PLATE_CARREE]:sm,[q.WGS84]:Xt,[q.WGS84_ECEF]:lm},[q.CGCS2000]:{[q.CGCS2000]:Xt,[q.GCSMARS2000]:null,[q.GCSMOON2000]:null,[q.LON_LAT]:Xt,[q.SPHERICAL_ECEF]:wv,[q.SPHERICAL_MARS_PCPF]:null,[q.SPHERICAL_MOON_PCPF]:null,[q.UNKNOWN]:null,[q.WEB_MERCATOR]:nm,[q.PLATE_CARREE]:sm,[q.WGS84]:Xt,[q.WGS84_ECEF]:lm},[q.GCSMARS2000]:{[q.CGCS2000]:null,[q.GCSMARS2000]:Xt,[q.GCSMOON2000]:null,[q.LON_LAT]:Xt,[q.SPHERICAL_ECEF]:null,[q.SPHERICAL_MARS_PCPF]:k6,[q.SPHERICAL_MOON_PCPF]:null,[q.UNKNOWN]:null,[q.WEB_MERCATOR]:null,[q.PLATE_CARREE]:null,[q.WGS84]:null,[q.WGS84_ECEF]:null},[q.GCSMOON2000]:{[q.CGCS2000]:null,[q.GCSMARS2000]:null,[q.GCSMOON2000]:Xt,[q.LON_LAT]:Xt,[q.SPHERICAL_ECEF]:null,[q.SPHERICAL_MARS_PCPF]:null,[q.SPHERICAL_MOON_PCPF]:D6,[q.UNKNOWN]:null,[q.WEB_MERCATOR]:null,[q.PLATE_CARREE]:null,[q.WGS84]:null,[q.WGS84_ECEF]:null},[q.WEB_MERCATOR]:{[q.CGCS2000]:bv,[q.GCSMARS2000]:null,[q.GCSMOON2000]:null,[q.LON_LAT]:bv,[q.SPHERICAL_ECEF]:ade,[q.SPHERICAL_MARS_PCPF]:null,[q.SPHERICAL_MOON_PCPF]:null,[q.UNKNOWN]:null,[q.WEB_MERCATOR]:Xt,[q.PLATE_CARREE]:cde,[q.WGS84]:bv,[q.WGS84_ECEF]:lde},[q.WGS84_ECEF]:{[q.CGCS2000]:um,[q.GCSMARS2000]:null,[q.GCSMOON2000]:null,[q.LON_LAT]:um,[q.SPHERICAL_ECEF]:bde,[q.SPHERICAL_MARS_PCPF]:null,[q.SPHERICAL_MOON_PCPF]:null,[q.UNKNOWN]:null,[q.WEB_MERCATOR]:wde,[q.PLATE_CARREE]:dde,[q.WGS84]:um,[q.WGS84_ECEF]:Xt},[q.SPHERICAL_ECEF]:{[q.CGCS2000]:am,[q.GCSMARS2000]:null,[q.GCSMOON2000]:null,[q.LON_LAT]:am,[q.SPHERICAL_ECEF]:Xt,[q.SPHERICAL_MARS_PCPF]:null,[q.SPHERICAL_MOON_PCPF]:null,[q.UNKNOWN]:null,[q.WEB_MERCATOR]:yde,[q.PLATE_CARREE]:hde,[q.WGS84]:am,[q.WGS84_ECEF]:gde},[q.SPHERICAL_MARS_PCPF]:{[q.CGCS2000]:null,[q.GCSMARS2000]:U6,[q.GCSMOON2000]:null,[q.LON_LAT]:U6,[q.SPHERICAL_ECEF]:null,[q.SPHERICAL_MARS_PCPF]:Xt,[q.SPHERICAL_MOON_PCPF]:null,[q.UNKNOWN]:null,[q.WEB_MERCATOR]:null,[q.PLATE_CARREE]:null,[q.WGS84]:null,[q.WGS84_ECEF]:null},[q.SPHERICAL_MOON_PCPF]:{[q.CGCS2000]:null,[q.GCSMARS2000]:null,[q.GCSMOON2000]:F6,[q.LON_LAT]:F6,[q.SPHERICAL_ECEF]:null,[q.SPHERICAL_MARS_PCPF]:null,[q.SPHERICAL_MOON_PCPF]:Xt,[q.UNKNOWN]:null,[q.WEB_MERCATOR]:null,[q.PLATE_CARREE]:null,[q.WGS84]:null,[q.WGS84_ECEF]:null},[q.UNKNOWN]:{[q.CGCS2000]:null,[q.GCSMARS2000]:null,[q.GCSMOON2000]:null,[q.LON_LAT]:null,[q.SPHERICAL_ECEF]:null,[q.SPHERICAL_MARS_PCPF]:null,[q.SPHERICAL_MOON_PCPF]:null,[q.UNKNOWN]:Xt,[q.WEB_MERCATOR]:null,[q.PLATE_CARREE]:null,[q.WGS84]:null,[q.WGS84_ECEF]:null},[q.LON_LAT]:{[q.CGCS2000]:Xt,[q.GCSMARS2000]:Xt,[q.GCSMOON2000]:Xt,[q.LON_LAT]:Xt,[q.SPHERICAL_ECEF]:wv,[q.SPHERICAL_MARS_PCPF]:k6,[q.SPHERICAL_MOON_PCPF]:D6,[q.UNKNOWN]:null,[q.WEB_MERCATOR]:nm,[q.PLATE_CARREE]:sm,[q.WGS84]:Xt,[q.WGS84_ECEF]:lm},[q.PLATE_CARREE]:{[q.CGCS2000]:om,[q.GCSMARS2000]:null,[q.GCSMOON2000]:null,[q.LON_LAT]:om,[q.SPHERICAL_ECEF]:pde,[q.SPHERICAL_MARS_PCPF]:null,[q.SPHERICAL_MOON_PCPF]:null,[q.UNKNOWN]:null,[q.WEB_MERCATOR]:fde,[q.PLATE_CARREE]:Xt,[q.WGS84]:om,[q.WGS84_ECEF]:mde}};function zB(e,t){return ode(e,t)?.projector}function ode(e,t){if(e==null||t==null)return null;if(Xa.source.spatialReference===e&&Xa.dest.spatialReference===t)return Xa;const r=L6(e,Xa.source),i=L6(t,Xa.dest);return r===q.UNKNOWN&&i===q.UNKNOWN?ni(e,t)?Xa.projector=Xt:Xa.projector=null:Xa.projector=sde[r][i],Xa}function L6(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Xs(e,1)),t2(e)?t.spatialReferenceId=q.SPHERICAL_ECEF:Ph(e)?t.spatialReferenceId=q.WGS84:Aa(e)?t.spatialReferenceId=q.WEB_MERCATOR:Qse(e)?t.spatialReferenceId=q.PLATE_CARREE:e.wkt===roe.wkt?t.spatialReferenceId=q.WGS84_ECEF:e.wkid===Nh.CGCS2000?t.spatialReferenceId=q.CGCS2000:e.wkt===rN.wkt?t.spatialReferenceId=q.SPHERICAL_MARS_PCPF:e.wkt===iN.wkt?t.spatialReferenceId=q.SPHERICAL_MOON_PCPF:vG(e)?t.spatialReferenceId=q.GCSMARS2000:bG(e)?t.spatialReferenceId=q.GCSMOON2000:t.spatialReferenceId=q.UNKNOWN):q.UNKNOWN}function Xt(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function bv(e,t,r,i){r[i]=Qm*(e[t]/gh),r[i+1]=Qm*(VB-2*Math.atan(Math.exp(-e[t+1]/gh))),r[i+2]=e[t+2]}function ade(e,t,r,i){const n=e[t]/gh,s=VB-2*Math.atan(Math.exp(-e[t+1]/gh)),a=gh+e[t+2],c=Math.cos(s)*a;r[i]=Math.cos(n)*c,r[i+1]=Math.sin(n)*c,r[i+2]=Math.sin(s)*a}function lde(e,t,r,i){bv(e,t,r,i),lm(r,i,r,i)}function ude(e,t,r,i,n){const s=.4999999*Math.PI,a=Ys(Xm*e[t+1],-s,s),c=Math.sin(a);r[i++]=Xm*e[t]*n.radius,r[i++]=n.halfSemiMajorAxis*Math.log((1+c)/(1-c)),r[i]=e[t+2]}function nm(e,t,r,i){ude(e,t,r,i,dr)}function sm(e,t,r,i){r[i]=e[t]*j6,r[i+1]=e[t+1]*j6,r[i+2]=e[t+2]}function om(e,t,r,i){r[i]=e[t]*z6,r[i+1]=e[t+1]*z6,r[i+2]=e[t+2]}function cde(e,t,r,i){bv(e,t,r,i),sm(r,i,r,i)}function dde(e,t,r,i){um(e,t,r,i),sm(r,i,r,i)}function hde(e,t,r,i){am(e,t,r,i),sm(r,i,r,i)}function pde(e,t,r,i){om(e,t,r,i),wv(r,i,r,i)}function fde(e,t,r,i){om(e,t,r,i),nm(r,i,r,i)}function mde(e,t,r,i){om(e,t,r,i),lm(r,i,r,i)}function RN(e,t,r,i,n){const s=n+e[t+2],a=Xm*e[t+1],c=Xm*e[t],d=Math.cos(a)*s;r[i]=Math.cos(c)*d,r[i+1]=Math.sin(c)*d,r[i+2]=Math.sin(a)*s}function D6(e,t,r,i){RN(e,t,r,i,Rc.radius)}function k6(e,t,r,i){RN(e,t,r,i,Ta.radius)}function wv(e,t,r,i){RN(e,t,r,i,dr.radius)}function CN(e,t,r,i,n){const s=e[t],a=e[t+1],c=e[t+2],d=Math.sqrt(s*s+a*a+c*c),f=que(c/(d===0?1:d)),g=Math.atan2(a,s);r[i++]=Qm*g,r[i++]=Qm*f,r[i]=d-n}function F6(e,t,r,i){CN(e,t,r,i,Rc.radius)}function U6(e,t,r,i){CN(e,t,r,i,Ta.radius)}function am(e,t,r,i){CN(e,t,r,i,dr.radius)}function yde(e,t,r,i){am(e,t,r,i),nm(r,i,r,i)}function gde(e,t,r,i){am(e,t,r,i),lm(r,i,r,i)}function vde(e,t,r,i,n){const s=Xm*e[t],a=Xm*e[t+1],c=e[t+2],d=Math.sin(a),f=Math.cos(a),g=n.radius/Math.sqrt(1-n.eccentricitySquared*d*d);r[i++]=(g+c)*f*Math.cos(s),r[i++]=(g+c)*f*Math.sin(s),r[i++]=(g*(1-n.eccentricitySquared)+c)*d}function lm(e,t,r,i){vde(e,t,r,i,dr)}function um(e,t,r,i){const n=nde,s=e[t],a=e[t+1],c=e[t+2];let d,f,g,v,w,S,T,E,M,R,I,k,j,P,X,ae,fe,he,me,Oe,Se;d=Math.abs(c),f=s*s+a*a,g=Math.sqrt(f),v=f+c*c,w=Math.sqrt(v),Oe=Math.atan2(a,s),S=c*c/v,T=f/v,P=n.a2/w,X=n.a3-n.a4/w,T>.3?(E=d/w*(1+T*(n.a1+P+S*X)/w),me=Math.asin(E),R=E*E,M=Math.sqrt(1-R)):(M=g/w*(1-S*(n.a5-P-T*X)/w),me=Math.acos(M),R=1-M*M,E=Math.sqrt(R)),I=1-dr.eccentricitySquared*R,k=dr.radius/Math.sqrt(I),j=n.a6*k,P=g-k*M,X=d-j*E,fe=M*P+E*X,ae=M*X-E*P,he=ae/(j/I+fe),me+=he,Se=fe+ae*he/2,c<0&&(me=-me),r[i++]=Qm*Oe,r[i++]=Qm*me,r[i]=Se}function bde(e,t,r,i){um(e,t,r,i),wv(r,i,r,i)}function wde(e,t,r,i){um(e,t,r,i),nm(r,i,r,i)}const Xa={source:{spatialReference:null,spatialReferenceId:q.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:q.UNKNOWN,metersPerUnit:1},projector:Xt},Xm=D1(1),Qm=lB(1),VB=.5*Math.PI,gh=dr.radius,j6=gh*Math.PI/180,z6=180/(gh*Math.PI);function k1(e,t,r,i,n,s,a=Math.floor(e.length/3)){const c=zB(t,n);if(c==null)return!1;if(c===Xt){if(e===i&&r===s)return!0;const f=r+3*a;for(let g=r,v=s;g<f;g++,v++)i[v]=e[g];return!0}const d=r+3*a;for(let f=r,g=s;f<d;f+=3,g+=3)c(e,f,i,g);return!0}const NIe=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:k1},Symbol.toStringTag,{value:"Module"}));function V6(e,t,r,i,n,s){return Ow[0]=e,Ow[1]=t,Ow[2]=r,k1(Ow,i,0,n,s,0)}const Ow=zc();let Rw=0,dM=class kA{static fromGE(t){const r=new kA;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}constructor(t){this.uid=Rw++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=Rw++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=Rw++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=Rw++}getInverse(){const t=new kA;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},p2=class T0{static cacheKey(t,r){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",r.wkid?.toString()??"-1",r.wkt?.toString()??"",r.wkt2?.toString()??""].join()}static fromGE(t){const r=new T0;let i="";for(const n of t.steps){const s=dM.fromGE(n);r.steps.push(s),i+=s.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=i,r}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t?.steps)for(const r of t.steps)r instanceof dM?this.steps.push(r):this.steps.push(new dM({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const t=new T0;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cachedProjection[T0.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const s of this.steps)i+=s.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const n=this._cachedProjection[T0.cacheKey(t,r)];return n===void 0?null:n}};function GB(e,t,r){if(t==null||r==null||r.vcsWkid||ni(t,r)||Cc(t)||Cc(r))return null;const i=r2(t)/r2(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>_de(n,i);case"polyline":case"esriGeometryPolyline":return n=>Tde(n,i);case"polygon":case"esriGeometryPolygon":return n=>Sde(n,i);case"multipoint":case"esriGeometryMultipoint":return n=>Ede(n,i);case"extent":case"esriGeometryEnvelope":return n=>xde(n,i);default:return null}}function _de(e,t){e?.z!=null&&(e.z*=t)}function Sde(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function Tde(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function Ede(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function xde(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let Fo=null,Pc=null,_v=null,I_={};const IN=new C1;function Vc(){return!!Fo&&eN()}function qB(){return!!Vc()||(Le(IN),Lc(),!1)}function BB(e,t){return!e||!t||Go(e,t)||qB()}function $de(e,t){return!Go(e,t)&&!Vc()}function Lc(e){return _v==null&&(_v=Promise.all([dG(),ue(()=>import("./geometryEngineBase-B9CjWDWD.js"),__vite__mapDeps([15,16])).then((t=>t.g)),ue(()=>import("./hydrated-H9xCE_pE.js"),[])])),_v.then((([,t,{hydratedAdapter:r}])=>{Yt(e),Pc=r,Fo=t.default,Fo._enableProjection(Zse),IN.notify()}))}function Gc(e,t,r=null,i=null){return Array.isArray(e)?e.length===0?[]:(Ooe(e),FA(Pc,e,e[0].spatialReference,t,r,i)):(Hm(e),FA(Pc,[e],e.spatialReference,t,r,i)[0])}function FA(e,t,r,i,n=null,s=null){if(r==null||i==null)return t;if(Go(r,i,n))return t.map((a=>N_(a,r,i)));if(n==null&&t2(r))return t.map((a=>N_(a,r,Ee.WGS84))).map((a=>e1(a,i)));if(n==null&&t2(i))return t.map((a=>e1(a,Ee.WGS84))).map((a=>N_(a,Ee.WGS84,i)));if(n==null){const a=p2.cacheKey(r,i);I_[a]!==void 0?n=I_[a]:((n=WB(r,i,void 0))==null&&(n=new p2),I_[a]=n)}if(Fo==null||e==null)throw new PT;return s!=null?Fo._project(e,t,r,i,n,s):Fo._project(e,t,r,i,n)}function Mde(e,t){const r=HB([e],t);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function HB(e,t){if(!Vc()){for(const r of e)if(r!=null&&!ni(r.spatialReference,t)&&ds(r.spatialReference)&&ds(t)&&!Go(r.spatialReference,t))return Le(IN),{pending:Lc(),geometries:null}}return{pending:null,geometries:e.map((r=>r==null?null:ni(r.spatialReference,t)?r:ds(r.spatialReference)&&ds(t)?e1(r,t):null))}}function WB(e,t,r=null){if(e==null||t==null)return null;if(Fo==null||Pc==null)throw new PT;const i=Fo._getTransformation(Pc,e,t,r,r?.spatialReference);return i!==null?p2.fromGE(i):null}function Ade(e,t,r=null){if(Fo==null||Pc==null)throw new PT;const i=Fo._getTransformationBySuitability(Pc,e,t,r,r?.spatialReference);if(i!==null){const n=[];for(const s of i)n.push(p2.fromGE(s));return n}return[]}let PT=class extends z{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function Ode(){Fo=null,Pc=null,_v=null,I_={}}const Rde={get loadPromise(){return _v}};function e1(e,t){try{const r=Gc(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const i=GB(r.type,e.spatialReference,t);return i?.(r),r}catch(r){if(!(r instanceof PT))throw r;return null}}async function ZB(e,t,r){const i=e.spatialReference;return i!=null&&t!=null&&await NN(i,t,null,r),e1(e,t)}function Go(e,t,r){return!r&&(!!ni(e,t)||ds(e)&&ds(t)&&!!zB(e,t))}function Cde(e,t){if(ni(e,t))return!0;if(!ds(e)||!ds(t))return!1;const r=Ph(e)||Aa(e)||I5(e),i=Ph(t)||Aa(t)||I5(t);return r&&i}async function NN(e,t,r,i){if(Vc())return Q4(i);if(Array.isArray(e)){for(const{source:n,dest:s,geographicTransformation:a}of e)if(n&&s&&!Go(n,s,a))return Lc(i)}else if(e&&t&&!Go(e,t,r))return Lc(i);return Q4(i)}function N_(e,t,r){return e?"x"in e?YB(e,t,new Pe,r,0):"xmin"in e?eH(e,t,new Xe,r,0):"rings"in e?KB(e,t,new er,r,0):"paths"in e?XB(e,t,new Gr,r,0):"points"in e?JB(e,t,new Eo,r,0):null:null}function Ide(e,t,r=t.spatialReference,i=0){return r!=null&&e.spatialReference!=null&&YB(e,e.spatialReference,t,r,i)!=null}function YB(e,t,r,i,n){ji[0]=e.x,ji[1]=e.y;const s=e.z;return ji[2]=s!==void 0?s:n,k1(ji,t,0,ji,i,0)?(r.x=ji[0],r.y=ji[1],r.spatialReference=i,s!==void 0||Cc(i)?(r.z=ji[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function Nde(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&JB(e,e.spatialReference,t,r,i)!=null}function JB(e,t,r,i,n){const{points:s,hasZ:a,hasM:c}=e,d=[],f=s.length,g=[];for(const w of s)g.push(w[0],w[1],a?w[2]:n);if(!k1(g,t,0,g,i,0,f))return null;const v=a||Cc(i);for(let w=0;w<f;++w){const S=3*w,T=g[S],E=g[S+1];v&&c?d.push([T,E,g[S+2],s[w][3]]):v?d.push([T,E,g[S+2]]):c?d.push([T,E,s[w][2]]):d.push([T,E])}return r.points=d,r.spatialReference=i,r.hasZ=a,r.hasM=c,r}function Pde(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&XB(e,e.spatialReference,t,r,i)!=null}function XB(e,t,r,i,n){const{paths:s,hasZ:a,hasM:c}=e,d=[];if(!tH(s,a??!1,c??!1,t,d,i,n))return null;const f=a||Cc(i);return r.paths=d,r.spatialReference=i,r.hasZ=f,r.hasM=c,r}function QB(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&KB(e,e.spatialReference,t,r,i)!=null}function KB(e,t,r,i,n){const{rings:s,hasZ:a,hasM:c}=e,d=[];if(!tH(s,a??!1,c??!1,t,d,i,n))return null;const f=a||Cc(i);return r.rings=d,r.spatialReference=i,r.hasZ=f,r.hasM=c,r}function Lde(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&eH(e,e.spatialReference,t,r,i)!=null}function eH(e,t,r,i,n){const{xmin:s,ymin:a,xmax:c,ymax:d,hasZ:f,hasM:g}=e,v=f?e.zmin:n;if(!V6(s,a,v,t,ji,i))return null;const w=f||Cc(i);r.xmin=ji[0],r.ymin=ji[1],w&&(r.zmin=ji[2]);const S=f?e.zmax:n;return V6(c,d,S,t,ji,i)?(r.xmax=ji[0],r.ymax=ji[1],w&&(r.zmax=ji[2]),g&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null}function tH(e,t,r,i,n,s,a=0){const c=new Array;for(const g of e)for(const v of g)c.push(v[0],v[1],t?v[2]:a);if(!k1(c,i,0,c,s,0))return!1;let d=0;n.length=0;const f=t||Cc(s);for(const g of e){const v=new Array;for(const w of g)f&&r?v.push([c[d++],c[d++],c[d++],w[3]]):f?v.push([c[d++],c[d++],c[d++]]):r?(v.push([c[d++],c[d++],w[2]]),d++):(v.push([c[d++],c[d++]]),d++);n.push(v)}return!0}const ji=zc(),LIe=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Go,getTransformation:WB,getTransformations:Ade,initializeProjection:NN,isEqualBaseGCS:Cde,isLoaded:Vc,isLoadedOrLoad:qB,isLoadedOrLoadFor:BB,load:Lc,project:Gc,projectExtent:Lde,projectMany:FA,projectMultipoint:Nde,projectOrLoad:Mde,projectOrLoadMany:HB,projectPoint:Ide,projectPolygon:QB,projectPolyline:Pde,projectWithZConversion:ZB,projectWithoutEngine:N_,requiresLoad:$de,test:Rde,tryProjectWithZConversion:e1,unload:Ode},Symbol.toStringTag,{value:"Module"}));var P_;let UA=P_=class extends K.JSONSupportMixin(ge.ofType(er)){constructor(e){super(e)}clone(){return new P_(this.items.map((e=>e.clone())))}write(e,t){return this.toJSON(t)}toJSON(e){const t=e?.layer?.spatialReference;return t?this.toArray().map((r=>{if(!t.equals(r.spatialReference)){if(!Go(r.spatialReference,t))return e?.messages?.push(new gs("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:e.layer.spatialReference,context:e})),null;const n=new er;QB(r,n,t),r=n}const i=r.toJSON(e);return delete i.spatialReference,i})).filter((r=>r!=null)):this.toArray().map((r=>r.toJSON(e)))}static fromJSON(e,t){const r=new P_;return e.forEach((i=>r.add(er.fromJSON(i,t)))),r}};UA=P_=u([O("esri.layers.support.PolygonCollection")],UA);const Sv=UA;let ul=class extends K.JSONSupportMixin(We){constructor(t){super(t),this.id=`focusarea-${Sy()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new Sv}readGeometries(t,r,i){Array.isArray(t)?this.geometries=Sv.fromJSON(t,i):i.hooks?.onAfterLoad?.((()=>this._loadGeometries(Yh(t,i),i)))}async _loadGeometries(t,r){const i=await Ft(t,{responseType:"json"});this.geometries=Sv.fromJSON(i.data,r)}};u([p({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),p()],ul.prototype,"id",void 0),u([p({type:String,json:{write:!0}})],ul.prototype,"title",void 0),u([p({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],ul.prototype,"enabled",void 0),u([p({type:yce,json:{write:!0}})],ul.prototype,"outline",void 0),u([p({type:Sv,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:e=>new Sv(e.items.map((t=>t.clone())))}),uce({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],ul.prototype,"geometries",void 0),u([le(["web-scene","portal-item"],"geometries")],ul.prototype,"readGeometries",null),ul=u([O("esri.effects.FocusArea")],ul);const Dde=ul;let E0=class extends K.JSONSupportMixin(We){constructor(t){super(t),this.areas=new ge,this.style="bright"}};u([p({type:ge.ofType(Dde),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:e=>new ge(e.items.map((t=>t.clone())))})],E0.prototype,"areas",void 0),u([p({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],E0.prototype,"style",void 0),E0=u([O("esri.effects.FocusAreas")],E0);const rH=E0;function kde(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function Fde(e){return!(!kde(e)||!Aue(e)?.operations?.supportsEditing||"editingEnabled"in e&&!Rue(e)||Qq(e))}const Ude=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,jde="screenUtils.toPt: input not recognized!",iH=96;function zde(e){return e?e/72*iH:0}function Js(e){return e?72*e/iH:0}function ut(e){if(typeof e=="string"){const t=e.match(Ude);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",s=i==="px"?Js(r):r;return n?-s:s}return console.warn(jde),null}return e}function bi(e=0,t=0){return{x:e,y:t}}function FIe(e){return e?bi(e.x,e.y):null}function UIe(e=0,t=0){return[e,t]}function jIe(e=0,t=0,r=0){return[e,t,r]}function zIe(e){return e}function VIe(e){return e}function GIe(e){return e}function qIe(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function LT(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Vde(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Gde(e,t,r,i,n,s,a,c,d,f,g,v,w,S,T,E){const M=new Float32Array(16);return M[0]=e,M[1]=t,M[2]=r,M[3]=i,M[4]=n,M[5]=s,M[6]=a,M[7]=c,M[8]=d,M[9]=f,M[10]=g,M[11]=v,M[12]=w,M[13]=S,M[14]=T,M[15]=E,M}const qde=LT();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:qde,clone:Vde,create:LT,fromValues:Gde},Symbol.toStringTag,{value:"Module"}));let PN=1e-6;function mn(){return PN}function Bde(e){PN=e}const DT=Math.random,Hde=Math.PI/180,Wde=180/Math.PI;function LN(e){return e*Hde}function Zde(e){return e*Wde}function Yde(e,t){return Math.abs(e-t)<=PN*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:DT,equals:Yde,getEpsilon:mn,setEpsilon:Bde,toDegree:Zde,toRadian:LN},Symbol.toStringTag,{value:"Module"}));function nH(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function qc(e,t,r,i,n,s,a,c,d,f,g,v,w,S,T,E,M){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=a,e[6]=c,e[7]=d,e[8]=f,e[9]=g,e[10]=v,e[11]=w,e[12]=S,e[13]=T,e[14]=E,e[15]=M,e}function kT(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Bc(e,t){if(e===t){const r=t[1],i=t[2],n=t[3],s=t[6],a=t[7],c=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=n,e[13]=a,e[14]=c}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Jde(e,t){return sH(e,t)||kT(e),e}function sH(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],a=t[4],c=t[5],d=t[6],f=t[7],g=t[8],v=t[9],w=t[10],S=t[11],T=t[12],E=t[13],M=t[14],R=t[15],I=r*c-i*a,k=r*d-n*a,j=r*f-s*a,P=i*d-n*c,X=i*f-s*c,ae=n*f-s*d,fe=g*E-v*T,he=g*M-w*T,me=g*R-S*T,Oe=v*M-w*E,Se=v*R-S*E,ft=w*R-S*M;let Ue=I*ft-k*Se+j*Oe+P*me-X*he+ae*fe;return Ue?(Ue=1/Ue,e[0]=(c*ft-d*Se+f*Oe)*Ue,e[1]=(n*Se-i*ft-s*Oe)*Ue,e[2]=(E*ae-M*X+R*P)*Ue,e[3]=(w*X-v*ae-S*P)*Ue,e[4]=(d*me-a*ft-f*he)*Ue,e[5]=(r*ft-n*me+s*he)*Ue,e[6]=(M*j-T*ae-R*k)*Ue,e[7]=(g*ae-w*j+S*k)*Ue,e[8]=(a*Se-c*me+f*fe)*Ue,e[9]=(i*me-r*Se-s*fe)*Ue,e[10]=(T*X-E*j+R*I)*Ue,e[11]=(v*j-g*X-S*I)*Ue,e[12]=(c*he-a*Oe-d*fe)*Ue,e[13]=(r*Oe-i*he+n*fe)*Ue,e[14]=(E*k-T*P-M*I)*Ue,e[15]=(g*P-v*k+w*I)*Ue,e):null}function Xde(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],a=t[4],c=t[5],d=t[6],f=t[7],g=t[8],v=t[9],w=t[10],S=t[11],T=t[12],E=t[13],M=t[14],R=t[15];return e[0]=c*(w*R-S*M)-v*(d*R-f*M)+E*(d*S-f*w),e[1]=-(i*(w*R-S*M)-v*(n*R-s*M)+E*(n*S-s*w)),e[2]=i*(d*R-f*M)-c*(n*R-s*M)+E*(n*f-s*d),e[3]=-(i*(d*S-f*w)-c*(n*S-s*w)+v*(n*f-s*d)),e[4]=-(a*(w*R-S*M)-g*(d*R-f*M)+T*(d*S-f*w)),e[5]=r*(w*R-S*M)-g*(n*R-s*M)+T*(n*S-s*w),e[6]=-(r*(d*R-f*M)-a*(n*R-s*M)+T*(n*f-s*d)),e[7]=r*(d*S-f*w)-a*(n*S-s*w)+g*(n*f-s*d),e[8]=a*(v*R-S*E)-g*(c*R-f*E)+T*(c*S-f*v),e[9]=-(r*(v*R-S*E)-g*(i*R-s*E)+T*(i*S-s*v)),e[10]=r*(c*R-f*E)-a*(i*R-s*E)+T*(i*f-s*c),e[11]=-(r*(c*S-f*v)-a*(i*S-s*v)+g*(i*f-s*c)),e[12]=-(a*(v*M-w*E)-g*(c*M-d*E)+T*(c*w-d*v)),e[13]=r*(v*M-w*E)-g*(i*M-n*E)+T*(i*w-n*v),e[14]=-(r*(c*M-d*E)-a*(i*M-n*E)+T*(i*d-n*c)),e[15]=r*(c*w-d*v)-a*(i*w-n*v)+g*(i*d-n*c),e}function Qde(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],a=e[5],c=e[6],d=e[7],f=e[8],g=e[9],v=e[10],w=e[11],S=e[12],T=e[13],E=e[14],M=e[15];return(t*a-r*s)*(v*M-w*E)-(t*c-i*s)*(g*M-w*T)+(t*d-n*s)*(g*E-v*T)+(r*c-i*a)*(f*M-w*S)-(r*d-n*a)*(f*E-v*S)+(i*d-n*c)*(f*T-g*S)}function oH(e,t,r){const i=t[0],n=t[1],s=t[2],a=t[3],c=t[4],d=t[5],f=t[6],g=t[7],v=t[8],w=t[9],S=t[10],T=t[11],E=t[12],M=t[13],R=t[14],I=t[15];let k=r[0],j=r[1],P=r[2],X=r[3];return e[0]=k*i+j*c+P*v+X*E,e[1]=k*n+j*d+P*w+X*M,e[2]=k*s+j*f+P*S+X*R,e[3]=k*a+j*g+P*T+X*I,k=r[4],j=r[5],P=r[6],X=r[7],e[4]=k*i+j*c+P*v+X*E,e[5]=k*n+j*d+P*w+X*M,e[6]=k*s+j*f+P*S+X*R,e[7]=k*a+j*g+P*T+X*I,k=r[8],j=r[9],P=r[10],X=r[11],e[8]=k*i+j*c+P*v+X*E,e[9]=k*n+j*d+P*w+X*M,e[10]=k*s+j*f+P*S+X*R,e[11]=k*a+j*g+P*T+X*I,k=r[12],j=r[13],P=r[14],X=r[15],e[12]=k*i+j*c+P*v+X*E,e[13]=k*n+j*d+P*w+X*M,e[14]=k*s+j*f+P*S+X*R,e[15]=k*a+j*g+P*T+X*I,e}function Kde(e,t,r){const i=r[0],n=r[1],s=r[2];if(t===e)e[12]=t[0]*i+t[4]*n+t[8]*s+t[12],e[13]=t[1]*i+t[5]*n+t[9]*s+t[13],e[14]=t[2]*i+t[6]*n+t[10]*s+t[14],e[15]=t[3]*i+t[7]*n+t[11]*s+t[15];else{const a=t[0],c=t[1],d=t[2],f=t[3],g=t[4],v=t[5],w=t[6],S=t[7],T=t[8],E=t[9],M=t[10],R=t[11];e[0]=a,e[1]=c,e[2]=d,e[3]=f,e[4]=g,e[5]=v,e[6]=w,e[7]=S,e[8]=T,e[9]=E,e[10]=M,e[11]=R,e[12]=a*i+g*n+T*s+t[12],e[13]=c*i+v*n+E*s+t[13],e[14]=d*i+w*n+M*s+t[14],e[15]=f*i+S*n+R*s+t[15]}return e}function ehe(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function the(e,t,r,i){let n=i[0],s=i[1],a=i[2],c=Math.sqrt(n*n+s*s+a*a);if(c<=mn())return void nH(e,t);c=1/c,n*=c,s*=c,a*=c;const d=Math.sin(r),f=Math.cos(r),g=1-f,v=t[0],w=t[1],S=t[2],T=t[3],E=t[4],M=t[5],R=t[6],I=t[7],k=t[8],j=t[9],P=t[10],X=t[11],ae=n*n*g+f,fe=s*n*g+a*d,he=a*n*g-s*d,me=n*s*g-a*d,Oe=s*s*g+f,Se=a*s*g+n*d,ft=n*a*g+s*d,Ue=s*a*g-n*d,mt=a*a*g+f;e[0]=v*ae+E*fe+k*he,e[1]=w*ae+M*fe+j*he,e[2]=S*ae+R*fe+P*he,e[3]=T*ae+I*fe+X*he,e[4]=v*me+E*Oe+k*Se,e[5]=w*me+M*Oe+j*Se,e[6]=S*me+R*Oe+P*Se,e[7]=T*me+I*Oe+X*Se,e[8]=v*ft+E*Ue+k*mt,e[9]=w*ft+M*Ue+j*mt,e[10]=S*ft+R*Ue+P*mt,e[11]=T*ft+I*Ue+X*mt,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function rhe(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[4],a=t[5],c=t[6],d=t[7],f=t[8],g=t[9],v=t[10],w=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*n+f*i,e[5]=a*n+g*i,e[6]=c*n+v*i,e[7]=d*n+w*i,e[8]=f*n-s*i,e[9]=g*n-a*i,e[10]=v*n-c*i,e[11]=w*n-d*i,e}function ihe(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],a=t[1],c=t[2],d=t[3],f=t[8],g=t[9],v=t[10],w=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n-f*i,e[1]=a*n-g*i,e[2]=c*n-v*i,e[3]=d*n-w*i,e[8]=s*i+f*n,e[9]=a*i+g*n,e[10]=c*i+v*n,e[11]=d*i+w*n,e}function nhe(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],a=t[1],c=t[2],d=t[3],f=t[4],g=t[5],v=t[6],w=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n+f*i,e[1]=a*n+g*i,e[2]=c*n+v*i,e[3]=d*n+w*i,e[4]=f*n-s*i,e[5]=g*n-a*i,e[6]=v*n-c*i,e[7]=w*n-d*i,e}function she(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function ohe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ahe(e,t,r){if(t===0)return kT(e);let i=r[0],n=r[1],s=r[2],a=Math.sqrt(i*i+n*n+s*s);if(a<=mn())return null;a=1/a,i*=a,n*=a,s*=a;const c=Math.sin(t),d=Math.cos(t),f=1-d;return e[0]=i*i*f+d,e[1]=n*i*f+s*c,e[2]=s*i*f-n*c,e[3]=0,e[4]=i*n*f-s*c,e[5]=n*n*f+d,e[6]=s*n*f+i*c,e[7]=0,e[8]=i*s*f+n*c,e[9]=n*s*f-i*c,e[10]=s*s*f+d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function lhe(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function uhe(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function che(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function aH(e,t,r){const i=t[0],n=t[1],s=t[2],a=t[3],c=i+i,d=n+n,f=s+s,g=i*c,v=i*d,w=i*f,S=n*d,T=n*f,E=s*f,M=a*c,R=a*d,I=a*f;return e[0]=1-(S+E),e[1]=v+I,e[2]=w-R,e[3]=0,e[4]=v-I,e[5]=1-(g+E),e[6]=T+M,e[7]=0,e[8]=w+R,e[9]=T-M,e[10]=1-(g+S),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function dhe(e,t){const r=hhe,i=-t[0],n=-t[1],s=-t[2],a=t[3],c=t[4],d=t[5],f=t[6],g=t[7],v=i*i+n*n+s*s+a*a;return v>0?(r[0]=2*(c*a+g*i+d*s-f*n)/v,r[1]=2*(d*a+g*n+f*i-c*s)/v,r[2]=2*(f*a+g*s+c*n-d*i)/v):(r[0]=2*(c*a+g*i+d*s-f*n),r[1]=2*(d*a+g*n+f*i-c*s),r[2]=2*(f*a+g*s+c*n-d*i)),aH(e,t,r),e}const hhe=zc();function phe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function fhe(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],a=t[5],c=t[6],d=t[8],f=t[9],g=t[10];return e[0]=Math.sqrt(r*r+i*i+n*n),e[1]=Math.sqrt(s*s+a*a+c*c),e[2]=Math.sqrt(d*d+f*f+g*g),e}function mhe(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function yhe(e,t,r,i){const n=t[0],s=t[1],a=t[2],c=t[3],d=n+n,f=s+s,g=a+a,v=n*d,w=n*f,S=n*g,T=s*f,E=s*g,M=a*g,R=c*d,I=c*f,k=c*g,j=i[0],P=i[1],X=i[2];return e[0]=(1-(T+M))*j,e[1]=(w+k)*j,e[2]=(S-I)*j,e[3]=0,e[4]=(w-k)*P,e[5]=(1-(v+M))*P,e[6]=(E+R)*P,e[7]=0,e[8]=(S+I)*X,e[9]=(E-R)*X,e[10]=(1-(v+T))*X,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function ghe(e,t,r,i,n){const s=t[0],a=t[1],c=t[2],d=t[3],f=s+s,g=a+a,v=c+c,w=s*f,S=s*g,T=s*v,E=a*g,M=a*v,R=c*v,I=d*f,k=d*g,j=d*v,P=i[0],X=i[1],ae=i[2],fe=n[0],he=n[1],me=n[2],Oe=(1-(E+R))*P,Se=(S+j)*P,ft=(T-k)*P,Ue=(S-j)*X,mt=(1-(w+R))*X,Q=(M+I)*X,pe=(T+k)*ae,ye=(M-I)*ae,rt=(1-(w+E))*ae;return e[0]=Oe,e[1]=Se,e[2]=ft,e[3]=0,e[4]=Ue,e[5]=mt,e[6]=Q,e[7]=0,e[8]=pe,e[9]=ye,e[10]=rt,e[11]=0,e[12]=r[0]+fe-(Oe*fe+Ue*he+pe*me),e[13]=r[1]+he-(Se*fe+mt*he+ye*me),e[14]=r[2]+me-(ft*fe+Q*he+rt*me),e[15]=1,e}function vhe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],a=r+r,c=i+i,d=n+n,f=r*a,g=i*a,v=i*c,w=n*a,S=n*c,T=n*d,E=s*a,M=s*c,R=s*d;return e[0]=1-v-T,e[1]=g+R,e[2]=w-M,e[3]=0,e[4]=g-R,e[5]=1-f-T,e[6]=S+E,e[7]=0,e[8]=w+M,e[9]=S-E,e[10]=1-f-v,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function bhe(e,t,r,i,n,s,a){const c=1/(r-t),d=1/(n-i),f=1/(s-a);return e[0]=2*s*c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*d,e[6]=0,e[7]=0,e[8]=(r+t)*c,e[9]=(n+i)*d,e[10]=(a+s)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*s*2*f,e[15]=0,e}function whe(e,t,r,i,n){const s=1/Math.tan(t/2);let a;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(a=1/(i-n),e[10]=(n+i)*a,e[14]=2*n*i*a):(e[10]=-1,e[14]=-2*i),e}function _he(e,t,r,i){const n=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),c=Math.tan(t.rightDegrees*Math.PI/180),d=2/(a+c),f=2/(n+s);return e[0]=d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=-(a-c)*d*.5,e[9]=(n-s)*f*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function She(e,t,r,i,n,s,a){const c=1/(t-r),d=1/(i-n),f=1/(s-a);return e[0]=-2*c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(t+r)*c,e[13]=(n+i)*d,e[14]=(a+s)*f,e[15]=1,e}function The(e,t,r,i){const n=t[0],s=t[1],a=t[2];let c=n-r[0],d=s-r[1],f=a-r[2];const g=mn();if(Math.abs(c)<g&&Math.abs(d)<g&&Math.abs(f)<g)return void kT(e);let v=1/Math.sqrt(c*c+d*d+f*f);c*=v,d*=v,f*=v;const w=i[0],S=i[1],T=i[2];let E=S*f-T*d,M=T*c-w*f,R=w*d-S*c;v=Math.sqrt(E*E+M*M+R*R),v?(v=1/v,E*=v,M*=v,R*=v):(E=0,M=0,R=0);let I=d*R-f*M,k=f*E-c*R,j=c*M-d*E;v=Math.sqrt(I*I+k*k+j*j),v?(v=1/v,I*=v,k*=v,j*=v):(I=0,k=0,j=0),e[0]=E,e[1]=I,e[2]=c,e[3]=0,e[4]=M,e[5]=k,e[6]=d,e[7]=0,e[8]=R,e[9]=j,e[10]=f,e[11]=0,e[12]=-(E*n+M*s+R*a),e[13]=-(I*n+k*s+j*a),e[14]=-(c*n+d*s+f*a),e[15]=1}function Ehe(e,t,r,i){const n=t[0],s=t[1],a=t[2],c=i[0],d=i[1],f=i[2];let g=n-r[0],v=s-r[1],w=a-r[2],S=g*g+v*v+w*w;S>0&&(S=1/Math.sqrt(S),g*=S,v*=S,w*=S);let T=d*w-f*v,E=f*g-c*w,M=c*v-d*g;return S=T*T+E*E+M*M,S>0&&(S=1/Math.sqrt(S),T*=S,E*=S,M*=S),e[0]=T,e[1]=E,e[2]=M,e[3]=0,e[4]=v*M-w*E,e[5]=w*T-g*M,e[6]=g*E-v*T,e[7]=0,e[8]=g,e[9]=v,e[10]=w,e[11]=0,e[12]=n,e[13]=s,e[14]=a,e[15]=1,e}function xhe(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function $he(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function Mhe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function lH(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function Ahe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function Ohe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function Rhe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Che(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=e[3],a=e[4],c=e[5],d=e[6],f=e[7],g=e[8],v=e[9],w=e[10],S=e[11],T=e[12],E=e[13],M=e[14],R=e[15],I=t[0],k=t[1],j=t[2],P=t[3],X=t[4],ae=t[5],fe=t[6],he=t[7],me=t[8],Oe=t[9],Se=t[10],ft=t[11],Ue=t[12],mt=t[13],Q=t[14],pe=t[15],ye=mn();return Math.abs(r-I)<=ye*Math.max(1,Math.abs(r),Math.abs(I))&&Math.abs(i-k)<=ye*Math.max(1,Math.abs(i),Math.abs(k))&&Math.abs(n-j)<=ye*Math.max(1,Math.abs(n),Math.abs(j))&&Math.abs(s-P)<=ye*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(a-X)<=ye*Math.max(1,Math.abs(a),Math.abs(X))&&Math.abs(c-ae)<=ye*Math.max(1,Math.abs(c),Math.abs(ae))&&Math.abs(d-fe)<=ye*Math.max(1,Math.abs(d),Math.abs(fe))&&Math.abs(f-he)<=ye*Math.max(1,Math.abs(f),Math.abs(he))&&Math.abs(g-me)<=ye*Math.max(1,Math.abs(g),Math.abs(me))&&Math.abs(v-Oe)<=ye*Math.max(1,Math.abs(v),Math.abs(Oe))&&Math.abs(w-Se)<=ye*Math.max(1,Math.abs(w),Math.abs(Se))&&Math.abs(S-ft)<=ye*Math.max(1,Math.abs(S),Math.abs(ft))&&Math.abs(T-Ue)<=ye*Math.max(1,Math.abs(T),Math.abs(Ue))&&Math.abs(E-mt)<=ye*Math.max(1,Math.abs(E),Math.abs(mt))&&Math.abs(M-Q)<=ye*Math.max(1,Math.abs(M),Math.abs(Q))&&Math.abs(R-pe)<=ye*Math.max(1,Math.abs(R),Math.abs(pe))}function Ihe(e){const t=mn(),r=e[0],i=e[1],n=e[2],s=e[4],a=e[5],c=e[6],d=e[8],f=e[9],g=e[10];return Math.abs(1-(r*r+s*s+d*d))<=t&&Math.abs(1-(i*i+a*a+f*f))<=t&&Math.abs(1-(n*n+c*c+g*g))<=t}function Nhe(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const Phe=oH,Lhe=lH;Object.freeze(Object.defineProperty({__proto__:null,add:Mhe,adjoint:Xde,copy:nH,determinant:Qde,equals:Che,exactEquals:Rhe,frob:$he,fromQuat:vhe,fromQuat2:dhe,fromRotation:ahe,fromRotationTranslation:aH,fromRotationTranslationScale:yhe,fromRotationTranslationScaleOrigin:ghe,fromScaling:ohe,fromTranslation:she,fromXRotation:lhe,fromYRotation:uhe,fromZRotation:che,frustum:bhe,getRotation:mhe,getScale:fhe,getTranslation:phe,hasIdentityRotation:Nhe,identity:kT,invert:sH,invertOrIdentity:Jde,isOrthoNormal:Ihe,lookAt:The,mul:Phe,multiply:oH,multiplyScalar:Ahe,multiplyScalarAndAdd:Ohe,ortho:She,perspective:whe,perspectiveFromFieldOfView:_he,rotate:the,rotateX:rhe,rotateY:ihe,rotateZ:nhe,scale:ehe,set:qc,str:xhe,sub:Lhe,subtract:lH,targetTo:Ehe,translate:Kde,transpose:Bc},Symbol.toStringTag,{value:"Module"}));const Dhe=(e,t)=>{const r=qc(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Bc(r,r)},khe=(e,t)=>{const r=qc(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Bc(r,r)},Fhe=(e,t)=>{const r=1-t,i=qc(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return Bc(i,i)},Uhe=(e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),n=qc(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return Bc(n,n)},jhe=(e,t)=>{const r=1-2*t,i=qc(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return Bc(i,i)},zhe=(e,t)=>{const r=qc(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Bc(r,r)},Vhe=(e,t)=>{const r=1-t,i=qc(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return Bc(i,i)};let uH=class cH{constructor(t,r,i){this.strength=t,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(t,r,i){this.strength=Dn(t.strength,r.strength,i),this.radius=Dn(t.radius,r.radius,i),this.threshold=Dn(t.threshold,r.threshold,i)}clone(){return new cH(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Tv(this.radius),strength:this.strength,threshold:this.threshold}}},dH=class hH{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,i){this.radius=Math.round(Dn(t.radius,r.radius,i))}clone(){return new hH(this.radius)}toJSON(){return{type:"blur",radius:Tv(this.radius)}}},jA=class pH{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.amount=Dn(t.amount,r.amount,i),this._updateMatrix()}clone(){return new pH(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||LT();switch(this.type){case"brightness":this._colorMatrix=Dhe(t,this.amount);break;case"contrast":this._colorMatrix=khe(t,this.amount);break;case"grayscale":this._colorMatrix=Fhe(t,this.amount);break;case"invert":this._colorMatrix=jhe(t,this.amount);break;case"saturate":this._colorMatrix=zhe(t,this.amount);break;case"sepia":this._colorMatrix=Vhe(t,this.amount)}}},fH=class mH{constructor(t,r,i,n){this.offsetX=t,this.offsetY=r,this.blurRadius=i,this.color=n,this.type="drop-shadow"}interpolate(t,r,i){this.offsetX=Dn(t.offsetX,r.offsetX,i),this.offsetY=Dn(t.offsetY,r.offsetY,i),this.blurRadius=Dn(t.blurRadius,r.blurRadius,i),this.color[0]=Math.round(Dn(t.color[0],r.color[0],i)),this.color[1]=Math.round(Dn(t.color[1],r.color[1],i)),this.color[2]=Math.round(Dn(t.color[2],r.color[2],i)),this.color[3]=Dn(t.color[3],r.color[3],i)}clone(){return new mH(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:Tv(this.offsetX),yoffset:Tv(this.offsetY),blurRadius:Tv(this.blurRadius),color:t}}},yH=class gH{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.angle=Dn(t.angle,r.angle,i),this._updateMatrix()}clone(){return new gH(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||LT();this._colorMatrix=Uhe(t,this.angle)}},vH=class bH{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,i){this.amount=Dn(t.amount,r.amount,i)}clone(){return new bH(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Dn(e,t,r){return e+(t-e)*r}function Tv(e){return Math.round(1e3*Js(e))/1e3}function Ghe(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new jA(e.type,0);case"saturate":case"brightness":case"contrast":return new jA(e.type,1);case"opacity":return new vH(1);case"hue-rotate":return new yH(0);case"blur":return new dH(0);case"drop-shadow":return new fH(0,0,0,[...SN("transparent")]);case"bloom":return new uH(0,0,1)}}function qhe(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every(((i,n)=>i.type===r[n].type))}function Bhe(e,t){const r=e.length>t.length?e:t,i=e.length>t.length?t:e;for(let n=i.length;n<r.length;n++)i.push(Ghe(r[n]))}function Hhe(e){const t=e[0];return!!t&&"type"in t}const hM=()=>re.getLogger("esri.support.basemapUtils");function Whe(){return{}}function Zhe(e){for(const t in e){const r=e[t];rr(r),delete e[t]}}function Yhe(e,t){let r;if(typeof e=="string"){const i=e in dA,n=!i&&e.includes("/");if(!i&&!n){if(C3())hM().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(dA).filter((([a,c])=>c.classic||c.is3d)).map((([a])=>`"${a}"`)).sort().join(", ");hM().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${s}`)}return null}t&&(r=t[e]),r||(r=i?vv.fromId(e):new vv({style:{id:e}}),t&&(t[e]=r))}else r=Br(vv,e);return r?.destroyed&&(hM().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function Jhe(e){return new ba({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return!!r&&"tables"in r&&r.tables.includes(t)}})}function pM(e){for(const t of e.values())t?.destroy();e.clear()}const G6={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Xhe(e){let t=null;if(typeof e=="string")if(e in G6){const r=G6[e];t=new d2({resourceInfo:{data:{layers:[r]}}})}else re.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Br(d2,e);return t}let wH=0;const _H=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+wH++})}};return t=u([O("esri.core.Identifiable")],t),t},Qhe=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:wH++})}};return t=u([O("esri.core.Identifiable.NumericIdentifiable")],t),t};let x0=class extends _H(class{}){};x0=u([O("esri.core.Identifiable")],x0),(function(e){e.IdentifiableMixin=_H,e.NumericIdentifiableMixin=Qhe})(x0||(x0={}));const F1=x0;async function Khe(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await ue(async()=>{const{fromItem:i}=await import("./portalLayers-Q0YGjGE0.js");return{fromItem:i}},__vite__mapDeps([14,12,11,10,13]));try{return await r(t)}catch(i){const n=t?.portalItem,s=n?.id||"unset",a=n?.portal?.url||ct.portalUrl;throw re.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+s+"')",i),i}}const q6={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function fM(e,t,r,i=zo){const n=new zn(vN(i)),s=_e.fromJSDate(e,{zone:n}),a=r==="decades"||r==="centuries"?"year":TH(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),s.plus({[a]:t}).toJSDate()}function HIe(e,t,r="milliseconds"){const i=e.getTime(),n=SH(t,r,"milliseconds");return new Date(i+n)}function B6(e,t,r=zo){const i=new zn(vN(r)),n=_e.fromJSDate(e,{zone:i});if(t==="decades"||t==="centuries"){const a=n.startOf("year"),{year:c}=a,d=c-c%(t==="decades"?10:100);return a.set({year:d}).toJSDate()}const s=TH(t);return n.startOf(s).toJSDate()}function SH(e,t,r){return e===0?0:e*q6[t]/q6[r]}function WIe(e,t){return e&&t?e.intersection(t):e||t}function TH(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Os,pm;let Lr=(pm=class extends K{static get allTime(){return H6}static get empty(){return epe}static fromArray(t){return new Os({start:t[0]!=null?new Date(t[0]):t[0],end:t[1]!=null?new Date(t[1]):t[1]})}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,r){return r.end!=null?new Date(r.end):null}writeEnd(t,r){r.end=t?.getTime()??null}get isAllTime(){return this.equals(Os.allTime)}get isEmpty(){return this.equals(Os.empty)}readStart(t,r){return r.start!=null?new Date(r.start):null}writeStart(t,r){r.start=t?.getTime()??null}clone(){return new Os({end:this.end,start:this.start})}equals(t){if(!t)return!1;const r=this.start?.getTime()??this.start,i=this.end?.getTime()??this.end,n=t.start?.getTime()??t.start,s=t.end?.getTime()??t.end;return r===n&&i===s}expandTo(t,r=zo){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=B6(i,t,r));let n=this.end;if(n){const s=B6(n,t,r);n=n.getTime()===s.getTime()?s:fM(s,1,t,r)}return new Os({start:i,end:n})}intersection(t){if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return Os.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const r=this.start?.getTime()??-1/0,i=this.end?.getTime()??1/0,n=t.start?.getTime()??-1/0,s=t.end?.getTime()??1/0;let a,c;return n>=r&&n<=i?a=n:r>=n&&r<=s&&(a=r),i>=n&&i<=s?c=i:s>=r&&s<=i&&(c=s),a==null||c==null||isNaN(a)||isNaN(c)?Os.empty:new Os({start:a===-1/0?null:new Date(a),end:c===1/0?null:new Date(c)})}offset(t,r,i=zo){if(this.isEmpty||this.isAllTime)return this.clone();const n=new Os,{start:s,end:a}=this;return s!=null&&(n.start=fM(s,t,r,i)),a!=null&&(n.end=fM(a,t,r,i)),n}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return H6.clone();const r=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new Os({start:r,end:i})}},Os=pm,pm);u([p({type:Date,json:{write:{allowNull:!0}}})],Lr.prototype,"end",void 0),u([le("end")],Lr.prototype,"readEnd",null),u([de("end")],Lr.prototype,"writeEnd",null),u([p({readOnly:!0,json:{read:!1}})],Lr.prototype,"isAllTime",null),u([p({readOnly:!0,json:{read:!1}})],Lr.prototype,"isEmpty",null),u([p({type:Date,json:{write:{allowNull:!0}}})],Lr.prototype,"start",void 0),u([le("start")],Lr.prototype,"readStart",null),u([de("start")],Lr.prototype,"writeStart",null),Lr=Os=u([O("esri.time.TimeExtent")],Lr);const H6=new Lr,epe=new Lr({start:void 0,end:void 0});let tpe=0,sr=class extends Na.EventedMixin(F1.IdentifiableMixin(cs)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Xe(-180,-90,180,90,Ee.WGS84),this.id=Date.now().toString(16)+"-layer-"+tpe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Ee.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=typeof t=="string"?{url:t}:t;return(await ue(async()=>{const{fromUrl:i}=await import("./arcgisLayers-BNcdQPOT.js");return{fromUrl:i}},__vite__mapDeps([17,12,11,13]))).fromUrl(r)}static fromPortalItem(t){return Khe(t)}initialize(){this.when().catch((t=>{Zi(t)||re.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})}))}destroy(){const t=this.parent;if(t){const r=this;"layers"in t&&t.layers.includes(r)?t.layers.remove(r):"tables"in t&&t.tables.includes(r)?t.tables.remove(r):"baseLayers"in t&&t.baseLayers.includes(r)?t.baseLayers.remove(r):"referenceLayers"in t&&t.referenceLayers.includes(r)&&t.referenceLayers.remove(r),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const r=this.parent;return t&&r&&"effectiveVisible"in r&&(t&&=r.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Wi(this.url)}createLayerView(t,r){return Promise.reject(new z("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await Ft(t,{query:{f:"json"},responseType:"json"})).data;throw new z("layer:no-attribution-data","Layer does not have attribution data")}};u([p({type:String})],sr.prototype,"attributionDataUrl",void 0),u([p({readOnly:!0})],sr.prototype,"effectiveVisible",null),u([p({type:Xe})],sr.prototype,"fullExtent",void 0),u([p({readOnly:!0})],sr.prototype,"hasAttributionData",null),u([p({type:String,clonable:!1})],sr.prototype,"id",void 0),u([p({type:Boolean,nonNullable:!0})],sr.prototype,"legendEnabled",void 0),u([p({type:["show","hide","hide-children"]})],sr.prototype,"listMode",void 0),u([p({type:Number,range:{min:0,max:1},nonNullable:!0})],sr.prototype,"opacity",void 0),u([p({clonable:!1})],sr.prototype,"parent",void 0),u([p({readOnly:!0})],sr.prototype,"parsedUrl",null),u([p({type:Boolean,readOnly:!0})],sr.prototype,"persistenceEnabled",void 0),u([p({type:Boolean})],sr.prototype,"popupEnabled",void 0),u([p({type:Boolean})],sr.prototype,"attributionVisible",void 0),u([p({type:Ee})],sr.prototype,"spatialReference",void 0),u([p({type:String})],sr.prototype,"title",void 0),u([p({readOnly:!0,json:{read:!1}})],sr.prototype,"type",void 0),u([p()],sr.prototype,"url",void 0),u([p({type:Lr})],sr.prototype,"visibilityTimeExtent",void 0),u([p({type:Boolean,nonNullable:!0})],sr.prototype,"visible",void 0),sr=u([O("esri.layers.Layer")],sr);function zA(e,t,r){let i,n;if(e)for(let s=0,a=e.length;s<a;s++){if(i=e.at(s),i?.[t]===r)return i;if(i?.type==="group"&&(n=zA(i.layers,t,r),n))return n}}const rpe=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new ge;const i=a=>{a.parent&&"remove"in a.parent&&a.parent.remove(a)},n=a=>{a.parent=this,this.layerAdded(a),a.type!=="elevation"&&a.type!=="base-elevation"||re.getLogger(this).error(`Layer 'title:${a.title}, id:${a.id}' of type '${a.type}' is not supported as an operational layer and will therefore be ignored.`)},s=a=>{a.parent=null,this.layerRemoved(a)};this.addHandles([this.layers.on("before-add",(a=>{if(a.item===this)return a.preventDefault(),void re.getLogger(this).error("#add()","Cannot add layer to itself.");i(a.item)})),this.layers.on("after-add",(a=>n(a.item))),this.layers.on("after-remove",(a=>s(a.item)))])}destroy(){const r=this.layers.toArray();for(const i of r)i.destroy();this.layers.destroy()}set layers(r){this._set("layers",Xl(r,this._get("layers")))}add(r,i){const n=this.layers;if(i=n.getNextIndex(i),r instanceof sr){const s=r;s.parent===this?this.reorder(s,i):n.add(s,i)}else Ia(r)?r.then((s=>{this.destroyed||this.add(s,i)})):re.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const n=this.layers;let s=n.getNextIndex(i);r.slice().forEach((a=>{a.parent!==this?(n.add(a,s),s+=1):this.reorder(a,s)}))}findLayerById(r){return zA(this.layers,"id",r)}findLayerByUid(r){return zA(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return u([p()],t.prototype,"layers",null),t=u([O("esri.support.LayersMixin")],t),t},ipe=new Set(["feature","subtype-group"]);function VA(e,t,r){if(e)for(let i=0,n=e.length;i<n;i++){const s=e.at(i);if(s[t]===r)return s;if(s?.type==="group"){const a=VA(s.tables,t,r);if(a)return a}}}const npe=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new ge,this.addHandles([this.tables.on("after-add",(i=>{const n=i.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,ipe.has(n.type)||re.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(i=>{i.item.parent=null}))])}destroy(){const r=this.tables.toArray();for(const i of r)i.destroy();this.tables.destroy()}set tables(r){this._set("tables",Xl(r,this._get("tables")))}findTableById(r){return VA(this.tables,"id",r)}findTableByUid(r){return VA(this.tables,"uid",r)}};return u([p()],t.prototype,"tables",null),t=u([O("esri.support.TablesMixin")],t),t};let Rs=class extends npe(rpe(Na.EventedMixin(Ae))){constructor(t){super(t),this.allLayers=new ba({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:r=>"layers"in r?r.layers:null}),this.focusAreas=new rH,this.allTables=Jhe(this),this.basemap=null,this.editableLayers=new ba({getCollections:()=>[this.allLayers],itemFilterFunction:Fde}),this.ground=new d2,this._basemapCache=Whe()}destroy(){Zhe(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=rr(this.basemap),rr(this.ground),this._set("ground",null)}castBasemap(t){return Yhe(t,this._basemapCache)}castGround(t){return Xhe(t)??this._get("ground")}findLayerById(t){return this.allLayers.find((r=>r.id===t))}findTableById(t){return this.allTables.find((r=>r.id===t))}};u([p({readOnly:!0,dependsOn:[]})],Rs.prototype,"allLayers",void 0),u([p({type:rH,nonNullable:!0,json:{write:{overridePolicy:e=>({enabled:e.areas.length>0,ignoreOrigin:!0})}}})],Rs.prototype,"focusAreas",void 0),u([p({readOnly:!0})],Rs.prototype,"allTables",void 0),u([p({type:vv,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Rs.prototype,"basemap",void 0),u([wt("basemap")],Rs.prototype,"castBasemap",null),u([p({readOnly:!0})],Rs.prototype,"editableLayers",void 0),u([p({type:d2,nonNullable:!0})],Rs.prototype,"ground",void 0),u([wt("ground")],Rs.prototype,"castGround",null),u([p()],Rs.prototype,"undoRedo",void 0),Rs=u([O("esri.Map")],Rs);const EH=Rs;let Ad=class extends We{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};u([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Ad.prototype,"row",void 0),u([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Ad.prototype,"column",void 0),u([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Ad.prototype,"rows",void 0),u([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Ad.prototype,"columns",void 0),Ad=u([O("esri.CameraLayout")],Ad);const xH=Ad;let DN=class{constructor(t,r){this.min=t,this.max=r,this.range=r-t}normalize(t,r=0,i=!1){return W6(this.range,this.min,this.max,t,r,i)}clamp(t,r=0){return Ys(t-r,this.min,this.max)+r}monotonic(t,r,i){return t<r?r:r+GA(this.range,t-r,i)}minimalMonotonic(t,r,i){return W6(this.range,t,t+this.range,r,i)}center(t,r,i){return r=this.monotonic(t,r,i),this.normalize((t+r)/2,i)}diff(t,r,i){return this.monotonic(t,r,i)-t}shortestSignedDiff(t,r){t=this.normalize(t);const i=(r=this.normalize(r))-t,n=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(i)<Math.abs(n)?i:n}contains(t,r,i){return r=this.minimalMonotonic(t,r),(i=this.minimalMonotonic(t,i))>t&&i<r}};function W6(e,t,r,i,n=0,s=!1){return(i-=n)<t?i+=GA(e,t-i):i>r&&(i-=GA(e,i-r)),s&&i===r&&(i=t),i+n}function GA(e,t,r=0){return Math.ceil((t-r)/e)*e+r}const QIe=new DN(0,2*Math.PI),KIe=new DN(-Math.PI,Math.PI),spe=new DN(0,360);let Ko=class extends We.ClonableMixin(K){constructor(...t){super(...t),this.position=new Pe([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new xH}normalizeCtorArgs(t,r,i,n){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const s={position:t};return r!=null&&(s.heading=r),i!=null&&(s.tilt=i),n!=null&&(s.fov=n),s}return t}writePosition(t,r,i,n){const s=t.clone();s.x=un(t.x||0),s.y=un(t.y||0),s.z=t.hasZ?un(t.z||0):t.z,r[i]=s.write({},n)}readPosition(t,r){const i=new Pe;return i.read(t,r),i.x=un(i.x||0),i.y=un(i.y||0),i.z=i.hasZ?un(i.z||0):i.z,i}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};u([p({type:Pe,json:{write:{isRequired:!0}}})],Ko.prototype,"position",void 0),u([de("position")],Ko.prototype,"writePosition",null),u([le("position")],Ko.prototype,"readPosition",null),u([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),wt((e=>spe.normalize(un(e))))],Ko.prototype,"heading",void 0),u([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),wt((e=>Ys(un(e),-180,180)))],Ko.prototype,"tilt",void 0),u([p({type:Number,nonNullable:!0,json:{default:55,write:!0}}),wt((e=>Ys(un(e,55),1,170)))],Ko.prototype,"fov",void 0),u([p({type:xH,nonNullable:!0,json:{read:!1,write:!1}})],Ko.prototype,"layout",void 0),Ko=u([O("esri.Camera")],Ko);const ope=Ko;function $H(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function MH(e){return e.points!==void 0}function AH(e){return e.x!==void 0&&e.y!==void 0}function OH(e){return e.paths!==void 0||e.curvePaths!==void 0}function cm(e){return e.rings!==void 0||e.curveRings!==void 0}function Dc(e){return e==null?null:e instanceof yi?e:AH(e)?Pe.fromJSON(e):OH(e)?Gr.fromJSON(e):cm(e)?er.fromJSON(e):MH(e)?Eo.fromJSON(e):$H(e)?Xe.fromJSON(e):null}function FT(e){return e?AH(e)?"esriGeometryPoint":OH(e)?"esriGeometryPolyline":cm(e)?"esriGeometryPolygon":$H(e)?"esriGeometryEnvelope":MH(e)?"esriGeometryMultipoint":null:null}const ape={esriGeometryPoint:Pe,esriGeometryPolyline:Gr,esriGeometryPolygon:er,esriGeometryEnvelope:Xe,esriGeometryMultipoint:Eo,esriGeometryMultiPatch:er};function lpe(e){return e&&ape[e]||null}const upe=wi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Z6=wi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),U1={base:yi,key:"type",typeMap:{extent:Xe,multipoint:Eo,point:Pe,polyline:Gr,polygon:er}};var qA;let ju=qA=class extends K{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new qA({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};u([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:mM}}}}})],ju.prototype,"rotation",void 0),u([wt("rotation")],ju.prototype,"castRotation",null),u([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:mM}}}}})],ju.prototype,"scale",void 0),u([p({types:U1,json:{read:Dc,write:!0,origins:{"web-scene":{read:Dc,write:{overridePolicy:mM}}}}})],ju.prototype,"targetGeometry",void 0),u([p({type:ope,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],ju.prototype,"camera",void 0),ju=qA=u([O("esri.Viewpoint")],ju);const Hs=ju;function mM(){return{enabled:!this.camera}}let t1=class{constructor(t=r=>r.values().next().value){this._peeker=t,this._observable=new C1,this._items=new Set}get length(){return Le(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return Le(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const r=this.length;return this._items.forEach((i=>{t(i)||this._items.delete(i)})),r!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Le(this._observable),yield*this._items}};const RH=new FinalizationRegistry((e=>{e.close()}));function cpe(e,t){RH.register(e,t,t)}function dpe(e){RH.unregister(e)}function CH(e,t){return new Proxy({},{get:(r,i,n)=>(...s)=>{let a,c;const d=s[s.length-1];return hpe(d)&&(a=d.signal,c=d.transferList,s.pop()),e.apply(t?`${t}.${i.toString()}`:i.toString(),s,{transferList:c,signal:a})}})}function hpe(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const ppe={statsWorker:()=>ue(()=>import("./statsWorker-CJnCOLV0.js"),__vite__mapDeps([18,19,20,21,22,23])),geometryEngineWorker:()=>ue(()=>import("./geometryEngineWorker-BeElq9cK.js"),__vite__mapDeps([24,25,15,16,26])),arcadeGeometryOperatorsWorker:()=>ue(()=>import("./operatorsWorker-ConbHNsR.js"),[]),CSVSourceWorker:()=>ue(()=>import("./CSVSourceWorker-D0UIy-ez.js"),__vite__mapDeps([27,28,26,29,7,30,31,32,33,34,35,36,37,38,20,19,21,22,23,39,40,41,42,43,44,45,46])),EdgeProcessingWorker:()=>ue(()=>import("./EdgeProcessingWorker-CvriwqpP.js"),__vite__mapDeps([47,48,49,50,51,52,53,54,55,56,57,58])),ElevationSamplerWorker:()=>ue(()=>import("./ElevationSamplerWorker-Dv55FF92.js"),__vite__mapDeps([59,43,60,61,62,63,64,65,66,67,68,50,69])),FeatureServiceSnappingSourceWorker:()=>ue(()=>import("./FeatureServiceSnappingSourceWorker-DYwa-emE.js"),__vite__mapDeps([70,30,31,26,32,33,29,7,34,35,36,37,38,20,19,21,22,23,39,40,41,42,43,44,71,72,73,74,6])),GeoJSONSourceWorker:()=>ue(()=>import("./GeoJSONSourceWorker-el4fCRY0.js"),__vite__mapDeps([75,33,29,7,34,30,31,26,32,35,36,37,38,20,19,21,22,23,39,40,41,42,43,44,76,28,46,77])),LercWorker:()=>ue(()=>import("./LercWorker-BurFXeD8.js"),[]),MemorySourceWorker:()=>ue(()=>import("./MemorySourceWorker-BeshX_wz.js"),__vite__mapDeps([78,33,29,7,34,79,30,31,26,32,35,36,37,38,20,19,21,22,23,39,40,41,42,43,44,46,77,28])),PBFDecoderWorker:()=>ue(()=>import("./PBFDecoderWorker-DEe0yn8D.js"),__vite__mapDeps([80,81,7,33,29,34,72,73])),FeaturePipelineWorker:()=>ue(()=>import("./FeaturePipelineWorker-Bn3ap7iV.js"),__vite__mapDeps([82,83,84,57,85,86,29,7,87,88,89,90,91,31,26,37,33,34,20,92,93,94,95,96,97,98,44,32,35,36,38,19,21,22,23,39,40,99,100,101,102,74,72,73,103,76,28,46,77,104,105,106])),PointCloudWorker:()=>ue(()=>import("./PointCloudWorker-CWAKEnvF.js"),__vite__mapDeps([107,108,62,109,110,111,112,55,113,63,64,65,114,115])),RasterWorker:()=>ue(()=>import("./RasterWorker-BI_drauD.js"),__vite__mapDeps([116,117,118,119,16,120,121,122,123,124])),SceneLayerSnappingSourceWorker:()=>ue(()=>import("./SceneLayerSnappingSourceWorker-0Qo7-NHG.js"),__vite__mapDeps([125,126,127,62,115,63,109,128,114,50,52,53,54,49,51,55,56,57,58])),SceneLayerWorker:()=>ue(()=>import("./SceneLayerWorker-BdXtb3ld.js"),__vite__mapDeps([129,60,68,130,66,127,62,115,63,109,131,112,55,132,89,133,134,135,136,113,108,64,65,114])),WFSSourceWorker:()=>ue(()=>import("./WFSSourceWorker-C7tIJDQd.js"),__vite__mapDeps([137,33,29,7,34,30,31,26,32,35,36,37,38,20,19,21,22,23,39,40,41,42,43,44,76,28,77,138,139])),WorkerTileHandler:()=>ue(()=>import("./WorkerTileHandler-DmD1I6b4.js"),__vite__mapDeps([140,141,87,90,142,143,73,7,96,144,145,57,120,97,86])),Lyr3DWorker:()=>ue(()=>import("./Lyr3DWorker-CqLu-qQy.js"),[]),Feature3DPipelineWorker:()=>ue(()=>import("./Feature3DPipelineWorker-ZHDm7HnK.js"),__vite__mapDeps([146,32,33,29,7,34,35,36,37,31,26,38,20,19,21,22,23,39,40,63,147,134,67,60,130,66,148,110,149,150,151,152,153,50,54,154,127,62,115,109,126,55,136,135,155,113,108,64,65,114,156,157,158,159,49,51,133,160,89,161,162,43,74,72,73])),TextureCompressionWorker:()=>ue(()=>import("./TextureCompressionWorker-BKoh-rLw.js"),__vite__mapDeps([163,153]))},IH="worker:port-closed";var vi;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(vi||(vi={}));let fpe=0;function NH(){return fpe++}function mpe(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function r1(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function kN(e,t,r,i){if(t.type===vi.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==vi.INVOKE&&t.type!==vi.RESPONSE)return void e.postMessage(t);let n;if(mpe(r)?(n=Y6(r.transferList),t.data=r.result):(n=Y6(i),t.data=r),n){if(V("ff")){for(const s of n)if("byteLength"in s&&s.byteLength>267386880){const a="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case vi.INVOKE:throw a;case vi.RESPONSE:return void kN(e,{type:vi.RESPONSE,jobId:t.jobId,error:r1(a)})}}}e.postMessage(t,n)}else e.postMessage(t)}function i1(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function Y6(e){if(!e?.length)return null;if(V("esri-workers-arraybuffer-transfer"))return e;const t=e.filter((r=>!ype(r)));return t.length?t:null}function ype(e){return e instanceof ArrayBuffer||e?.constructor?.name==="ArrayBuffer"}async function rNe(e){try{return await e}catch(t){const r=t?.name===IH;if(!(Zi(t)||r))throw t;return}}const{CLOSE:J6,ABORT:X6,INVOKE:Q6,RESPONSE:Jg,OPEN_PORT:K6,ON:gpe}=vi,vpe=2;let bpe=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===vi.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var Us;let Km=(Us=class{static connect(t,r){const i=new MessageChannel;let n;n=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const s=new Us(i.port1,{channel:i,client:n,schedule:r});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=s),Us.clients.set(s,n),i.port2}static loadWorker(t){const r=ppe[t];return r?r():Promise.resolve(null)}constructor(t,r,i,n){this._port=t,this._jobQueue=i,this._lowPriorityJobQueue=n,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new bpe((s=>this._onInvokeMessage(s))),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:J6}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const n=i?.signal,s=i?.transferList;if(!this._port)return Promise.reject(new z(IH,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const a=NH();return new Promise(((c,d)=>{if(Ws(n))return this._processWork(),void d(Zt());const f=jo(n,(()=>{const v=this._outJobs.get(a);v&&(this._outJobs.delete(a),this._processWork(),ir(v.abortHandle),this._post({type:X6,jobId:a}),d(Zt()))})),g={resolve:c,reject:d,abortHandle:f,debugInfo:t};this._outJobs.set(a,g),this._post({type:Q6,jobId:a,methodName:t,abortable:n!=null},r,s)}))}createInvokeProxy(t){return CH(this,t)}on(t,r){const i=new MessageChannel;function n(s){r(s.data)}return this._port.postMessage({type:vi.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",n),i.port1.start(),ht((()=>{i.port1.postMessage({type:vi.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",n)}))}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:K6,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=vpe)return;const t=this._jobQueue?.pop()??this._lowPriorityJobQueue?.pop();if(!t)return;const{methodName:r,data:i,invokeOptions:n,resolver:s}=t;this.apply(r,i,n).then((a=>s.resolve(a))).catch((a=>s.reject(a)))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((t=>{ir(t.abortHandle),t.reject(Zt(`Worker closing, aborting job calling '${t.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule((()=>this._processMessage(t,!0))):this._processMessage(t,!1)}_processMessage(t,r){const i=i1(t);if(i)switch(i.type){case Jg:this._onResponseMessage(i);break;case Q6:r?this._onInvokeMessage(i):this._invokeQueue.push(i);break;case X6:this._onAbortMessage(i);break;case J6:this._onCloseMessage();break;case K6:this._onOpenPortMessage(i);break;case gpe:this._onOnMessage(i)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Us.clients.get(this)===t&&t.destroy(),Us.clients.delete(this),t?.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n=[],abortable:s}=t,a=s?new AbortController:null,c=this._inJobs;let d,f=this._client,g=f[r];try{if(!g&&r&&r.includes(".")){const v=r.split(".");for(let w=0;w<v.length-1;w++)f=f[v[w]],g=f[v[w+1]]}if(typeof g!="function")throw new TypeError(`${r} is not a function`);n.push({client:this,signal:a?a.signal:null}),d=g.apply(f,n)}catch(v){return void this._post({type:Jg,jobId:i,error:r1(v)})}Ia(d)?(c.set(i,{controller:a,promise:d}),d.then((v=>{c.has(i)&&(c.delete(i),this._post({type:Jg,jobId:i},v))}),(v=>{c.has(i)&&(c.delete(i),Zi(v)||this._post({type:Jg,jobId:i,error:r1(v||{message:`Error encountered at method ${r}`})}))}))):this._post({type:Jg,jobId:i},d)}_onOpenPortMessage(t){new Us(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,(s=>{r.postMessage(s)})),n=py(t.port,"message",(s=>{i1(s)?.type===vi.CLOSE&&(n.remove(),i.remove(),r.close())}))}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs;if(!s.has(r))return;const a=s.get(r);s.delete(r),this._processWork(),ir(a.abortHandle),i?a.reject(z.fromJSON(JSON.parse(i))):a.resolve(n)}_post(t,r,i){return kN(this._port,t,r,i)}},Us.kernelInfo={buildDate:X7,fullVersion:NI,revision:Q7},Us.clients=new Map,Us),wpe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new t1,this._ongoingLowPriorityJobsQueue=new t1}destroy(){this.close()}get closed(){return!this._clients?.length}open(t,r){return new Promise(((i,n)=>{let s=!0;const a=c=>{Yt(r.signal),s&&(s=!1,c())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let c=0;c<t.length;++c){const d=t[c];Ia(d)?this._clientPromises[c]=d.then((f=>(this._clients[c]=new Km(f,r,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),a(i),this._clients[c])),(()=>(a(n),null))):(this._clients[c]=new Km(d,r,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[c]=Promise.resolve(this._clients[c]),a(i))}}))}broadcast(t,r,i){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const a=this._clientPromises[s];n[s]=a.then((c=>c?.invoke(t,r,i)))}return n}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(Zt(`Worker closing, aborting job calling '${t.methodName}'`));for(;t=this._ongoingLowPriorityJobsQueue.pop();)t.resolver.reject(Zt(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then((i=>i?.close()));this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,dpe(this)}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const n=ys();(i?.priority==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:t,data:r,invokeOptions:i,resolver:n});for(let s=0;s<this._clientPromises.length;s++){const a=this._clients[s];a?a.jobAdded():this._clientPromises[s].then((c=>c?.jobAdded()))}return n.promise}createInvokeProxy(t){return CH(this,t)}on(t,r){return Promise.all(this._clientPromises).then((()=>Zh(this._clients.map((i=>i.on(t,r))))))}openPorts(){return new Promise((t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then((s=>{s&&(r[n]=s.openPort()),--i===0&&t(r)}))}))}get test(){}};const _pe={async request(e,t){const r=e.options,i=r.responseType;r.signal=t?.signal,r.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&E3(e.url)?.after?i:"array-buffer";const n=await Ft(e.url,r),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch(n.requestOptions?.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}},eF={};function Spe(e){const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages?.slice()||[],paths:{...eF.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=eF.baseUrl),t}let Tpe=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((r=>{this[r]=(...i)=>t[r](...i)}))}},L_=class{constructor(){this._dispatcher=new Tpe,this._workerPostMessage({type:vi.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){zS((()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))}))}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){zS((()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))}))}async _workerMessageHandler(t){const r=i1(t);if(r&&r.type===vi.OPEN){const{modulePath:i,jobId:n}=r;let s=await Km.loadWorker(i);s||(s=await import(i));const a=Km.connect(s);this._workerPostMessage({type:vi.OPENED,jobId:n,data:a})}}};const BA=()=>re.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:Epe}=vi,xpe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Cw,Iw;const tF="Failed to create Worker. Fallback to execute module in main thread";async function $pe(){if(!V("esri-workers"))return rF(new L_);if(!Cw&&!Iw)try{const t=xpe.split("{CONFIGURATION}").join(Mpe());Cw=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){Iw=t||{}}let e;if(Cw)try{e=new Worker(Cw,{name:"esri-worker-"+Ape++})}catch{BA().warn(tF,Iw),e=new L_}else BA().warn(tF,Iw),e=new L_;return rF(e)}async function rF(e){return new Promise((t=>{function r(n){const s=i1(n);s&&s.type===Epe&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(n){n.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),BA().warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new L_).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)}))}function Mpe(){let e;if(ct.default!=null){const n={...ct};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(ct));e.assetsPath=zs(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?zs(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Un(),e.has={"esri-csp-restrictions":V("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":V("esri-2d-update-debug"),"esri-2d-log-updating":V("esri-2d-log-updating"),"featurelayer-pbf":V("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":V("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":V("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":V("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":V("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":V("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":V("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":V("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":V("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":V("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":V("featurelayer-snapshot-enabled"),"esri-atomics":V("esri-atomics"),"esri-shared-array-buffer":V("esri-shared-array-buffer"),"esri-tiles-debug":V("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":V("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":V("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=zs(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=zs(e.workers.workerPath):e.workers.workerPath=zs(gr("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=ct.workers.loaderConfig,r=Spe({baseUrl:t?.baseUrl,locale:Un(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t?.has},map:{...t?.map},paths:{...t?.paths},packages:t?.packages||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{buildDate:X7,fullVersion:NI,revision:Q7}})}let Ape=0;const{ABORT:iF,INVOKE:Ope,OPEN:Rpe,OPENED:Cpe,RESPONSE:Xg}=vi;let Ipe=class PH{static async create(t){const r=await $pe();return new PH(r,t)}constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",(i=>{i.preventDefault(),re.getLogger("esri.core.workers.WorkerOwner").error(i)}))}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,n=NH();return new Promise(((s,a)=>{const c={resolve:s,reject:a,abortHandle:PI(i,(()=>{this._outJobs.delete(n),this._post({type:iF,jobId:n})}))};this._outJobs.set(n,c),this._post({type:Rpe,jobId:n,modulePath:t})}))}_onMessage(t){const r=i1(t);if(r)switch(r.type){case Cpe:this._onOpenedMessage(r);break;case Xg:this._onResponseMessage(r);break;case iF:this._onAbortMessage(r);break;case Ope:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);n&&(n.controller&&n.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n,abortable:s}=t,a=s?new AbortController:null,c=this._inJobs,d=_pe[r];let f;try{if(typeof d!="function")throw new TypeError(`${r} is not a function`);f=d.call(null,n,{signal:a?a.signal:null})}catch(g){return void this._post({type:Xg,jobId:i,error:r1(g)})}Ia(f)?(c.set(i,{controller:a,promise:f}),f.then((g=>{c.has(i)&&(c.delete(i),this._post({type:Xg,jobId:i},g))}),(g=>{c.has(i)&&(c.delete(i),g||(g={message:"Error encountered at method"+r}),Zi(g)||this._post({type:Xg,jobId:i,error:r1(g||{message:`Error encountered at method ${r}`})}))}))):this._post({type:Xg,jobId:i},f)}_onOpenedMessage(t){const{jobId:r,data:i}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),ir(n.abortHandle),n.resolve(i))}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),ir(s.abortHandle),i?s.reject(z.fromJSON(JSON.parse(i))):s.resolve(n))}_post(t,r,i){return kN(this.worker,t,r,i)}};const nF=V("host-browser")?Math.min(navigator.hardwareConcurrency-1,V("workers-pool-size")??8):0;let oh=V("esri-mobile")?Math.min(nF,3):nF;oh||(oh=V("safari")&&V("mac")?7:2);let sF=0;const D_=[];function Npe(){LH()}async function Nw(e,t){const r=new wpe,{registryTarget:i,...n}=t;return await r.open(e,n),i&&cpe(i,r),r}async function Ppe(e,t={}){if(typeof e!="string")throw new z("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(V("host-webworker")&&!V("esri-workers")&&(r="local"),r==="local"){let i=await Km.loadWorker(e);i||(i=await import(e)),Yt(t.signal);const n=t.client||i;return Nw([Km.connect(i,t.schedule)],{...t,client:n})}if(await LH(),Yt(t.signal),r==="dedicated"){const i=sF++%oh;return Nw([await D_[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,oh);if(i<oh){const n=new Array(i);for(let s=0;s<i;++s){const a=sF++%oh;n[s]=D_[a].open(e,t)}return Nw(n,t)}}return Nw(D_.map((i=>i.open(e,t))),t)}let Pw=null;async function LH(){if(Pw)return Pw;new AbortController;const e=[];for(let t=0;t<oh;t++){const r=Ipe.create(t).then((i=>(D_[t]=i,i)));e.push(r)}return Pw=Promise.all(e),Pw}var HA,fm;let Oi=(fm=class extends K{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new HA({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},HA=fm,fm);u([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Oi.prototype,"cols",void 0),u([p({type:dt,json:{write:!0}})],Oi.prototype,"level",void 0),u([p({type:String,json:{write:!0}})],Oi.prototype,"levelValue",void 0),u([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Oi.prototype,"origin",void 0),u([p({type:Number,json:{write:!0}})],Oi.prototype,"resolution",void 0),u([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Oi.prototype,"rows",void 0),u([p({type:Number,json:{write:!0}})],Oi.prototype,"scale",void 0),Oi=HA=u([O("esri.layers.support.LOD")],Oi);let Lpe=class{constructor(t,r,i,n,s=void 0){this.id=t,this.level=r,this.row=i,this.col=n,this.extent=s}};var zu;const oF=new tt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var mm;let xi=(mm=class extends K{static create(t={}){const{resolutionFactor:r=1,scales:i,size:n=256,spatialReference:s=Ee.WebMercator,numLODs:a=24}=t;if(!ds(s)){const w=[];if(i)for(let S=0;S<i.length;S++){const T=i[S];w.push(new Oi({level:S,scale:T,resolution:T}))}else{let S=5e-4;for(let T=a-1;T>=0;T--)w.unshift(new Oi({level:T,scale:S,resolution:S})),S*=2}return new zu({dpi:96,lods:w,origin:new Pe(0,0,s),size:[n,n],spatialReference:s})}const c=fn(s),d=t.origin?new Pe({x:t.origin.x,y:t.origin.y,spatialReference:s}):new Pe(c?{x:c.origin[0],y:c.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),f=96,g=1/(Xs(s)*39.37*f),v=[];if(i)for(let w=0;w<i.length;w++){const S=i[w],T=S*g;v.push(new Oi({level:w,scale:S,resolution:T}))}else{let w=gy(s)?512/n*5916575275917094e-7:256/n*591657527591555e-6;const S=Math.ceil(a/r);v.push(new Oi({level:0,scale:w,resolution:w*g}));for(let T=1;T<S;T++){const E=w/2**r,M=E*g;v.push(new Oi({level:T,scale:E,resolution:M})),w=E}}return new zu({dpi:f,lods:v,origin:d,size:[n,n],spatialReference:s})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:r}=this;if(t&&r){const i=fn(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-r.x)<=i.dx}return!1}readOrigin(t,r){return Pe.fromJSON({spatialReference:r.spatialReference,...t})}set lods(t){let r=0,i=0;const n=[],s=this._levelToLOD={};t&&(r=-1/0,i=1/0,t.forEach((a=>{n.push(a.scale),r=a.scale>r?a.scale:r,i=a.scale<i?a.scale:i,s[a.level]=a}))),this._set("scales",n),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,r){return[r.cols,r.rows]}writeSize(t,r){r.cols=t[0],r.rows=t[1]}zoomToScale(t){const r=this.scales;if(t<=0)return r[0];if(t>=r.length-1)return r[r.length-1];const i=Math.floor(t),n=i+1;return r[i]/(r[i]/r[n])**(t-i)}scaleToZoom(t){const r=this.scales,i=r.length-1;let n=0;for(;n<i;n++){const s=r[n],a=r[n+1];if(s<=t)return n;if(a===t)return n+1;if(s>t&&a<t)return n+Math.log(s/t)/Math.log(s/a)}return n}tileAt(t,r,i,n){const s=this.lodAt(t);if(!s)return null;let a,c;if(typeof r=="number")a=r,c=i;else if(ni(r.spatialReference,this.spatialReference))a=r.x,c=r.y,n=i;else{const g=ST(r,this.spatialReference);if(g==null)return null;a=g.x,c=g.y,n=i}const d=s.resolution*this.size[0],f=s.resolution*this.size[1];return n||(n=new Lpe(null,0,0,0,pn())),n.level=t,n.row=Math.floor((this.origin.y-c)/f+.001),n.col=Math.floor((a-this.origin.x)/d+.001),this.updateTileInfo(n),n}updateTileInfo(t,r=zu.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&r===zu.ExtrapolateOptions.POWER_OF_TWO){const c=this.lods[this.lods.length-1];c.level<t.level&&(i=c)}if(!i)return;const n=t.level-i.level,s=i.resolution*this.size[0]/2**n,a=i.resolution*this.size[1]/2**n;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=pn()),t.extent[0]=this.origin.x+t.col*s,t.extent[1]=this.origin.y-(t.row+1)*a,t.extent[2]=t.extent[0]+s,t.extent[3]=t.extent[1]+a}upsampleTile(t){const r=this._upsampleLevels[t.level];return!(!r||r.parentLevel===-1)&&(t.level=r.parentLevel,t.row=Math.floor(t.row/r.factor+.001),t.col=Math.floor(t.col/r.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,r){const i=this.lodAt(r.level);if(i==null)return null;const{resolution:n}=i,s=n*this.size[0],a=n*this.size[1];return t[0]=this.origin.x+r.col*s,t[1]=this.origin.y-(r.row+1)*a,t[2]=t[0]+s,t[3]=t[1]+a,t}lodAt(t){return this._levelToLOD?.[t]??null}clone(){return zu.fromJSON(this.write({}))}getCompatibleForVTL(t){if(this.size[0]!==this.size[1]||this.size[0]===256&&t===512)return null;const r=(this.size[0]===512&&t===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===t&&r===0)return this;const i=[],n=this.lods.length-r;for(let s=0;s<n;s++){const a=s+r,{scale:c,resolution:d}=a>=0?this.lods[a]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new Oi({level:s,scale:c,resolution:d}))}return new zu({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let r=null;for(let i=0;i<t.length;i++){const n=t[i];this._upsampleLevels[n.level]={parentLevel:r?r.level:-1,factor:r?r.resolution/n.resolution:0},r=n}}},zu=mm,mm);u([p({type:Number,json:{write:!0}})],xi.prototype,"compressionQuality",void 0),u([p({type:Number,json:{write:!0}})],xi.prototype,"dpi",void 0),u([p({type:String,json:{read:oF.read,write:oF.write,origins:{"web-scene":{read:!1,write:!1}}}})],xi.prototype,"format",void 0),u([p({readOnly:!0})],xi.prototype,"isWrappable",null),u([p({type:Pe,json:{write:!0}})],xi.prototype,"origin",void 0),u([le("origin")],xi.prototype,"readOrigin",null),u([p({type:[Oi],value:null,json:{write:!0}})],xi.prototype,"lods",null),u([p({readOnly:!0})],xi.prototype,"scales",void 0),u([p({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],xi.prototype,"size",void 0),u([le("size",["rows","cols"])],xi.prototype,"readSize",null),u([de("size",{cols:{type:dt},rows:{type:dt}})],xi.prototype,"writeSize",null),u([p({type:Ee,json:{write:!0}})],xi.prototype,"spatialReference",void 0),xi=zu=u([O("esri.layers.support.TileInfo")],xi),(function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"})(xi||(xi={}));const k_={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],i=t[1],n=this.values;return i>=r?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},yM={xsmall:544,small:768,medium:992,large:1200};function Dpe(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function gM(e,t){return t?k_[e].valueToClassName[t].split(" "):[]}const kpe=e=>{let t=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=yM}initialize(){this.addHandles(je((()=>[this.breakpoints,this.size]),(()=>this._updateClassNames()),Hi))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!Dpe(r)){const i=JSON.stringify(yM,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),r=yM}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=ln.acquire(),i=ln.acquire();let n,s=!1;for(n in k_){const a=this[n],c=k_[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});a!==c&&(s=!0,this[n]=c,gM(n,a).forEach((d=>i.push(d))),gM(n,c).forEach((d=>r.push(d))))}s&&(this._applyClassNameChanges(r,i),ln.release(r),ln.release(i))}_applyClassNameChanges(r,i){const n=this.container;n&&(i.forEach((s=>n.classList.remove(s))),r.forEach((s=>n.classList.add(s))))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in k_)gM(i,this[i]).forEach((n=>r.classList.remove(n)))}};return u([p()],t.prototype,"breakpoints",null),u([p()],t.prototype,"orientation",void 0),u([p()],t.prototype,"widthBreakpoint",void 0),u([p()],t.prototype,"heightBreakpoint",void 0),t=u([O("esri.views.BreakpointsOwner")],t),t};function FN(e){return typeof e=="string"?document.getElementById(e):e??null}function aF(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}let vh=class extends Ae{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,r,i={}){return this._installWatch(t,r,i,je)}addWhen(t,r,i={}){return this._installWatch(t,r,i,Zs)}addOnCollectionChange(t,r,{initial:i=!1,final:n=!1}={}){const s=++this._handleId;return this.addHandles([Uh(t,"after-changes",this._createSyncUpdatingCallback(),Oa),Uh(t,"change",r,{onListenerAdd:i?a=>r({added:a.toArray(),removed:[]}):void 0,onListenerRemove:n?a=>r({added:[],removed:a.toArray()}):void 0})],s),ht((()=>this.removeHandles(s)))}addPromise(t){if(t==null)return t;const r=++this._handleId;this.addHandles(ht((()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(Lw)||this._set("updating",!1))})),r),this._pendingPromises.add(t),this._set("updating",!0);const i=()=>this.removeHandles(r);return t.then(i,i),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,r,i={},n){const s=++this._handleId;i.sync||this._installSyncUpdatingWatch(t,s);const a=n(t,r,i);return this.addHandles(a,s),ht((()=>this.removeHandles(s)))}_installSyncUpdatingWatch(t,r){const i=this._createSyncUpdatingCallback(),n=je(t,i,{sync:!0,equals:()=>!1});return this.addHandles(n,r),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(Lw),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(A1((()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(Lw))})),Lw)}}};u([p({readOnly:!0})],vh.prototype,"updating",void 0),vh=u([O("esri.core.support.UpdatingHandles")],vh);const Lw=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var f2=function(){return f2=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},f2.apply(this,arguments)},WA={exports:{}},hr={},ZA={exports:{}},Kh={};function DH(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Fpe(e,t,r){}function Upe(e,t,r){}var jpe=/javascript\s*\:/img;function zpe(e,t){return jpe.test(t)?"":t}Kh.whiteList=DH();Kh.getDefaultWhiteList=DH;Kh.onAttr=Fpe;Kh.onIgnoreAttr=Upe;Kh.safeAttrValue=zpe;var Vpe={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Qg=Vpe;function Gpe(e,t){e=Qg.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,i=!1,n=0,s=0,a="";function c(){if(!i){var g=Qg.trim(e.slice(n,s)),v=g.indexOf(":");if(v!==-1){var w=Qg.trim(g.slice(0,v)),S=Qg.trim(g.slice(v+1));if(w){var T=t(n,a.length,w,S,g);T&&(a+=T+"; ")}}}n=s+1}for(;s<r;s++){var d=e[s];if(d==="/"&&e[s+1]==="*"){var f=e.indexOf("*/",s+2);if(f===-1)break;s=f+1,n=s+1,i=!1}else d==="("?i=!0:d===")"?i=!1:d===";"?i||c():d===`
`&&c()}return Qg.trim(a)}var qpe=Gpe,Dw=Kh,Bpe=qpe;function lF(e){return e==null}function Hpe(e){var t={};for(var r in e)t[r]=e[r];return t}function kH(e){e=Hpe(e||{}),e.whiteList=e.whiteList||Dw.whiteList,e.onAttr=e.onAttr||Dw.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Dw.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Dw.safeAttrValue,this.options=e}kH.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onAttr,s=r.onIgnoreAttr,a=r.safeAttrValue,c=Bpe(e,function(d,f,g,v,w){var S=i[g],T=!1;if(S===!0?T=S:typeof S=="function"?T=S(v):S instanceof RegExp&&(T=S.test(v)),T!==!0&&(T=!1),v=a(g,v),!!v){var E={position:f,sourcePosition:d,source:w,isWhite:T};if(T){var M=n(g,v,E);return lF(M)?g+":"+v:M}else{var M=s(g,v,E);if(!lF(M))return M}}});return c};var Wpe=kH;(function(e,t){var r=Kh,i=Wpe;function n(a,c){var d=new i(c);return d.process(a)}t=e.exports=n,t.FilterCSS=i;for(var s in r)t[s]=r[s]})(ZA,ZA.exports);var UN=ZA.exports,jN={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},Zpe=UN.FilterCSS,Ype=UN.getDefaultWhiteList,m2=jN;function FH(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var UH=new Zpe;function Jpe(e,t,r){}function Xpe(e,t,r){}function Qpe(e,t,r){}function Kpe(e,t,r){}function jH(e){return e.replace(tfe,"&lt;").replace(rfe,"&gt;")}function efe(e,t,r,i){if(r=HH(r),t==="href"||t==="src"){if(r=m2.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(kw.lastIndex=0,kw.test(r))return""}else if(t==="style"){if(uF.lastIndex=0,uF.test(r)||(cF.lastIndex=0,cF.test(r)&&(kw.lastIndex=0,kw.test(r))))return"";i!==!1&&(i=i||UH,r=i.process(r))}return r=WH(r),r}var tfe=/</g,rfe=/>/g,ife=/"/g,nfe=/&quot;/g,sfe=/&#([a-zA-Z0-9]*);?/gim,ofe=/&colon;?/gim,afe=/&newline;?/gim,kw=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,uF=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,cF=/u\s*r\s*l\s*\(.*/gi;function zH(e){return e.replace(ife,"&quot;")}function VH(e){return e.replace(nfe,'"')}function GH(e){return e.replace(sfe,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function qH(e){return e.replace(ofe,":").replace(afe," ")}function BH(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return m2.trim(t)}function HH(e){return e=VH(e),e=GH(e),e=qH(e),e=BH(e),e}function WH(e){return e=zH(e),e=jH(e),e}function lfe(){return""}function ufe(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function i(a){return r?!0:m2.indexOf(e,a)!==-1}var n=[],s=!1;return{onIgnoreTag:function(a,c,d){if(i(a))if(d.isClosing){var f="[/removed]",g=d.position+f.length;return n.push([s!==!1?s:d.position,g]),s=!1,f}else return s||(s=d.position),"[removed]";else return t(a,c,d)},remove:function(a){var c="",d=0;return m2.forEach(n,function(f){c+=a.slice(d,f[0]),d=f[1]}),c+=a.slice(d),c}}}function cfe(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("<!--",r);if(i===-1){t+=e.slice(r);break}t+=e.slice(r,i);var n=e.indexOf("-->",i);if(n===-1)break;r=n+3}return t}function dfe(e){var t=e.split("");return t=t.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),t.join("")}hr.whiteList=FH();hr.getDefaultWhiteList=FH;hr.onTag=Jpe;hr.onIgnoreTag=Xpe;hr.onTagAttr=Qpe;hr.onIgnoreTagAttr=Kpe;hr.safeAttrValue=efe;hr.escapeHtml=jH;hr.escapeQuote=zH;hr.unescapeQuote=VH;hr.escapeHtmlEntities=GH;hr.escapeDangerHtml5Entities=qH;hr.clearNonPrintableCharacter=BH;hr.friendlyAttrValue=HH;hr.escapeAttrValue=WH;hr.onIgnoreTagStripAll=lfe;hr.StripTagBody=ufe;hr.stripCommentTag=cfe;hr.stripBlankChar=dfe;hr.cssFilter=UH;hr.getDefaultCSSWhiteList=Ype;var UT={},rc=jN;function hfe(e){var t=rc.spaceIndex(e),r;return t===-1?r=e.slice(1,-1):r=e.slice(1,t+1),r=rc.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function pfe(e){return e.slice(0,2)==="</"}function ffe(e,t,r){var i="",n=0,s=!1,a=!1,c=0,d=e.length,f="",g="";e:for(c=0;c<d;c++){var v=e.charAt(c);if(s===!1){if(v==="<"){s=c;continue}}else if(a===!1){if(v==="<"){i+=r(e.slice(n,c)),s=c,n=c;continue}if(v===">"){i+=r(e.slice(n,s)),g=e.slice(s,c+1),f=hfe(g),i+=t(s,i.length,f,g,pfe(g)),n=c+1,s=!1;continue}if(v==='"'||v==="'")for(var w=1,S=e.charAt(c-w);S.trim()===""||S==="=";){if(S==="="){a=v;continue e}S=e.charAt(c-++w)}}else if(v===a){a=!1;continue}}return n<e.length&&(i+=r(e.substr(n))),i}var mfe=/[^a-zA-Z0-9\\_:.-]/gim;function yfe(e,t){var r=0,i=0,n=[],s=!1,a=e.length;function c(w,S){if(w=rc.trim(w),w=w.replace(mfe,"").toLowerCase(),!(w.length<1)){var T=t(w,S||"");T&&n.push(T)}}for(var d=0;d<a;d++){var f=e.charAt(d),g,v;if(s===!1&&f==="="){s=e.slice(r,d),r=d+1,i=e.charAt(r)==='"'||e.charAt(r)==="'"?r:vfe(e,d+1);continue}if(s!==!1&&d===i){if(v=e.indexOf(f,d+1),v===-1)break;g=rc.trim(e.slice(i+1,v)),c(s,g),s=!1,d=v,r=d+1;continue}if(/\s|\n|\t/.test(f))if(e=e.replace(/\s|\n|\t/g," "),s===!1)if(v=gfe(e,d),v===-1){g=rc.trim(e.slice(r,d)),c(g),s=!1,r=d+1;continue}else{d=v-1;continue}else if(v=bfe(e,d-1),v===-1){g=rc.trim(e.slice(r,d)),g=dF(g),c(s,g),s=!1,r=d+1;continue}else continue}return r<e.length&&(s===!1?c(e.slice(r)):c(s,dF(rc.trim(e.slice(r))))),rc.trim(n.join(" "))}function gfe(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function vfe(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="'"||r==='"'?t:-1}}function bfe(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function wfe(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function dF(e){return wfe(e)?e.substr(1,e.length-2):e}UT.parseTag=ffe;UT.parseAttr=yfe;var _fe=UN.FilterCSS,To=hr,ZH=UT,Sfe=ZH.parseTag,Tfe=ZH.parseAttr,F_=jN;function Fw(e){return e==null}function Efe(e){var t=F_.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=F_.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=F_.trim(e.slice(0,-1))),{html:e,closing:r}}function xfe(e){var t={};for(var r in e)t[r]=e[r];return t}function $fe(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(i){return i.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}function YH(e){e=xfe(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=To.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=$fe(e.whiteList||e.allowList):e.whiteList=To.whiteList,e.onTag=e.onTag||To.onTag,e.onTagAttr=e.onTagAttr||To.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||To.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||To.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||To.safeAttrValue,e.escapeHtml=e.escapeHtml||To.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new _fe(e.css))}YH.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onTag,s=r.onIgnoreTag,a=r.onTagAttr,c=r.onIgnoreTagAttr,d=r.safeAttrValue,f=r.escapeHtml,g=t.cssFilter;r.stripBlankChar&&(e=To.stripBlankChar(e)),r.allowCommentTag||(e=To.stripCommentTag(e));var v=!1;r.stripIgnoreTagBody&&(v=To.StripTagBody(r.stripIgnoreTagBody,s),s=v.onIgnoreTag);var w=Sfe(e,function(S,T,E,M,R){var I={sourcePosition:S,position:T,isClosing:R,isWhite:Object.prototype.hasOwnProperty.call(i,E)},k=n(E,M,I);if(!Fw(k))return k;if(I.isWhite){if(I.isClosing)return"</"+E+">";var j=Efe(M),P=i[E],X=Tfe(j.html,function(ae,fe){var he=F_.indexOf(P,ae)!==-1,me=a(E,ae,fe,he);return Fw(me)?he?(fe=d(E,ae,fe,g),fe?ae+'="'+fe+'"':ae):(me=c(E,ae,fe,he),Fw(me)?void 0:me):me});return M="<"+E,X&&(M+=" "+X),j.closing&&(M+=" /"),M+=">",M}else return k=s(E,M,I),Fw(k)?f(M):k},f);return v&&(w=v.remove(w)),w};var Mfe=YH;(function(e,t){var r=hr,i=UT,n=Mfe;function s(c,d){var f=new n(d);return f.process(c)}t=e.exports=s,t.filterXSS=s,t.FilterXSS=n,(function(){for(var c in r)t[c]=r[c];for(var d in i)t[d]=i[d]})();function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=e.exports)})(WA,WA.exports);var qp=WA.exports,Afe=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Ofe=(function(){function e(t,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=f2(f2({},qp.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,a,c,d){return s==="a"&&a==="href"||(s==="img"||s==="source")&&a==="src"?i.sanitizeUrl(c):qp.safeAttrValue(s,a,c,d)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;t&&!r?n=t:t&&r?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(s){if(s==="whiteList")n.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,t.whiteList||{}]);else if(s==="css"){var a=t.css.whiteList;a!=null&&t.css instanceof Object&&Object.keys(a).forEach(function(c){return n.css.whiteList[c]=a[c]})}else n[s]=t[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new qp.FilterXSS(n)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var i=(r??{}).isProtocolRequired,n=i===void 0?!0:i,s=this._trim(t.substring(0,t.indexOf(":"))),a=t==="/",c=/^#/.test(t),d=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return a||c||d?qp.escapeAttrValue(t):!s&&!n?qp.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,i,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,i,n):qp.safeAttrValue(t,r,i,n)},e.prototype.validate=function(t,r){r===void 0&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},e.prototype.encodeHTML=function(t){var r=this;return String(t).replace(/[&<>"'\/]/g,function(i){return r._entityMap[i]})},e.prototype.encodeAttrValue=function(t){var r=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(i,n){return r.test(i)?i:"&#x".concat(Number(t.charCodeAt(n)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(i){Object.keys(i).forEach(function(n){Array.isArray(i[n])&&Array.isArray(r[n])?r[n]=r[n].concat(i[n]):r[n]=i[n]})}),r},e.prototype._iterateOverObject=function(t,r){var i=this;r===void 0&&(r={});try{var n=!1,s=void 0;if(Array.isArray(t))s=t.reduce(function(c,d){var f=i.validate(d,r);return f.isValid?c.concat([d]):(n=!0,c.concat([f.sanitized]))},[]);else if(Afe(t)){var a=Object.keys(t);s=a.reduce(function(c,d){var f=t[d],g=i.validate(f,r);return g.isValid?c[d]=f:(n=!0,c[d]=g.sanitized),c},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return n?s:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e})();const Rfe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],Cfe=Rfe.reduce(((e,t)=>(e[t]=[],e)),{}),Ife=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],JH=new Ofe({whiteList:Cfe,onTagAttr:(e,t,r)=>{const i=`${t}="${r}"`;if(Ife.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),XH="http://www.w3.org/",jT=`${XH}2000/svg`,QH=`${XH}1999/xlink`;let hF=[],zN=(e,t)=>{let r={};return Object.keys(e).forEach((i=>{r[i]=e[i]})),t&&Object.keys(t).forEach((i=>{r[i]=t[i]})),r},VN=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),KH=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},Nfe=(e,t,r)=>{if(t.vnodeSelector!==""){for(let i=r;i<e.length;i++)if(VN(e[i],t))return i}return-1},vM=(e,t,r,i)=>{let n=e[t];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let a=0;a<e.length;a++)if(a!==t){let c=e[a];if(VN(c,n))throw new Error(`${r.vnodeSelector} had a ${n.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Pfe=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},YA=[],JA=!1,eW=e=>{(e.children||[]).forEach(eW),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},pF=()=>{JA=!1,YA.forEach(eW),YA.length=0},fF=e=>{YA.push(e),JA||(JA=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(pF,{timeout:16}):setTimeout(pF,16))},mF=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),fF(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),fF(e))},Lfe=(e,t,r)=>{if(!t)return;let i=r.eventHandlerInterceptor,n=Object.keys(t),s=n.length;for(let a=0;a<s;a++){let c=n[a],d=t[c];if(c==="className")throw new Error('Property "className" is not supported, use "class".');if(c==="class")QA(e,d,!0);else if(c==="classes"){let f=Object.keys(d),g=f.length;for(let v=0;v<g;v++){let w=f[v];d[w]&&e.classList.add(w)}}else if(c==="styles"){let f=Object.keys(d),g=f.length;for(let v=0;v<g;v++){let w=f[v],S=d[w];S&&(KH(S),r.styleApplyer(e,w,S))}}else if(c!=="key"&&d!=null){let f=typeof d;f==="function"?(c.lastIndexOf("on",0)===0&&(i&&(d=i(c,d,e,t)),c==="oninput"&&(function(){let g=d;d=function(v){g.apply(this,[v]),v.target["oninput-value"]=v.target.value}})()),e[c]=d):r.namespace===jT?c==="href"?e.setAttributeNS(QH,c,d):e.setAttribute(c,d):f==="string"&&c!=="value"?c==="innerHTML"?e[c]=JH.sanitize(d):XA(e)&&c in e?e[c]=d:e.setAttribute(c,d):e[c]=d}}};function XA(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let y2,Dfe=(e,t,r)=>{if(t)for(let i of t)Ev(i,e,void 0,r)},tW=(e,t,r)=>{Dfe(e,t.children,r),t.text&&(e.textContent=t.text),Lfe(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},Ev=(e,t,r,i)=>{let n,s=0,a=e.vnodeSelector,c=t.ownerDocument;if(a==="")n=e.domNode=c.createTextNode(e.text),r!==void 0?t.insertBefore(n,r):t.appendChild(n);else{for(let d=0;d<=a.length;++d){let f=a.charAt(d);if(d===a.length||f==="."||f==="#"){let g=a.charAt(s-1),v=a.slice(s,d);g==="."?n.classList.add(v):g==="#"?n.id=v:(v==="svg"&&(i=zN(i,{namespace:jT})),i.namespace!==void 0?n=e.domNode=c.createElementNS(i.namespace,v):(n=e.domNode=e.domNode||c.createElement(v),v==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(n,r):n.parentNode!==t&&t.appendChild(n)),s=d+1}}tW(n,e,i)}},QA=(e,t,r)=>{t&&t.split(" ").forEach((i=>{i&&e.classList.toggle(i,r)}))},kfe=(e,t,r,i)=>{if(!r)return;let n=!1,s=Object.keys(r),a=s.length;for(let c=0;c<a;c++){let d=s[c],f=r[d],g=t[d];if(d==="class")g!==f&&(QA(e,g,!1),QA(e,f,!0));else if(d==="classes"){let v=e.classList,w=Object.keys(f),S=w.length;for(let T=0;T<S;T++){let E=w[T],M=!!f[E];M!==!!g[E]&&(n=!0,M?v.add(E):v.remove(E))}}else if(d==="styles"){let v=Object.keys(f),w=v.length;for(let S=0;S<w;S++){let T=v[S],E=f[T];E!==g[T]&&(n=!0,E?(KH(E),i.styleApplyer(e,T,E)):i.styleApplyer(e,T,""))}}else if(f||typeof g!="string"||(f=""),d!=="value"||XA(e)){if(f!==g){let v=typeof f;v==="function"&&i.eventHandlerInterceptor||(i.namespace===jT?d==="href"?e.setAttributeNS(QH,d,f):e.setAttribute(d,f):v==="string"?d==="innerHTML"?e[d]=JH.sanitize(f):d==="role"&&f===""?e.removeAttribute(d):XA(e)&&d in e?e[d]=f:e.setAttribute(d,f):e[d]!==f&&(e[d]=f),n=!0)}}else{let v=e[d];v!==f&&(e["oninput-value"]?v===e["oninput-value"]:f!==g)&&(e[d]=f,e["oninput-value"]=void 0),f!==g&&(n=!0)}}return n},Ffe=(e,t,r,i,n)=>{if(r===i)return!1;i=i||hF;let s,a=(r=r||hF).length,c=i.length,d=0,f=0,g=!1;for(;f<c;){let v=d<a?r[d]:void 0,w=i[f];if(v!==void 0&&VN(v,w))g=y2(v,w,n)||g,d++;else{let S=Nfe(r,w,d+1);if(S>=0){for(s=d;s<S;s++)mF(r[s]),vM(r,s,e,"removed");g=y2(r[S],w,n)||g,d=S+1}else Ev(w,t,d<a?r[d].domNode:void 0,n),Pfe(w),vM(i,f,e,"added")}f++}if(a>d)for(s=d;s<a;s++)mF(r[s]),vM(r,s,e,"removed");return g};y2=(e,t,r)=>{let i=e.domNode,n=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let a=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(a,i),t.domNode=a,n=!0,n}t.domNode=i}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=zN(r,{namespace:jT})),e.text!==t.text&&(s=!0,t.text===void 0?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,s=Ffe(t,i,e.children,t.children,r)||s,s=kfe(i,e.properties,t.properties,r)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),n};let Uw=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=r,y2(i,r,t)},domNode:e.domNode});const Ufe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let $0=e=>zN(Ufe,e),vc={append:(e,t,r)=>(r=$0(r),Ev(t,e,void 0,r),Uw(t,r)),insertBefore:(e,t,r)=>(r=$0(r),Ev(t,e.parentNode,e,r),Uw(t,r)),merge:(e,t,r)=>(r=$0(r),t.domNode=e,tW(e,t,r),Uw(t,r)),replace:(e,t,r)=>(r=$0(r),Ev(t,e.parentNode,e,r),e.parentNode.removeChild(e),Uw(t,r))},rW,jfe=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};rW=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let zfe=(e,t)=>{let r=e;return t.forEach((i=>{r=r&&r.children?rW(r.children,(n=>n.domNode===i)):void 0})),r},Vfe=(e,t,r)=>{let i=function(n){r("domEvent",n);let s=t(),a=jfe(n.currentTarget,s.domNode);a.reverse();let c,d=zfe(s.getLastRender(),a);return e.scheduleRender(),d&&(c=d.properties[`on${n.type}`].apply(d.properties.bind||this,arguments)),r("domEventProcessed",n),c};return(n,s,a,c)=>i},yF=e=>{let t,r,i=$0(e),n=i.performanceLogger,s=!0,a=!1,c=[],d=[],f=(v,w,S)=>{let T,E=()=>T;i.eventHandlerInterceptor=Vfe(t,E,n),T=v(w,S(),i),c.push(T),d.push(S)},g=()=>{if(r=void 0,s){s=!1,n("renderStart",void 0);for(let v=0;v<c.length;v++){let w=d[v]();n("rendered",void 0),c[v].update(w),n("patched",void 0)}n("renderDone",void 0),s=!0}};return t={renderNow:g,scheduleRender:()=>{r||a||(r=requestAnimationFrame(g))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),a=!0},resume:()=>{a=!1,s=!0,t.scheduleRender()},append:(v,w)=>{f(vc.append,v,w)},insertBefore:(v,w)=>{f(vc.insertBefore,v,w)},merge:(v,w)=>{f(vc.merge,v,w)},replace:(v,w)=>{f(vc.replace,v,w)},detach:v=>{for(let w=0;w<d.length;w++)if(d[w]===v)return d.splice(w,1),c.splice(w,1)[0];throw new Error("renderFunction was not found")}},t},Vu=class extends Ae{constructor(){super(...arguments),this.items=new ge,this._watchUpdatingTracking=new vh,this._callbacks=new Map,this._projector=yF(),this._hiddenProjector=yF()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange((()=>this.items),(r=>{for(const i of r.added){const n=()=>i.render();this._callbacks.set(i,n),this._projector.append(this.surface,n)}for(const i of r.removed){const n=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(n.domNode),this._callbacks.delete(i)}}))}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach((t=>this._projector.detach(t))),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const r=this._hiddenSurface,i=this._hiddenProjector;let n;const s=()=>(n=t.render(),n);i.append(r,s),i.renderNow();const a={left:0,top:0,right:0,bottom:0};if(n?.domNode){const c=n.domNode.getBoundingClientRect();a.left=c.left,a.top=c.top,a.right=c.right,a.bottom=c.bottom}for(i.detach(s);r.firstChild;)r.removeChild(r.firstChild);return a}overlaps(t,r){const i=this.computeBoundingRect(t),n=this.computeBoundingRect(r);return Math.max(i.left,n.left)<=Math.min(i.right,n.right)&&Math.max(i.top,n.top)<=Math.min(i.bottom,n.bottom)}get hasVisibleItems(){return this.items.some((t=>t.visible))}async prepare(){await document.fonts.load(this._fontString()).catch((()=>{}))}renderCanvas(t,r){const i=!!r?.disableDecorations;if(!this.items.some((s=>s.visible&&!(i&&s.isDecoration))))return;const n=t.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach((s=>{i&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())})),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};u([p({readOnly:!0})],Vu.prototype,"surface",void 0),u([p({readOnly:!0})],Vu.prototype,"items",void 0),u([p({readOnly:!0})],Vu.prototype,"needsRender",null),u([p({readOnly:!0})],Vu.prototype,"_watchUpdatingTracking",void 0),u([p({readOnly:!0})],Vu.prototype,"updating",null),Vu=u([O("esri.views.overlay.ViewOverlay")],Vu);const gF=Vu,bM=[0,0];function Gfe(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return bM[0]=r.left+(t?.pageXOffset??0),bM[1]=r.top+(t?.pageYOffset??0),bM}function vF(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function qfe(e){const t=document.createElement("div");return e.appendChild(t),t}const Bp=16,Kg=750,Bfe=512,Hfe=2,Wfe=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:Bp,time:Kg},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([je((()=>this.cursor),(i=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",i)})),je((()=>this.navigating),(i=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",i.toString())}))])}initialize(){this.addHandles([je((()=>this.ui),((r,i)=>this._handleUIChange(r,i)),Hi),this.on("focus",(()=>this.notifyChange("focused"))),this.on("blur",(()=>this.notifyChange("focused")))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const i=this._get("container"),n=FN(r);if(n||typeof r!="string"||re.getLogger(this).error("#container",`element with id '${r}' not found`),i===n)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(vF(this.root),this._set("root",null)),this.userContent&&(aF(this.userContent,i),vF(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",aF(n,s),n.appendChild(s),this._set("userContent",s);const a=document.createElement("div");a.className="esri-view-root",n.insertBefore(a,n.firstChild),this._set("root",a);const c=document.createElement("div");c.className="esri-view-surface",c.setAttribute("role","application"),c.tabIndex=0,a.appendChild(c),this._set("surface",c);const d=new gF;a.appendChild(d.surface),this._set("overlay",d),this.addHandles(je((()=>d.needsRender),(f=>{f&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=qm({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=ir(this._overlayRenderTaskHandle)}))),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}set ui(r){const i=this._get("ui");i!==r&&i?.destroy(),this._set("ui",r)}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(r,i,n){const s=this.position;return r-=s?s[0]:0,i-=s?s[1]:0,n?(n[0]=r,n[1]=i):n=[r,i],n}containerToPage(r,i,n){const s=this.position;return r+=s?s[0]:0,i+=s?s[1]:0,n?(n[0]=r,n[1]=i):n=[r,i],n}_handleUIChange(r,i){this.removeHandles("ui"),i&&i!==r&&i.destroy(),r&&(r.view=this,this.addHandles(je((()=>this.root),(n=>{r.container=n?qfe(n):null}),Hi),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=Bp,r.time=Kg;const i=qm({prepare:a=>{const c=this._measure(),d=this._freqInfo;if(d.time+=a.deltaTime,c&&(d.freq=Bp,this._get("resizing")||this._set("resizing",!0)),d.time<d.freq)return;d.time=0;const f=this._position();d.freq=f||c?Bp:Math.min(Kg,d.freq*Hfe),!c&&d.freq>=Bfe&&(i.pause(),this._get("resizing")&&this._set("resizing",!1))}}),n=new ResizeObserver((a=>{r.freq=Bp,r.time=Kg,i.resume()}));this.container!=null&&n.observe(this.container);const s=ht((()=>n.disconnect()));this.addHandles([py(window,"resize",(()=>{r.freq=Bp,r.time=Kg,i.resume()})),s,i],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,n=r?r.clientHeight:0;if(i===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,a=this.height;return i===s&&n===a?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:a,width:i,height:n}),!0)}_position(){const r=this.container,i=this.position,n=r&&Gfe(r);return!!n&&(!i||n[0]!==i[0]||n[1]!==i[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return u([p()],t.prototype,"container",null),u([p({readOnly:!0})],t.prototype,"focused",null),u([p({readOnly:!0})],t.prototype,"height",void 0),u([p()],t.prototype,"messagesCommon",void 0),u([p({type:gF})],t.prototype,"overlay",void 0),u([p({readOnly:!0})],t.prototype,"position",void 0),u([p({readOnly:!0})],t.prototype,"resizing",void 0),u([p({readOnly:!0})],t.prototype,"root",void 0),u([p({value:null,readOnly:!0})],t.prototype,"size",null),u([p({readOnly:!0})],t.prototype,"surface",void 0),u([p({readOnly:!0})],t.prototype,"suspended",void 0),u([p({nonNullable:!0})],t.prototype,"ui",null),u([p({readOnly:!0})],t.prototype,"userContent",void 0),u([p({readOnly:!0})],t.prototype,"width",void 0),u([p()],t.prototype,"widthBreakpoint",void 0),t=u([O("esri.views.DOMContainer")],t),t},iW=V("mac")?"Meta":"Control",Zfe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),Yfe=e=>Zfe.has(e);let Jfe=class{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=t.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}},si=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const r=this._incoming[t];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((t=>t.eventType))),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback((r=>this._handleEvent(r))),t.setUninstallCallback((()=>this._onUninstall())),this._manager=t)}onUninstall(){}registerIncoming(t,r,i){let n;typeof r=="function"?(i=r,n=[]):n=r||[];const s=typeof t=="string"?new Jfe(t,n):t,a=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},c=g=>{const v=this._incoming[g.match.eventType];if(v){const w=v.indexOf(g);v.splice(w,1),a(),this._manager&&this._manager.updateDependencies()}},d=new Xfe(s,i,{onPause:c,onRemove:c,onResume:g=>{const v=this._incoming[g.match.eventType];v&&!v.includes(g)&&(v.push(g),a(),this._manager&&this._manager.updateDependencies())}});let f=this._incoming[s.eventType];return f||(f=[],this._incoming[s.eventType]=f),f.push(d),a(),this._manager&&this._manager.updateDependencies(),d}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const r=new Qfe(t,{onEmit:(i,n,s,a)=>{this._manager?.emit(i.eventType,n,s,a)},onRemove:i=>{delete this._outgoing[i.eventType],this._manager?.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){this._manager?.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager?.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){const r=this._incoming[t.type];if(r){for(const i of r)if(i.match.matches(t)&&(i.callback?.(t),t.shouldStopPropagation()))break}}},Xfe=class{constructor(t,r,i){this.match=t,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Qfe=class{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,i){this._removed||this._handler.onEmit(this,t,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}},Kfe=class extends si{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",(r=>this._update(r.data)))}_update(t){const r=t.native.pointerType==="touch"?"touch":"mouse",{x:i,y:n}=t;r===this._value&&this._x===i&&this._y===n||(this._value=r,this._x=i,this._y=n,this._onChange(r,i,n))}},eme=class{constructor(t,r){this._observable=new C1,this._value=t,this._equalityFunction=r}get value(){return Le(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function ey(e,t=R7){return new eme(e,t)}let tme=class extends si{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=ey(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},rme=class{constructor(t,r){this._owner=r,this._properties={},this._afterDispatchHandle=null;for(const i in t){const n=t[i],s=new OV(n,void 0,void 0,2,2);this._properties[i]={pool:s,acquired:[]}}this._afterDispatchHandle=Lne((()=>this._release()))}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const r=this._properties[t];for(const i of r.acquired)v5(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(t){const r=this._owner._get(t),i=this._properties[t];let n=i.pool.acquire();for(i.acquired.push(n);n===r;)i.acquired.push(n),n=i.pool.acquire();return n}_release(){for(const t in this._properties){const r=this._properties[t];let i=0;for(const n of r.acquired)v5(n)?r.acquired[i++]=n:r.pool.release(n);r.acquired.length=i}}},Cs=class extends Ae{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=iW,this._latestPointerType="mouse",this._propertiesPool=new rme({latestPointerLocation:sme},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const r of t)this.uninstallHandlers(r);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some((t=>t.handler.hasPendingInputs))}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,r,i=Hl.INTERNAL){if(this._nameToGroup[t]||r.length===0)return;const n={name:t,handlers:r.map((s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null})))};this._nameToGroup[t]=n;for(let s=n.handlers.length-1;s>=0;s--){const a=n.handlers[s];this._handlers.push(a),a.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(c,d,f,g,v)=>{this._emitInputEvent(a.priorityIndex+1,c,d,f,v,g)},setPointerCapture:(c,d)=>{this._setPointerCapture(n,a,c,d)},setEventCallback:c=>{a.eventCallback=c},setUninstallCallback:c=>{a.uninstallCallback=c},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const r=this._nameToGroup[t];r?(r.handlers.forEach((i=>{i.removed=!0,i.uninstallCallback?.()})),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):re.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,r=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const n=this._handlers[i];n.priorityIndex=i,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const n=this._handlersPriority[i];n.priorityIndex=i;let s=n.handler.hasSideEffects;if(!s){for(const a of n.handler.outgoingEventTypes)if(t.has(a)){s=!0;break}}if(s)for(const a of n.handler.incomingEventMatches){t.add(a.eventType);for(const c of a.keyModifiers)Yfe(c)||r.add(c)}n.active=s}this._sourceEvents=t,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,r,i){this._latestPointerType=t;const n=this._get("latestPointerLocation");if(n==null||n.x!==r||n.y!==i){const s=this._propertiesPool.get("latestPointerLocation");s.x=r,s.y=i,this._set("latestPointerLocation",s)}}_onEventReceived(t,r){if(t==="pointer-capture-lost"){const s=r;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(t,r);const i=this.test.timestamp!=null?this.test.timestamp:r.native?r.native.timestamp:void 0,n=r.native?r.native.cancelable:void 0;this._emitInputEventFromSource(t,r,i,n)}_updateKeyModifiers(t,r){if(!r)return;let i=!1;const n=()=>{i||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),i=!0)},s=(c,d)=>{d&&!this._activeKeyModifiers.has(c)?(n(),this._activeKeyModifiers.add(c)):!d&&this._activeKeyModifiers.has(c)&&(n(),this._activeKeyModifiers.delete(c))};if(t==="key-down"||t==="key-up"){const c=r.key;this._keyModifiers.has(c)&&s(c,t==="key-down")}const a=r.native;s("Alt",!!a?.altKey),s("Control",!!a?.ctrlKey),s("Ctrl",!!a?.ctrlKey),s("Shift",!!a?.shiftKey),s("Meta",!!a?.metaKey),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new Kfe(((t,r,i)=>this._setLatestPointer(t,r,i))),this._multiTouchHandler=new tme,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Hl.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Hl.INTERNAL)}_setPointerCapture(t,r,i,n){const s=t.name+"-"+r.priorityIndex,a=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,a),n?(a.add(s),a.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):a.has(s)&&(a.delete(s),a.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter((t=>!t.removed)),this.updateDependencies()}_emitInputEventFromSource(t,r,i,n){this._emitInputEvent(0,t,r,i,n)}_emitInputEvent(t,r,i,n,s,a){const c=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),d=s!==void 0&&s,f={event:new ime(r,i,c,a||this._activeKeyModifiers,d),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(f):this._doNewPropagation(f)}_doNewPropagation(t){this._currentPropagation={events:new t1,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:r,priorityIndex:i}=t.events.pop(),n=r.data?.eventId;if(!(n!=null&&this._stoppedPropagationEventIds.has(n)))for(t.currentHandler=this._handlersPriority[i];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!r.shouldStopPropagation()&&t.currentHandler.eventCallback?.(r),r.shouldStopPropagation()){n!=null&&this._stoppedPropagationEventIds.add(n);break}if(r.shouldPausePropagation((()=>this._continuePropagation())))return void this._pausePropagation({event:r,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const r=new t1;r.push(t);const i=this._currentPropagation;if(i){for(;i.events.length;)r.push(i.events.pop());i.events=r,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,r){if(t.handler.hasSideEffects!==r.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==r.groupPriority)return t.groupPriority>r.groupPriority?-1:1;for(const i of t.handler.incomingEventMatches)for(const n of r.handler.incomingEventMatches){if(i.eventType!==n.eventType)continue;const s=i.keyModifiers.filter((a=>n.keyModifiers.includes(a)));if(s.length===i.keyModifiers.length!=(s.length===n.keyModifiers.length))return i.keyModifiers.length>n.keyModifiers.length?-1:1}return t.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(t){const r=[];for(const i of t){let n=0;for(;n<r.length&&this._compareHandlerPriority(i,r[n])>=0;)n++;r.splice(n,0,i)}return r}get debug(){const t=r=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},r(),this._setPointerCapture=i};return{injectEvent:(r,i)=>{t((()=>this._onEventReceived(r,i)))},disablePointerCapture:t}}};u([p({readOnly:!0})],Cs.prototype,"hasPendingInputs",null),u([p({constructOnly:!0})],Cs.prototype,"eventSource",void 0),u([p({constructOnly:!0})],Cs.prototype,"recognizers",void 0),u([p()],Cs.prototype,"_latestPointerType",void 0),u([p()],Cs.prototype,"latestPointerType",null),u([p()],Cs.prototype,"multiTouchActive",null),u([p({readOnly:!0})],Cs.prototype,"latestPointerLocation",void 0),u([p()],Cs.prototype,"_paused",void 0),u([p({readOnly:!0})],Cs.prototype,"updating",null),Cs=u([O("esri.views.input.InputManager")],Cs);let ime=class{constructor(t,r,i,n,s){this.type=t,this.data=r,this.timestamp=i,this.modifiers=n,this.cancelable=s,this._propagationState=ic.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=ic.STOPPED}shouldStopPropagation(){return(this._propagationState&ic.STOPPED)!==0}defer(t){this._propagationState|=ic.PAUSED;const r=(i,n)=>{this._propagationState&=~ic.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw i;return i};return(typeof t=="function"?t():t).then((i=>r(i,!1)),(i=>r(i,!0)))}shouldPausePropagation(t){return!!(this._propagationState&ic.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var ic;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(ic||(ic={}));const Hl={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let nme=class{};const sme=nme;function ku(e){return e!=null&&"open"in e&&"declaredClass"in e}function bF(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const ome=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([je((()=>[this.ui,this.popup]),(([r,i],n)=>{const s="popup",a="manual";if(n){const[c,d]=n;c&&ku(d)&&(d.view=null,bF(d)&&(c.remove(d,s),d!==i&&i&&d.destroy()))}r&&ku(i)&&(i.view=this,bF(i)&&r.add(i,{key:s,position:a,internal:!0}))}),an),this.on("click",(r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&(ku(this.popup)?this.popup.viewModel.handleViewClick(r):r.defer((async()=>{await this.setupPopup(),ku(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(r)})))}),Hl.WIDGET)]),wN((()=>this.ready&&this.popupEnabled&&!this.updating)).then((()=>{ue(()=>import("./Popup-BctESBTl.js").then(r=>r.P),__vite__mapDeps([164,1,165,6,166,167,168,21,169,170,171,74,72,73,7,29,34,172,173,174,175,120,176]))}))}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(ku(this.popup))return this.popup.open(r);try{if(await this.setupPopup(),!this.popup)return void re.getLogger(this).error(new z("view:null-popup","Popup is null and can't be opened"));this.popup.open(r)}catch{}}closePopup(){this._popupSetupTask?.abort(),ku(this.popup)&&this.popup.close()}async fetchPopupFeatures(r,i){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,i),i)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!ku(this.popup))return this._popupSetupTask=bT((async r=>{const{default:i}=await ue(()=>import("./Popup-BctESBTl.js").then(s=>s.P),__vite__mapDeps([164,1,165,6,166,167,168,21,169,170,171,74,72,73,7,29,34,172,173,174,175,120,176]));if(Yt(r),!this.popup||ku(this.popup))return;const n=this.popup;delete n.open,delete n.close,this.popup=new i(n)})),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:i},n){const s=[],a=[];let c=!1;const d=uie(n,V("popup-view-fetch-timeout")??lme),f=w=>{const S=new ame(w);return a.push(S),s.push(S.promise),S},g=w=>{const S=a.at(-1);return S&&S.layerView===w&&!c?S:f(w)};for(const w of i)"graphic"in w?(g(w.layerView).graphics.push(w.graphic),c=!1):(s.push(w.layerView.fetchPopupFeaturesAtLocation(w.mapPoint,d)),c=!0);a.map((w=>w.resolve(d)));const v=lie(s).then((w=>w.filter((S=>!!S)).flat()));return{pendingFeatures:s,allGraphicsPromise:v,location:r}}async _getPopupHits(r,i){const{hits:n,location:s}=await this.popupHitTest(r);Yt(i);const a=[];for(const c of n)if("graphic"in c){if(this._isValidPopupGraphic(c.graphic,i)){const d=this._isValidPopupGraphicsLayerView(c.layerView)?c.layerView:void 0;a.push({graphic:c.graphic,layerView:d})}}else this._isValidPopupLocationLayerView(c.layerView)&&a.push({mapPoint:c.mapPoint,layerView:c.layerView});return{hits:a,location:s}}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(i?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return u([p()],t.prototype,"popup",void 0),u([p()],t.prototype,"popupEnabled",void 0),t=u([O("esri.views.PopupView")],t),t};let ame=class{constructor(t){this.layerView=t,this._resolver=ys(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:r,graphics:i,_resolver:n}=this;if(!r)return n.resolve(i),n.promise;let s;return r.fetchPopupFeaturesFromGraphics(i,t).catch((a=>(s=a,null))).then((a=>{a?n.resolve(a):n.reject(s)})),n.promise}};const lme=5e3;let xv=class extends ge{constructor(t){super(t),this.addHandles([this.on("before-add",(r=>{r.item==null&&r.preventDefault()})),this.on("after-add",(r=>this._own(r.item))),this.on("after-remove",(r=>this._release(r.item)))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(ge.ofType(this.itemType.Type))(t):new ge(t)}};function wF(e,t){return{type:e,cast:eG,set(r){const i=Xl(r,this._get(t),e);i.owner=this,this._set(t,i)}}}u([p()],xv.prototype,"owner",null),xv=u([O("esri.core.support.OwningCollection")],xv);var M0;const g2=wi()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),nW=g2.jsonValues.slice();cre(nW,"orthometric");const $v=wi()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let rn=M0=class extends K{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return g2.write(e,t,r)}readHeightModel(e,t,r){return g2.read(e)||(r?.messages&&r.messages.push(ume(e,{context:r})),null)}readHeightUnit(e,t,r){return $v.read(e)||(r?.messages&&r.messages.push(_F(e,{context:r})),null)}readHeightUnitService(e,t,r){return nN(e)||$v.read(e)||(r?.messages&&r.messages.push(_F(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new M0({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=$G(t);return new M0({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new M0;return t.read(e,{origin:"web-scene"}),t}};function _F(e,t){return new gs("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function ume(e,t){return new gs("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}u([p({type:g2.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:nW,default:"ellipsoidal",write:{isRequired:!0}}}}})],rn.prototype,"heightModel",void 0),u([de("web-scene","heightModel")],rn.prototype,"writeHeightModel",null),u([le(["web-scene","service"],"heightModel")],rn.prototype,"readHeightModel",null),u([p({type:$v.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:$v.jsonValues,write:{writer:$v.write,isRequired:!0}}}}})],rn.prototype,"heightUnit",void 0),u([le("web-scene","heightUnit")],rn.prototype,"readHeightUnit",null),u([le("service","heightUnit")],rn.prototype,"readHeightUnitService",null),u([p({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],rn.prototype,"vertCRS",void 0),u([le("service","vertCRS",["vertCRS","ellipsoid","geoid"])],rn.prototype,"readVertCRS",null),rn=M0=u([O("esri.geometry.HeightModelInfo")],rn);let v2=class extends xv{constructor(t){super(t),this.addHandles(this.on("before-add",(r=>{r.item!=null&&r.item.parent===this.owner&&(re.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),r.preventDefault())})))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};v2=u([O("esri.support.AnalysesCollection")],v2);let wM;async function cme(){return wM==null&&(wM=ue(()=>import("./WhereClauseCache-BbjZV4Ab.js"),__vite__mapDeps([35,36])).then((e=>new e.WhereClauseCache(500,500)))),wM}async function sW(e,t){const r=await cme(),i=r.get(e,t);if(i==null)throw r.getError(e,t);return i}function dme(e,t){return e||=null,t||=null,e==="1=1"?t??e:t==="1=1"?e??t:e&&t?`(${e}) AND (${t})`:e??t}function hme(e,t){return e||=null,t||=null,e==="1=1"||t==="1=1"||e===t?e==="1=1"?e:t:e&&t?`(${e}) OR (${t})`:e??t}function ENe(e,t){return t.length===0?null:`${e} IN (${pme(t)})`}function pme(e){return e.map((t=>typeof t=="string"?fme(t):t)).join(",")}function fme(e){return`'${e.replaceAll("'","''")}'`}function mme(e){return typeof e=="number"}function xNe(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function $Ne(e){return typeof e=="boolean"}function j1(e){return typeof e=="string"||e instanceof String}function yme(e){return e==null||j1(e)}function MNe(e){return Array.isArray(e)}function ANe(e){return e?.declaredClass==="esri.Graphic"}function ONe(e){return e instanceof Date}const gme="HH:mm",vme="HH:mm:ss",bme="HH:mm:ss.SSS",wme=[bme,vme,gme,"TT"],_me="yyyy-MM-dd";function SF(e){if(!e||!j1(e))return null;const t=_e.fromFormat(e,_me);return t.isValid?t:null}function TF(e){return e&&j1(e)?aie(wme,(t=>{const r=_e.fromFormat(e,t);return r.isValid?r:null}))??null:null}function EF(e){if(!e||!j1(e))return null;const t=_e.fromISO(e);return t.isValid?t:null}var b2;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(b2||(b2={}));const oW=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function Sme(e){return e!=null&&oW.has(e.type)}function aW(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function lW(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function uW(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}const Tme=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);GI(oW,Tme);function RNe(e,t){const r=e?.domain;if(!r||r.type!=="range")return;const i="range"in r?r.range[0]:r.minValue,n="range"in r?r.range[1]:r.maxValue,s=Sme(e);return aW(e)||uW(e)||lW(e)?{...Eme(e,n,i),isInteger:s}:{min:i!=null&&typeof i=="number"?i:null,max:n!=null&&typeof n=="number"?n:null,rawMin:i,rawMax:n,isInteger:s}}function Eme(e,t,r){return aW(e)?{min:SF(r)?.toMillis(),max:SF(t)?.toMillis(),rawMin:r,rawMax:t}:uW(e)?{min:TF(r)?.toMillis(),max:TF(t)?.toMillis(),rawMin:r,rawMax:t}:lW(e)?{min:EF(r)?.toMillis(),max:EF(t)?.toMillis(),rawMin:r,rawMax:t}:{max:null,min:null}}function xme(e){if(!e)return;const t=e.match($me);return t?.groups?t.groups.doubleQuoted??t.groups.singleQuoted??t.groups.dotNotation:void 0}const $me=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function Mme(e){return e.match(Ame)?.[1]?.replace(/\\'/g,"'")??null}const Ame=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let _M;function jh(){return _M||(_M=(async()=>{const[e,t,r]=await Promise.all([ue(()=>import("./arcadeUtils-HoMv7bfZ.js"),__vite__mapDeps([177,178,179,180,172,45,181,33,29,7,34,36,182])),ue(()=>import("./batchExec-DakO5JHK.js"),__vite__mapDeps([183,98])),ue(()=>import("./aiServices-BSAurg_7.js").then(i=>i.ag),__vite__mapDeps([179,180,172,45,181]))]);return{arcade:e.arcade,arcadeUtils:e,batchExec:t,aiServices:r,Dictionary:e.Dictionary,Feature:e.arcadeFeature,Voxel:e.Voxel}})()),_M}const Ome=/^([0-9_])/,Rme=/[^a-z0-9_\u0080-\uffff]+/gi;function Cme(e){return e==null?null:e.trim().replaceAll(Rme,"_").replace(Ome,"F$1")||null}const Ime=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Nme=["field","normalizationField"];function xF(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if($F(Ime,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)$F(Nme,i,t)}}function $F(e,t,r){if(e)for(const i of e){const n=uT(i,t),s=n&&typeof n!="function"&&r.get(n);s&&ii(i,s.name,t)}}function cW(e,t){if(e!=null&&t?.fields?.length)if("startField"in e){const r=t.get(e.startField),i=t.get(e.endField);e.startField=r?.name??null,e.endField=i?.name??null}else{const r=t.get(e.startTimeField),i=t.get(e.endTimeField);e.startTimeField=r?.name??null,e.endTimeField=i?.name??null}}const SM=new Set;function zT(e,t){return e&&t?(SM.clear(),zh(SM,e,t),Array.from(SM).sort()):[]}function zh(e,t,r){if(r)if(t?.fields?.length)if(r.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const i of r)yn(e,t,i);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const i of r)i!=null&&e.add(i)}}function yn(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function CNe(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map((r=>r.name)):t}function INe(e,t,r=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const i=zT(e,t);return i.length/e.fields.length>=r?["*"]:i}async function Yi(e,t,r){if(!r)return;let i;const n=xme(r);if(n)i=[n];else{const{arcadeUtils:s}=await jh();i=s.extractFieldNames(r,t?.fields?.map((a=>a.name)))}for(const s of i)yn(e,t,s)}async function GN(e,t,r){if(r&&r!=="1=1"){const i=await sW(r,t);if(!i.isStandardized)throw new z("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});zh(e,t,i.fieldNames)}}function Pme({displayField:e,fields:t}){return e||(t?.length?TM(t,"name-or-title")||TM(t,"unique-identifier")||TM(t,"type-or-category")||Lme(t):null)}function Lme(e){for(const t of e){if(!t?.name)continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function TM(e,t){for(const r of e)if(r?.valueType&&r.valueType===t)return r.name;return null}async function NNe(e,t){if(!t)return;const r=t.elevationInfo?.featureExpressionInfo;return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}function Dme(e,t,r){r.onStatisticExpression?Yi(e,t,r.onStatisticExpression.expression):e.add(r.onStatisticField)}async function PNe(e,t,r){if(!t||!r||!("fields"in r))return;const i=[],n=r.popupTemplate;i.push(dW(e,t,n)),r.fields&&i.push(...r.fields.map((async s=>Dme(e,t.fieldsIndex,s)))),await Promise.all(i)}async function LNe(e,t){const{fieldsIndex:r,trackInfo:i}=t;if(!t||!i||!r)return;const n=[i.latestObservations.renderer?.collectRequiredFields(e,r),i.previousObservations.renderer?.collectRequiredFields(e,r),i.trackLines.renderer?.collectRequiredFields(e,r)];i.popupTemplate&&n.push(dW(e,t,i.popupTemplate));for(const s of[i.latestObservations.labelingInfo,i.previousObservations.labelingInfo,i.trackLines.labelingInfo])if(s)for(const a of s)n.push(fW(e,r,a));await Promise.all(n)}async function dW(e,t,r){const i=[];r?.expressionInfos&&i.push(...r.expressionInfos.map((s=>Yi(e,t.fieldsIndex,s.expression))));const n=r?.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&i.push(Yi(e,t.fieldsIndex,s.expressionInfo.expression));await Promise.all(i)}async function DNe(e,t,r){t&&(t.timeInfo&&r?.timeExtent&&zh(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&zh(e,t.fieldsIndex,[t.floorInfo.floorField]),r?.where!=null&&await GN(e,t.fieldsIndex,r.where))}async function kNe(e,t,r){t&&r&&await Promise.all(r.map((i=>kme(e,t,i))))}async function kme(e,t,r){t&&r&&(r.valueExpression?await Yi(e,t.fieldsIndex,r.valueExpression):r.field&&yn(e,t.fieldsIndex,r.field))}function FNe(e){return e?zT(e.fieldsIndex,hW(e)):[]}function Fme(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?zT(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function UNe(e,t,r){if(!t||!r)return;const i=t.fieldsIndex;await Promise.all(r.filters.map((n=>GN(e,i,n.where))))}const Ume=new Set(["oid","global-id","guid"]),jme=new Set(["oid","global-id"]),zme=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function Vme(e){const t=new Set;pW(e).forEach((i=>t.add(i))),Fme(e).forEach((i=>t.add(i.toLowerCase())));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach((i=>t.add(i.toLowerCase()))),Object.values(r.transformFieldRoles).forEach((i=>t.add(i.toLowerCase())))),Array.from(t)}function hW(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:i,editDateField:n,editorField:s}=t;return[r,i,n,s].filter(Boolean)}function pW(e){return hW(e).map((t=>t.toLowerCase()))}function Gme(e,t){return e.editable&&!Ume.has(e.type)&&!pW(t).includes(e.name?.toLowerCase()??"")}function qme(e,t){const r=e.name?.toLowerCase()??"";return!(t?.objectIdField!=null&&r===t.objectIdField.toLowerCase()||t?.globalIdField!=null&&r===t.globalIdField.toLowerCase()||Vme(t).includes(r)||jme.has(e.type)||zme.some((i=>i.test(r))))}async function jNe(e,t){const{labelingInfo:r,fieldsIndex:i}=t;r?.length&&await Promise.all(r.map((n=>fW(e,i,n))))}async function fW(e,t,r){if(!r)return;const i=r.getLabelExpression(),n=r.where;if(i.type==="arcade")await Yi(e,t,i.expression);else{const s=i.expression.match(/{[^}]*}/g);s&&s.forEach((a=>{yn(e,t,a.slice(1,-1))}))}await GN(e,t,n)}function Bme(e){const t=e.defaultValue;return t!==void 0&&yW(e,t)?t:e.nullable?null:void 0}function zNe(e){const t=typeof e=="string"?{type:e}:e;return bW(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function mW(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function Hme(e){return e===null||mW(e)}function Wme(e){return e===null||Number.isInteger(e)}function Zme(){return!0}function yW(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=e.nullable?Wme:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?Hme:mW;break;case"string":case"esriFieldTypeString":r=e.nullable?yme:j1;break;default:r=Zme}return arguments.length===1?r:r(t)}const Yme=["integer","small-integer","big-integer","long"],Jme=["single","double"],Xme=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],Qme=["esriFieldTypeSingle","esriFieldTypeDouble"],gW=new Set([...Yme,...Xme]),Kme=new Set([...Jme,...Qme]),eye=GI(gW,Kme);function tye(e){return e!=null&&gW.has(e.type)}function vW(e){return e!=null&&eye.has(e.type)}function bW(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function rye(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function VNe(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function GNe(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function iye(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function MF(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function AF(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function qNe(e,t){return nye(e,t)===null}var w2,_2;function BNe(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function nye(e,t){return e==null||e.nullable&&t===null?null:yW(e,t)?vW(e)&&!sye(e.type,Number(t))?w2.OUT_OF_RANGE:null:_2.INVALID_TYPE}function sye(e,t){const r=typeof e=="string"?wW(e):e;if(!r)return!1;const i=r.min,n=r.max;return r.isInteger?Number.isInteger(t)&&t>=i&&t<=n:t>=i&&t<=n}function wW(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return oye;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return aye;case"esriFieldTypeBigInteger":case"big-integer":return lye;case"esriFieldTypeSingle":case"single":return uye;case"esriFieldTypeDouble":case"double":return cye}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(w2||(w2={})),(function(e){e.INVALID_TYPE="type-validation-error::invalid-type"})(_2||(_2={}));const oye={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},aye={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},lye={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},uye={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},cye={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function HNe(e,t,r){switch(e){case b2.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case b2.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case _2.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case w2.OUT_OF_RANGE:{const{min:i,max:n}=wW(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${n}`}}}function dye(e,t){return!hye(e,t,null)}function hye(e,t,r){if(!e?.attributes||!t)return!0;const i=new Set(Object.keys(e.attributes));let n=!1;for(const s of t)if(!i.has(s)&&(n=!0,r==null))break;return n}function pye(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some((t=>e.toLowerCase().startsWith(t)))}function qN(e){const t=e?.match(/{[^}]+}/g);return t?t.map((r=>r.slice(1,-1).split(":")[0].trim())):[]}let U_=class extends K{constructor(t){super(t),this.type=null}};u([p({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],U_.prototype,"type",void 0),U_=u([O("esri.popup.content.Content")],U_);const Kl=U_,jw=new tt({asc:"ascending",desc:"descending"});let A0=class extends We.ClonableMixin(K){constructor(t){super(t),this.field=null,this.order="ascending"}};u([p({type:String,json:{write:!0}})],A0.prototype,"field",void 0),u([p({type:jw.apiValues,json:{type:jw.jsonValues,read:jw.read,write:jw.write}})],A0.prototype,"order",void 0),A0=u([O("esri.popup.support.AttachmentsOrderByInfo")],A0);const fye=A0;let Gu=class extends We.ClonableMixin(Kl){constructor(t){super(t),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};u([p({type:String,json:{write:!0}})],Gu.prototype,"description",void 0),u([p({type:["auto","preview","list"],json:{write:!0}})],Gu.prototype,"displayType",void 0),u([p({type:[fye],json:{write:!0}})],Gu.prototype,"orderByFields",void 0),u([p({type:String,json:{write:!0}})],Gu.prototype,"title",void 0),u([p({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Gu.prototype,"type",void 0),Gu=u([O("esri.popup.content.AttachmentsContent")],Gu);const ty=Gu;var KA;let Od=KA=class extends Kl{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new KA({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?U(this.outFields):null})}};u([p()],Od.prototype,"creator",void 0),u([p()],Od.prototype,"destroyer",void 0),u([p()],Od.prototype,"outFields",void 0),u([p({type:["custom"],readOnly:!0})],Od.prototype,"type",void 0),Od=KA=u([O("esri.popup.content.CustomContent")],Od);const mye=Od;var eO;let sf=eO=class extends K{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new eO({title:this.title,expression:this.expression})}};u([p({type:String,json:{write:!0}})],sf.prototype,"title",void 0),u([p({type:String,json:{write:!0}})],sf.prototype,"expression",void 0),u([p({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],sf.prototype,"returnType",void 0),sf=eO=u([O("esri.popup.ElementExpressionInfo")],sf);const yye=sf;var tO;let O0=tO=class extends Kl{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){return new tO({expressionInfo:this.expressionInfo?.clone()})}};u([p({type:yye,json:{write:!0}})],O0.prototype,"expressionInfo",void 0),u([p({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],O0.prototype,"type",void 0),O0=tO=u([O("esri.popup.content.ExpressionContent")],O0);const VT=O0;let of=class extends We.ClonableMixin(K){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};u([Ne(yue)],of.prototype,"dateFormat",void 0),u([p({type:Boolean,json:{write:!0}})],of.prototype,"digitSeparator",void 0),u([p({type:dt,json:{write:!0}})],of.prototype,"places",void 0),of=u([O("esri.popup.support.FieldInfoFormat")],of);const j_=of;var rO;let yo=rO=class extends K{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new rO({fieldName:this.fieldName,format:this.format?.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};u([p({type:String,json:{write:!0}})],yo.prototype,"fieldName",void 0),u([p({type:j_,json:{write:!0}})],yo.prototype,"format",void 0),u([p({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],yo.prototype,"isEditable",void 0),u([p({type:String,json:{write:!0}})],yo.prototype,"label",void 0),u([Ne(new tt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],yo.prototype,"stringFieldOption",void 0),u([p({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],yo.prototype,"statisticType",void 0),u([p({type:String,json:{write:!0}})],yo.prototype,"tooltip",void 0),u([p({type:Boolean,json:{write:!0}})],yo.prototype,"visible",void 0),yo=rO=u([O("esri.popup.FieldInfo")],yo);const BN=yo;var iO;let cl=iO=class extends Kl{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map((r=>r.toJSON()))}clone(){return new iO(U({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};u([p({type:Object,json:{write:!0}})],cl.prototype,"attributes",void 0),u([p({type:String,json:{write:!0}})],cl.prototype,"description",void 0),u([p({type:[BN]})],cl.prototype,"fieldInfos",void 0),u([de("fieldInfos")],cl.prototype,"writeFieldInfos",null),u([p({type:String,json:{write:!0}})],cl.prototype,"title",void 0),u([p({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],cl.prototype,"type",void 0),cl=iO=u([O("esri.popup.content.FieldsContent")],cl);const ry=cl;let Rd=class extends K{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};u([p({type:String,json:{write:!0}})],Rd.prototype,"altText",void 0),u([p({type:String,json:{write:!0}})],Rd.prototype,"caption",void 0),u([p({type:String,json:{write:!0}})],Rd.prototype,"title",void 0),u([p({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Rd.prototype,"type",void 0),Rd=u([O("esri.popup.content.mixins.MediaInfo")],Rd);const HN=Rd;var nO;let Cd=nO=class extends Ae{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new nO({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};u([p()],Cd.prototype,"color",void 0),u([p()],Cd.prototype,"fieldName",void 0),u([p()],Cd.prototype,"tooltip",void 0),u([p()],Cd.prototype,"value",void 0),Cd=nO=u([O("esri.popup.content.support.ChartMediaInfoValueSeries")],Cd);const gye=Cd;var sO;let qu=sO=class extends K{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new sO({colors:U(this.colors),fields:U(this.fields),normalizeField:this.normalizeField,series:U(this.series),tooltipField:this.tooltipField})}};u([p({type:[De],json:{type:[[dt]],write:!0}})],qu.prototype,"colors",void 0),u([p({type:[String],json:{write:{isRequired:!0}}})],qu.prototype,"fields",void 0),u([p({type:String,json:{write:!0}})],qu.prototype,"normalizeField",void 0),u([p({type:[gye],json:{read:!1}})],qu.prototype,"series",void 0),u([p({type:String,json:{write:!0}})],qu.prototype,"tooltipField",void 0),qu=sO=u([O("esri.popup.content.support.ChartMediaInfoValue")],qu);const vye=qu;let R0=class extends HN{constructor(t){super(t),this.type=null,this.value=void 0}};u([p({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],R0.prototype,"type",void 0),u([p({type:vye,json:{write:{isRequired:!0}}})],R0.prototype,"value",void 0),R0=u([O("esri.popup.content.mixins.ChartMediaInfo")],R0);const GT=R0,qT=wi()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var oO;let z_=oO=class extends GT{constructor(e){super(e),this.type="bar-chart"}clone(){return new oO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};u([p({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:qT.write,isRequired:!0}}})],z_.prototype,"type",void 0),z_=oO=u([O("esri.popup.content.BarChartMediaInfo")],z_);const _W=z_;var aO;let V_=aO=class extends GT{constructor(e){super(e),this.type="column-chart"}clone(){return new aO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};u([p({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:qT.write,isRequired:!0}}})],V_.prototype,"type",void 0),V_=aO=u([O("esri.popup.content.ColumnChartMediaInfo")],V_);const SW=V_;var lO;let C0=lO=class extends K{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new lO({linkURL:this.linkURL,sourceURL:this.sourceURL})}};u([p({type:String,json:{write:!0}})],C0.prototype,"linkURL",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],C0.prototype,"sourceURL",void 0),C0=lO=u([O("esri.popup.content.support.ImageMediaInfoValue")],C0);const bye=C0;var uO;let af=uO=class extends HN{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new uO({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};u([p({type:Number,json:{write:!0}})],af.prototype,"refreshInterval",void 0),u([p({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],af.prototype,"type",void 0),u([p({type:bye,json:{write:{isRequired:!0}}})],af.prototype,"value",void 0),af=uO=u([O("esri.popup.content.ImageMediaInfo")],af);const TW=af;var cO;let G_=cO=class extends GT{constructor(e){super(e),this.type="line-chart"}clone(){return new cO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};u([p({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:qT.write,isRequired:!0}}})],G_.prototype,"type",void 0),G_=cO=u([O("esri.popup.content.LineChartMediaInfo")],G_);const EW=G_;var dO;let q_=dO=class extends GT{constructor(e){super(e),this.type="pie-chart"}clone(){return new dO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};u([p({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:qT.write,isRequired:!0}}})],q_.prototype,"type",void 0),q_=dO=u([O("esri.popup.content.PieChartMediaInfo")],q_);const xW=q_,hO={base:HN,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":_W,"column-chart":SW,"line-chart":EW,"pie-chart":xW,image:TW}};var pO;let go=pO=class extends Kl{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map((t=>t.type==="image"?TW.fromJSON(t):t.type==="barchart"?_W.fromJSON(t):t.type==="columnchart"?SW.fromJSON(t):t.type==="linechart"?EW.fromJSON(t):t.type==="piechart"?xW.fromJSON(t):void 0)).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map((r=>r.toJSON()))}clone(){return new pO(U({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};u([p()],go.prototype,"activeMediaInfoIndex",void 0),u([p({type:Object,json:{write:!0}})],go.prototype,"attributes",void 0),u([p({type:String,json:{write:!0}})],go.prototype,"description",void 0),u([p({types:[hO]})],go.prototype,"mediaInfos",void 0),u([le("mediaInfos")],go.prototype,"readMediaInfos",null),u([de("mediaInfos")],go.prototype,"writeMediaInfos",null),u([p({type:String,json:{write:!0}})],go.prototype,"title",void 0),u([p({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],go.prototype,"type",void 0),go=pO=u([O("esri.popup.content.MediaContent")],go);const n1=go;var fO;let I0=fO=class extends K{constructor(e){super(e),this.field=null,this.order=null}clone(){return new fO({field:this.field,order:this.order})}};u([p({type:String,json:{write:!0}})],I0.prototype,"field",void 0),u([p({type:["asc","desc"],json:{write:!0}})],I0.prototype,"order",void 0),I0=fO=u([O("esri.popup.support.RelatedRecordsInfoFieldOrder")],I0);const WN=I0;let ea=class extends We.ClonableMixin(Kl){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};u([p({type:String,json:{write:!0}})],ea.prototype,"description",void 0),u([p({type:Number,json:{type:dt,write:!0}})],ea.prototype,"displayCount",void 0),u([p({type:["list"],json:{write:{isRequired:!0}}})],ea.prototype,"displayType",void 0),u([p({type:[WN],json:{write:!0}})],ea.prototype,"orderByFields",void 0),u([p({type:Number,json:{type:dt,write:{isRequired:!0}}})],ea.prototype,"relationshipId",void 0),u([p({type:String,json:{write:!0}})],ea.prototype,"title",void 0),u([p({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ea.prototype,"type",void 0),ea=u([O("esri.popup.content.RelationshipContent")],ea);const s1=ea;var mO;let N0=mO=class extends Kl{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new mO({text:this.text})}};u([p({type:String,json:{write:!0}})],N0.prototype,"text",void 0),u([p({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],N0.prototype,"type",void 0),N0=mO=u([O("esri.popup.content.TextContent")],N0);const o1=N0;let dl=class extends We.ClonableMixin(K){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};u([p({type:String,json:{write:!0}})],dl.prototype,"title",void 0),u([p({type:String,json:{write:!0}})],dl.prototype,"description",void 0),u([p({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],dl.prototype,"type",void 0),u([p({type:Number,json:{type:dt,write:!0}})],dl.prototype,"associatedNetworkSourceId",void 0),u([p({type:Number,json:{type:dt,write:!0}})],dl.prototype,"associatedAssetGroup",void 0),u([p({type:Number,json:{type:dt,write:!0}})],dl.prototype,"associatedAssetType",void 0),dl=u([O("esri.popup.support.UtilityNetworkAssociationType")],dl);const $W=dl;let Bu=class extends We.ClonableMixin(Kl){constructor(t){super(t),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};u([p({type:String,json:{write:!0}})],Bu.prototype,"description",void 0),u([p({type:Number,json:{type:dt,write:!0}})],Bu.prototype,"displayCount",void 0),u([p({type:String,json:{write:!0}})],Bu.prototype,"title",void 0),u([p({type:[$W],json:{write:!0}})],Bu.prototype,"associationTypes",void 0),u([Ne({utilityNetworkAssociations:"utility-network-associations"})],Bu.prototype,"type",void 0),Bu=u([O("esri.popup.content.UtilityNetworkAssociationsContent")],Bu);const ZN=Bu,wye={base:null,key:"type",typeMap:{attachment:ty,media:n1,text:o1,expression:VT,field:ry,relationship:s1,utilityNetworkAssociations:ZN}},_ye={base:null,key:"type",typeMap:{attachment:ty,media:n1,text:o1,expression:VT,field:ry,relationship:s1}};var yO;let Id=yO=class extends K{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new yO({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([p({type:String,json:{write:!0}})],Id.prototype,"name",void 0),u([p({type:String,json:{write:!0}})],Id.prototype,"title",void 0),u([p({type:String,json:{write:!0}})],Id.prototype,"expression",void 0),u([p({type:["string","number"],json:{write:!0}})],Id.prototype,"returnType",void 0),Id=yO=u([O("esri.popup.ExpressionInfo")],Id);const Sye=Id;var gO;let P0=gO=class extends K{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new gO({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};u([p({type:Boolean,json:{write:!0}})],P0.prototype,"returnTopmostRaster",void 0),u([p({type:Boolean,json:{write:!0}})],P0.prototype,"showNoDataRecords",void 0),P0=gO=u([O("esri.popup.LayerOptions")],P0);const Tye=P0;var vO;let L0=vO=class extends K{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new vO({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?U(this.orderByFields):null})}};u([p({type:Boolean,json:{write:!0}})],L0.prototype,"showRelatedRecords",void 0),u([p({type:[WN],json:{write:!0}})],L0.prototype,"orderByFields",void 0),L0=vO=u([O("esri.popup.RelatedRecordsInfo")],L0);const OF=L0;var bO;let Is=bO=class extends F1.IdentifiableMixin(Ae){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new bO({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};u([p()],Is.prototype,"active",void 0),u([p()],Is.prototype,"className",void 0),u([p()],Is.prototype,"disabled",void 0),u([p()],Is.prototype,"icon",void 0),u([p()],Is.prototype,"id",void 0),u([p()],Is.prototype,"indicator",void 0),u([p()],Is.prototype,"title",void 0),u([p()],Is.prototype,"type",void 0),u([p()],Is.prototype,"visible",void 0),Is=bO=u([O("esri.support.actions.ActionBase")],Is);const YN=Is;var wO;let B_=wO=class extends YN{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new wO({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};u([p()],B_.prototype,"image",void 0),B_=wO=u([O("esri.support.actions.ActionButton")],B_);const Eye=B_;var _O;let D0=_O=class extends YN{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new _O({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};u([p()],D0.prototype,"image",void 0),u([p()],D0.prototype,"value",void 0),D0=_O=u([O("esri.support.actions.ActionToggle")],D0);const xye=D0,e0="relationships/",RF="expression/",$ye=ge.ofType({key:"type",defaultKeyValue:"button",base:YN,typeMap:{button:Eye,toggle:xye}}),Mye={base:Kl,key:"type",typeMap:{media:n1,custom:mye,text:o1,attachments:ty,fields:ry,expression:VT,relationship:s1,utilityNetworkAssociations:ZN}},MW=new Set(["attachments","fields","media","text","expression","relationship"]),Aye=new Set([...MW,"utility-network-associations"]);let jr=class extends We.ClonableMixin(K){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map((r=>Ma(Mye,r))):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||Ia(t)?t:(re.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeWebSceneContent(t,r,i,n){this._writePopupTemplateContent(t,r,n)}writeWebMapContent(t,r,i,n){this._writePopupTemplateContent(t,r,n)}writeFieldInfos(t,r,i,n){const{content:s}=this,a=Array.isArray(s)?s:null;if(t){const c=a?a.filter((f=>f.type==="fields")):[],d=c.length&&c.every((f=>f.fieldInfos?.length));r.fieldInfos=t.filter(Boolean).map((f=>{const g=f.toJSON(n);return d&&(g.visible=!1),g}))}if(a)for(const c of a)c.type==="fields"&&this._writeFieldsContent(c,r)}writeLayerOptions(t,r,i,n){r[i]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(n)}writeTitle(t,r){r.title=t||""}async collectRequiredFields(t,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(t,r,[...i,...this._getContentExpressionInfos(this.content,i)]),zh(t,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const r=new Set;return await this.collectRequiredFields(r,t),[...r].sort()}_writePopupTemplateContent(t,r,i){typeof t!="string"?Array.isArray(t)&&(r.popupElements=t.filter((n=>i?.origin==="web-scene"?MW.has(n.type):Aye.has(n.type))).map((n=>n?.toJSON(i))),r.popupElements.forEach((n=>{n.type==="attachments"?this._writeAttachmentContent(r):n.type==="media"?this._writeMediaContent(n,r):n.type==="text"?this._writeTextContent(n,r):n.type==="relationship"&&this._writeRelationshipContent(n,r)}))):r.description=t}_writeFieldsContent(t,r){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const i=U(t.fieldInfos);Array.isArray(r.fieldInfos)?i.forEach((n=>{const s=r.fieldInfos.find((a=>a.fieldName?.toLowerCase()===n.fieldName?.toLowerCase()));s?s.visible=!0:r.fieldInfos.push(n)})):r.fieldInfos=i}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,r){const i=t.orderByFields?.map((s=>this._toFieldOrderJSON(s,t.relationshipId)))||[],n=[...r.relatedRecordsInfo?.orderByFields||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...n?.length&&{orderByFields:n}}}_writeTextContent(t,r){!r.description&&t.text&&(r.description=t.text)}_writeMediaContent(t,r){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const i=U(t.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(t,r,i){const n={description:!1,mediaInfos:!1};return i.map((s=>s.type==="media"?(s.mediaInfos||!r||n.mediaInfos||(s.mediaInfos=r,n.mediaInfos=!0),n1.fromJSON(s)):s.type==="text"?(s.text||!t||n.description||(s.text=t,n.description=!0),o1.fromJSON(s)):s.type==="attachments"?ty.fromJSON(s):s.type==="fields"?ry.fromJSON(s):s.type==="expression"?VT.fromJSON(s):s.type==="relationship"?s1.fromJSON(s):s.type==="utilityNetworkAssociations"?ZN.fromJSON(s):void 0)).filter(Boolean)}_toRelationshipContent(t){const{field:r,order:i}=t;if(!r?.startsWith(e0))return null;const n=r.replace(e0,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),a=n[1];return!Number.isNaN(s)&&a?s1.fromJSON({relationshipId:s,orderByFields:[{field:a,order:i}]}):null}_toFieldOrderJSON(t,r){const{order:i,field:n}=t;return{field:`${e0}${r}/${n}`,order:i}}_readPopupInfo({description:t,mediaInfos:r,showAttachments:i,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];t?s.push(new o1({text:t})):s.push(new ry),Array.isArray(r)&&r.length&&s.push(n1.fromJSON({mediaInfos:r})),i&&s.push(ty.fromJSON({displayType:"auto"}));const{showRelatedRecords:a,orderByFields:c}=n;return a&&c?.length&&c.forEach((d=>{const f=this._toRelationshipContent(d);f&&s.push(f)})),s.length?s:t}_getContentElementFields(t){const r=t?.type;if(r==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(r==="custom")return t.outFields||[];if(r==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(r==="media"){const i=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...i.reduce(((n,s)=>[...n,...this._getMediaInfoFields(s)]),[])]}return r==="text"?this._extractFieldNames(t.text):r==="relationship"||r==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:r,title:i,value:n}=t,s=n||{},{fields:a,normalizeField:c,tooltipField:d,sourceURL:f,linkURL:g}=s,v=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(f),...this._extractFieldNames(g),...a??[]];return c&&v.push(c),d&&v.push(d),v}_getContentExpressionInfos(t,r){return Array.isArray(t)?t.reduce(((i,n)=>[...i,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]]),r):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce(((r,i)=>[...r,...this._getContentElementFields(i)]),[]):[]}async _collectExpressionInfoFields(t,r,i){i&&await Promise.all(i.map((n=>Yi(t,r,n.expression))))}_getFieldInfoFields(t){return t?t.filter((({fieldName:r,visible:i})=>!(i!==void 0&&!i||!r||r.startsWith(e0)||r.startsWith(RF)))).map((r=>r.fieldName)):[]}_getActionsFields(t){return t?t.toArray().reduce(((r,i)=>[...r,...this._getActionFields(i)]),[]):[]}_getActionFields(t){const{className:r,title:i,type:n}=t,s=n==="button"||n==="toggle"?t.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(s)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return qN(t).filter((r=>!(r.indexOf(e0)===0||r.indexOf(RF)===0)))}};u([p({type:$ye})],jr.prototype,"actions",void 0),u([p()],jr.prototype,"content",void 0),u([wt("content")],jr.prototype,"castContent",null),u([le("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],jr.prototype,"readContent",null),u([de("web-scene","content",{popupElements:{type:ge.ofType(_ye)},showAttachments:{type:Boolean},mediaInfos:{type:ge.ofType(hO)},description:{type:String},relatedRecordsInfo:{type:OF}})],jr.prototype,"writeWebSceneContent",null),u([de("content",{popupElements:{type:ge.ofType(wye)},showAttachments:{type:Boolean},mediaInfos:{type:ge.ofType(hO)},description:{type:String},relatedRecordsInfo:{type:OF}})],jr.prototype,"writeWebMapContent",null),u([p({type:[Sye],json:{write:!0}})],jr.prototype,"expressionInfos",void 0),u([p({type:[BN]})],jr.prototype,"fieldInfos",void 0),u([de("fieldInfos")],jr.prototype,"writeFieldInfos",null),u([p({type:Tye})],jr.prototype,"layerOptions",void 0),u([de("layerOptions")],jr.prototype,"writeLayerOptions",null),u([p({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],jr.prototype,"lastEditInfoEnabled",void 0),u([p()],jr.prototype,"outFields",void 0),u([p()],jr.prototype,"overwriteActions",void 0),u([p()],jr.prototype,"returnGeometry",void 0),u([p({json:{type:String}})],jr.prototype,"title",void 0),u([de("title")],jr.prototype,"writeTitle",null),jr=u([O("esri.PopupTemplate")],jr);const Ey=jr;function iPe(e,t){switch(t.type){case"object-id":case"unique-id-simple":return e.attributes[t.fieldName];case"unique-id-composite":{const r=[];for(const i of t.fieldNames)r.push(e.attributes[i]??null);return JSON.stringify(r)}}}function Oye(e,t){if("uniqueIdFields"in t&&t.uniqueIdFields?.length){if(t.uniqueIdFields.length===1)return e.attributes?.[t.uniqueIdFields[0]];const r=t.uniqueIdFields.map((i=>e.attributes?.[i]));return JSON.stringify(r)}return"objectIdField"in t&&t.objectIdField?e.attributes?.[t.objectIdField]:null}const CF=new tt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Rye=0,Tr=class extends K{constructor(t){super(t),this.id="sym"+Rye++,this.type=null,this.color=new De([0,0,0,1])}readColor(t){return t?.[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};u([p({type:CF.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:CF.write,isRequired:!0}}})],Tr.prototype,"type",void 0),u([p({type:De,json:{write:{allowNull:!0}}})],Tr.prototype,"color",void 0),u([le("color")],Tr.prototype,"readColor",null),Tr=u([O("esri.symbols.Symbol")],Tr);var SO;let Vi=SO=class extends Tr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){if(this.data?.type==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const i=r.map((n=>{const s=n.valueExpressionInfo;return s?Yi(e,t,s.expression):null}));await Promise.all(i)}}}clone(){return new SO({data:U(this.data)})}hash(){return N7(JSON.stringify(this.data)).toString()}};u([p({json:{write:!1}})],Vi.prototype,"color",void 0),u([p({json:{write:!0}})],Vi.prototype,"data",void 0),u([le("data",["symbol"])],Vi.prototype,"readData",null),u([de("data",{})],Vi.prototype,"writeData",null),u([Ne({CIMSymbolReference:"cim"},{readOnly:!0})],Vi.prototype,"type",void 0),Vi=SO=u([O("esri.symbols.CIMSymbol")],Vi);let hn=class extends K{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,r,i){t||(r[i]=t)}};u([p({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],hn.prototype,"enabled",void 0),u([de("enabled")],hn.prototype,"writeEnabled",null),u([p({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],hn.prototype,"type",void 0),hn=u([O("esri.symbols.Symbol3DLayer")],hn);function Cye(e,t){const r=t.transparency!=null?Kv(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new De([i[0]||0,i[1]||0,i[2]||0,r]):null}function Iye(e,t){t.color=e.toJSON().slice(0,3);const r=CT(e.a);r!==0&&(t.transparency=r)}function Hc(e){return{type:De,nonNullable:e?.nonNullable,json:{type:[dt],default:null,read:{source:["color","transparency"],reader:Cye},write:{target:{color:{type:[dt],isRequired:e?.colorRequiredOnWrite},transparency:{type:dt}},writer:Iye}}}}const Ra={type:Number,cast:ut,json:{write:!0}};var S2;function oPe(e){return e==="emissive"?S2.Emissive:S2.Color}(function(e){e[e.Emissive=0]="Emissive",e[e.Color=1]="Color"})(S2||(S2={}));let Nd=class extends K{constructor(t){super(t),this.color=new De([0,0,0,1]),this.extensionLength=0,this.size=Js(1)}clone(){}cloneProperties(){return{color:U(this.color),size:this.size,extensionLength:this.extensionLength}}};u([p({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Nd.prototype,"type",void 0),u([p(Hc({colorRequiredOnWrite:!0}))],Nd.prototype,"color",void 0),u([p({...Ra,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Nd.prototype,"extensionLength",void 0),u([p(Ra)],Nd.prototype,"size",void 0),Nd=u([O("esri.symbols.edges.Edges3D")],Nd);const JN=Nd;var TO;let H_=TO=class extends JN{constructor(e){super(e),this.type="sketch"}clone(){return new TO(this.cloneProperties())}};u([Ne({sketch:"sketch"},{readOnly:!0})],H_.prototype,"type",void 0),H_=TO=u([O("esri.symbols.edges.SketchEdges3D")],H_);const Nye=H_;var EO;let W_=EO=class extends JN{constructor(e){super(e),this.type="solid"}clone(){return new EO(this.cloneProperties())}};u([Ne({solid:"solid"},{readOnly:!0})],W_.prototype,"type",void 0),W_=EO=u([O("esri.symbols.edges.SolidEdges3D")],W_);const AW=W_,OW={types:{key:"type",base:JN,typeMap:{solid:AW,sketch:Nye}},json:{write:!0}};var xO;let Uf=xO=class extends K{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const e={strength:this.strength,source:this.source};return new xO(e)}};u([p({json:{write:!1}})],Uf.prototype,"strength",void 0),u([p({json:{write:!1}})],Uf.prototype,"source",void 0),Uf=xO=u([O("esri.symbols.support.Symbol3DEmissive")],Uf);var $O;let hs=$O=class extends K{constructor(e){super(e),this.color=null,this.emissive=new Uf({source:"emissive"})}clone(){const e={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new $O(e)}};u([p(Hc())],hs.prototype,"color",void 0),u([p({type:Uf,json:{write:!1}})],hs.prototype,"emissive",void 0),hs=$O=u([O("esri.symbols.support.Symbol3DMaterial")],hs);var MO,ym;let Tl=(ym=class extends hn{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new MO({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}},MO=ym,ym);u([Ne({Extrude:"extrude"},{readOnly:!0})],Tl.prototype,"type",void 0),u([p({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Tl.prototype,"size",void 0),u([p({type:hs,json:{write:!0}})],Tl.prototype,"material",void 0),u([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Tl.prototype,"castShadows",void 0),u([p(OW)],Tl.prototype,"edges",void 0),Tl=MO=u([O("esri.symbols.ExtrudeSymbol3DLayer")],Tl);let Mv=class extends K{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};u([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Mv.prototype,"type",void 0),Mv=u([O("esri.symbols.patterns.LinePattern3D")],Mv);const Pye=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var AO;const Lye=wi()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let ah=AO=class extends Mv{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new AO(e)}};u([p({type:["style"],json:{write:{isRequired:!0}}})],ah.prototype,"type",void 0),u([Ne(Lye),p({type:Pye,json:{write:{isRequired:!0}}})],ah.prototype,"style",void 0),ah=AO=u([O("esri.symbols.patterns.LineStylePattern3D")],ah);let Av=class extends K{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};u([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Av.prototype,"type",void 0),Av=u([O("esri.symbols.patterns.Pattern3D")],Av);const Dye=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var OO;let jf=OO=class extends Av{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new OO({style:this.style})}};u([p({type:["style"],json:{write:{isRequired:!0}}})],jf.prototype,"type",void 0),u([p({type:Dye,json:{read:!0,write:{isRequired:!0}}})],jf.prototype,"style",void 0),jf=OO=u([O("esri.symbols.patterns.StylePattern3D")],jf);const kye={types:{key:"type",base:Av,typeMap:{style:jf}},json:{write:!0}},RW={types:{key:"type",base:Mv,typeMap:{style:ah}},json:{write:!0}},Ov=new De("white"),Fye=new De([255,255,255,0]);function Uye(e){return e.r===0&&e.g===0&&e.b===0}var RO;let Rv=RO=class extends hs{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:this.color?.clone()??null,colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()??null};return new RO(e)}};u([Ne({multiply:"multiply",replace:"replace",tint:"tint"})],Rv.prototype,"colorMixMode",void 0),Rv=RO=u([O("esri.symbols.support.Symbol3DFillMaterial")],Rv);function jye(e,t=!1){return e<=$7?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function cPe(e){return(pre(e)?e.byteLength/8:e.length)<=$7?Array.from(e):new Float64Array(e)}function dPe(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}function z1(e=qye){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function XN(e,t,r,i,n,s,a=z1()){return a[0]=e,a[1]=t,a[2]=r,a[3]=i,a[4]=n,a[5]=s,a}function hPe(e,t=z1()){return zye(e,0,e.length/3,t)}function zye(e,t,r,i=z1()){return CW(i,CO),Vye(i,e,t,r),i}function pPe(e,t=jye(24)){const[r,i,n,s,a,c]=e;return t[0]=r,t[1]=i,t[2]=n,t[3]=r,t[4]=i,t[5]=c,t[6]=r,t[7]=a,t[8]=n,t[9]=r,t[10]=a,t[11]=c,t[12]=s,t[13]=i,t[14]=n,t[15]=s,t[16]=i,t[17]=c,t[18]=s,t[19]=a,t[20]=n,t[21]=s,t[22]=a,t[23]=c,t}function fPe(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new Xe(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function mPe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function yPe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function gPe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function Vye(e,t,r=0,i=t.length/3){let n=e[0],s=e[1],a=e[2],c=e[3],d=e[4],f=e[5];for(let g=0;g<i;g++)n=Math.min(n,t[r+3*g]),s=Math.min(s,t[r+3*g+1]),a=Math.min(a,t[r+3*g+2]),c=Math.max(c,t[r+3*g]),d=Math.max(d,t[r+3*g+1]),f=Math.max(f,t[r+3*g+2]);e[0]=n,e[1]=s,e[2]=a,e[3]=c,e[4]=d,e[5]=f}function vPe(e,t,r){const i=t.length;let n=e[0],s=e[1],a=e[2],c=e[3],d=e[4],f=e[5];if(r)for(let g=0;g<i;g++){const v=t[g];n=Math.min(n,v[0]),s=Math.min(s,v[1]),a=Math.min(a,v[2]),c=Math.max(c,v[0]),d=Math.max(d,v[1]),f=Math.max(f,v[2])}else for(let g=0;g<i;g++){const v=t[g];n=Math.min(n,v[0]),s=Math.min(s,v[1]),c=Math.max(c,v[0]),d=Math.max(d,v[1])}e[0]=n,e[1]=s,e[2]=a,e[3]=c,e[4]=d,e[5]=f}function bPe(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function V1(e){return e[0]>=e[3]?0:e[3]-e[0]}function G1(e){return e[1]>=e[4]?0:e[4]-e[1]}function q1(e){return e[2]>=e[5]?0:e[5]-e[2]}function wPe(e){const t=V1(e),r=q1(e),i=G1(e);return Math.sqrt(t*t+r*r+i*i)}function _Pe(e,t=[0,0,0]){return t[0]=e[0]+V1(e)/2,t[1]=e[1]+G1(e)/2,t[2]=e[2]+q1(e)/2,t}function SPe(e,t=[0,0,0]){return t[0]=V1(e),t[1]=G1(e),t[2]=q1(e),t}function TPe(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function Gye(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function EPe(e,t){return t==null||Gye(e,t)}function xPe(e,t,r,i,n=e){return n[0]=e[0]+t,n[1]=e[1]+r,n[2]=e[2]+i,n[3]=e[3]+t,n[4]=e[4]+r,n[5]=e[5]+i,n}function $Pe(e,t,r=e){const i=e[0]+V1(e)/2,n=e[1]+G1(e)/2,s=e[2]+q1(e)/2;return r[0]=i+(e[0]-i)*t,r[1]=n+(e[1]-n)*t,r[2]=s+(e[2]-s)*t,r[3]=i+(e[3]-i)*t,r[4]=n+(e[4]-n)*t,r[5]=s+(e[5]-s)*t,r}function MPe(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function APe(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function OPe(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function CW(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function RPe(e){return e?CW(e,CO):z1(CO)}function CPe(e,t){return t||(t=pn()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function IPe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function NPe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=i,e[4]=n,e[5]=Number.POSITIVE_INFINITY,e}function IF(e){return e.length===6}function PPe(e){return V1(e)===0&&G1(e)===0&&q1(e)===0}function LPe(e,t,r){if(e==null||t==null)return e===t;if(!IF(e)||!IF(t))return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const CO=[1/0,1/0,1/0,-1/0,-1/0,-1/0],qye=[0,0,0,0,0,0];z1();function DPe(e,{isPrimitive:t,width:r,depth:i,height:n}){const s=t?10:1;if(r==null&&n==null&&i==null)return[s*e[0],s*e[1],s*e[2]];const a=Ty(r,i,n);let c;for(let d=0;d<3;d++){const f=a[d];if(f!=null){c=f/e[d];break}}for(let d=0;d<3;d++)a[d]==null&&(a[d]=e[d]*c);return a}const Bye=XN(-.5,-.5,-.5,.5,.5,.5),Hye=XN(-.5,-.5,0,.5,.5,1),Wye=XN(-.5,-.5,0,.5,.5,.5);function kPe(e){switch(e){case"sphere":case"cube":case"diamond":return Bye;case"cylinder":case"cone":case"inverted-cone":return Hye;case"tetrahedron":return Wye;default:return}}const QN=["butt","square","round"],Zye=[...QN,"none"],IW=["miter","bevel","round"];var IO;let Pd=IO=class extends K{constructor(e){super(e),this.color=new De([0,0,0,1]),this.size=Js(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new IO(e)}};u([p(Hc({colorRequiredOnWrite:!0}))],Pd.prototype,"color",void 0),u([p({...Ra,json:{write:{isRequired:!0}}})],Pd.prototype,"size",void 0),u([p(RW)],Pd.prototype,"pattern",void 0),u([p({type:QN,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Pd.prototype,"patternCap",void 0),Pd=IO=u([O("esri.symbols.support.Symbol3DOutline")],Pd);var Z_,gm;let on=(gm=class extends hn{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new Z_(t)}static fromSimpleFillSymbol(t){const r=t.outline&&t.outline.style&&t.outline.style!=="solid"?new ah({style:t.outline.style}):null,i={size:t.outline?.width??0,color:(t.outline?.color??Ov).clone(),pattern:r};return r&&t.outline?.cap&&(i.patternCap=t.outline.cap),new Z_({material:new Rv({color:(t.color??Fye).clone()}),pattern:t.style&&t.style!=="solid"?new jf({style:t.style}):null,outline:i})}},Z_=gm,gm);u([Ne({Fill:"fill"},{readOnly:!0})],on.prototype,"type",void 0),u([p({type:Rv,json:{write:!0}})],on.prototype,"material",void 0),u([p(kye)],on.prototype,"pattern",void 0),u([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],on.prototype,"castShadows",void 0),u([p({type:Pd,json:{write:!0}})],on.prototype,"outline",void 0),u([p(OW)],on.prototype,"edges",void 0),on=Z_=u([O("esri.symbols.FillSymbol3DLayer")],on);var NO;const Yye=wi()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Ld=NO=class extends K{constructor(e){super(e)}readHref(e,t,r){return e?Yh(e,r):t.dataURI}writeHref(e,t,r,i){e&&(Wh(e)?t.dataURI=e:(t.href=Rh(e,i),Fn(t.href)&&(t.href=Lo(t.href))))}clone(){return new NO({href:this.href,primitive:this.primitive})}};u([p({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Ld.prototype,"href",void 0),u([le("href")],Ld.prototype,"readHref",null),u([de("href",{href:{type:String},dataURI:{type:String}})],Ld.prototype,"writeHref",null),u([Ne(Yye)],Ld.prototype,"primitive",void 0),Ld=NO=u([O("esri.symbols.support.IconSymbol3DLayerResource")],Ld);const FPe="circle";var PO;let zf=PO=class extends Ae{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new PO({x:this.x,y:this.y})}};u([p({type:Number})],zf.prototype,"x",void 0),u([p({type:Number})],zf.prototype,"y",void 0),zf=PO=u([O("esri.symbols.support.Symbol3DAnchorPosition2D")],zf);var LO;let k0=LO=class extends K{constructor(e){super(e),this.color=new De([0,0,0,1]),this.size=Js(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new LO(e)}};u([p(Hc({colorRequiredOnWrite:!0}))],k0.prototype,"color",void 0),u([p({...Ra,json:{write:{isRequired:!0}}})],k0.prototype,"size",void 0),k0=LO=u([O("esri.symbols.support.Symbol3DIconOutline")],k0);var lf,vm;let Ai=(vm=class extends hn{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new lf({anchor:this.anchor,anchorPosition:U(this.anchorPosition),enabled:this.enabled,material:U(this.material),outline:U(this.outline),resource:U(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(t){const r=t.color||Ov,i=NF(t),n=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||Ov).clone()}:null;return new lf({size:t.size,angle:t.angle,resource:{primitive:Xye((()=>re.getLogger(this.prototype)),t.style)},material:{color:r},outline:n,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const r=!t.color||Uye(t.color)?Ov:t.color,i=NF(t);return new lf({size:t.width<=t.height?t.height:t.width,angle:t.angle,resource:{href:t.url},material:{color:r.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new lf({resource:{href:B7({mediaType:"application/json",data:JSON.stringify(t.data)})}})}},lf=vm,vm);function NF(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=PF(e.xoffset),n=PF(e.yoffset);return(i||n)&&t&&r?{x:-i/t,y:n/r}:null}function PF(e){return isFinite(e)?e:0}u([p({type:hs,json:{write:!0}})],Ai.prototype,"material",void 0),u([p({type:Ld,json:{write:!0}})],Ai.prototype,"resource",void 0),u([Ne({Icon:"icon"},{readOnly:!0})],Ai.prototype,"type",void 0),u([p({...Ra,json:{write:{isRequired:!0}}})],Ai.prototype,"size",void 0),u([Ne({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Ai.prototype,"anchor",void 0),u([p({type:zf,json:{type:[Number],read:{reader:e=>new zf({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ai.prototype,"anchorPosition",void 0),u([p({type:k0,json:{write:!0}})],Ai.prototype,"outline",void 0),u([p({type:Number,json:{write:!0,default:0}})],Ai.prototype,"angle",void 0),Ai=lf=u([O("esri.symbols.IconSymbol3DLayer")],Ai);const Jye={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Xye(e,t){return Jye[t]||(e().warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Qye=["begin","end","begin-end"],NW=["arrow","circle","square","diamond","cross","x"];let Il=class extends We.ClonableMixin(K){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};u([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Il.prototype,"type",void 0),u([p({type:Qye,json:{default:"begin-end",write:!0}})],Il.prototype,"placement",void 0),u([p({type:NW,json:{default:"arrow",write:!0}})],Il.prototype,"style",void 0),u([p({type:De,json:{type:[dt],default:null,write:!0}})],Il.prototype,"color",void 0),Il=u([O("esri.symbols.LineStyleMarker3D")],Il);var Y_,bm;let sn=(bm=class extends hn{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Js(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new Y_(t)}static fromSimpleLineSymbol(t){const r={enabled:!0,size:t.width??Js(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style?new ah({style:t.style}):null,material:new hs({color:(t.color||Ov).clone()}),marker:t.marker?new Il({placement:t.marker.placement,style:t.marker.style,color:t.marker.color?.clone()??null}):null};return new Y_(r)}},Y_=bm,bm);u([p({type:hs,json:{write:!0}})],sn.prototype,"material",void 0),u([Ne({Line:"line"},{readOnly:!0})],sn.prototype,"type",void 0),u([p({type:IW,json:{write:!0,default:"miter"}})],sn.prototype,"join",void 0),u([p({type:QN,json:{write:!0,default:"butt"}})],sn.prototype,"cap",void 0),u([p({...Ra,json:{write:{isRequired:!0}}})],sn.prototype,"size",void 0),u([p(RW)],sn.prototype,"pattern",void 0),u([p({types:{key:"type",base:Il,typeMap:{style:Il}},json:{write:!0}})],sn.prototype,"marker",void 0),sn=Y_=u([O("esri.symbols.LineSymbol3DLayer")],sn);var DO;const Kye=wi()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let F0=DO=class extends K{clone(){return new DO({href:this.href,primitive:this.primitive})}};u([p({type:String,json:{read:hT,write:Ch}})],F0.prototype,"href",void 0),u([Ne(Kye)],F0.prototype,"primitive",void 0),F0=DO=u([O("esri.symbols.support.ObjectSymbol3DLayerResource")],F0);const jPe="sphere";var kO;let Qd=kO=class extends Ae{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new kO({x:this.x,y:this.y,z:this.z})}};u([p({type:Number})],Qd.prototype,"x",void 0),u([p({type:Number})],Qd.prototype,"y",void 0),u([p({type:Number})],Qd.prototype,"z",void 0),Qd=kO=u([O("esri.symbols.support.Symbol3DAnchorPosition3D")],Qd);var FO,wm;let hi=(wm=class extends hn{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new FO({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},FO=wm,wm);u([p({type:hs,json:{write:!0}})],hi.prototype,"material",void 0),u([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],hi.prototype,"castShadows",void 0),u([p({type:F0,json:{write:!0}})],hi.prototype,"resource",void 0),u([Ne({Object:"object"},{readOnly:!0})],hi.prototype,"type",void 0),u([p({type:Number,json:{write:!0}})],hi.prototype,"width",void 0),u([p({type:Number,json:{write:!0}})],hi.prototype,"height",void 0),u([p({type:Number,json:{write:!0}})],hi.prototype,"depth",void 0),u([Ne({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],hi.prototype,"anchor",void 0),u([p({type:Qd,json:{type:[Number],read:{reader:e=>new Qd({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],hi.prototype,"anchorPosition",void 0),u([p({type:Number,json:{write:!0}})],hi.prototype,"heading",void 0),u([p({type:Number,json:{write:!0}})],hi.prototype,"tilt",void 0),u([p({type:Number,json:{write:!0}})],hi.prototype,"roll",void 0),u([p({readOnly:!0})],hi.prototype,"isPrimitive",null),hi=FO=u([O("esri.symbols.ObjectSymbol3DLayer")],hi);var UO,_m;let Mi=(_m=class extends hn{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,r){return t??(r.height==null&&r.size!=null?r.size:void 0)}readHeight(t,r){return t??(r.width==null&&r.size!=null?r.size:void 0)}clone(){return new UO({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},UO=_m,_m);u([p({type:hs,json:{write:!0}})],Mi.prototype,"material",void 0),u([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Mi.prototype,"castShadows",void 0),u([Ne({Path:"path"},{readOnly:!0})],Mi.prototype,"type",void 0),u([p({type:["circle","quad"],json:{write:!0,default:"circle"}})],Mi.prototype,"profile",void 0),u([p({type:IW,json:{write:!0,default:"miter"}})],Mi.prototype,"join",void 0),u([p({type:Zye,json:{write:!0,default:"butt"}})],Mi.prototype,"cap",void 0),u([p({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Mi.prototype,"width",void 0),u([le("width",["width","size","height"])],Mi.prototype,"readWidth",null),u([p({type:Number,json:{write:!0}})],Mi.prototype,"height",void 0),u([le("height",["height","size","width"])],Mi.prototype,"readHeight",null),u([p({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Mi.prototype,"anchor",void 0),u([p({type:["heading","all"],json:{write:!0,default:"all"}})],Mi.prototype,"profileRotation",void 0),Mi=UO=u([O("esri.symbols.PathSymbol3DLayer")],Mi);const ege=["none","underline","line-through"],tge=["normal","italic","oblique"],rge=["normal","lighter","bold","bolder"],PW={type:Number,cast:e=>{const t=un(e);return t===0?1:Ys(t,.1,4)},nonNullable:!0},ige=["left","right","center"],nge=["baseline","top","middle","bottom"],LW={type:ige,nonNullable:!0},DW={type:nge,nonNullable:!0},zPe=8;var jO;let Ds=jO=class extends K{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return ut(e)}clone(){return new jO({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};u([p({type:ege,json:{default:"none",write:!0}})],Ds.prototype,"decoration",void 0),u([p({type:String,json:{write:!0}})],Ds.prototype,"family",void 0),u([p({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],Ds.prototype,"size",void 0),u([wt("size")],Ds.prototype,"castSize",null),u([p({type:tge,json:{default:"normal",write:!0}})],Ds.prototype,"style",void 0),u([p({type:rge,json:{default:"normal",write:!0}})],Ds.prototype,"weight",void 0),Ds=jO=u([O("esri.symbols.Font")],Ds);var zO;let Vf=zO=class extends K{constructor(){super(...arguments),this.color=new De([0,0,0,1]),this.size=0}clone(){const e={color:U(this.color),size:this.size};return new zO(e)}};u([p(Hc())],Vf.prototype,"color",void 0),u([p(Ra)],Vf.prototype,"size",void 0),Vf=zO=u([O("esri.symbols.support.Symbol3DHalo")],Vf);let Cv=class extends We.ClonableMixin(K){constructor(t){super(t),this.color=null}};u([p(Hc())],Cv.prototype,"color",void 0),Cv=u([O("esri.symbols.support.Symbol3DTextBackground")],Cv);var J_,Sm;let ei=(Sm=class extends hn{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,r,i,n){const s={...n,textSymbol3D:!0};r.font=t.write({},s),delete r.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new J_({enabled:this.enabled,font:this.font&&U(this.font),halo:this.halo&&U(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:U(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new J_({font:t.font!=null?t.font.clone():new Ds,halo:sge(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new hs({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new Cv({color:t.backgroundColor.clone()}):null})}},J_=Sm,Sm);function sge(e,t){return e&&t!=null&&t>0?new Vf({color:U(e),size:t}):null}u([p({type:Ds,json:{write:!0}})],ei.prototype,"font",null),u([de("font")],ei.prototype,"writeFont",null),u([p({type:Vf,json:{write:!0}})],ei.prototype,"halo",void 0),u([p({...LW,json:{default:"center",write:!0}})],ei.prototype,"horizontalAlignment",void 0),u([p({...PW,json:{default:1,write:!0}})],ei.prototype,"lineHeight",void 0),u([p({type:hs,json:{write:!0}})],ei.prototype,"material",void 0),u([p({type:Cv,json:{write:!0}})],ei.prototype,"background",void 0),u([p(Ra)],ei.prototype,"size",null),u([p({type:String,json:{write:!0}})],ei.prototype,"text",void 0),u([Ne({Text:"text"},{readOnly:!0})],ei.prototype,"type",void 0),u([p({...DW,json:{default:"baseline",write:!0}})],ei.prototype,"verticalAlignment",void 0),ei=J_=u([O("esri.symbols.TextSymbol3DLayer")],ei);var VO,Tm;let El=(Tm=class extends hn{constructor(t){super(t),this.color=GO.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new VO({color:U(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},VO=Tm,Tm);u([p({type:De,nonNullable:!0,json:{type:[dt],write:(e,t,r)=>t[r]=e.toArray(De.AlphaMode.UNLESS_OPAQUE),default:()=>GO.clone(),defaultEquals:e=>e.toCss(!0)===GO.toCss(!0)}})],El.prototype,"color",void 0),u([Ne({Water:"water"},{readOnly:!0})],El.prototype,"type",void 0),u([p({type:["small","medium","large"],json:{write:!0,default:"medium"}})],El.prototype,"waterbodySize",void 0),u([p({type:Number,json:{write:!0,default:null}})],El.prototype,"waveDirection",void 0),u([p({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],El.prototype,"waveStrength",void 0),El=VO=u([O("esri.symbols.WaterSymbol3DLayer")],El);const GO=new De([0,119,190]);var qO;let Nl=qO=class extends Ae{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new qO({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};u([p({type:String})],Nl.prototype,"name",void 0),u([p({type:String})],Nl.prototype,"styleUrl",void 0),u([p({type:String})],Nl.prototype,"styleName",void 0),u([p({type:se})],Nl.prototype,"portal",void 0),Nl=qO=u([O("esri.symbols.support.StyleOrigin")],Nl);var BO;let Iv=BO=class extends Ae{constructor(){super(...arguments),this.url=""}clone(){return new BO({url:this.url})}};u([p({type:String})],Iv.prototype,"url",void 0),Iv=BO=u([O("esri.symbols.support.Thumbnail")],Iv);const kW={icon:Ai,object:hi,line:sn,path:Mi,fill:on,extrude:Tl,text:ei,water:El},oge=ge.ofType({base:hn,key:"type",typeMap:kW,errorContext:"symbol-layer"});let Nn=class extends Tr{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=r?.type,n=i||ge;this._set("symbolLayers",new n)}get color(){return null}set color(t){this.constructed&&re.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){Xl(t,this._get("symbolLayers"))}readStyleOrigin(t,r,i){if(t.styleUrl&&t.name){const n=Yh(t.styleUrl,i);return new Nl({styleUrl:n,name:t.name})}if(t.styleName&&t.name)return new Nl({portal:i?.portal||se.getDefault(),styleName:t.styleName,name:t.name});i?.messages&&i.messages.push(new gs("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:t}))}writeStyleOrigin(t,r,i,n){if(t.styleUrl&&t.name){let s=Rh(t.styleUrl,n);Fn(s)&&(s=Lo(s)),r.styleOrigin={styleUrl:s,name:t.name}}else t.styleName&&t.name&&(t.portal&&n?.portal&&!q7(t.portal.restUrl,n.portal.restUrl)?n?.messages&&n.messages.push(new gs("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof hn||t&&kW[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};u([p({json:{read:!1,write:!1}})],Nn.prototype,"color",null),u([p({type:oge,nonNullable:!0,json:{write:!0}}),wt(eG)],Nn.prototype,"symbolLayers",null),u([p({type:Nl})],Nn.prototype,"styleOrigin",void 0),u([le("styleOrigin")],Nn.prototype,"readStyleOrigin",null),u([de("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Nn.prototype,"writeStyleOrigin",null),u([p({type:Iv,json:{read:!1}})],Nn.prototype,"thumbnail",void 0),u([p({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Nn.prototype,"type",void 0),Nn=u([O("esri.symbols.Symbol3D")],Nn);let Gf=class extends K{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};u([p({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],Gf.prototype,"type",void 0),u([p({readOnly:!0})],Gf.prototype,"visible",void 0),Gf=u([O("esri.symbols.callouts.Callout3D")],Gf);var HO;let X_=HO=class extends K{constructor(e){super(e),this.color=new De("white")}clone(){return new HO({color:U(this.color)})}};u([p(Hc({colorRequiredOnWrite:!0}))],X_.prototype,"color",void 0),X_=HO=u([O("esri.symbols.callouts.LineCallout3DBorder")],X_);const age=X_;var WO;let xl=WO=class extends Gf{constructor(e){super(e),this.type="line",this.color=new De([0,0,0,1]),this.size=Js(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new WO({color:U(this.color),size:this.size,border:U(this.border)})}};u([Ne({line:"line"})],xl.prototype,"type",void 0),u([p(Hc({colorRequiredOnWrite:!0}))],xl.prototype,"color",void 0),u([p({...Ra,json:{write:{isRequired:!0}}})],xl.prototype,"size",void 0),u([p({type:age,json:{write:!0}})],xl.prototype,"border",void 0),u([p({readOnly:!0})],xl.prototype,"visible",null),xl=WO=u([O("esri.symbols.callouts.LineCallout3D")],xl);function KN(e){if(!e)return!1;const t=e.verticalOffset;return!(!t||t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function FW(e){return!e||!e.supportsCallout||!e.supportsCallout()?!1:!!e.callout?.visible&&!!KN(e)}function BPe(e){return e.type==="point-3d"||e.type==="label-3d"}function HPe(e){return e.horizontalAlignment==="center"}const UW={types:{key:"type",base:Gf,typeMap:{line:xl}},json:{write:!0}};var ZO;let dc=ZO=class extends K{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new ZO({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};u([p({...Ra,json:{write:{isRequired:!0}}})],dc.prototype,"screenLength",void 0),u([p({type:Number,nonNullable:!0,json:{write:!0,default:0}})],dc.prototype,"minWorldLength",void 0),u([p({type:Number,json:{write:!0}})],dc.prototype,"maxWorldLength",void 0),dc=ZO=u([O("esri.symbols.support.Symbol3DVerticalOffset")],dc);var Q_;const jW=ge.ofType({base:null,key:"type",typeMap:{text:ei}});let xo=Q_=class extends Nn{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new jW,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return FW(this)}hasVisibleVerticalOffset(){return KN(this)}clone(){return new Q_({styleOrigin:U(this.styleOrigin),symbolLayers:U(this.symbolLayers),thumbnail:U(this.thumbnail),callout:U(this.callout),verticalOffset:U(this.verticalOffset)})}static fromTextSymbol(e){return new Q_({symbolLayers:new ge([ei.fromTextSymbol(e)])})}};u([p({type:dc,json:{write:!0}})],xo.prototype,"verticalOffset",void 0),u([p(UW)],xo.prototype,"callout",void 0),u([p({json:{read:!1,write:!1}})],xo.prototype,"styleOrigin",void 0),u([p({type:jW})],xo.prototype,"symbolLayers",void 0),u([Ne({LabelSymbol3D:"label-3d"},{readOnly:!0})],xo.prototype,"type",void 0),xo=Q_=u([O("esri.symbols.LabelSymbol3D")],xo);var K_;const zW=ge.ofType({base:null,key:"type",typeMap:{line:sn,path:Mi}}),lge=ge.ofType({base:null,key:"type",typeMap:{line:sn,path:Mi}});let Po=K_=class extends Nn{constructor(e){super(e),this.symbolLayers=new zW,this.type="line-3d"}clone(){return new K_({styleOrigin:U(this.styleOrigin),symbolLayers:U(this.symbolLayers),thumbnail:U(this.thumbnail)})}static fromSimpleLineSymbol(e){return new K_({symbolLayers:new ge([sn.fromSimpleLineSymbol(e)])})}};u([p({type:zW,json:{type:lge}})],Po.prototype,"symbolLayers",void 0),u([Ne({LineSymbol3D:"line-3d"},{readOnly:!0})],Po.prototype,"type",void 0),Po=K_=u([O("esri.symbols.LineSymbol3D")],Po);var eS;const VW=ge.ofType({base:null,key:"type",typeMap:{fill:on}});let zl=eS=class extends Nn{constructor(e){super(e),this.symbolLayers=new VW,this.type="mesh-3d"}clone(){return new eS({styleOrigin:U(this.styleOrigin),symbolLayers:U(this.symbolLayers),thumbnail:U(this.thumbnail)})}static fromSimpleFillSymbol(e){return new eS({symbolLayers:new ge([on.fromSimpleFillSymbol(e)])})}};u([p({type:VW})],zl.prototype,"symbolLayers",void 0),u([Ne({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],zl.prototype,"type",void 0),zl=eS=u([O("esri.symbols.MeshSymbol3D")],zl);let U0=class extends Tr{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};u([Ne({esriSLS:"simple-line"},{readOnly:!0})],U0.prototype,"type",void 0),u([p({type:Number,cast:ut,json:{write:!0}})],U0.prototype,"width",void 0),U0=u([O("esri.symbols.LineSymbol")],U0);var YO;let ta=YO=class extends K{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){t[r]=i?.origin==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){i?.origin==="web-map"||(t[r]=e)}clone(){return new YO({color:U(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};u([p({type:["begin","end","begin-end"],json:{write:!0}})],ta.prototype,"placement",void 0),u([Ne({"line-marker":"line-marker"},{readOnly:!0}),p({json:{origins:{"web-map":{write:!1}}}})],ta.prototype,"type",void 0),u([p({type:NW})],ta.prototype,"style",void 0),u([de("style")],ta.prototype,"writeStyle",null),u([p({type:De,value:null,json:{write:{allowNull:!0}}})],ta.prototype,"color",null),u([le("color")],ta.prototype,"readColor",null),u([de("color")],ta.prototype,"writeColor",null),ta=YO=u([O("esri.symbols.LineSymbolMarker")],ta);const uge=ta;var JO;const EM=new tt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Dr=JO=class extends U0{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,n,s){if(e&&typeof e!="string")return e;const a={};return e!=null&&(a.style=e),t!=null&&(a.color=t),r!=null&&(a.width=ut(r)),i!=null&&(a.cap=i),n!=null&&(a.join=n),s!=null&&(a.miterLimit=ut(s)),a}clone(){return new JO({color:U(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};u([Ne({esriSLS:"simple-line"},{readOnly:!0})],Dr.prototype,"type",void 0),u([p({type:EM.apiValues,json:{read:EM.read,write:EM.write}})],Dr.prototype,"style",void 0),u([p({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&r?.origin==null})}}})],Dr.prototype,"cap",void 0),u([p({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&r?.origin==null})}}})],Dr.prototype,"join",void 0),u([p({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":uge}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Dr.prototype,"marker",void 0),u([p({type:Number,json:{read:!1,write:!1}})],Dr.prototype,"miterLimit",void 0),Dr=JO=u([O("esri.symbols.SimpleLineSymbol")],Dr);let qf=class extends Tr{constructor(t){super(t),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};u([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Dr}},json:{default:null,write:!0}})],qf.prototype,"outline",void 0),u([p({type:["simple-fill","picture-fill"],readOnly:!0})],qf.prototype,"type",void 0),qf=u([O("esri.symbols.FillSymbol")],qf);function cge(e,t,r){return t.imageData?B7({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):GW(t.url,r)}function GW(e,t){if(!Fn(e)){const r=hge(t);if(r)return Oh(r,"images",e)}return Yh(e,t)}function dge(e,t,r,i){if(Wh(e)){const n=jm(e);if(!n)return;t.contentType=n.mediaType,t.imageData=n.data,r&&r.imageData===t.imageData&&r.url&&Ch(r.url,t,"url",i)}else Ch(e,t,"url",i)}const qW={json:{read:{source:["imageData","url"],reader:cge},write:{writer(e,t,r,i){dge(e,t,this.source,i)}}}},BW={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=GW(t.url,r)),i}}}};function hge(e){if(!e)return null;const{origin:t,layer:r}=e;if(t!=="service"&&t!=="portal-item")return null;const i=r?.type;return i==="feature"||i==="stream"?r.parsedUrl?.path:i==="map-image"||i==="tile"?e.url?.path:null}var XO;let Cn=XO=class extends qf{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),r!=null&&(n.width=ut(r)),i!=null&&(n.height=ut(i)),n}clone(){const e=new XO({color:U(this.color),height:this.height,outline:U(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",U(this.source)),e}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};u([Ne({esriPFS:"picture-fill"},{readOnly:!0})],Cn.prototype,"type",void 0),u([p(qW)],Cn.prototype,"url",void 0),u([p({type:Number,json:{write:!0}})],Cn.prototype,"xscale",void 0),u([p({type:Number,json:{write:!0}})],Cn.prototype,"yscale",void 0),u([p({type:Number,cast:ut,json:{write:!0}})],Cn.prototype,"width",void 0),u([p({type:Number,cast:ut,json:{write:!0}})],Cn.prototype,"height",void 0),u([p({type:Number,cast:ut,json:{write:!0}})],Cn.prototype,"xoffset",void 0),u([p({type:Number,cast:ut,json:{write:!0}})],Cn.prototype,"yoffset",void 0),u([p(BW)],Cn.prototype,"source",void 0),Cn=XO=u([O("esri.symbols.PictureFillSymbol")],Cn);let $l=class extends Tr{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};u([p({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],$l.prototype,"angle",void 0),u([p({type:["simple-marker","picture-marker"],readOnly:!0})],$l.prototype,"type",void 0),u([p({type:Number,cast:ut,json:{write:!0}})],$l.prototype,"xoffset",void 0),u([p({type:Number,cast:ut,json:{write:!0}})],$l.prototype,"yoffset",void 0),u([p({cast:e=>e==="auto"?e:un(ut(e)),json:{write:!0}})],$l.prototype,"size",void 0),$l=u([O("esri.symbols.MarkerSymbol")],$l);var QO;let nn=QO=class extends $l{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=ut(t)),r!=null&&(i.height=ut(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new QO({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",U(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};u([p({json:{write:!1}})],nn.prototype,"color",void 0),u([Ne({esriPMS:"picture-marker"},{readOnly:!0})],nn.prototype,"type",void 0),u([p(qW)],nn.prototype,"url",void 0),u([p(BW)],nn.prototype,"source",void 0),u([p({type:Number,cast:ut,json:{write:!0}})],nn.prototype,"height",void 0),u([le("height",["height","size"])],nn.prototype,"readHeight",null),u([p({type:Number,cast:ut,json:{write:!0}})],nn.prototype,"width",void 0),u([p({json:{write:!1}})],nn.prototype,"size",void 0),nn=QO=u([O("esri.symbols.PictureMarkerSymbol")],nn);var Dd;const HW=ge.ofType({base:null,key:"type",typeMap:{icon:Ai,object:hi,text:ei}});let cn=Dd=class extends Nn{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new HW,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return FW(this)}hasVisibleVerticalOffset(){return KN(this)}clone(){return new Dd({verticalOffset:U(this.verticalOffset),callout:U(this.callout),styleOrigin:U(this.styleOrigin),symbolLayers:U(this.symbolLayers),thumbnail:U(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Dd({symbolLayers:new ge([Ai.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new Dd({symbolLayers:new ge([Ai.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){if(e.data?.symbol?.type!=="CIMPointSymbol")return null;const r=e.data.symbol;return new Dd(r?.callout?{symbolLayers:new ge([Ai.fromCIMSymbol(e)]),callout:new xl({size:.5,color:new De([0,0,0])}),verticalOffset:new dc({screenLength:40})}:{symbolLayers:new ge([Ai.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new Dd({symbolLayers:new ge([ei.fromTextSymbol(e)])})}};u([p({type:dc,json:{write:!0}})],cn.prototype,"verticalOffset",void 0),u([p(UW)],cn.prototype,"callout",void 0),u([p({type:HW,json:{origins:{"web-scene":{write:!0}}}})],cn.prototype,"symbolLayers",void 0),u([Ne({PointSymbol3D:"point-3d"},{readOnly:!0})],cn.prototype,"type",void 0),cn=Dd=u([O("esri.symbols.PointSymbol3D")],cn);var j0;const WW=ge.ofType({base:null,key:"type",typeMap:{extrude:Tl,fill:on,icon:Ai,line:sn,object:hi,text:ei,water:El}});let Bs=j0=class extends Nn{constructor(e){super(e),this.symbolLayers=new WW,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&Oc(re.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&Oc(re.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(Uh((()=>this.symbolLayers),"after-add",(({item:t})=>e(t)),Oa))}clone(){return new j0({styleOrigin:U(this.styleOrigin),symbolLayers:U(this.symbolLayers),thumbnail:U(this.thumbnail)})}static fromJSON(e){const t=new j0;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const r=t.symbolLayers.at(0),i=t.symbolLayers.at(1);!i.enabled||e.symbolLayers?.[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:i.size,color:i.material!=null?i.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new j0({symbolLayers:new ge([on.fromSimpleFillSymbol(e)])})}};u([p({type:WW,json:{write:!0}})],Bs.prototype,"symbolLayers",void 0),u([Ne({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Bs.prototype,"type",void 0),Bs=j0=u([O("esri.symbols.PolygonSymbol3D")],Bs);var KO;const xM=new tt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let us=KO=class extends qf{constructor(...e){super(...e),this.color=new De([0,0,0,.25]),this.outline=new Dr,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new KO({color:U(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};u([p()],us.prototype,"color",void 0),u([p()],us.prototype,"outline",void 0),u([Ne({esriSFS:"simple-fill"},{readOnly:!0})],us.prototype,"type",void 0),u([p({type:xM.apiValues,json:{read:xM.read,write:xM.write}})],us.prototype,"style",void 0),us=KO=u([O("esri.symbols.SimpleFillSymbol")],us);var eR;const $M=new tt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let ti=eR=class extends $l{constructor(...e){super(...e),this.color=new De([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Dr}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=ut(t)),r&&(n.outline=r),i&&(n.color=i),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new eR({angle:this.angle,color:U(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};u([p()],ti.prototype,"color",void 0),u([de("color")],ti.prototype,"writeColor",null),u([Ne({esriSMS:"simple-marker"},{readOnly:!0})],ti.prototype,"type",void 0),u([p()],ti.prototype,"size",void 0),u([p({type:$M.apiValues,json:{read:$M.read,write:$M.write}})],ti.prototype,"style",void 0),u([p({type:String,json:{write:!0}})],ti.prototype,"path",null),u([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Dr}},json:{default:null,write:!0}})],ti.prototype,"outline",void 0),ti=eR=u([O("esri.symbols.SimpleMarkerSymbol")],ti);var tR;let Mt=tR=class extends Tr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Ds,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return ut(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new tR({angle:this.angle,backgroundColor:U(this.backgroundColor),borderLineColor:U(this.borderLineColor),borderLineSize:this.borderLineSize,color:U(this.color),font:this.font&&this.font.clone(),haloColor:U(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};u([p({type:De,json:{write:!0}})],Mt.prototype,"backgroundColor",void 0),u([p({type:De,json:{write:!0}})],Mt.prototype,"borderLineColor",void 0),u([p({type:Number,json:{write:!0},cast:ut})],Mt.prototype,"borderLineSize",void 0),u([p({type:Ds,json:{write:!0}})],Mt.prototype,"font",void 0),u([p({...LW,json:{write:!0}})],Mt.prototype,"horizontalAlignment",void 0),u([p({type:Boolean,json:{write:!0}})],Mt.prototype,"kerning",void 0),u([p({type:De,json:{write:!0}})],Mt.prototype,"haloColor",void 0),u([p({type:Number,cast:ut,json:{write:!0}})],Mt.prototype,"haloSize",void 0),u([p({type:Boolean,json:{write:!0}})],Mt.prototype,"rightToLeft",void 0),u([p({type:Boolean,json:{write:!0}})],Mt.prototype,"rotated",void 0),u([p({type:String,json:{write:!0}})],Mt.prototype,"text",void 0),u([Ne({esriTS:"text"},{readOnly:!0})],Mt.prototype,"type",void 0),u([p({...DW,json:{write:!0}})],Mt.prototype,"verticalAlignment",void 0),u([p({type:Number,cast:ut,json:{write:!0}})],Mt.prototype,"xoffset",void 0),u([p({type:Number,cast:ut,json:{write:!0}})],Mt.prototype,"yoffset",void 0),u([p({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Mt.prototype,"angle",void 0),u([p({type:Number,json:{write:!0}})],Mt.prototype,"width",void 0),u([p({type:Number})],Mt.prototype,"lineWidth",void 0),u([de("lineWidth")],Mt.prototype,"writeLineWidth",null),u([wt("lineWidth")],Mt.prototype,"castLineWidth",null),u([p(PW)],Mt.prototype,"lineHeight",void 0),u([de("lineHeight")],Mt.prototype,"writeLineHeight",null),Mt=tR=u([O("esri.symbols.TextSymbol")],Mt);var rR;let mi=rR=class extends Tr{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:se.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?.portal,super.read(e,t)}clone(){return new rR({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol(e)}async fetchCIMSymbol(e){yV(re.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const t=await this._fetchSymbol({...e,acceptedFormats:["cim"]});if(t?.type!=="cim")throw new z("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return t}async _fetchSymbol(e){const t=e!=null?e.cache:null,r=t?this._fetchCacheKey:null;if(t!=null){const a=r&&t.get(r);if(a)return a.clone()}const{resolveWebStyleSymbol:i}=await ue(()=>import("./webStyleSymbolUtils-DI235Pi-.js"),__vite__mapDeps([184,185]));Yt(e);const n=i(this,{portal:this.portal},e);n.catch((a=>{re.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)}));const s=await n;return t?.set(r,s.clone()),s}};u([p({json:{write:!1}})],mi.prototype,"color",void 0),u([p({type:String,json:{write:!0}})],mi.prototype,"styleName",void 0),u([p({type:se,json:{write:!1}})],mi.prototype,"portal",void 0),u([p({type:String,json:{read:hT,write:Ch}})],mi.prototype,"styleUrl",void 0),u([p({type:Iv,json:{read:!1}})],mi.prototype,"thumbnail",void 0),u([p({type:String,json:{write:!0}})],mi.prototype,"name",void 0),u([Ne({styleSymbolReference:"web-style"},{readOnly:!0})],mi.prototype,"type",void 0),u([p()],mi.prototype,"_fetchCacheKey",null),mi=rR=u([O("esri.symbols.WebStyleSymbol")],mi);function JPe(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function ZW(e){switch(e?.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const bc={base:Tr,key:"type",typeMap:{"simple-fill":us,"picture-fill":Cn,"picture-marker":nn,"simple-line":Dr,"simple-marker":ti,text:Mt,"label-3d":xo,"line-3d":Po,"mesh-3d":zl,"point-3d":cn,"polygon-3d":Bs,"web-style":mi,cim:Vi},errorContext:"symbol"},XPe={base:Tr,key:"type",typeMap:{"picture-marker":nn,"simple-marker":ti,"point-3d":cn,cim:Vi},errorContext:"symbol"},QPe={base:Tr,key:"type",typeMap:{"simple-line":Dr,"line-3d":Po,cim:Vi},errorContext:"symbol"},KPe={base:Tr,key:"type",typeMap:{"simple-fill":us,"picture-fill":Cn,"polygon-3d":Bs,cim:Vi},errorContext:"symbol"},pge={base:Tr,key:"type",typeMap:{"picture-marker":nn,"simple-marker":ti,text:Mt,"web-style":mi,cim:Vi},errorContext:"symbol"},fge=yy({types:bc}),YW={base:Tr,key:"type",typeMap:{"simple-fill":us,"picture-fill":Cn,"picture-marker":nn,"simple-line":Dr,"simple-marker":ti,text:Mt,"line-3d":Po,"mesh-3d":zl,"point-3d":cn,"polygon-3d":Bs,"web-style":mi,cim:Vi},errorContext:"symbol"},mge={base:Tr,key:"type",typeMap:{text:Mt,"label-3d":xo},errorContext:"symbol"},LF={base:Tr,key:"type",typeMap:{"line-3d":Po,"mesh-3d":zl,"point-3d":cn,"polygon-3d":Bs,"web-style":mi,cim:Vi},errorContext:"symbol"},yge={base:Tr,key:"type",typeMap:{"label-3d":xo},errorContext:"symbol"},JW=Ma(bc);var iR;function gge(e){if(!e)return null;const t={};for(const r in e){const i=Dc(e[r]);i&&(t[r]=i)}return Object.keys(t).length!==0?t:null}function vge(e){if(e==null)return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return Object.keys(t).length!==0?t:null}var Em;let Nr=(Em=class extends We.ClonableMixin(K){constructor(t){super(t),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:g_(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&Bie(re.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(t){const r=this._get("aggregateGeometries");JSON.stringify(r)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const r=this._get("attributes");r!==t&&(this._set("attributes",t),this._notifyLayer("attributes",r,t))}set geometry(t){const r=this._get("geometry");r!==t&&(this._set("geometry",t),t?.type!=="mesh"&&this._notifyLayer("geometry",r,t))}set popupTemplate(t){const r=this._get("popupTemplate");r!==t&&(this._set("popupTemplate",t),this._notifyLayer("popupTemplate",r,t))}set symbol(t){const r=this._get("symbol");r!==t&&(this._set("symbol",t),this._notifyLayer("symbol",r,t))}get version(){return this._version}set visible(t){const r=this._get("visible");r!==t&&(this._set("visible",t),this._notifyLayer("visible",r,t))}cloneShallow(){return new iR({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[r,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(t&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(t){return this.attributes?.[t]}setAttribute(t,r){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=r,this._notifyLayer("attributes",i,r,t)}else this.attributes={[t]:r}}getObjectId(){const t=this.sourceLayer??this.layer;return t?Oye(this,t):null}getGlobalId(){const t=this.sourceLayer??this.layer;return t&&"globalIdField"in t&&t.globalIdField?this.getAttribute(t.globalIdField):null}toJSON(){return{aggregateGeometries:vge(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:Bv(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(t={}){const{geometry:r}=this;if(r?.type==="mesh"){const i={origin:r.origin,transform:r.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,r,i,n){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:t,oldValue:r,newValue:i};t==="origin-transform"&&(s.action=n),t==="attributes"&&(s.attributeName=n),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([Zs((()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0),(({localMatrix:t,origin:r})=>{this._lastMeshTransform.localMatrix===t&&this._lastMeshTransform.origin===r||(this._lastMeshTransform.localMatrix=t,this._lastMeshTransform.origin=r,this.notifyMeshTransformChanged())})),Zs((()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0),(()=>{const t=this.geometry;t?.type==="mesh"&&t.vertexSpace.origin?(this._lastMeshTransform.localMatrix=t.transform?.localMatrix,this._lastMeshTransform.origin=t.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)}),{equals:(t,r)=>t===r,sync:!0})])}},iR=Em,Em);u([p({value:null,json:{read:gge}})],Nr.prototype,"aggregateGeometries",null),u([p({value:null})],Nr.prototype,"attributes",null),u([p({value:null,types:U1,json:{read:Dc}})],Nr.prototype,"geometry",null),u([p({type:Boolean})],Nr.prototype,"isAggregate",void 0),u([p({clonable:!1})],Nr.prototype,"layer",void 0),u([p({clonable:"reference"})],Nr.prototype,"origin",void 0),u([p({type:Ey,value:null})],Nr.prototype,"popupTemplate",null),u([p({clonable:"reference"})],Nr.prototype,"sourceLayer",void 0),u([p({value:null,types:bc})],Nr.prototype,"symbol",null),u([p({clonable:!1,json:{read:!1,write:!1}})],Nr.prototype,"_version",void 0),u([p({type:Boolean,value:!0})],Nr.prototype,"visible",null),Nr=iR=u([O("esri.Graphic")],Nr);let Nv=class extends xv{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};u([JI({Type:Nr,ensureType:Br(Nr)})],Nv.prototype,"itemType",void 0),Nv=u([O("esri.support.GraphicsCollection")],Nv);let Hu=class extends Ae{constructor(t){super(t),this.view=null,this.baseLayerViews=new ge,this.referenceLayerViews=new ge,this._loadingHandle=je((()=>this.view?.map?.basemap),(r=>{r&&r.load().catch((()=>{}))}),Hi)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){return this.view?.suspended??!0}get updating(){return this.view?.suspended?!1:!!this.view?.map?.basemap?.loaded&&(this.baseLayerViews.some((r=>r.updating))||this.referenceLayerViews.some((r=>r.updating)))}};u([p({constructOnly:!0})],Hu.prototype,"view",void 0),u([p({readOnly:!0})],Hu.prototype,"baseLayerViews",void 0),u([p({readOnly:!0})],Hu.prototype,"referenceLayerViews",void 0),u([p({readOnly:!0})],Hu.prototype,"suspended",null),u([p({type:Boolean,readOnly:!0})],Hu.prototype,"updating",null),Hu=u([O("esri.views.BasemapView")],Hu);const bge=Hu;let Kn=class extends Ae{constructor(t){super(t),this.factor=1.5,this.offset=bi(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};u([p({type:Number})],Kn.prototype,"factor",void 0),u([p({nonNullable:!0})],Kn.prototype,"offset",void 0),u([p()],Kn.prototype,"position",void 0),u([p({type:Number,range:{min:0}})],Kn.prototype,"size",void 0),u([p()],Kn.prototype,"maskUrl",void 0),u([p()],Kn.prototype,"maskEnabled",void 0),u([p()],Kn.prototype,"overlayUrl",void 0),u([p()],Kn.prototype,"overlayEnabled",void 0),u([p({readOnly:!0})],Kn.prototype,"version",null),u([p({type:Boolean})],Kn.prototype,"visible",void 0),Kn=u([O("esri.views.Magnifier")],Kn);const XW=Kn;let tS=class{constructor(t){this._observable=new C1,this._map=new Map(t)}get size(){return Le(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const r=this._map.delete(t);return r&&this._observable.notify(),r}entries(){return Le(this._observable),this._map.entries()}forEach(t,r){Le(this._observable),this._map.forEach(((i,n)=>t.call(r,i,n,this)),r)}get(t){return Le(this._observable),this._map.get(t)}has(t){return Le(this._observable),this._map.has(t)}keys(){return Le(this._observable),this._map.keys()}set(t,r){return this._map.set(t,r),this._observable.notify(),this}values(){return Le(this._observable),this._map.values()}[Symbol.iterator](){return Le(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var nR;let lh=nR=class extends K{constructor(e){super(e),this.name=null,this.code=null}clone(){return new nR({name:this.name,code:this.code})}};u([p({type:String,json:{write:{isRequired:!0}}})],lh.prototype,"name",void 0),u([p({type:[String,Number],json:{write:{isRequired:!0}}})],lh.prototype,"code",void 0),lh=nR=u([O("esri.layers.support.CodedValue")],lh);const wge=new tt({inherited:"inherited",codedValue:"coded-value",range:"range"});let wc=class extends K{constructor(t){super(t),this.name=null,this.type=null}};u([p({type:String,json:{write:!0}})],wc.prototype,"name",void 0),u([Ne(wge),p({json:{write:{isRequired:!0}}})],wc.prototype,"type",void 0),wc=u([O("esri.layers.support.Domain")],wc);var sR,xm;let _c=(xm=class extends wc{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let r=null;if(this.codedValues){const i=String(t);this.codedValues.some((n=>(String(n.code)===i&&(r=n.name),!!r)))}return r}clone(){return new sR({codedValues:U(this.codedValues),name:this.name})}},sR=xm,xm);u([p({type:[lh],json:{write:{isRequired:!0}}})],_c.prototype,"codedValues",void 0),u([Ne({codedValue:"coded-value"})],_c.prototype,"type",void 0),_c=sR=u([O("esri.layers.support.CodedValueDomain")],_c);var oR,$m;let Pv=($m=class extends wc{constructor(t){super(t),this.type="inherited"}clone(){return new oR}},oR=$m,$m);u([Ne({inherited:"inherited"})],Pv.prototype,"type",void 0),Pv=oR=u([O("esri.layers.support.InheritedDomain")],Pv);var aR,Mm;let Kd=(Mm=class extends wc{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new aR({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},aR=Mm,Mm);u([p({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]},isRequired:!0}}})],Kd.prototype,"maxValue",void 0),u([p({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]},isRequired:!0}}})],Kd.prototype,"minValue",void 0),u([Ne({range:"range"})],Kd.prototype,"type",void 0),Kd=aR=u([O("esri.layers.support.RangeDomain")],Kd);const QW={key:"type",base:wc,typeMap:{range:Kd,"coded-value":_c,inherited:Pv}};function BT(e){if(!e?.type)return null;switch(e.type){case"range":return Kd.fromJSON(e);case"codedValue":return _c.fromJSON(e);case"inherited":return Pv.fromJSON(e)}return null}const _ge=new tt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var lR;const Sge=new tt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var Am;let pi=(Am=class extends K{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:r}){let i=null;try{i=r?JSON.parse(r):null}catch{}return i?.value??null}readValueType(t,{description:r}){let i=null;try{i=r?JSON.parse(r):null}catch{}return i?Sge.fromJSON(i.fieldValueType):null}clone(){return new lR({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},lR=Am,Am);u([p({type:String,json:{write:!0}})],pi.prototype,"alias",void 0),u([p({type:[String,Number],json:{write:{allowNull:!0}}})],pi.prototype,"defaultValue",void 0),u([p()],pi.prototype,"description",void 0),u([le("description")],pi.prototype,"readDescription",null),u([p({types:QW,json:{read:{reader:BT},write:!0}})],pi.prototype,"domain",void 0),u([p({type:Boolean,json:{write:!0}})],pi.prototype,"editable",void 0),u([p({type:dt,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],pi.prototype,"length",void 0),u([p({type:String,json:{write:!0}})],pi.prototype,"name",void 0),u([p({type:Boolean,json:{write:!0}})],pi.prototype,"nullable",void 0),u([Ne(_ge)],pi.prototype,"type",void 0),u([p()],pi.prototype,"valueType",void 0),u([le("valueType",["description"])],pi.prototype,"readValueType",null),u([p({type:Boolean,json:{read:!1}})],pi.prototype,"visible",void 0),pi=lR=u([O("esri.layers.support.Field")],pi);var uR;let uf=uR=class extends K{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new uR({mapLayerId:e,gdbVersion:t})}};u([Ne({mapLayer:"map-layer"}),p({json:{write:{isRequired:!0}}})],uf.prototype,"type",void 0),u([p({type:dt,json:{write:{isRequired:!0}}})],uf.prototype,"mapLayerId",void 0),u([p({type:String,json:{write:!0}})],uf.prototype,"gdbVersion",void 0),uf=uR=u([O("esri.layers.support.source.MapLayerSource")],uf);var cR;let hl=cR=class extends K{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:i,geometryType:n}=this,s={workspaceId:e,query:t,oidFields:r,spatialReference:i?.clone()??void 0,geometryType:n};return new cR(s)}};u([Ne({queryTable:"query-table"}),p({json:{write:{isRequired:!0}}})],hl.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],hl.prototype,"workspaceId",void 0),u([p({type:String,json:{write:!0}})],hl.prototype,"query",void 0),u([p({type:String,json:{write:!0}})],hl.prototype,"oidFields",void 0),u([p({type:Ee,json:{write:!0}})],hl.prototype,"spatialReference",void 0),u([Ne(upe)],hl.prototype,"geometryType",void 0),hl=cR=u([O("esri.layers.support.source.QueryTableDataSource")],hl);var dR;let cf=dR=class extends K{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new dR({workspaceId:e,dataSourceName:t})}};u([Ne({raster:"raster"}),p({json:{write:{isRequired:!0}}})],cf.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],cf.prototype,"dataSourceName",void 0),u([p({type:String,json:{write:!0}})],cf.prototype,"workspaceId",void 0),cf=dR=u([O("esri.layers.support.source.RasterDataSource")],cf);var hR;let kd=hR=class extends K{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new hR({workspaceId:e,gdbVersion:t,dataSourceName:r})}};u([Ne({table:"table"}),p({json:{write:{isRequired:!0}}})],kd.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],kd.prototype,"workspaceId",void 0),u([p({type:String,json:{write:!0}})],kd.prototype,"gdbVersion",void 0),u([p({type:String,json:{write:!0}})],kd.prototype,"dataSourceName",void 0),kd=hR=u([O("esri.layers.support.source.TableDataSource")],kd);var pR,fR;const Tge=wi()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let es=pR=class extends K{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return DF()(e,t,r)}castLeftTableSource(e){return Ma(mR(),e)}readRightTableSource(e,t,r){return DF()(e,t,r)}castRightTableSource(e){return Ma(mR(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:i,joinType:n}=this,s={leftTableKey:e,rightTableKey:t,leftTableSource:r?.clone()??void 0,rightTableSource:i?.clone()??void 0,joinType:n};return new pR(s)}};u([Ne({joinTable:"join-table"}),p({json:{write:{isRequired:!0}}})],es.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],es.prototype,"leftTableKey",void 0),u([p({type:String,json:{write:!0}})],es.prototype,"rightTableKey",void 0),u([p({json:{write:!0}})],es.prototype,"leftTableSource",void 0),u([le("leftTableSource")],es.prototype,"readLeftTableSource",null),u([wt("leftTableSource")],es.prototype,"castLeftTableSource",null),u([p({json:{write:!0}})],es.prototype,"rightTableSource",void 0),u([le("rightTableSource")],es.prototype,"readRightTableSource",null),u([wt("rightTableSource")],es.prototype,"castRightTableSource",null),u([Ne(Tge)],es.prototype,"joinType",void 0),es=pR=u([O("esri.layers.support.source.JoinTableDataSource")],es);let MM=null;function DF(){return MM||(MM=yy({types:mR()})),MM}let AM=null;function mR(){return AM||(AM={key:"type",base:null,typeMap:{"data-layer":$o,"map-layer":uf}}),AM}const Ege={key:"type",base:null,typeMap:{"join-table":es,"query-table":hl,raster:cf,table:kd}};var Om;let $o=(Om=class extends K{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:r}=this;return new fR({fields:t,dataSource:r})}},fR=Om,Om);u([Ne({dataLayer:"data-layer"}),p({json:{write:{isRequired:!0}}})],$o.prototype,"type",void 0),u([p({type:[pi],json:{write:!0}})],$o.prototype,"fields",void 0),u([p({types:Ege,json:{write:!0}})],$o.prototype,"dataSource",void 0),$o=fR=u([O("esri.layers.support.source.DataLayerSource")],$o),$o.from=Br($o);let Fd=class extends We.ClonableMixin(K){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};u([p({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Fd.prototype,"onFields",void 0),u([p({type:String,json:{write:!0}})],Fd.prototype,"operator",void 0),u([p({type:String,json:{write:!0}})],Fd.prototype,"searchTerm",void 0),u([p({type:String,json:{write:!0}})],Fd.prototype,"searchType",void 0),Fd=u([O("esri.rest.support.FullTextSearch")],Fd);const xge=Fd;var yR;const kF=new tt({upperLeft:"upper-left",lowerLeft:"lower-left"});let nc=yR=class extends K{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new yR(U({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};u([p({type:Xe,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],nc.prototype,"extent",void 0),u([p({type:["view","edit"],json:{write:!0}})],nc.prototype,"mode",void 0),u([p({type:String,json:{read:kF.read,write:kF.write}})],nc.prototype,"originPosition",void 0),u([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],nc.prototype,"tolerance",void 0),nc=yR=u([O("esri.rest.support.QuantizationParameters")],nc);const $ge=new tt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var gR;const FF=new tt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let vo=gR=class extends K{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=U(e))}clone(){return new gR({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:U(this.statisticParameters)})}};u([p({type:Number,json:{write:!0}})],vo.prototype,"maxPointCount",void 0),u([p({type:Number,json:{write:!0}})],vo.prototype,"maxRecordCount",void 0),u([p({type:Number,json:{write:!0}})],vo.prototype,"maxVertexCount",void 0),u([p({type:String,json:{write:!0}})],vo.prototype,"onStatisticField",void 0),u([p({type:String,json:{write:!0}})],vo.prototype,"outStatisticFieldName",void 0),u([p({type:String,json:{read:{source:"statisticType",reader:FF.read},write:{target:"statisticType",writer:FF.write}}})],vo.prototype,"statisticType",void 0),u([p({type:Object})],vo.prototype,"statisticParameters",void 0),u([de("statisticParameters")],vo.prototype,"writeStatisticParameters",null),vo=gR=u([O("esri.rest.support.StatisticDefinition")],vo);var rS;const Mge=new tt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var Eh;let Ce=(Eh=class extends K{static from(t){return R1(rS,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,r){r.historicMoment=t&&t.getTime()}writeParameterValues(t,r){if(t){const i={};for(const n in t){const s=t[n];Array.isArray(s)?i[n]=s.map((a=>a instanceof Date?a.getTime():a)):s instanceof Date?i[n]=s.getTime():i[n]=s}r.parameterValues=i}}writeStart(t,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10,r.where="1=1"}writeWhere(t,r){r.where=t||"1=1"}clone(){return new rS(U({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},rS=Eh,Eh.MAX_MAX_RECORD_COUNT_FACTOR=5,Eh);u([p({json:{write:!0}})],Ce.prototype,"aggregateIds",void 0),u([p({type:Boolean,json:{write:!0}})],Ce.prototype,"cacheHint",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],Ce.prototype,"compactGeometryEnabled",void 0),u([p({json:{write:!0}})],Ce.prototype,"datumTransformation",void 0),u([wt("datumTransformation")],Ce.prototype,"castDatumTransformation",null),u([p({type:Boolean,json:{default:!1,write:!0}})],Ce.prototype,"defaultSpatialReferenceEnabled",void 0),u([p({type:Number,json:{write:!0}})],Ce.prototype,"distance",void 0),u([p({type:$o,json:{write:!0}})],Ce.prototype,"dynamicDataSource",void 0),u([p({type:String,json:{write:!0}})],Ce.prototype,"formatOf3DObjects",void 0),u([p({type:[xge],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Ce.prototype,"fullText",void 0),u([p({type:String,json:{write:!0}})],Ce.prototype,"gdbVersion",void 0),u([p({types:U1,json:{read:Dc,write:!0}})],Ce.prototype,"geometry",void 0),u([p({type:Number,json:{write:!0}})],Ce.prototype,"geometryPrecision",void 0),u([p({type:[String],json:{write:!0}})],Ce.prototype,"groupByFieldsForStatistics",void 0),u([p({type:String,json:{write:!0}})],Ce.prototype,"having",void 0),u([p({type:Date})],Ce.prototype,"historicMoment",void 0),u([de("historicMoment")],Ce.prototype,"writeHistoricMoment",null),u([p({type:Number,json:{write:!0}})],Ce.prototype,"maxAllowableOffset",void 0),u([p({type:Number,cast:e=>e<1?1:e>Ce.MAX_MAX_RECORD_COUNT_FACTOR?Ce.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],Ce.prototype,"maxRecordCountFactor",void 0),u([p({type:["xyFootprint"],json:{write:!0}})],Ce.prototype,"multipatchOption",void 0),u([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Ce.prototype,"num",void 0),u([p({json:{write:!0}})],Ce.prototype,"objectIds",void 0),u([p({type:[String],json:{write:!0}})],Ce.prototype,"orderByFields",void 0),u([p({type:[String],json:{write:!0}})],Ce.prototype,"outFields",void 0),u([p({type:Ee,json:{name:"outSR",write:!0}})],Ce.prototype,"outSpatialReference",void 0),u([p({type:[vo],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Ce.prototype,"outStatistics",void 0),u([p({json:{write:!0}})],Ce.prototype,"parameterValues",void 0),u([de("parameterValues")],Ce.prototype,"writeParameterValues",null),u([p({type:Pe,json:{write:!0}})],Ce.prototype,"pixelSize",void 0),u([p({type:nc,json:{write:!0}})],Ce.prototype,"quantizationParameters",void 0),u([p({type:[Object],json:{write:!0}})],Ce.prototype,"rangeValues",void 0),u([p({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Ce.prototype,"relationParameter",void 0),u([p({type:String,json:{write:!0}})],Ce.prototype,"resultType",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],Ce.prototype,"returnCentroid",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],Ce.prototype,"returnDistinctValues",void 0),u([p({type:Boolean,json:{default:!0,write:!0}})],Ce.prototype,"returnExceededLimitFeatures",void 0),u([p({type:Boolean,json:{write:!0}})],Ce.prototype,"returnGeometry",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],Ce.prototype,"returnQueryGeometry",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],Ce.prototype,"returnM",void 0),u([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ce.prototype,"returnZ",void 0),u([p({type:Boolean,json:{write:!0}})],Ce.prototype,"returnTrueCurves",void 0),u([p({type:Ee,json:{write:!0}})],Ce.prototype,"sourceSpatialReference",void 0),u([Ne($ge,{ignoreUnknown:!1,name:"spatialRel"})],Ce.prototype,"spatialRelationship",void 0),u([p({type:Number,json:{read:{source:"resultOffset"}}})],Ce.prototype,"start",void 0),u([de("start"),de("num")],Ce.prototype,"writeStart",null),u([p({type:String,json:{write:!0}})],Ce.prototype,"sqlFormat",void 0),u([p({type:String,json:{write:!0}})],Ce.prototype,"text",void 0),u([p({type:Lr,json:{write:!0}})],Ce.prototype,"timeExtent",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],Ce.prototype,"timeReferenceUnknownClient",void 0),u([Ne(Mge,{ignoreUnknown:!1}),p({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null}}}}})],Ce.prototype,"units",void 0),u([p({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],Ce.prototype,"where",void 0),u([de("where")],Ce.prototype,"writeWhere",null),Ce=rS=u([O("esri.rest.support.Query")],Ce);function Fu(e){return!(e==null||typeof e!="object"||!("createQuery"in e)||!e.createQuery)}let Ns=class extends Na.EventedAccessor{constructor(t){super(t),this._selectionMap=new tS,this._sources=new ge,this._trashCan=[],this._layerEditHandles=new ge,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([je((()=>[this.view,this.showHighlight]),(()=>this._refreshVisualization())),je((()=>this.view),(t=>{t?.when().then((()=>this.syncSources()))}),Hi),Uh((()=>this.sources),"change",(t=>{const r=this._selectionMap,i=[];for(const n of t.removed){const s=r.get(n);s&&(r.delete(n),s.highlightHandle?.remove(),i.push({layer:n,selection:[],added:[],removed:[...s.selection]}))}this._refreshListeners(),i.length&&this._onSelectionChange(i)}),{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(ir)}get selections(){return Array.from(this._selectionMap.entries()).map((t=>{const[r,i]=t;return{layer:r,selection:[...i.selection]}}))}get count(){let t=0;for(const r of this._selectionMap.values())t+=r.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){Xl(t,this._sources)}syncSources(){const t=new Set,r=this.view?.map;if(!r)return;const i=n=>{Mue(n)?(n.layers?.forEach(i),n.tables?.forEach(i)):$ue(n)?(n.sublayers?.forEach(i),n.subtables?.forEach(i)):E6(n)?n.sublayers?.forEach(i):Fu(n)&&t.add(n)};r.allLayers.forEach(i),r.allTables.forEach(i),this.sources=[...t]}async getSelectedFeatures(t,r={},i="layerView"){const{view:n,selections:s}=this;if(!n&&i==="layerView")return re.getLogger(this).warn("Cannot query layer views without a view."),[];const a=(t?.length?s.filter((c=>t.includes(c.layer))):s).map((async c=>{const{layer:d,selection:f}=c;if(!f.length)return;const g=nf(d)?d.parent:d;if(g!=null){if(n&&i==="layerView"&&!UF(g)&&jF(g)){const v=await n.whenLayerView(g).catch((()=>null));if(v)return zF(v,f,r)}return zF(g,f,r)}})).filter(Yl);return(await Promise.all(a)).filter(Yl)}updateSelection(t){const r=new Map;for(const[s,a]of this._selectionMap)r.set(s,[...a.selection]);let i=!1;const n=t.current.concat(t.added);for(const s of n){const a=s.sourceLayer,c=s.getObjectId();if(this.sources.includes(a)&&(Fu(a)||nf(a))&&c!==null){const d=dy(r,a,(()=>[]));d.includes(c)||(d.push(c),i=!0)}}for(const s of t.removed){const a=s.sourceLayer,c=s.getObjectId();if(this.sources.includes(a)&&(Fu(a)||nf(a))&&c!==null){const d=r.get(a),f=d?.indexOf(c);f!==void 0&&f>=0&&(d?.splice(f,1),i=!0)}}if(i){const{_selectionMap:s,_trashCan:a}=this,c=[];for(const[d,f]of r){const g=s.get(d);g!==void 0&&a.push(g),s.set(d,{selection:f}),c.push({layer:d,selection:f,...z4(g!==void 0?g.selection:[],f)})}this._onSelectionChange(c)}}setSelection(t,r){this._setSelection(t,r)}getSelection(t){return this._selectionMap.get(t)?.selection}appendToSelection(t,r){const i=this._selectionMap.get(t),n=i!==void 0?[...i.selection]:[];for(const s of r)n.includes(s)||n.push(s);this._setSelection(t,n)}removeFromSelection(t,r){const i=this._selectionMap.get(t);if(!i)return;const n=[];for(const s of i.selection)r.includes(s)||n.push(s);this._setSelection(t,n)}toggleInSelection(t,r){const i=this._selectionMap.get(t);if(!i||i.selection.length===0)return void this._setSelection(t,r);const n=new Set(i.selection),s=new Set(r),a=Mne(n,s);this._setSelection(t,Array.from(a))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const r=[];for(const[i,n]of this._selectionMap.entries())r.push({layer:i,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(r)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();if(this.view==null)return;const{sources:t,view:r,_selectionMap:i,showHighlight:n}=this,s=this._vizTaskId;for(const a of t){const c=i.get(a),d=nf(a)?a.parent:a;if(d!=null&&jF(d)){if(UF(d))continue;r.whenLayerView(d).then((f=>{c?.highlightHandle?.remove(),c!=null&&n&&s===this._vizTaskId&&"highlight"in f&&typeof f.highlight=="function"&&c.selection.length>0&&(c.highlightHandle=f.highlight(c.selection,this.highlightName))})).catch((()=>{c?.highlightHandle?.remove()}))}}}_refreshListeners(){this._layerEditHandles.drain(ir);const t=new Set(this.sources.map((r=>nf(r)?r.parent:r)));for(const r of t)Fu(r)&&"on"in r&&r.on&&this._layerEditHandles.push(r.on("edits",(i=>this._onLayerEdit(i,r))))}_onLayerEdit(t,r){if(E6(r))this._onParentLayerEdit(t,r);else if(t.deletedFeatures.length&&this._selectionMap.has(r)){const i=[];t.deletedFeatures.forEach((({error:n,objectId:s})=>{s!=null&&n==null&&i.push(s)})),this.removeFromSelection(r,i)}}_onParentLayerEdit(t,r){const{deletedFeatures:i,edits:n,updatedFeatures:s}=t;if(n?.updateFeatures?.forEach((a=>{const c=a.getObjectId()??a.attributes[r.objectIdField];if(c==null||s.find((g=>g.objectId===c))?.error)return;const d=r.findSublayerForFeature(a);if(!Fu(d))return;const f=r.sublayers.find((g=>!(!Fu(g)||!this.getSelection(g)?.includes(c))));Fu(f)&&f!==d&&(this.removeFromSelection(f,[c]),this.appendToSelection(d,[c]))})),i.length){const a=[];i.forEach((({error:c,objectId:d})=>{d!=null&&c==null&&a.push(d)})),r.sublayers.forEach((c=>{Fu(c)&&this._selectionMap.has(c)&&this.removeFromSelection(c,a)}))}}_setSelection(t,r){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const i=this._selectionMap.get(t);if(i===void 0||!Oge(i,{selection:r})){i!==void 0&&this._trashCan.push(i),this._selectionMap.set(t,{selection:[...r]});const n={layer:t,selection:[...r],...z4(i!==void 0?i.selection:[],r)};this._onSelectionChange([n])}}};u([p()],Ns.prototype,"_selectionMap",void 0),u([p()],Ns.prototype,"_sources",void 0),u([p({readOnly:!0,nonNullable:!0})],Ns.prototype,"selections",null),u([p({readOnly:!0,nonNullable:!0})],Ns.prototype,"count",null),u([p()],Ns.prototype,"view",void 0),u([p({readOnly:!0,nonNullable:!0})],Ns.prototype,"hasSelection",null),u([p()],Ns.prototype,"showHighlight",void 0),u([p()],Ns.prototype,"sources",null),u([p()],Ns.prototype,"highlightName",void 0),Ns=u([O("esri.views.SelectionManager")],Ns);const UF=e=>nf(e)?e.parent?.isTable===!0:e.isTable,Age=e=>e.layer!==void 0,jF=e=>e?.when!==void 0,Oge=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const r=[...e.selection],i=[...t.selection];if(r.length!==i.length)return!1;r.sort(),i.sort();for(let n=0;n<r.length;n++)if(r[n]!==i[n])return!1}return!0},zF=async(e,t,r={})=>{let i;if(Age(e)){const n=e;i=n===void 0?null:await n.queryFeatures(new Ce({...r,objectIds:t})).then((s=>({data:s,layer:e.layer})))}else{const n=e;i=n===void 0?null:await n.queryFeatures(new Ce({...r,objectIds:t})).then((s=>({data:s,layer:n})))}return i},Rge=Ns;let z0=class extends We.ClonableMixin(Ae){constructor(t){super(t),this.accentColor=new De([255,127,0]),this.textColor=new De([255,255,255])}};u([p({type:De,nonNullable:!0})],z0.prototype,"accentColor",void 0),u([p({type:De,nonNullable:!0})],z0.prototype,"textColor",void 0),z0=u([O("esri.views.Theme")],z0);const vR=z0;var VF;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(VF||(VF={}));const KW=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],eZ={};function tZ(e){return!!eZ[e]}function Cge(e){for(const t of e)if(!tZ(t))return!1;return!0}KW.forEach((e=>{eZ[e]=!0}));let rZ=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach((({handler:r,priority:i},n)=>this.inputManager?.installHandlers(n,[r],i)))}disconnect(){this.inputManager&&this._handlers.forEach(((t,r)=>this.inputManager?.uninstallHandlers(r))),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,r,i,n){const s=Array.isArray(t)?t:t.split(",");if(!Cge(s))return s.some(tZ)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let a,c;Array.isArray(r)?c=r:(a=r,c=[]),typeof i=="function"?a=i:n=i,n=n??Hl.DEFAULT;const d=this._createUniqueGroupName(),f=new Ige(this.view,s,c,a);this._handlers.set(d,{handler:f,priority:n});for(const g of s){const v=this._handlerCounts.get(g)||0;this._handlerCounts.set(g,v+1)}return this.inputManager&&this.inputManager.installHandlers(d,[f],n),ht((()=>this._removeHandler(d,s)))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,r){if(this._handlers.has(t)){this._handlers.delete(t);for(const i of r){const n=this._handlerCounts.get(i);n===void 0||(n===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Ige=class extends si{constructor(t,r,i,n){super(!0),this._latestDragStart=void 0,this.view=t;for(const s of r)switch(s){case"click":this.registerIncoming("click",i,(a=>n(Lge(t,a))));break;case"double-click":this.registerIncoming("double-click",i,(a=>n(Dge(t,a))));break;case"immediate-click":this.registerIncoming("immediate-click",i,(a=>n(kge(t,a))));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,(a=>n(Fge(t,a))));break;case"hold":this.registerIncoming("hold",i,(a=>n(Uge(t,a))));break;case"drag":this.registerIncoming("drag",i,(a=>{const c=this._wrapDrag(a);c&&n(c)}));break;case"key-down":this.registerIncoming("key-down",i,(a=>n(jge(a))));break;case"key-up":this.registerIncoming("key-up",i,(a=>n(zge(a))));break;case"pointer-down":this.registerIncoming("pointer-down",i,(a=>n(t0(a,"pointer-down"))));break;case"pointer-move":this.registerIncoming("pointer-move",i,(a=>n(t0(a,"pointer-move"))));break;case"pointer-up":this.registerIncoming("pointer-up",i,(a=>n(t0(a,"pointer-up"))));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,(a=>n(Vge(a))));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,(a=>n(Gge(a))));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,(a=>n(t0(a,"pointer-enter"))));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,(a=>n(t0(a,"pointer-leave"))));break;case"gamepad":this.registerIncoming("gamepad",i,(a=>{n(qge(a))}));break;case"focus":this.registerIncoming("focus",i,(a=>{n(Nge(a))}));break;case"blur":this.registerIncoming("blur",i,(a=>{n(Pge(a))}))}}_wrapDrag(t){const r=t.data,{x:i,y:n}=r.center,{action:s,pointerType:a,button:c}=r;if(s==="start"&&(this._latestDragStart=r),!this._latestDragStart)return;const d=r.pointer.native,f=r.buttons,{cancelable:g,timestamp:v}=t,w={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:i,y:n,origin:w,pointerType:a,button:c,buttons:f,radius:r.radius,angle:lB(r.angle),native:d,timestamp:v,cancelable:g,stopPropagation:()=>t.stopPropagation(),defer:S=>t.defer(S),preventDefault:()=>t.preventDefault()}}};function Nge(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function Pge(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function Lge(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:a,native:c,eventId:d}=t.data,{cancelable:f,timestamp:g}=t;return{type:"click",pointerType:r,button:i,buttons:n,x:s,y:a,native:c,timestamp:g,screenPoint:bi(s,a),mapPoint:B1(e,s,a),eventId:d,cancelable:f,stopPropagation:()=>t.stopPropagation(),defer:v=>t.defer(v),preventDefault:()=>t.preventDefault()}}function Dge(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:a,native:c,eventId:d}=t.data,{cancelable:f,timestamp:g}=t;return{type:"double-click",pointerType:r,button:i,buttons:n,x:s,y:a,native:c,timestamp:g,mapPoint:B1(e,s,a),eventId:d,cancelable:f,stopPropagation:()=>t.stopPropagation(),defer:v=>t.defer(v),preventDefault:()=>t.preventDefault()}}function kge(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:a,native:c,eventId:d}=t.data,f=c.pointerId,{cancelable:g,timestamp:v}=t;return{type:"immediate-click",pointerId:f,pointerType:r,button:i,buttons:n,x:s,y:a,native:c,timestamp:v,mapPoint:B1(e,s,a),eventId:d,cancelable:g,stopPropagation:()=>t.stopPropagation(),defer:w=>t.defer(w),preventDefault:()=>t.preventDefault()}}function Fge(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:a,native:c,eventId:d}=t.data,f=c.pointerId,{cancelable:g,timestamp:v}=t;return{type:"immediate-double-click",pointerId:f,pointerType:r,button:i,buttons:n,x:s,y:a,native:c,timestamp:v,mapPoint:B1(e,s,a),eventId:d,cancelable:g,stopPropagation:()=>t.stopPropagation(),defer:w=>t.defer(w),preventDefault:()=>t.preventDefault()}}function Uge(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:a,native:c}=t.data,{cancelable:d,timestamp:f}=t;return{type:"hold",pointerType:r,button:i,buttons:n,x:s,y:a,native:c,timestamp:f,mapPoint:B1(e,s,a),cancelable:d,stopPropagation:()=>t.stopPropagation(),defer:g=>t.defer(g),preventDefault:()=>t.preventDefault()}}function B1(e,t,r){return e.toMap(bi(t,r),{exclude:[]})}function jge(e){const{key:t,repeat:r,native:i}=e.data,{cancelable:n,timestamp:s}=e;return{type:"key-down",key:t,repeat:r,native:i,timestamp:s,cancelable:n,stopPropagation:()=>e.stopPropagation(),defer:a=>e.defer(a),preventDefault:()=>e.preventDefault()}}function zge(e){const{key:t,native:r}=e.data,{cancelable:i,timestamp:n}=e;return{type:"key-up",key:t,native:r,timestamp:n,cancelable:i,stopPropagation:()=>e.stopPropagation(),defer:s=>e.defer(s),preventDefault:()=>e.preventDefault()}}function t0(e,t){const{x:r,y:i,button:n,buttons:s,native:a,eventId:c}=e.data,d=a.pointerId,f=a.pointerType,{cancelable:g,timestamp:v}=e;return{type:t,x:r,y:i,pointerId:d,pointerType:f,button:n,buttons:s,native:a,timestamp:v,eventId:c,cancelable:g,stopPropagation:()=>e.stopPropagation(),defer:w=>e.defer(w),preventDefault:()=>e.preventDefault()}}function Vge(e){const{x:t,y:r,buttons:i,native:n,eventId:s}=e.data.currentEvent,{button:a}=e.data.startEvent,c=e.data.startEvent.native.pointerId,d=e.data.startEvent.native.pointerType,f=e.data.action,g={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:v,timestamp:w}=e;return{type:"pointer-drag",x:t,y:r,pointerId:c,pointerType:d,button:a,buttons:i,action:f,origin:g,native:n,timestamp:w,eventId:s,cancelable:v,stopPropagation:()=>e.stopPropagation(),defer:S=>e.defer(S),preventDefault:()=>e.preventDefault()}}function Gge(e){const{cancelable:t,data:r,timestamp:i}=e,{x:n,y:s,deltaY:a,native:c}=r;return{type:"mouse-wheel",x:n,y:s,deltaY:a,native:c,timestamp:i,cancelable:t,stopPropagation:()=>e.stopPropagation(),defer:d=>e.defer(d),preventDefault:()=>e.preventDefault()}}function qge(e){const{action:t,state:r,device:i}=e.data,{cancelable:n,timestamp:s}=e,{buttons:a,axes:c}=r;return{type:"gamepad",device:i,timestamp:s,action:t,buttons:a,axes:c,cancelable:n,stopPropagation:()=>e.stopPropagation(),defer:d=>e.defer(d),preventDefault:()=>e.preventDefault()}}var a1,GF,qF;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(a1||(a1={})),(function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"})(GF||(GF={})),(function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"})(qF||(qF={}));const Bge="z",Hge="r",iZ={cancel:"Escape",complete:"Enter"},cLe={...iZ,redo:Hge,undo:Bge,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},dLe={toggle:"Control"},hLe={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},pLe={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:iW,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let fLe=class{constructor(){this._bindings=new Map}add(t,r){return this.addToggle(t,(i=>{i.type==="key-down"&&r(i)}))}addToggle(t,r){const i=Wge.fromDefinition(t,r),n=dy(this._bindings,i.key,(()=>[]));return n.push(i),ht((()=>bI(n,i)))}register(t,r=Hl.WIDGET){return Zh([t.on("key-down",(i=>this.dispatch(t.inputManager,i)),r),t.on("key-up",(i=>this.dispatch(t.inputManager,i)),r)])}dispatch(t,r){const i=r.key,n=this._bindings.get(i);if(n)for(const s of n)s.process(t,r)}},Wge=class bR{constructor(t,r,i,n,s){this.key=t,this.modifiers=r,this.repeats=i,this.continuePropagation=n,this.callback=s}process(t,r){if(!(r.key!==this.key||"repeat"in r&&r.repeat&&!this.repeats)){for(const i of this.modifiers)if(!t.isModifierKeyDown(i))return;this.continuePropagation||r.stopPropagation(),this.callback(r)}}static fromDefinition(t,r){if(typeof t=="string")return new bR(t,[],!1,!1,r);const{key:i,modifier:n,repeats:s,continuePropagation:a}=t;return new bR(i,n?Array.isArray(n)?n:[n]:[],!!s,!!a,r)}};function Zge(e){return[e.on("before-add",(t=>{const r=t.item;if(r==null||e.includes(r))return re.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();r.onAdd()})),e.on("after-remove",(t=>{const r=t.item;r.active&&(r.view.activeTool=null),r.destroy()}))]}function wR(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(a1.USER)&&e.getEditableFlag(a1.MANAGER)}function Yge(e){return e.type==="key-down"&&e.key===iZ.cancel}function ra(e){return bi(e.x,e.y)}function nZ(e,t){const r=(e instanceof HTMLElement?e:e.surface)?.getBoundingClientRect();return r?bi(t.clientX-r.left,t.clientY-r.top):bi(0,0)}function sZ(e,t){return t instanceof Event?nZ(e,t):ra(t)}function oZ(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let Jge=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,r){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":HF(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!WF(t))break;const n=ra(t),s=Hp(n,t.pointerType,r.forEachTool);if(s==null)break;const a=s.manipulator,c=s.tool;a==null||c==null||!a.interactive||a.grabbable&&a.grabbableForEvent(t)||!a.grabbing||a.dragging||this._releaseManipulatorBeforeDragging(a,t,r),a!=null&&c!=null&&a.interactive&&a.grabbable&&a.grabbableForEvent(t)&&!a.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:a,tool:c,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&r.activeTool==null&&(this._revertToNullActiveTool=!0,r.setActiveTool(s.tool)),a.grabbing=!0,a.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!WF(t))break;const n=this._grabbedManipulators.get(t.pointerId),s=n?.manipulator,a=n?.tool;if(s==null||a==null)break;const c=ra(t);c.x=Ys(c.x,0,r.view.width),c.y=Ys(c.y,0,r.view.height);const d=n.start,f=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,f?s.events.emit("drag",{action:"update",start:d,screenPoint:c}):s.events.emit("drag",{action:"start",start:d,screenPoint:c,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:a,manipulator:s,start:d}));break;case"end":s.dragging=!1,f&&s.events.emit("drag",{action:"end",start:d,screenPoint:c}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}i();break}case"immediate-click":{const n=ra(t),s=Hp(n,t.pointerType,r.forEachTool);if(Xge(t)||r.forEachTool((f=>{if((s==null||s.tool!==f||f.automaticManipulatorSelection)&&f.manipulators){let g=!1;f.manipulators.forEach((({manipulator:v})=>{v.selected&&(v.selected=!1,g=!0)})),g&&f.onManipulatorSelectionChanged&&f.onManipulatorSelectionChanged()}})),s==null)break;const{manipulator:a,tool:c}=s;if(!a.interactive)break;a.selectable&&c.automaticManipulatorSelection&&(a.selected=!a.selected,c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged());const d=t.native.shiftKey;a.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:d,stopPropagation:i}),OM(a,i);break}case"click":{const n=ra(t),s=Hp(n,t.pointerType,r.forEachTool),a=s?.manipulator;if(a==null||!a.interactive)break;const c=t.native.shiftKey;a.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:c}),i();break}case"double-click":{const n=ra(t),s=Hp(n,t.pointerType,r.forEachTool),a=s!=null?s.manipulator:null;if(a==null||!a.interactive)break;const c=t.native.shiftKey;a.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:c,stopPropagation:i}),OM(a,i);break}case"immediate-double-click":{const n=ra(t),s=Hp(n,t.pointerType,r.forEachTool),a=s!=null?s.manipulator:null;if(a==null||!a.interactive)break;const c=t.native.shiftKey;a.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:c,stopPropagation:i}),t.pointerType==="mouse"&&OM(a,i);break}}this._onFocusChange(r.forEachTool)}_releaseManipulatorBeforeDragging(t,r,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:ra(r)}),this._grabbedManipulators.forEach((({manipulator:n},s)=>{n===t&&this._grabbedManipulators.delete(s)})),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(t,r){const i=this._grabbedManipulators.get(t.pointerId)?.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:ra(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(r.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=BF(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=BF(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const r=new Set,i=new Set;this._grabbedManipulators.forEach((({tool:n})=>{r.add(n)})),this._hoveredManipulators.forEach((({tool:n})=>{i.add(n)})),t((n=>{n.hasGrabbedManipulators=r.has(n),n.hasHoveredManipulators=i.has(n);const s=this._grabbedManipulators.values(),a=Hie(s,(({tool:c})=>c===n));n.firstGrabbedManipulator=a!=null?a.manipulator:null}))}clearPointers(t,{forEachTool:r,setActiveTool:i},n=!0,s){const a=(c,d)=>c===t&&(s==null||s===d);this._grabbedManipulators.forEach((({tool:c,manipulator:d,pointerType:f},g)=>{a(c,d)&&(this._grabbedManipulators.delete(g),d.grabbing=!1,d.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:f}))})),this._draggedManipulators.forEach((({tool:c,manipulator:d},f)=>{a(c,d)&&(this._draggedManipulators.delete(f),d.dragging=!1,d.events.emit("drag",{action:"cancel"}))})),n&&this._hoveredManipulators.forEach((({tool:c,manipulator:d},f)=>{a(c,d)&&(this._hoveredManipulators.delete(f),d.hovering=!1)})),this._afterManipulatorRelease(i),this._onFocusChange(r)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach(((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(bi(r.x,r.y),i,r.pointerType,t)}))}handleHoverEvent(t,r){const i=t.type;i!=="pointer-up"&&i!=="immediate-click"&&i!=="pointer-move"||!HF(t.pointerType)||(i!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(ra(t),t.pointerId,t.pointerType,r))}_updateHoveredStateForPointerAtScreenPosition(t,r,i,n){let s=Hp(t,i,n);const a=this._hoveredManipulators.get(r)?.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&a===s.manipulator||(a!=null&&(a.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(r,s)):this._hoveredManipulators.delete(r),this._onFocusChange(n))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach((({manipulator:r},i)=>{t===i&&(this._hoveredManipulators.delete(t),r.hovering=!1)}))}};function BF(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function Hp(e,t,r){let i=null;return r((n=>{if(n.manipulators==null||!wR(n))return!1;const s=n.manipulators.intersect(e,t);return s!=null&&(i={tool:n,manipulator:s},!0)})),i}function HF(e){return e==="mouse"}function WF(e){return e.pointerType!=="mouse"||e.button===0}function Xge(e){return!!e.native.shiftKey}function OM(e,t){e?.consumesClicks&&t()}const ZF="attached",RM="tools",Qge=1e3;let ia=class extends Ae{constructor(t){super(t),this._updatingHandles=new vh,this._clock=hy,this._manipulatorState=new Jge,this.tools=new ge,this.cursor=null,this._interacting=!1,this._interactingTimeout=Qge,this._interactingTimeoutHandle=null,this._forEachTool=r=>{for(const i of this.tools.items)if(r(i))return}}initialize(){this.addHandles([this.view.on(KW,(t=>{this._handleInputEvent(t)}),Hl.TOOL),...Zge(this.tools),this.tools.on("before-add",(({item:t})=>{this._updateToolEditableFlag(t)})),this.tools.on("before-remove",(({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()})),this.tools.on("change",(()=>{this._refreshToolWatchers()}))])}destroy(){this.activeTool=null,this.tools.drain((t=>t.destroy())),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void re.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const r=this.activeTool;this._set("activeTool",t),r?.deactivate(),t?.activate(),this._removeIncompleteTools(t);for(const i of this.tools){this._updateToolEditableFlag(i);const n=wR(i);this.activeTool!=null&&n||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some((t=>t.updating))}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=ir(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout((()=>this._interacting=!1),this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([je((()=>{const{state:t}=this.view;return"camera"in t&&t.camera}),(()=>this._forEachManipulator((t=>t.onViewChange())))),this.view.elevationProvider?.on("elevation-change",(t=>this._forEachManipulator((r=>r.onElevationChange(t)))))],ZF):this.addHandles(je((()=>this.view.extent),(()=>this._forEachManipulator((t=>t.onViewChange())))))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(ZF),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool((r=>{r.manipulators&&r.manipulators.forEach((({manipulator:i})=>t(i,r)))}))}_handleInputEvent(t){let r=!1;const i={...t,stopPropagation:()=>{r=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool((n=>{!r&&n.visible&&n.handleInputEvent(i)})),!r&&Yge(t)&&this.activeTool&&(t.stopPropagation(),t.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),r||this.activeTool==null||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(RM),this._forEachTool((t=>{if(t instanceof Ae){const r=je((()=>[t.cursor,t.visible,t.editable]),(()=>{wR(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}));this.addHandles(r,RM)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",(r=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,r.item.manipulator)})),t.manipulators.on("change",(()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}))],RM)})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){t.setEditableFlag?.(a1.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool((r=>!(r.cursor==null||!r.visible)&&(t=r.cursor,!0))),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter((r=>(t==null||r!==t)&&!r.created&&r.removeIncompleteOnCancel)).forEach((r=>{this.tools.remove(r)}))}get test(){}};u([p({constructOnly:!0,nonNullable:!0})],ia.prototype,"view",void 0),u([p({value:null})],ia.prototype,"activeTool",null),u([p({readOnly:!0,type:ge})],ia.prototype,"tools",void 0),u([p({readOnly:!0})],ia.prototype,"cursor",void 0),u([p({readOnly:!0})],ia.prototype,"updating",null),u([p()],ia.prototype,"_interacting",void 0),u([p({readOnly:!0})],ia.prototype,"interacting",null),ia=u([O("esri.views.ToolViewManager")],ia);const Kge=new De("cyan"),e0e=1,t0e=.25,r0e=new De("black"),i0e=.4,n0e=.2,vLe=.25,aZ="default",s0e="temporary",o0e=new De("yellow");var _R;let ts=_R=class extends Ae{constructor(e){super(e),this.name=aZ,this.color=Kge.clone(),this.haloColor=null,this.haloOpacity=e0e,this.fillOpacity=t0e,this.shadowColor=r0e.clone(),this.shadowOpacity=i0e,this.shadowDifference=n0e,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur&&this.shadowColor.equals(e.shadowColor)&&this.shadowOpacity===e.shadowOpacity&&this.shadowDifference===e.shadowDifference}clone(){return new _R({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(e){this.color=e.color.clone(),this.haloColor=e.haloColor?.clone(),this.haloOpacity=e.haloOpacity,this.fillOpacity=e.fillOpacity,this.shadowColor=e.shadowColor.clone(),this.shadowDifference=e.shadowDifference,this.shadowOpacity=e.shadowOpacity,this.haloBlur=e.haloBlur,this.haloWidth=e.haloWidth}};u([p({type:String,constructOnly:!0,nonNullable:!0})],ts.prototype,"name",void 0),u([p({type:De,nonNullable:!0})],ts.prototype,"color",void 0),u([p({type:De})],ts.prototype,"haloColor",void 0),u([p({nonNullable:!0})],ts.prototype,"haloOpacity",void 0),u([p({nonNullable:!0})],ts.prototype,"fillOpacity",void 0),u([p({type:De,nonNullable:!0})],ts.prototype,"shadowColor",void 0),u([p({nonNullable:!0})],ts.prototype,"shadowOpacity",void 0),u([p({nonNullable:!0})],ts.prototype,"shadowDifference",void 0),u([p({nonNullable:!0})],ts.prototype,"haloWidth",void 0),u([p({nonNullable:!0})],ts.prototype,"haloBlur",void 0),ts=_R=u([O("esri.views.support.HighlightOptions")],ts);const xc=ts;function a0e(){return new(ge.ofType(xc))([new xc({name:aZ}),new xc({name:s0e,color:o0e})])}let df=class extends Ae{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":l0e.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return u0e[this.deviceType]}};u([p({nonNullable:!0,readOnly:!0})],df.prototype,"nativeIndex",void 0),u([p({type:String,readOnly:!0})],df.prototype,"deviceType",null),u([p({type:Number,readOnly:!0})],df.prototype,"axisThreshold",null),df=u([O("esri.views.input.gamepad.GamepadInputDevice")],df);const eP=df,l0e=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),u0e={standard:.15,spacemouse:.025,unknown:0};let V0=class extends Ae{constructor(...t){super(...t),this.devices=new ge,this.enabledFocusMode="document"}};u([p({type:ge.ofType(eP),readOnly:!0})],V0.prototype,"devices",void 0),u([p({type:["document","view","none"]})],V0.prototype,"enabledFocusMode",void 0),V0=u([O("esri.views.input.gamepad.GamepadSettings")],V0);const c0e=V0;let iS=class extends Ae{constructor(){super(...arguments),this.gamepad=new c0e}};u([p({readOnly:!0})],iS.prototype,"gamepad",void 0),iS=u([O("esri.views.input.Input")],iS);const d0e=iS,lZ=()=>ct.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,CM=()=>p({type:["pan","rotate","zoom","none"],nonNullable:!0});let Ud=class extends Ae{constructor(t){super(t),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};u([CM()],Ud.prototype,"dragPrimary",void 0),u([CM()],Ud.prototype,"dragSecondary",void 0),u([CM()],Ud.prototype,"dragTertiary",void 0),u([p({type:["zoom","none"],nonNullable:!0})],Ud.prototype,"mouseWheel",void 0),Ud=u([O("esri.views.navigation.NavigationActionMap")],Ud);const tP=Ud;let Wu=class extends Ae{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};u([p({type:Boolean,nonNullable:!0})],Wu.prototype,"enabled",void 0),u([p({type:eP})],Wu.prototype,"device",void 0),u([p({type:["pan","zoom"],nonNullable:!0})],Wu.prototype,"mode",void 0),u([p({type:["forward-down","forward-up"],nonNullable:!0})],Wu.prototype,"tiltDirection",void 0),u([p({type:Number,nonNullable:!0})],Wu.prototype,"velocityFactor",void 0),Wu=u([O("esri.views.navigation.gamepad.GamepadSettings")],Wu);const uZ=Wu;let Zu=class extends Ae{constructor(t){super(t),this.actionMap=new tP,this.browserTouchPanEnabled=!0,this.gamepad=new uZ,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!lZ()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(t){gV(re.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=t?"zoom":"none"}};u([p({type:tP,nonNullable:!0})],Zu.prototype,"actionMap",void 0),u([p({type:Boolean})],Zu.prototype,"browserTouchPanEnabled",void 0),u([p({type:uZ,nonNullable:!0})],Zu.prototype,"gamepad",void 0),u([p({type:Boolean})],Zu.prototype,"momentumEnabled",void 0),u([p({type:Boolean})],Zu.prototype,"mouseWheelZoomEnabled",null),Zu=u([O("esri.views.navigation.Navigation")],Zu);const HT=Zu;function xLe(e,t,r){const i=cZ(e),n=t,s=h0e(i,n,r);if(i){const a=rn.deriveUnitFromSR(i,e.spatialReference).heightUnit;if(!r&&a!==i.heightUnit){const c=new z("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${a})`,{horizontalUnit:a});return new z("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i,error:c})}}if(!p0e(e)||s===Ln.Unsupported)return new z("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i});switch(s){case Ln.Units:{const a=i?.heightUnit||"unknown",c=n?.heightUnit||"unknown",d=new z("layerview:incompatible-height-unit",`The vertical units of the layer (${a}) must match the vertical units of the scene (${c})`,{layerUnit:a,sceneUnit:c});return new z("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:n,error:d})}case Ln.HeightModel:{const a=i?.heightModel||"unknown",c=n?.heightModel||"unknown",d=new z("layerview:incompatible-height-model",`The height model of the layer (${a}) must match the height model of the scene (${c})`,{layerHeightModel:a,sceneHeightModel:c});return new z("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:n,error:d})}case Ln.CRS:{const a=i?.vertCRS||"unknown",c=n?.vertCRS||"unknown",d=new z("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${a}) must match the vertical datum of the scene (${c})`,{layerDatum:a,sceneDatum:c});return new z("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:n,error:d})}}return null}function h0e(e,t,r){if(!YF(e)||!YF(t))return Ln.Unsupported;if(e==null||t==null)return Ln.Ok;if(!r&&e.heightUnit!==t.heightUnit)return Ln.Units;if(e.heightModel!==t.heightModel)return Ln.HeightModel;switch(e.heightModel){case"gravity-related-height":return Ln.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?Ln.Ok:Ln.CRS;default:return Ln.Unsupported}}var Ln;function YF(e){return e==null||e.heightModel!=null&&e.heightUnit!=null}function p0e(e){return"heightModelInfo"in e&&e.heightModelInfo!=null||e.spatialReference!=null||!pZ(e)}function cZ(e){if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?jc(e.url):void 0;return!(e.spatialReference?.vcsWkid==null&&t!=null&&t.serverType==="ImageServer")&&dZ(e)&&e.heightModelInfo?e.heightModelInfo:pZ(e)?rn.deriveUnitFromSR(m0e,e.spatialReference):null}function dZ(e){return"heightModelInfo"in e}function hZ(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function pZ(e){return hZ(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):fZ(e)}function f0e(e){return e.layers!=null||fZ(e)||hZ(e)||dZ(e)}function fZ(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Ln||(Ln={}));const m0e=new rn({heightModel:"gravity-related-height"});var T2;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(T2||(T2={}));let SR,IM=null;async function y0e(e){IM||(IM=ue(()=>import("./geometryServiceUtils-BqhiXKy6.js"),__vite__mapDeps([186,187])).then((t=>SR=t))),await IM,Yt(e)}async function mZ(e,t,r,i){if(!e)return null;const n=e.spatialReference;return Vc()||Go(n,t)?Gc(e,t):SR?SR.projectGeometry(e,t,r,i):(await Promise.race([y0e(i),Lc(i)]),mZ(e,t,r,i))}async function $Le(e,t){try{return e?.spatialReference?await ZB(e,t):null}catch{return null}}let Dt=class extends Ae{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=zm(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const t=this.map?.(),r=[];return this.priorityCollection!=null&&r.push(this.priorityCollection),r.push({parent:t?.basemap,layers:t?.basemap?.baseLayers},{layers:t?.layers},{parent:t?.ground,layers:t?.ground?.layers},{parent:t?.basemap,layers:t?.basemap?.referenceLayers}),r}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,(i=>{const n=this._getSupportedSpatialReferences(i);if(n.length>0){const s=this._narrowDownSpatialReferenceCandidates(t,n);s!=null&&(t=s)}return t?.length===1}))&&t?.length!==1)return{updating:!0};const r=this._pickSpatialReferenceCandidate(t);return{spatialReference:r?.spatialReference??null,viewingMode:r?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=this.map?.(),r=this.spatialReference;if(!r)return{updating:this._spatialReferenceTask.updating};let i;const n=this._collectLayers([{parent:t?.basemap,layers:t?.basemap?.baseLayers},{layers:t?.layers}],(s=>!(!("tileInfo"in s)||!s.tileInfo?.spatialReference.equals(r))&&(i=s,!0)),(s=>"tileInfo"in s));return i?{tileInfo:i.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let t={};const r=this._collectLayers(this.mapCollections,(i=>{const n=cZ(i);return!!n&&(t={heightModelInfo:n,vcsWkid:i.spatialReference?.vcsWkid,latestVcsWkid:i.spatialReference?.latestVcsWkid},!0)}),(i=>f0e(i)));return{...t,updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],r=this._collectLayers(this.mapCollections,(i=>{const n="fullExtents"in i&&i.fullExtents||(i.fullExtent!=null?[i.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:n[0],a=n.find((c=>c.spatialReference.equals(this.spatialReference)))??s;if(a)return t.push({extent:a,layer:i}),!0;if(this._getSupportedSpatialReferences(i).length>0)for(const c of n)t.push({extent:c,layer:i});return!1}));return{candidates:t,updating:r}}get _extentTask(){const{candidates:t,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(t),n=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=zm(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:n.clone(),task:bT((async s=>{try{const a=await mZ(i.extent,n,"portalItem"in i.layer?i.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:a}}catch{if(Ws(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}}))},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,r){if(t==null)return r;const i=new Array;for(const n of t)for(const s of r){if(!n.spatialReference.equals(s.spatialReference))continue;const a=v0e(n.viewingMode,s.viewingMode);if(a!==!1){i.push({spatialReference:n.spatialReference,viewingMode:a});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(t){const r=this.defaultSpatialReference;return t==null||t.length<1?r?{spatialReference:r,viewingMode:null}:null:(r!=null&&t.length>1&&t.some((({spatialReference:i})=>i.equals(r)))&&(t=t.filter((({spatialReference:i})=>i.equals(r)))),t.length>1&&t.some((({viewingMode:i})=>i!==T2.Local))&&(t=t.filter((({viewingMode:i})=>i!==T2.Local))),t[0])}_getSupportedSpatialReferences(t){const r="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(r.length===0)return[];const i=[];for(const n of r){const s=this.getSpatialReferenceSupport(n,t);if(s!=null){const a=s.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:c,viewingMode:d}of a)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!c.equals(this.userSpatialReference)||i.push({spatialReference:c,viewingMode:d})}}return i}_pickExtentCandidate(t){const r=this.spatialReference;return t.find((({extent:i})=>r.equals(i.spatialReference)))||t[0]}_collectLayers(t,r,i=()=>!0){switch(this._loadMaybe(this.map?.())){case"loading":return!0;case"failed":return!1}const n=new g0e(i,r);for(const s of t)if(this._collectCollection(s,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(t,r){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return r.updating=!0,void++r.preloading;case"failed":return}for(const i of t.layers)if(r.layerFilter(i)){switch(this._loadMaybe(i)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":if(r.updating||(r.done=r.pushLayer(i)),r.done||r.preloading===this.sourcePreloadCount)break;"layers"in i&&this._collectCollection({layers:i.layers},r)}if(r.done||r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch((r=>{Zi(r)})),"loading"):t.loadStatus:"loaded"}};u([p()],Dt.prototype,"required",void 0),u([p({constructOnly:!0})],Dt.prototype,"map",void 0),u([p({constructOnly:!0})],Dt.prototype,"getSpatialReferenceSupport",void 0),u([p()],Dt.prototype,"defaultSpatialReference",void 0),u([p()],Dt.prototype,"userSpatialReference",void 0),u([p()],Dt.prototype,"sourcePreloadCount",void 0),u([p()],Dt.prototype,"priorityCollection",void 0),u([p()],Dt.prototype,"requiresExtentInSpatialReference",void 0),u([p()],Dt.prototype,"suspended",void 0),u([p({readOnly:!0})],Dt.prototype,"ready",null),u([p({readOnly:!0})],Dt.prototype,"heightModelInfoReady",null),u([p({readOnly:!0})],Dt.prototype,"spatialReference",null),u([p({readOnly:!0})],Dt.prototype,"extent",null),u([p({readOnly:!0})],Dt.prototype,"heightModelInfo",null),u([p({readOnly:!0})],Dt.prototype,"vcsWkid",null),u([p({readOnly:!0})],Dt.prototype,"latestVcsWkid",null),u([p({readOnly:!0})],Dt.prototype,"viewingMode",null),u([p({readOnly:!0})],Dt.prototype,"tileInfo",null),u([p({readOnly:!0})],Dt.prototype,"mapCollections",null),u([p({readOnly:!0})],Dt.prototype,"_spatialReferenceTask",null),u([p({readOnly:!0})],Dt.prototype,"_tileInfoTask",null),u([p({readOnly:!0})],Dt.prototype,"_heightModelInfoTask",null),u([p({readOnly:!0})],Dt.prototype,"_extentCandidatesTask",null),u([p()],Dt.prototype,"_extentTask",null),u([p()],Dt.prototype,"_projectExtentTask",void 0),Dt=u([O("esri.views.support.DefaultsFromMap")],Dt);let g0e=class{constructor(t,r){this.layerFilter=t,this.pushLayer=r,this.preloading=-1,this.updating=!1,this.done=!1}};function v0e(e,t){return e!=null?t!=null?e===t&&e:e:t}function b0e(e){return"tryRecycleWith"in e}let w0e=class{constructor(t,r,i){this.layer=t,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=ys(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,jo(this._controller.signal,(()=>{this._recycleController?.abort();const n=new z("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)}))}tryRecycle(t){if(!this.done||!this.layerView||!b0e(this.layerView))return null;this._recycleController?.abort(),this._recycleController=new AbortController;const r=this.layer.type,i=this._recycleController.signal;for(let n=0;n<t.length;n++){const s=t[n];if(s.type!==r)continue;const a=this.layerView.tryRecycleWith(s,{signal:i});if(a){t.splice(n,1),this.layer=s;const c=this.layerView,d=c.view;return this.promise=a.then((()=>(Yt(i),s.emit("layerview-destroy",{view:d,layerView:c}),d.emit("layerview-destroy",{view:d,layerView:c}),s.emit("layerview-create",{view:d,layerView:c}),d.emit("layerview-create",{view:d,layerView:c}),c))),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:r,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){const{view:t}=this;if(this._started||!t.map)return;this._started=!0;const{_controller:{signal:r},layer:i}=this;this._map=t.map;try{let n,s;if(await i.load({signal:r}),i.prefetchResources&&await i.prefetchResources({signal:r}),_0e(i))n=await i.createLayerView(t,{signal:r});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new z("layer:view-not-supported","No layerview implementation was found");const d=await this.layerViewImporter.importLayerView(i);Yt(r),n="default"in d?new d.default({layer:i,view:t}):new d({layer:i,view:t})}const a=()=>{s=ir(s),n.destroyed||n.destroy(),n.layer=null,n.parent=null,n.view=null,this.done=!0};s=jo(r,a),Yt(r);try{await n.when()}catch(d){throw a(),d}if(!this._map?.allLayers?.includes(i))return a(),void this._deferred.reject(new z("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=n,i.emit("layerview-create",{view:t,layerView:n}),t.emit("layerview-create",{layer:i,layerView:n}),this.done=!0,this._deferred.resolve(n)}catch(n){i.emit("layerview-create-error",{view:t,error:n}),t.emit("layerview-create-error",{layer:i,error:n}),this.done=!0,this._deferred.reject(new z("layerview:create-error","layerview creation failed",{layer:i,error:n}))}}};function _0e(e){return e.createLayerView!==sr.prototype.createLayerView}function S0e(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let rs=class extends Ae{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new vh,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const r=this.view.map?.allLayers;if(r)for(const i of r)this.layerViewFilter?.(i)!==!1&&this.layerViewImporter.hasLayerViewModule(i)&&this.layerViewImporter.importLayerView(i)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=ys(),this._workPromise.promise.catch((()=>{}))),this.removeHandles("reschedule"),this.addHandles(A1(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{const r=this.view.map;if(this.destroyed||!r)return void this.clear();if(this._map!==r&&(this.clear(),this._map=r),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,n=[],s=this.view.ready,a=g=>{if(g!=null){for(const v of g)if(v){if(this.layerViewFilter?.(v)===!1)continue;i.add(v);const w=this._layerLayerViewInfoMap.get(v);w&&s?w.start():w||this._recyclingInfoMap.has(v)||n.push(v),"layers"in v&&v.layers&&a(v.layers)}}};for(const g of this._rootCollectionNames)a(Io(this,g));const c=new Array,d=g=>{const v=g.tryRecycle(n);v?(this._recyclingInfoMap.set(g.layer,g),this.notifyChange("updating"),v.then((()=>{this._recyclingInfoMap.delete(g.layer),this._layerLayerViewInfoMap.set(g.layer,g),this._reschedule(),this.notifyChange("updating")})).catch((w=>{Zi(w)||(this._recyclingInfoMap.delete(g.layer),g.destroy(),this._reschedule(),this.notifyChange("updating"))}))):c.push(g)};for(const g of this._layerLayerViewInfoMap.values())i.has(g.layer)||(this._layerLayerViewInfoMap.delete(g.layer),d(g));for(const g of this._recyclingInfoMap.values())i.has(g.layer)||(this._recyclingInfoMap.delete(g.layer),d(g));for(const g of n)this._createLayerView(g);this._refreshCollections(),c.forEach((g=>g.destroy()));const f=[r?.ground?.layers,r?.basemap?.baseLayers,r?.basemap?.referenceLayers,r?.layers].filter((g=>!!g));i.forEach((g=>"layers"in g&&f.push(g.layers))),this.addHandles(f.map((g=>this._watchUpdatingTracking.addOnCollectionChange((()=>g),this._reschedule))),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Uh((()=>this.view?.map?.allLayers),"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),je((()=>{const t=this.view,r=t?.map;return[r?.basemap,r?.ground,r?.layers,t?.ready]}),(()=>this._reschedule()),an)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),pM(this._recyclingInfoMap),pM(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Zt()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||eie(this._layerLayerViewInfoMap,(t=>!t.done))||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++t;return t}clear(){this.destroyed||(this._clearCollections(),pM(this._layerLayerViewInfoMap))}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new z("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,r){this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(t);if(!i?.done)return!0;const n=i.layerView;return!(!n||!r||n.parent===r)||!!(i.done&&n&&"layers"in t&&t.layers?.length)&&t.layers.some((s=>this.isCreatingLayerViewsForLayer(s,n)))}_refreshCollections(){for(const[t,r]of this._layersToLayerViews)this._populateLayerViewsOwners(Io(this,t),Io(this,r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){for(const t of this._layersToLayerViews.values())Io(this,t)?.removeAll()}_populateLayerViewsOwners(t,r,i){if(!t||!r)return void r?.removeAll();let n=0;for(const s of t){const a=this._layerLayerViewInfoMap.get(s);if(!a?.layerView)continue;const c=a.layerView;c.layer=s,c.parent=i,r.at(n)!==c&&r.splice(n,0,c),"layers"in s&&S0e(c)&&this._populateLayerViewsOwners(s.layers,c.layerViews,c),n+=1}n<r.length&&r.splice(n)}_createLayerView(t){t.load().catch((()=>{})),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const r=new w0e(t,this.view,this.layerViewImporter);r.promise.then((()=>this._refreshCollections()),(i=>{i&&(Zi(i)||i.name==="cancelled:layerview-create")||re.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:i}),this._refreshCollections()})),this._layerLayerViewInfoMap.set(t,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};u([p()],rs.prototype,"_workPromise",void 0),u([p({readOnly:!0})],rs.prototype,"_watchUpdatingTracking",void 0),u([p({readOnly:!0})],rs.prototype,"_layersToLayerViews",null),u([p({readOnly:!0})],rs.prototype,"_rootCollectionNames",null),u([p({constructOnly:!0})],rs.prototype,"layerViewFilter",void 0),u([p()],rs.prototype,"layerViewImporter",void 0),u([p()],rs.prototype,"supportsGround",void 0),u([p({readOnly:!0})],rs.prototype,"updating",null),u([p({readOnly:!0})],rs.prototype,"updatingRemaining",null),u([p({constructOnly:!0})],rs.prototype,"view",void 0),rs=u([O("esri.views.support.LayerViewManager")],rs);const T0e=rs;let hf=class extends Ae{constructor(t){super(t),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};u([p()],hf.prototype,"featureTitleFields",void 0),u([p()],hf.prototype,"utilityNetworkFields",void 0),u([p()],hf.prototype,"globalIdField",void 0),hf=u([O("esri.views.support.RequiredFieldsOptions")],hf);const E0e=hf;var G0,xh;let Me=(xh=class extends Na.EventedMixin(jl.EsriPromiseMixin(Ae)){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.handles=new my,this.updatingHandles=new vh,this.allLayerViews=new ba({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:$0e}),this.analyses=new v2,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new Nv,this.groundView=null,this.typeSpecificPreconditionsReady=!0,this.layerViews=new ge,this.magnifier=new XW,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new d0e,this.navigation=new HT,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new rZ(this),this.persistableViewModels=new ge,this.requiredFieldsOptions=new E0e,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(je((()=>this.preconditionsReady),(r=>{const i=this.ready;if(r?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,G0.views.add(this)):(this._lockedSpatialReference=null,G0.views.remove(this)),this.notifyChange("spatialReference"),!r&&i)this.toolViewManager?.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown();else if(r&&!i){try{this._startup()}catch(n){return void queueMicrotask((()=>{this.fatalError=new z("view:startup-error","View._startup failed",n)}))}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}}),Oa))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then((()=>(this._isValid=!0,wN((()=>this.ready)))))),this.basemapView=new bge({view:this}),this.layerViewManager=new T0e({view:this,layerViewFilter:t=>this.layerViewFilter?.(t)??!0,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new ia({view:this}),this.selectionManager=new Rge({view:this}),this.addHandles([Zs((()=>this.readyState==="map-content-error"&&!this.spatialReference),(()=>{re.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),je((()=>this.initialExtentRequired),(t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t}),an),je((()=>this.ready),(t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)}),Oa),je((()=>this._userSpatialReference),(t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)}),an)])}destroy(){this.destroyed||(G0.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=rr(this.graphics),this.analyses=rr(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),rr(this.analysisViewManager),this.toolViewManager=rr(this.toolViewManager),this.layerViewManager=rr(this.layerViewManager),this.selectionManager=rr(this.selectionManager),this.basemapView=rr(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach((t=>t.destroy())),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=rr(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return re.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Dt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(t,r)=>this.getSpatialReferenceSupport(t,r),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??a0e()}set highlights(t){this._set("highlights",Xl(t,this._get("highlights"),ge.ofType(xc)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||cs.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t?.destroyed&&(re.getLogger(this).warn("#map","The provided map is already destroyed",{map:t}),t=null),cs.isLoadable(t)&&t.load().catch((()=>{})),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",t))}get readyState(){if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((this.defaultsFromMap?.ready??!1)&&!this.spatialReference){const t=!("loaded"in this.map)||this.map.loaded,r=this.map.ground.loaded,i=this.map.basemap?.loaded??!0;return t&&i&&r&&!this.map?.allLayers.length?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=bT((n=>nV(V("view-readyState-waiting-delay"),null,n))),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),this._readyStateWaitingTask?.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=zm(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){const t=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(t&&this.defaultsFromMap?.required?.heightModelInfo){const r=t.clone();return r.vcsWkid=this.defaultsFromMap.vcsWkid,r.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,r}return t}set spatialReference(t){const r=!ni(t,this._get("spatialReference"));this._set("_userSpatialReference",t),r&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(t){this._userTimeExtent=t}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??zo}set timeZone(t){this._userTimeZone=t,pue(t)||re.getLogger(this).warn("#timeZone",`the parsed value '${t}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._cursor??"default"}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new vR}whenLayerView(t){return this.layerViewManager?.whenLayerView(t)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(t){throw new z("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return this.getSpatialReferenceSupport(t)!=null}when(t,r){return this.isResolved()&&!this.ready&&re.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,r)}forceReadyCycle(){this.ready&&(Zs((()=>this.destroyed||this.preconditionsReady===!1),(()=>this._readyCycleForced=!1),{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}},G0=xh,xh.views=new ge,xh);u([p()],Me.prototype,"_userSpatialReference",void 0),u([p()],Me.prototype,"activeTool",null),u([p({readOnly:!0})],Me.prototype,"allLayerViews",void 0),u([p(wF(v2,"analyses"))],Me.prototype,"analyses",void 0),u([p()],Me.prototype,"animation",null),u([p()],Me.prototype,"basemapView",void 0),u([p()],Me.prototype,"center",null),u([p()],Me.prototype,"defaultsFromMapSettings",null),u([p()],Me.prototype,"defaultsFromMap",null),u([p()],Me.prototype,"displayFilterEnabled",void 0),u([p({type:Xe})],Me.prototype,"extent",null),u([p()],Me.prototype,"fatalError",void 0),u([p(wF(Nv,"graphics"))],Me.prototype,"graphics",void 0),u([p()],Me.prototype,"groundView",void 0),u([p({readOnly:!0,type:rn})],Me.prototype,"heightModelInfo",null),u([p({type:ge.ofType(xc)})],Me.prototype,"highlights",null),u([p({readOnly:!0})],Me.prototype,"interacting",null),u([p({constructOnly:!0})],Me.prototype,"layerViewFilter",void 0),u([p({readOnly:!0})],Me.prototype,"navigating",null),u([p({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Me.prototype,"preconditionsReady",null),u([p({readOnly:!0})],Me.prototype,"typeSpecificPreconditionsReady",void 0),u([p({type:ge,readOnly:!0})],Me.prototype,"layerViews",void 0),u([p()],Me.prototype,"resolution",null),u([p({type:XW})],Me.prototype,"magnifier",void 0),u([p({value:null,type:EH})],Me.prototype,"map",null),u([p()],Me.prototype,"padding",void 0),u([p({readOnly:!0})],Me.prototype,"ready",void 0),u([p()],Me.prototype,"_readyStateWaitingTask",void 0),u([p({readOnly:!0})],Me.prototype,"readyState",null),u([p({type:Ee})],Me.prototype,"spatialReference",null),u([p()],Me.prototype,"stationary",null),u([p({readOnly:!0})],Me.prototype,"supportsGround",void 0),u([p({type:Lr})],Me.prototype,"timeExtent",null),u([p({type:String,nonNullable:!0})],Me.prototype,"timeZone",null),u([p()],Me.prototype,"tools",null),u([p()],Me.prototype,"toolViewManager",void 0),u([p({readOnly:!0})],Me.prototype,"type",void 0),u([p({type:Number})],Me.prototype,"scale",void 0),u([p({readOnly:!0})],Me.prototype,"updating",void 0),u([p({readOnly:!0})],Me.prototype,"initialExtentRequired",void 0),u([p({readOnly:!0})],Me.prototype,"initialExtent",null),u([p()],Me.prototype,"cursor",null),u([p({readOnly:!0})],Me.prototype,"input",void 0),u([p({type:HT,nonNullable:!0})],Me.prototype,"navigation",void 0),u([p()],Me.prototype,"layerViewManager",void 0),u([p()],Me.prototype,"analysisViewManager",void 0),u([p()],Me.prototype,"selectionManager",void 0),u([p()],Me.prototype,"width",void 0),u([p()],Me.prototype,"height",void 0),u([p({readOnly:!0})],Me.prototype,"resizing",void 0),u([p({value:null,readOnly:!0})],Me.prototype,"size",null),u([p({readOnly:!0})],Me.prototype,"suspended",void 0),u([p({readOnly:!0})],Me.prototype,"viewEvents",void 0),u([p({readOnly:!0})],Me.prototype,"persistableViewModels",void 0),u([p()],Me.prototype,"_isValid",void 0),u([p()],Me.prototype,"_readyCycleForced",void 0),u([p()],Me.prototype,"_lockedSpatialReference",void 0),u([p()],Me.prototype,"_userTimeZone",void 0),u([p()],Me.prototype,"_lockedTimeZone",void 0),u([p()],Me.prototype,"_userTimeExtent",void 0),u([p()],Me.prototype,"_lockedTimeExtent",void 0),u([p({type:vR})],Me.prototype,"theme",void 0),u([p({readOnly:!0,type:vR})],Me.prototype,"effectiveTheme",null),Me=G0=u([O("esri.views.View")],Me);const NM=globalThis.$arcgis;NM&&!NM.views&&Object.defineProperty(NM,"views",{configurable:!1,enumerable:!0,writable:!1,value:Me.views});const x0e=Me;function $0e(e){return e.layerViews}function dm(e,t){return e[0]=t[0],e[1]=t[1],e}function gi(e,t,r){return e[0]=t,e[1]=r,e}function yZ(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function l1(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function gZ(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function vZ(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function M0e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function A0e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function O0e(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function R0e(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function C0e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function H1(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function I0e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function WT(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function E2(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function x2(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function bZ(e){const t=e[0],r=e[1];return t*t+r*r}function wZ(e,t){return e[0]=-t[0],e[1]=-t[1],e}function N0e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function TR(e,t){const r=t[0],i=t[1];let n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function _Z(e,t){return e[0]*t[0]+e[1]*t[1]}function SZ(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function P0e(e,t,r,i){const n=t[0],s=t[1];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e}function L0e(e,t=1){const r=2*DT()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function D0e(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n,e[1]=r[1]*i+r[3]*n,e}function ga(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function k0e(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[3]*n+r[6],e[1]=r[1]*i+r[4]*n+r[7],e}function F0e(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e}function U0e(e,t,r,i){const n=t[0]-r[0],s=t[1]-r[1],a=Math.sin(i),c=Math.cos(i);return e[0]=n*c-s*a+r[0],e[1]=n*a+s*c+r[1],e}function j0e(e,t){const r=e[0],i=e[1],n=t[0],s=t[1];let a=r*r+i*i;a>0&&(a=1/Math.sqrt(a));let c=n*n+s*s;c>0&&(c=1/Math.sqrt(c));const d=(r*n+i*s)*a*c;return d>1?0:d<-1?Math.PI:Math.acos(d)}function z0e(e){return"vec2("+e[0]+", "+e[1]+")"}function V0e(e,t){return e[0]===t[0]&&e[1]===t[1]}function G0e(e,t){const r=e[0],i=e[1],n=t[0],s=t[1],a=mn();return Math.abs(r-n)<=a*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-s)<=a*Math.max(1,Math.abs(i),Math.abs(s))}function q0e(e,t,r,i,n){let s=t[0]-r[0],a=t[1]-r[1];const c=(i[0]*s+i[1]*a)*(n-1);return s=i[0]*c,a=i[1]*c,e[0]=t[0]+s,e[1]=t[1]+a,e}const B0e=x2,rP=l1,H0e=gZ,W0e=vZ,Z0e=WT,Y0e=E2,J0e=bZ;Object.freeze(Object.defineProperty({__proto__:null,add:yZ,angle:j0e,ceil:M0e,copy:dm,cross:SZ,dist:Z0e,distance:WT,div:W0e,divide:vZ,dot:_Z,equals:G0e,exactEquals:V0e,floor:A0e,inverse:N0e,len:B0e,length:x2,lerp:P0e,max:R0e,min:O0e,mul:H0e,multiply:gZ,negate:wZ,normalize:TR,projectAndScale:q0e,random:L0e,rotate:U0e,round:C0e,scale:H1,scaleAndAdd:I0e,set:gi,sqrDist:Y0e,sqrLen:J0e,squaredDistance:E2,squaredLength:bZ,str:z0e,sub:rP,subtract:l1,transformMat2:D0e,transformMat2d:ga,transformMat3:k0e,transformMat4:F0e},Symbol.toStringTag,{value:"Module"}));function cr(){return[0,0]}function X0e(e){return[e[0],e[1]]}function W1(e,t){return[e,t]}function Q0e(e,t){return[e,t]}function K0e(e,t=cr()){const r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function TZ(){return cr()}function EZ(){return W1(1,1)}function xZ(){return W1(1,0)}function $Z(){return W1(0,1)}const eve=TZ(),tve=EZ(),rve=xZ(),ive=$Z();Object.freeze(Object.defineProperty({__proto__:null,ONES:tve,UNIT_X:rve,UNIT_Y:ive,ZEROS:eve,clone:X0e,create:cr,freeze:Q0e,fromArray:K0e,fromValues:W1,ones:EZ,unitX:xZ,unitY:$Z,zeros:TZ},Symbol.toStringTag,{value:"Module"}));function nve(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function MZ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function sve(e,t,r,i,n,s,a){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=a,e}function iP(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],a=t[4],c=t[5];let d=r*s-i*n;return d?(d=1/d,e[0]=s*d,e[1]=-i*d,e[2]=-n*d,e[3]=r*d,e[4]=(n*c-s*a)*d,e[5]=(i*a-r*c)*d,e):null}function ove(e){return e[0]*e[3]-e[1]*e[2]}function AZ(e,t,r){const i=t[0],n=t[1],s=t[2],a=t[3],c=t[4],d=t[5],f=r[0],g=r[1],v=r[2],w=r[3],S=r[4],T=r[5];return e[0]=i*f+s*g,e[1]=n*f+a*g,e[2]=i*v+s*w,e[3]=n*v+a*w,e[4]=i*S+s*T+c,e[5]=n*S+a*T+d,e}function Z1(e,t,r){const i=t[0],n=t[1],s=t[2],a=t[3],c=t[4],d=t[5],f=Math.sin(r),g=Math.cos(r);return e[0]=i*g+s*f,e[1]=n*g+a*f,e[2]=i*-f+s*g,e[3]=n*-f+a*g,e[4]=c,e[5]=d,e}function ZT(e,t,r){const i=t[0],n=t[1],s=t[2],a=t[3],c=t[4],d=t[5],f=r[0],g=r[1];return e[0]=i*f,e[1]=n*f,e[2]=s*g,e[3]=a*g,e[4]=c,e[5]=d,e}function iy(e,t,r){const i=t[0],n=t[1],s=t[2],a=t[3],c=t[4],d=t[5],f=r[0],g=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=a,e[4]=i*f+s*g+c,e[5]=n*f+a*g+d,e}function OZ(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function RZ(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function nP(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function ave(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function lve(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function uve(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function CZ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function cve(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function dve(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function hve(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function pve(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],a=e[4],c=e[5],d=t[0],f=t[1],g=t[2],v=t[3],w=t[4],S=t[5],T=mn();return Math.abs(r-d)<=T*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-f)<=T*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(n-g)<=T*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(s-v)<=T*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(a-w)<=T*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(c-S)<=T*Math.max(1,Math.abs(c),Math.abs(S))}const fve=AZ,mve=CZ;Object.freeze(Object.defineProperty({__proto__:null,add:uve,copy:nve,determinant:ove,equals:pve,exactEquals:hve,frob:lve,fromRotation:OZ,fromScaling:RZ,fromTranslation:nP,identity:MZ,invert:iP,mul:fve,multiply:AZ,multiplyScalar:cve,multiplyScalarAndAdd:dve,rotate:Z1,scale:ZT,set:sve,str:ave,sub:mve,subtract:CZ,translate:iy},Symbol.toStringTag,{value:"Module"}));function Ea(){return[1,0,0,1,0,0]}function yve(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function gve(e,t,r,i,n,s){return[e,t,r,i,n,s]}const vve=Ea();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:vve,clone:yve,create:Ea,fromValues:gve},Symbol.toStringTag,{value:"Module"}));const zw={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Gr({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ee.WebMercator}),minus180Line:new Gr({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ee.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Gr({paths:[[[180,-180],[180,180]]],spatialReference:Ee.WGS84}),minus180Line:new Gr({paths:[[[-180,-180],[-180,180]]],spatialReference:Ee.WGS84})}};function uh(e,t){return Math.ceil((e-t)/(2*t))}function IZ(e,t){const r=Lv(e);for(const i of r)for(const n of i)n[0]+=t;return e}function Lv(e){return cm(e)?e.rings:e.paths}function ILe(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function bve(e){return typeof e=="string"?Wi(e):U(e)}function wve(e,t,r){const i={};for(const n in e){if(n==="declaredClass")continue;const s=e[n];if(s!=null&&typeof s!="function")if(Array.isArray(s))i[n]=s.map((a=>wve(a)));else if(typeof s=="object")if(s.toJSON){const a=s.toJSON(r?.[n]);i[n]=t?a:JSON.stringify(a)}else i[n]=t?s:JSON.stringify(s);else i[n]=s}return i}function _ve(e,t){return e?t&&jI(e)?t:UI(e)??nt?.findCredential(e)?.token:null}async function NLe(e,t,r){const i=_ve(e,t);return i||(!nt&&ct.request.useIdentity&&await ue(()=>import("./IdentityManager-hnRHdkFT.js"),__vite__mapDeps([0,1])),(await nt.getCredential(e,r))?.token)}async function Sve(e,t,r,i){const n=bve(e),s=t[0].spatialReference,a={...i,responseType:"json",query:{...n.query,f:"json",sr:gG(s),target:JSON.stringify({geometryType:FT(t[0]),geometries:t}),cutter:JSON.stringify(r)}},c=await Ft(n.path+"/cut",a),{cutIndexes:d,geometries:f=[]}=c.data;return{cutIndexes:d,geometries:f.map((g=>{const v=Dc(g);return v.spatialReference=s,v}))}}function Tve(e){return{geometryType:FT(e[0]),geometries:e.map((t=>t.toJSON()))}}function Eve(e,t,r){const i=lpe(t);return e.map((n=>{const s=i.fromJSON(n);return s.spatialReference=r,s}))}async function xve(e,t,r){const i=typeof e=="string"?Wi(e):e,n=t[0].spatialReference,s=FT(t[0]),a={...r,query:{...i.query,f:"json",sr:gG(n),geometries:JSON.stringify(Tve(t))}},{data:c}=await Ft(i.path+"/simplify",a);return Eve(c.geometries,s,n)}const NZ=()=>re.getLogger("esri.geometry.support.normalizeUtils");function $ve(e){return e.type==="polygon"}function Mve(e){return e[0].type==="polygon"}function Ave(e){return e[0].type==="polyline"}function JF(e){const t=[];let r=0,i=0;for(let n=0;n<e.length;n++){const s=e[n];let a=null;for(let c=0;c<s.length;c++)a=s[c],t.push(a),c===0?(r=a[0],i=r):(r=Math.min(r,a[0]),i=Math.max(i,a[0]));a&&t.push([(r+i)/2,0])}return t}function Ove(e,t){if(!(e instanceof Gr||e instanceof er)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw NZ().error(n),new z("internal:geometry",n)}const r=Lv(e),i=[];for(const n of r){const s=[];i.push(s),s.push([n[0][0],n[0][1]]);for(let a=0;a<n.length-1;a++){const c=n[a][0],d=n[a][1],f=n[a+1][0],g=n[a+1][1],v=Math.sqrt((f-c)*(f-c)+(g-d)*(g-d)),w=(g-d)/v,S=(f-c)/v,T=v/t;if(T>1){for(let I=1;I<=T-1;I++){const k=I*t,j=S*k+c,P=w*k+d;s.push([j,P])}const E=(v+Math.floor(T-1)*t)/2,M=S*E+c,R=w*E+d;s.push([M,R])}s.push([f,g])}}return $ve(e)?new er({rings:i,spatialReference:e.spatialReference}):new Gr({paths:i,spatialReference:e.spatialReference})}function XF(e,t,r){if(t){const i=Ove(e,1e6);e=kf(i,!0)}return r&&(e=IZ(e,r)),e}function QF(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const n=uh(i,t);e[0]=i+n*(-2*t)}else if(i<r){const n=uh(i,r);e[0]=i+n*(-2*r)}}else{const i=e.x;if(i>t){const n=uh(i,t);e=e.clone().offset(n*(-2*t),0)}else if(i<r){const n=uh(i,r);e=e.clone().offset(n*(-2*r),0)}}return e}function Rve(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const n=t.cutIndexes[i],s=t.geometries[i],a=Lv(s);for(let c=0;c<a.length;c++){const d=a[c];d.some((f=>{if(f[0]<180)return!0;{let g=0;for(let w=0;w<d.length;w++){const S=d[w][0];g=S>g?S:g}g=Number(g.toFixed(9));const v=-360*uh(g,180);for(let w=0;w<d.length;w++){const S=s.getPoint(c,w);s.setPoint(c,w,S.clone().offset(v,0))}return!0}}))}if(n===r){if(Mve(e))for(const c of Lv(s))e[n]=e[n].addRing(c);else if(Ave(e))for(const c of Lv(s))e[n]=e[n].addPath(c)}else r=n,e[n]=s}return e}async function Cve(e,t,r){if(!Array.isArray(e))return Cve([e],t);t&&typeof t!="string"&&NZ().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof t=="string"?t:t?.url??ct.geometryServiceUrl;let n,s,a,c,d,f,g,v,w=0;const S=[],T=[];for(const j of e)if(j!=null)if(n||(n=j.spatialReference,s=fn(n),a=n.isWebMercator,f=a?102100:4326,c=zw[f].maxX,d=zw[f].minX,g=zw[f].plus180Line,v=zw[f].minus180Line),s)if(j.type==="mesh")T.push(j);else if(j.type==="point")T.push(QF(j.clone(),c,d));else if(j.type==="multipoint"){const P=j.clone();P.points=P.points.map((X=>QF(X,c,d))),T.push(P)}else if(j.type==="extent"){const P=j.clone()._normalize(!1,!1,s);T.push(P.rings?new er(P):P)}else if(j.extent){const P=j.extent,X=uh(P.xmin,d)*(2*c);let ae=X===0?j.clone():IZ(j.clone(),X);P.offset(X,0);let{xmin:fe,xmax:he}=P;fe=Number(fe.toFixed(9)),he=Number(he.toFixed(9)),P.intersects(g)&&he!==c?(w=he>w?he:w,ae=XF(ae,a),S.push(ae),T.push("cut")):P.intersects(v)&&fe!==d?(w=he*(2*c)>w?he*(2*c):w,ae=XF(ae,a,360),S.push(ae),T.push("cut")):T.push(ae)}else T.push(j.clone());else T.push(j);else T.push(j);let E=uh(w,c),M=-90;const R=E,I=new Gr;for(;E>0;){const j=360*E-180;I.addPath([[j,M],[j,-1*M]]),M*=-1,E--}if(S.length>0&&R>0){const j=Rve(S,await Sve(i,S,I,r)),P=[],X=[];for(let he=0;he<T.length;he++){const me=T[he];if(me!=="cut")X.push(me);else{const Oe=j.shift(),Se=e[he];Se!=null&&Se.type==="polygon"&&Se.rings&&Se.rings.length>1&&Oe.rings.length>=Se.rings.length?(P.push(Oe),X.push("simplify")):X.push(a?yh(Oe):Oe)}}if(!P.length)return X;const ae=await xve(i,P,r),fe=[];for(let he=0;he<X.length;he++){const me=X[he];me!=="simplify"?fe.push(me):fe.push(a?yh(ae.shift()):ae.shift())}return fe}const k=[];for(let j=0;j<T.length;j++){const P=T[j];if(P!=="cut")k.push(P);else{const X=S.shift();k.push(a===!0?yh(X):X)}}return k}function Ive(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&fn(e.spatialReference);if(!r)return t;const[i,n]=r.valid,s=2*n,{width:a}=t;let c,{xmin:d,xmax:f}=t;if([d,f]=[f,d],e.type==="extent"||a===0||a<=n||a>s||d<i||f>n)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;c=JF(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;c=JF(e.paths);break;case"multipoint":c=e.points}const g=t.clone();for(let v=0;v<c.length;v++){let w=c[v][0];w<0?(w+=n,f=Math.max(w,f)):(w-=n,d=Math.min(w,d))}return g.xmin=d,g.xmax=f,g.width<a?(g.xmin-=n,g.xmax-=n,g):t}function sP(e,t,r){const i=fn(r);if(i==null)return e;const[n,s]=i.valid,a=2*s;let c=0,d=0;t>s?c=Math.ceil(Math.abs(t-s)/a):t<n&&(c=-Math.ceil(Math.abs(t-n)/a)),e>s?d=Math.ceil(Math.abs(e-s)/a):e<n&&(d=-Math.ceil(Math.abs(e-n)/a));let f=e+(c-d)*a;const g=f-t;return g>s?f-=a:g<n&&(f+=a),f}function PLe(e,t){const r=fn(t);if(r){const[i,n]=r.valid,s=n-i;if(e<i)for(;e<i;)e+=s;if(e>n)for(;e>n;)e-=s}return e}const PZ=96,LZ=39.37,Nve=180/Math.PI;function DZ(e){return e.wkid?e:e.spatialReference||Ee.WGS84}function oP(e,t){return t.type?gi(e,t.x,t.y):dm(e,t)}function kZ(e){return Xs(e)}function YT(e,t,r=0){let i=e.width,n=e.height;if(r!==0){const c=D1(r),d=Math.abs(Math.cos(c)),f=Math.abs(Math.sin(c));i=e.width*d+e.height*f,n=e.width*f+e.height*d}const s=Math.max(1,t[0]),a=Math.max(1,t[1]);return Math.max(i/s,n/a)*zve(e.spatialReference)}async function q0(e,t,r,i){let n,s;if(!e||Array.isArray(e)&&!e.length)return null;if(ge.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const c=e.every((g=>"attributes"in g)),d=e.some((g=>!g.geometry));let f=e;if(c&&d&&t&&t.allLayerViews){const g=new Map;for(const T of e){const E=T.layer,M=g.get(E)||[],R=T.attributes[E.objectIdField];R!=null&&M.push(R),g.set(E,M)}const v=[];g.forEach(((T,E)=>{const M=t.allLayerViews?.find((R=>R.layer.id===E.id));if(M&&"queryFeatures"in M){const R=E.createQuery();R.objectIds=T,R.returnGeometry=!0,v.push(M.queryFeatures(R))}}));const w=await Promise.all(v),S=[];for(const T of w)if(T&&T.features&&T.features.length)for(const E of T.features)E.geometry!=null&&S.push(E.geometry);f=S}for(const g of f)i=await q0(g,t,r,i);return i}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new Pe(e);else if(e instanceof yi)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const c=e.layer,d=t.allLayerViews?.find((f=>f.layer.id===c.id));if(d&&"queryFeatures"in d){const f=c.createQuery();f.objectIds=[e.attributes[c.objectIdField]],f.returnGeometry=!0,n=(await d.queryFeatures(f))?.features?.[0]?.geometry}}}if(n==null)return null;switch(n.type){case"point":s=new Xe({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=Ive(n);break;default:s=n.extent}if(!s)return null;Vc()||Go(s.spatialReference,r)||await Lc();const a=Gc(s,r);if(!a)return null;if(i){const c=a.center,d=c.clone();d.x=sP(c.x,i.center.x,r),d.x!==c.x&&a.centerAt(d),i=i.union(a)}else i=a;return i}function Pve(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer?.minScale!=null&&e.layer.maxScale!=null){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every((t=>"layer"in t))){let t=0,r=0;for(const i of e){const n=i.layer;n?.minScale&&n.maxScale&&(t=n.minScale<t?n.minScale:t,r=n.maxScale>r?n.maxScale:r)}return t&&r?{min:t,max:r}:null}}}function KF(e,t){const r=DZ(e);return ni(r,t)||r.imageCoordinateSystem||t.imageCoordinateSystem?e:Gc(e,t)}async function Lve(e,t){if(!e||!t)return new Hs({targetGeometry:new Pe,scale:0,rotation:0});let r=t.spatialReference;const{constraints:i,padding:n,viewpoint:s,size:a}=t,c=[n?a[0]-n.left-n.right:a[0],n?a[1]-n.top-n.bottom:a[1]];let d=null;e instanceof Hs?d=e:e.viewpoint?d=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(d=e.target);let f=null;d?.targetGeometry?f=d.targetGeometry:e instanceof Xe?f=e:e instanceof yi?f=await q0(e,t,r):e&&(f=await q0(e.center,t,r)||await q0(e.target,t,r)||await q0(e,t,r)),!f&&s?.targetGeometry?f=s.targetGeometry:!f&&t.extent&&(f=t.extent),r||(r=DZ(t.spatialReference||t.extent||f)),Vc()||ni(f.spatialReference,r)||Go(f.spatialReference,r)||await Lc();const g=KF(f,r),v="center"in g?g.center:g;t.pickClosestTarget!==!1&&v.type==="point"&&s.targetGeometry?.type==="point"&&(v.x=sP(v.x,s.targetGeometry.x,v.spatialReference));let w=0;d?w=d.rotation:e.hasOwnProperty("rotation")?w=e.rotation:s&&(w=s.rotation);let S=0;S=d?.targetGeometry!=null&&d.targetGeometry.type==="point"?d.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&i&&i.effectiveLODs?i.zoomToScale(e.zoom):Array.isArray(f)||f.type==="point"||f.type==="extent"&&f.width===0&&f.height===0?s.scale:YT(KF(f.extent,r),c,w);const T=Pve(e.target??e);T&&(T.min&&T.min<S?S=T.min:T.max&&T.max>S&&(S=T.max));let E=new Hs({targetGeometry:v,scale:S,rotation:w});return i&&(E=i.fit(E),i.constrainByGeometry(E),i.rotationEnabled||(E.rotation=s.rotation)),E}function Bi(e,t){const r=e.targetGeometry,i=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function Dve(e,t,r){return r?gi(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):H1(e,t,.5)}const kve=(function(){const e=cr();return function(t,r,i){const n=r.targetGeometry;oP(e,n);const s=.5*xy(r);return t.xmin=e[0]-s*i[0],t.ymin=e[1]-s*i[1],t.xmax=e[0]+s*i[0],t.ymax=e[1]+s*i[1],t.spatialReference=n.spatialReference,t}})();function Fve(e,t,r,i,n){return ER(e,t,r.center),e.scale=YT(r,i),n?.constraints?.constrain(e),e}function Uve(e,t,r,i){return uP(e,t,r,i),iP(e,e)}const FZ=(function(){const e=cr();return function(t,r,i){return rP(t,Vve(t,r),Dve(e,r,i))}})(),jve=(function(){const e=Ea(),t=cr();return function(r,i,n,s){const a=xy(i),c=aP(i);return gi(t,a,a),RZ(e,t),Z1(e,e,c),iy(e,e,FZ(t,n,s)),iy(e,e,[0,s.top-s.bottom]),gi(r,e[4],e[5])}})();function xy(e){return e.scale*UZ(e.targetGeometry?.spatialReference)}function UZ(e){return ds(e)?1/(kZ(e)*LZ*PZ):1}function aP(e){return LN(e.rotation)||0}function zve(e){return ds(e)?kZ(e)*LZ*PZ:1}function Vve(e,t){return H1(e,t,.5)}const lP=(function(){const e=cr(),t=cr(),r=cr();return function(i,n,s,a,c,d){return wZ(e,n),H1(t,s,.5*d),gi(r,1/a*d,-1/a*d),nP(i,t),c&&Z1(i,i,c),ZT(i,i,r),iy(i,i,e),i}})(),uP=(function(){const e=cr();return function(t,r,i,n){const s=xy(r),a=aP(r);return oP(e,r.targetGeometry),lP(t,e,i,s,a,n)}})(),Gve=(function(){const e=cr();return function(t,r,i,n){const s=xy(r);return oP(e,r.targetGeometry),lP(t,e,i,s,0,n)}})();function jZ(e){const t=fn(e);return t?t.valid[1]-t.valid[0]:0}function qve(e,t){return Math.round(jZ(e)/t)}const Bve=(function(){const e=cr(),t=cr(),r=[0,0,0];return function(i,n,s){l1(e,i,n),TR(e,e),l1(t,i,s),TR(t,t),SZ(r,e,t);let a=Math.acos(_Z(e,t)/(x2(e)*x2(t)))*Nve;return r[2]<0&&(a=-a),isNaN(a)&&(a=0),a}})(),Hve=(function(){const e=cr();return function(t,r,i,n){const s=t.targetGeometry;return Bi(t,r),jve(e,r,i,n),s.x+=e[0],s.y+=e[1],t}})(),ER=function(e,t,r){Bi(e,t);const i=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e},Wve=(function(){const e=cr();return function(t,r,i,n,s){s||(s="center"),rP(e,i,n),H1(e,e,.5);const a=e[0],c=e[1];switch(s){case"center":gi(e,0,0);break;case"left":gi(e,-a,0);break;case"top":gi(e,0,c);break;case"right":gi(e,a,0);break;case"bottom":gi(e,0,-c);break;case"top-left":gi(e,-a,c);break;case"bottom-left":gi(e,-a,-c);break;case"top-right":gi(e,a,c);break;case"bottom-right":gi(e,a,-c)}return JT(t,r,e),t}})();function LLe(e,t,r){return Bi(e,t),e.rotation+=r,e}function Zve(e,t,r){return Bi(e,t),e.rotation=r,e}const Yve=(function(){const e=cr();return function(t,r,i,n,s){return Bi(t,r),isNaN(i)||i===0||(VZ(e,n,r,s),t.scale=r.scale*i,GZ(e,e,t,s),JT(t,t,gi(e,e[0]-n[0],n[1]-e[1]))),t}})();function e8(e,t,r){return Bi(e,t),e.scale=r,e}const zZ=(function(){const e=cr();return function(t,r,i,n,s,a){return Bi(t,r),isNaN(i)||i===0||(VZ(e,s,r,a),t.scale=r.scale*i,t.rotation+=n,GZ(e,e,t,a),JT(t,t,gi(e,e[0]-s[0],s[1]-e[1]))),t}})(),DLe=(function(){const e=cr(),t=cr();return function(r,i,n,s,a,c,d){return FZ(t,c,d),yZ(e,a,t),s?zZ(r,i,n,s,e,c):Yve(r,i,n,e,c)}})(),VZ=(function(){const e=Ea();return function(t,r,i,n){return ga(t,r,Uve(e,i,n,1))}})(),GZ=(function(){const e=Ea();return function(t,r,i,n){return ga(t,r,uP(e,i,n,1))}})(),JT=(function(){const e=cr(),t=Ea();return function(r,i,n){Bi(r,i);const s=xy(i),a=r.targetGeometry;return OZ(t,aP(i)),ZT(t,t,W1(s,s)),ga(e,n,t),a.x+=e[0],a.y+=e[1],r}})();function qZ(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function Jve(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Xve(e,t,r,i,n,s){const a=new Float32Array(6);return a[0]=e,a[1]=t,a[2]=r,a[3]=i,a[4]=n,a[5]=s,a}function BZ(e,t,r,i){const n=t[i],s=t[i+1];e[i]=r[0]*n+r[2]*s+r[4],e[i+1]=r[1]*n+r[3]*s+r[5]}function Qve(e,t,r,i=0,n=0,s=2){const a=n||t.length/s;for(let c=i;c<a;c++)BZ(e,t,r,c*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:Jve,create:qZ,fromValues:Xve,transform:BZ,transformMany:Qve},Symbol.toStringTag,{value:"Module"}));function Kve(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function e1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function HZ(e,t,r,i,n,s,a,c,d,f){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=a,e[6]=c,e[7]=d,e[8]=f,e}function WZ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function t1e(e,t){if(e===t){const r=t[1],i=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function r1e(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],a=t[4],c=t[5],d=t[6],f=t[7],g=t[8],v=g*a-c*f,w=-g*s+c*d,S=f*s-a*d;let T=r*v+i*w+n*S;return T?(T=1/T,e[0]=v*T,e[1]=(-g*i+n*f)*T,e[2]=(c*i-n*a)*T,e[3]=w*T,e[4]=(g*r-n*d)*T,e[5]=(-c*r+n*s)*T,e[6]=S*T,e[7]=(-f*r+i*d)*T,e[8]=(a*r-i*s)*T,e):null}function i1e(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],a=t[4],c=t[5],d=t[6],f=t[7],g=t[8];return e[0]=a*g-c*f,e[1]=n*f-i*g,e[2]=i*c-n*a,e[3]=c*d-s*g,e[4]=r*g-n*d,e[5]=n*s-r*c,e[6]=s*f-a*d,e[7]=i*d-r*f,e[8]=r*a-i*s,e}function n1e(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],a=e[5],c=e[6],d=e[7],f=e[8];return t*(f*s-a*d)+r*(-f*n+a*c)+i*(d*n-s*c)}function cP(e,t,r){const i=t[0],n=t[1],s=t[2],a=t[3],c=t[4],d=t[5],f=t[6],g=t[7],v=t[8],w=r[0],S=r[1],T=r[2],E=r[3],M=r[4],R=r[5],I=r[6],k=r[7],j=r[8];return e[0]=w*i+S*a+T*f,e[1]=w*n+S*c+T*g,e[2]=w*s+S*d+T*v,e[3]=E*i+M*a+R*f,e[4]=E*n+M*c+R*g,e[5]=E*s+M*d+R*v,e[6]=I*i+k*a+j*f,e[7]=I*n+k*c+j*g,e[8]=I*s+k*d+j*v,e}function xR(e,t,r){const i=t[0],n=t[1],s=t[2],a=t[3],c=t[4],d=t[5],f=t[6],g=t[7],v=t[8],w=r[0],S=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=a,e[4]=c,e[5]=d,e[6]=w*i+S*a+f,e[7]=w*n+S*c+g,e[8]=w*s+S*d+v,e}function ZZ(e,t,r){const i=t[0],n=t[1],s=t[2],a=t[3],c=t[4],d=t[5],f=t[6],g=t[7],v=t[8],w=Math.sin(r),S=Math.cos(r);return e[0]=S*i+w*a,e[1]=S*n+w*c,e[2]=S*s+w*d,e[3]=S*a-w*i,e[4]=S*c-w*n,e[5]=S*d-w*s,e[6]=f,e[7]=g,e[8]=v,e}function s1e(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function o1e(e,t,r){const i=r[0],n=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function a1e(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function l1e(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function u1e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function c1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function d1e(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],a=r+r,c=i+i,d=n+n,f=r*a,g=i*a,v=i*c,w=n*a,S=n*c,T=n*d,E=s*a,M=s*c,R=s*d;return e[0]=1-v-T,e[3]=g-R,e[6]=w+M,e[1]=g+R,e[4]=1-f-T,e[7]=S-E,e[2]=w-M,e[5]=S+E,e[8]=1-f-v,e}function h1e(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],a=t[5],c=t[6],d=t[8],f=t[9],g=t[10],v=g*a-c*f,w=-g*s+c*d,S=f*s-a*d,T=r*v+i*w+n*S;if(!T)return null;const E=1/T;return e[0]=v*E,e[1]=(-g*i+n*f)*E,e[2]=(c*i-n*a)*E,e[3]=w*E,e[4]=(g*r-n*d)*E,e[5]=(-c*r+n*s)*E,e[6]=S*E,e[7]=(-f*r+i*d)*E,e[8]=(a*r-i*s)*E,e}function p1e(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],a=t[4],c=t[5],d=t[6],f=t[7],g=t[8],v=t[9],w=t[10],S=t[11],T=t[12],E=t[13],M=t[14],R=t[15],I=r*c-i*a,k=r*d-n*a,j=r*f-s*a,P=i*d-n*c,X=i*f-s*c,ae=n*f-s*d,fe=g*E-v*T,he=g*M-w*T,me=g*R-S*T,Oe=v*M-w*E,Se=v*R-S*E,ft=w*R-S*M;let Ue=I*ft-k*Se+j*Oe+P*me-X*he+ae*fe;return Ue?(Ue=1/Ue,e[0]=(c*ft-d*Se+f*Oe)*Ue,e[1]=(d*me-a*ft-f*he)*Ue,e[2]=(a*Se-c*me+f*fe)*Ue,e[3]=(n*Se-i*ft-s*Oe)*Ue,e[4]=(r*ft-n*me+s*he)*Ue,e[5]=(i*me-r*Se-s*fe)*Ue,e[6]=(E*ae-M*X+R*P)*Ue,e[7]=(M*j-T*ae-R*k)*Ue,e[8]=(T*X-E*j+R*I)*Ue,e):null}function f1e(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function m1e(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function y1e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function g1e(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function YZ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function v1e(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function b1e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function w1e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function _1e(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],a=e[4],c=e[5],d=e[6],f=e[7],g=e[8],v=t[0],w=t[1],S=t[2],T=t[3],E=t[4],M=t[5],R=t[6],I=t[7],k=t[8],j=mn();return Math.abs(r-v)<=j*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(i-w)<=j*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(n-S)<=j*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(s-T)<=j*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(a-E)<=j*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(c-M)<=j*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(d-R)<=j*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(f-I)<=j*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(g-k)<=j*Math.max(1,Math.abs(g),Math.abs(k))}function S1e(e){const t=mn(),r=e[0],i=e[1],n=e[2],s=e[3],a=e[4],c=e[5],d=e[6],f=e[7],g=e[8];return Math.abs(1-(r*r+s*s+d*d))<=t&&Math.abs(1-(i*i+a*a+f*f))<=t&&Math.abs(1-(n*n+c*c+g*g))<=t}const T1e=cP,E1e=YZ;Object.freeze(Object.defineProperty({__proto__:null,add:g1e,adjoint:i1e,copy:e1e,determinant:n1e,equals:_1e,exactEquals:w1e,frob:y1e,fromMat2d:c1e,fromMat4:Kve,fromQuat:d1e,fromRotation:l1e,fromScaling:u1e,fromTranslation:a1e,identity:WZ,invert:r1e,isOrthoNormal:S1e,mul:T1e,multiply:cP,multiplyScalar:v1e,multiplyScalarAndAdd:b1e,normalFromMat4:p1e,normalFromMat4Legacy:h1e,projection:f1e,rotate:ZZ,scale:s1e,scaleByVec2:o1e,set:HZ,str:m1e,sub:E1e,subtract:YZ,translate:xR,transpose:t1e},Symbol.toStringTag,{value:"Module"}));function nS(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function x1e(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function $1e(e,t,r,i,n,s,a,c,d){const f=new Float32Array(9);return f[0]=e,f[1]=t,f[2]=r,f[3]=i,f[4]=n,f[5]=s,f[6]=a,f[7]=c,f[8]=d,f}Object.freeze(Object.defineProperty({__proto__:null,clone:x1e,create:nS,fromValues:$1e},Symbol.toStringTag,{value:"Module"}));function JZ(){return new Float32Array(2)}function M1e(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function ny(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function XZ(){return JZ()}function QZ(){return ny(1,1)}function KZ(){return ny(1,0)}function eY(){return ny(0,1)}const A1e=XZ(),O1e=QZ(),R1e=KZ(),C1e=eY();Object.freeze(Object.defineProperty({__proto__:null,ONES:O1e,UNIT_X:R1e,UNIT_Y:C1e,ZEROS:A1e,clone:M1e,create:JZ,fromValues:ny,ones:QZ,unitX:KZ,unitY:eY,zeros:XZ},Symbol.toStringTag,{value:"Module"}));function I1e(e){return e instanceof Float32Array&&e.length>=2}function N1e(e){return Array.isArray(e)&&e.length>=2}function PM(e){return I1e(e)||N1e(e)}var $R;const Qa=[0,0];let pl=$R=class extends K{constructor(e){super(e),this._viewpoint2D={center:cr(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Xe,this.id=0,this.inverseTransform=Ea(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Ea(),this.transformNoRotation=Ea(),this.displayMat3=nS(),this.displayViewMat3=nS(),this.viewMat3=nS(),this.viewMat2d=qZ(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=Bi(r,e.viewpoint),this._set("size",dm(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new $R({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return PM(t)?ga(e,t,this.inverseTransform):(Qa[0]=t,Qa[1]=r,ga(e,Qa,this.inverseTransform))}toScreen(e,t,r){return PM(t)?ga(e,t,this.transform):(Qa[0]=t,Qa[1]=r,ga(e,Qa,this.transform))}toScreenNoRotation(e,t,r){return PM(t)?ga(e,t,this.transformNoRotation):(Qa[0]=t,Qa[1]=r,ga(e,Qa,this.transformNoRotation))}wrapMapCoordinate(e,t){dm(e,t);const[r]=t,[i]=this.center,{extent:n,spatialReference:s}=this;let{xmin:a,xmax:c}=n;if(s.isWrappable){const d=jZ(s)/2;a=Math.max(a,i-d),c=Math.min(c,i+d)}return(r<a||r>c)&&(e[0]=sP(r,i,s)),e}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,n=this._get("size");return lP(e,r,n,t,0,i),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),a=new Hs({targetGeometry:new Pe(e[0],e[1],t),scale:r,rotation:i});if(this._set("viewpoint",a),!s||!t||!r)return;this.resolution=xy(a),this.rotation=i,this.scale=r,this.spatialReference=t,dm(this.center,e);const c=s[0]!==0?2/s[0]:0,d=s[1]!==0?-2/s[1]:0;HZ(this.displayMat3,c,0,0,0,d,0,-1,1,1);const f=WZ(this.viewMat3),g=ny(s[0]/2,s[1]/2),v=ny(-s[0]/2,-s[1]/2),w=LN(i);xR(f,f,g),ZZ(f,f,w),xR(f,f,v),cP(this.displayViewMat3,this.displayMat3,f);const S=nP(this.viewMat2d,g);return Z1(S,S,w),iy(S,S,v),kve(this.extent,a,s),uP(this.transform,a,s,n),iP(this.inverseTransform,this.transform),Gve(this.transformNoRotation,a,s,n),this.worldScreenWidth=qve(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};u([p({readOnly:!0})],pl.prototype,"id",void 0),u([p({value:1,json:{write:!0}})],pl.prototype,"pixelRatio",null),u([p({json:{write:!0}})],pl.prototype,"size",null),u([p()],pl.prototype,"spatialReference",void 0),u([p({type:Hs,json:{write:!0}})],pl.prototype,"viewpoint",null),u([p({readOnly:!0})],pl.prototype,"visibleArea",null),pl=$R=u([O("esri.views.2d.ViewState")],pl);const t8=pl;var MR,AR;let Pl=MR=class extends Ae{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new MR({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};u([p()],Pl.prototype,"left",void 0),u([p()],Pl.prototype,"top",void 0),u([p()],Pl.prototype,"right",void 0),u([p()],Pl.prototype,"bottom",void 0),Pl=MR=u([O("esri.views.2d.PaddedViewState.Padding")],Pl);let pf=AR=class extends t8{constructor(...e){super(...e),this.paddedViewState=new t8,this._updateContent=(()=>{const t=cr();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const n=this.paddedViewState;gi(t,i.left+i.right,i.top+i.bottom),l1(t,r,t),dm(n.size,t);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(je((()=>[this.size,this.padding]),(()=>this._updateContent()),Oa)),this.padding=new Pl,this.size=[0,0]}set padding(e){this._set("padding",e||new Pl)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const r=this._get("padding");r&&(t=Hve(e.clone(),e,this._get("size"),r));const{targetGeometry:i,rotation:n,scale:s}=t,{x:a,y:c,spatialReference:d}=i,f=this._viewpoint2D;f.center[0]=a,f.center[1]=c,f.rotation=n,f.scale=s,f.spatialReference=d,this._update()}}clone(){return new AR({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};u([p()],pf.prototype,"paddedViewState",void 0),u([p({type:Pl})],pf.prototype,"padding",null),u([p()],pf.prototype,"viewpoint",null),pf=AR=u([O("esri.views.2d.PaddedViewState")],pf);const dP=pf;var ki;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(ki||(ki={}));const tY=Symbol("Yield");let P1e=class{constructor(){this._tasks=new Array,this._numPendingTasks=ey(0),this._running=ey(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get running(){return this._running.value}_updateRunning(){this._running.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(t){if(this.length===0)return tY;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,r,i){return new Promise(((n,s)=>{this._tasks.push(new r8(n,s,t,r,i)),++this._numPendingTasks.value,this._updateRunning()})).finally((()=>--this._numPendingTasks.value))}unshift(t,r,i){return new Promise(((n,s)=>{this._tasks.unshift(new r8(n,s,t,r,i)),++this._numPendingTasks.value,this._updateRunning()})).finally((()=>--this._numPendingTasks.value))}_process(t){if(this._tasks.length===0)return!1;const r=this._tasks.shift();this._updateRunning();try{const i=Ws(r.signal);if(i&&!r.abortCallback)r.reject(Zt());else{const n=i?r.abortCallback?.(Zt()):r.callback(t);Ia(n)?n.then(r.resolve,r.reject):r.resolve(n)}}catch(i){r.reject(i)}return!0}cancelAll(){const t=Zt();for(const r of this._tasks)if(r.abortCallback){const i=r.abortCallback(t);r.resolve(i)}else r.reject(t);this._tasks.length=0,this._updateRunning()}},r8=class{constructor(t,r,i,n=void 0,s=void 0){this.resolve=t,this.reject=r,this.callback=i,this.signal=n,this.abortCallback=s}},B0=class extends Ae{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};u([p()],B0.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),u([p()],B0.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),B0=u([O("esri.views.support.debugFlags")],B0);const L1e=new B0;function D1e(){return new $2.Scheduler}var Qe;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.OVERLAY_RENDERER="overlay renderer",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(Qe||(Qe={}));const Ls=0,i8=new Map([[Qe.RESOURCE_CONTROLLER_IMMEDIATE,Ls],[Qe.RESOURCE_CONTROLLER,4],[Qe.SLIDE,Ls],[Qe.STREAM_DATA_LOADER,Ls],[Qe.ELEVATION_QUERY,Ls],[Qe.TERRAIN_SURFACE,1],[Qe.SURFACE_GEOMETRY_UPDATES,1],[Qe.LOD_RENDERER,2],[Qe.GRAPHICS_CORE,2],[Qe.I3S_CONTROLLER,2],[Qe.POINT_CLOUD_LAYER,2],[Qe.FEATURE_TILE_FETCHER,2],[Qe.CLOUDS_GENERATOR,2],[Qe.OVERLAY,4],[Qe.OVERLAY_RENDERER,4],[Qe.STAGE,4],[Qe.GRAPHICS_DECONFLICTOR,4],[Qe.FILTER_VISIBILITY,4],[Qe.SCALE_VISIBILITY,4],[Qe.FRUSTUM_VISIBILITY,4],[Qe.POINT_OF_INTEREST_FREQUENT,6],[Qe.POINT_OF_INTEREST_INFREQUENT,30],[Qe.LABELER,8],[Qe.FEATURE_QUERY_ENGINE,8],[Qe.FEATURE_TILE_TREE,16],[Qe.FEATURE_TILE_TREE_ACTIVE,Ls],[Qe.ELEVATION_ALIGNMENT,12],[Qe.ELEVATION_ALIGNMENT_SCENE,14],[Qe.TEXT_TEXTURE_ATLAS,12],[Qe.TEXTURE_UNLOAD,12],[Qe.LINE_OF_SIGHT_TOOL,16],[Qe.LINE_OF_SIGHT_TOOL_INTERACTIVE,Ls],[Qe.SNAPPING,Ls],[Qe.SHADOW_ACCUMULATOR,30],[Qe.MAPVIEW_FETCH_QUEUE,Ls],[Qe.MAPVIEW_LAYERVIEW_UPDATE,2],[Qe.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Ls]]);function n8(e){return i8.has(e)?i8.get(e):typeof e=="number"?e:1}const k1e=6.5,s8=1,F1e=30,U1e=1e3/30,j1e=100,o8=.9;var $2,yd;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some((s=>s.needsUpdate))}constructor(){this._updating=ey(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new pv("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new i,this._state=ki.INTERACTING,this._tasks=new fv,this._runQueue=new fv,this._load=0,this._idleStateCallbacks=new fv,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=je((()=>L1e.SCHEDULER_LOG_SLOW_TASKS),(s=>this._debug=s),Hi);for(const s of Object.keys(Qe))this.performanceInfo.tasks.set(Qe[s],new pv(Qe[s]))}destroy(){this._tasks.toArray().forEach((s=>s.remove())),this._tasks.clear(),ir(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())})))}registerTask(s,a){const c=new r(this,s,a);return this._tasks.push(c),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new pv(s)),c}registerIdleStateCallbacks(s,a){const c={idleBegin:s,idleEnd:a};this._idleStateCallbacks.push(c),this.state===ki.IDLE&&this._idleUpdatesStartFired&&c.idleBegin();const d=this;return{remove:()=>this._removeIdleStateCallbacks(c),set idleBegin(f){d._idleUpdatesStartFired&&(c.idleEnd(),d._state===ki.IDLE&&f()),c.idleBegin=f},set idleEnd(f){c.idleEnd=f}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==ki.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((a=>a.idleEnd()))))}get state(){return this._state}frame(s){this._startFrameTaskTimes();const a=this._updateBudget(s);if(a){const c=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-c)}else this._recordFrameTaskTimes(0);return a}_updateBudget(s){this._test&&(this._test.usedBudget=0),++this._frameNumber;let a=k1e,c=s.frameDuration,d=s8;switch(this.state){case ki.IDLE:a=0,c=Math.max(j1e,s.frameDuration),d=F1e;break;case ki.INTERACTING:c=Math.max(U1e,s.frameDuration);case ki.ANIMATING:}return c=c-s.elapsedFrameTime-a,this.state!==ki.IDLE&&c<s8&&!this._forceTask?(this._forceTask=!0,!1):(c=Math.max(c,d),this._budget.reset(c),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case ki.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((s=>s.idleBegin()))),this._runIdle();break;case ki.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll((a=>{a.name===s&&a.setPriority(s)}))}_getState(s){if(this._runQueue.some((c=>c.name===s)))return yd.SCHEDULED;let a=yd.IDLE;return this._tasks.forAll((c=>{c.name===s&&c.needsUpdate&&(c.schedulePriority<=1?a=yd.READY:a!==yd.READY&&(a=yd.WAITING))})),a}_getRuntime(s){let a=0;return this._tasks.forAll((c=>{c.name===s&&(a+=c.runtime)})),a}_resetRuntimes(){this._tasks.forAll((s=>s.runtime=0))}_getRunning(){const s=new Map;if(this._tasks.forAll((c=>{c.needsUpdate&&s.set(c.name,(s.get(c.name)||0)+1)})),s.size===0)return null;let a="";return s.forEach(((c,d)=>{a+=c>1?` ${c}x ${d}`:` ${d}`})),a}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce(((a,c)=>c.needsUpdate?++a:a),0);this._load=this._load*o8+s*(1-o8)}_schedule(){for(this._runQueue.filterInPlace((s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1))),this._tasks.forAll((s=>{s.basePriority===Ls&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)}));this._runQueue.length===0;){let s=!1,a=0;if(this._tasks.forAll((c=>{c.needsUpdate&&c.schedulePriority!==0&&c.basePriority!==Ls&&c.blockFrame!==this._frameNumber&&(s=!0,a=Math.max(a,c.basePriority),c.schedulePriority===1?(c.schedulePriority=0,this._runQueue.push(c)):--c.schedulePriority)})),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const s=this._budget.now(),a=this._runQueue.pop();this._budget.resetProgress();try{a.task.runTask(this._budget)===tY&&(a.blockFrame=this._frameNumber)}catch(d){re.getLogger("esri.views.support.Scheduler").error(`Exception in task "${a.name}"`,d),a.blockFrame=this._frameNumber}!this._budget.hasProgressed&&a.blockFrame!==this._frameNumber&&a.needsUpdate&&(a.name,Qe.I3S_CONTROLLER,a.blockFrame=this._frameNumber),a.schedulePriority=a.basePriority;const c=this._budget.now()-s;if(a.runtime+=c,this._frameTaskTimes.set(a.priority,this._frameTaskTimes.get(a.priority)+c),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const s of Object.keys(Qe))this._frameTaskTimes.set(Qe[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach(((a,c)=>this.performanceInfo.tasks.get(c).push(a))),this.performanceInfo.total.push(s)}get test(){return this._test}}e.Scheduler=t;class r{get task(){return this._task.value}get updating(){return this._queue.running}constructor(s,a,c){this._scheduler=s,this.name=a,this.blockFrame=0,this.runtime=0,this._queue=new P1e,this._handles=new my,this._basePriority=n8(a),this.schedulePriority=this._basePriority,this._task=ey(c??this._queue),this._handles.add(Zs((()=>this.task.running),(d=>s.taskRunningChanged(d))))}remove(){this.processQueue(hP),this._scheduler.removeTask(this),this.schedule=a8.schedule,this.reschedule=a8.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){if(this.name===s)return;this.name=s;const a=n8(s);this._basePriority!==Ls&&this.schedulePriority===0||(this.schedulePriority=a),this._basePriority=a}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,a,c){return this._queue.push(s,a,c)}reschedule(s,a,c){return this._queue.unshift(s,a,c)}processQueue(s){return this._queue.runTask(s)}}class i{constructor(){this._begin=performance?.now()??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s){this._begin=this.now(),this._budget=s,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=i})($2||($2={})),(function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"})(yd||(yd={}));const hP=new $2.Budget;hP.enabled=!1;let z1e=class{remove(){}processQueue(){}schedule(t,r,i){try{if(Ws(r)){const n=Zt();return i?Promise.resolve(i(n)):Promise.reject(n)}return O3(t(hP))}catch(n){return Promise.reject(n)}}reschedule(t,r,i){return this.schedule(t,r,i)}};const a8=new z1e;let V1e=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=D1e(),this._schedulerHandle=Zs((()=>this._scheduler.updating),(()=>this.requestFrame())),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||Ia(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=r=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:i,graphicsView:n,labelManager:s,state:{id:a}}=this.view;i?.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==a&&(s.viewChange(),s.lastUpdateId=a),s.updateRequested&&s.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==a&&(n.viewChange(),n.lastUpdateId=a),n.updateRequested&&n.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=ki.ANIMATING:this.view.interacting?this._scheduler.state=ki.INTERACTING:this._scheduler.state=ki.IDLE,this._scheduler.frame(r)||this._updateRequested||this._scheduler.state!==ki.IDLE||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new dP,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=je((()=>t.stationary),(r=>{this.stationary=r,this.requestFrame()})),this._frameTaskHandle=qm(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){if(!t.attached)return void this.requestUpdate();const r=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0),i!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews?.forEach(this._updateLayerView,this)}};function G1e(e,t){const{spatialReference:r}=t,i=[t.x,t.y];let n,s,a,c;const d=[0,0],f=q1e(e);for(let w=0;w<f.length;w++){const S=f[w];for(let T=0;T<S.length-1;T++){vce(d,i,S,T);const E=WT(i,d);(n==null||E<n)&&(n=E,s=[...d],a=w,c=T)}}if(n==null||!s||a==null||c==null)throw new z("nearest-coordinate:failed","Failed to find the nearest coordinate");const[g,v]=s;return{coordinate:new Pe({x:g,y:v,spatialReference:r}),distance:n}}function q1e(e){switch(e.type){case"extent":return[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]];case"polygon":return e.rings;case"polyline":return e.paths}}var OR;let eh=OR=class extends F1.NumericIdentifiableMixin(Ae){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Gc(this.geometry,this.spatialReference)}catch(e){return re.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?I1(this.normalizedGeometry,r):sN(this.normalizedGeometry,r))return e;const{coordinate:i}=G1e(this.normalizedGeometry,r);return i&&(e.targetGeometry=i),e}clone(){return new OR({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};u([p({constructOnly:!0})],eh.prototype,"geometry",void 0),u([p({readOnly:!0})],eh.prototype,"normalizedGeometry",null),u([p({constructOnly:!0})],eh.prototype,"spatialReference",void 0),eh=OR=u([O("esri.views.2d.constraints.GeometryConstraint")],eh);var RR;let H0=RR=class extends F1.NumericIdentifiableMixin(Ae){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new RR({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};u([p()],H0.prototype,"enabled",void 0),u([p()],H0.prototype,"rotationEnabled",void 0),H0=RR=u([O("esri.views.2d.constraints.RotationConstraint")],H0);const rY=H0;var CR;let $n=CR=class extends F1.NumericIdentifiableMixin(Ae){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:i,minZoom:n,maxZoom:s}=this,a=-1,c=-1,d=!1,f=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!t?.length)return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);t=t.map((g=>g.clone())),t.sort(((g,v)=>v.scale-g.scale)),t.forEach(((g,v)=>g.level=v));for(const g of t)!d&&r>0&&r>=g.scale&&(a=g.level,d=!0),!f&&i>0&&i>=g.scale&&(c=e?e.level:-1,f=!0),e=g;n===-1&&(n=r===0?0:a),s===-1&&(s=i===0?t.length-1:c),n=Math.max(n,0),n=Math.min(n,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),n>s&&([n,s]=[s,n]),r=t[n].scale,i=t[s].scale,t.splice(0,n),t.splice(s-n+1),t.forEach(((g,v)=>{this._lodByScale[g.scale]=g,this._scales[v]=g.scale})),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,i=this.effectiveMaxScale,n=e.targetGeometry,s=t&&t.targetGeometry,a=i!==0&&e.scale<i,c=r!==0&&e.scale>r;if(a||c){const d=c?r:i;if(t&&s){const f=(d-t.scale)/(e.scale-t.scale);n.x=s.x+(n.x-s.x)*f,n.y=s.y+(n.y-s.y)*f}e.scale=d}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.floor(e),i=Math.ceil(e);return t[r]+(e-r)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(r=t[n],i=t[n+1],i===e)return n+this.effectiveMinZoom+1;if(r>e&&i<e)return n+this.effectiveMinZoom+1-(e-i)/(r-i)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new CR({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce(((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t),this._scales[0])),this._lodByScale[e].scale}};u([p({readOnly:!0})],$n.prototype,"effectiveLODs",void 0),u([p({readOnly:!0})],$n.prototype,"effectiveMinZoom",void 0),u([p({readOnly:!0})],$n.prototype,"effectiveMaxZoom",void 0),u([p({readOnly:!0})],$n.prototype,"effectiveMinScale",void 0),u([p({readOnly:!0})],$n.prototype,"effectiveMaxScale",void 0),u([p()],$n.prototype,"lods",void 0),u([p()],$n.prototype,"minZoom",void 0),u([p()],$n.prototype,"maxZoom",void 0),u([p()],$n.prototype,"minScale",void 0),u([p()],$n.prototype,"maxScale",void 0),u([p()],$n.prototype,"snapToZoom",void 0),$n=CR=u([O("esri.views.2d.constraints.ZoomConstraint")],$n);const iY=$n,B1e={base:null,key:"type",typeMap:{extent:Xe,polygon:er}};let mr=class extends Ae{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new ge}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const t=this._get("_geometry");return t&&this.geometry===t.geometry&&this.view?.constraintsInfo.spatialReference===t.spatialReference?t:new eh({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new rY({rotationEnabled:this.rotationEnabled})}get _zoom(){const t=this._get("_zoom"),r=this.lods||this.view?.constraintsInfo.lods,i=this.minZoom,n=this.maxZoom,s=this.minScale,a=this.maxScale,c=this.snapToZoom;return t&&t.lods===r&&t.minZoom===i&&t.maxZoom===n&&t.minScale===s&&t.maxScale===a&&t.snapToZoom===c?t:new iY({lods:r,minZoom:i,maxZoom:n,minScale:s,maxScale:a,snapToZoom:c})}canZoomInTo(t){const r=this.effectiveMaxScale;return r===0||t>=r}canZoomOutTo(t){const r=this.effectiveMinScale;return r===0||t<=r}constrain(t,r){return this._zoom.constrain(t,r),this._rotation.constrain(t,r),this._geometry.constrain(t,r),this.customConstraints.forEach((i=>i.constrain(t,r))),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach((r=>r.applyPanConstraint?.(t))),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};u([p({readOnly:!0})],mr.prototype,"effectiveLODs",null),u([p({readOnly:!0})],mr.prototype,"effectiveMinScale",null),u([p({readOnly:!0})],mr.prototype,"effectiveMaxScale",null),u([p({readOnly:!0})],mr.prototype,"effectiveMinZoom",null),u([p({readOnly:!0})],mr.prototype,"effectiveMaxZoom",null),u([p({types:B1e,value:null})],mr.prototype,"geometry",null),u([p({type:[Oi]})],mr.prototype,"lods",void 0),u([p()],mr.prototype,"minScale",void 0),u([p()],mr.prototype,"maxScale",void 0),u([p()],mr.prototype,"minZoom",void 0),u([p()],mr.prototype,"maxZoom",void 0),u([p()],mr.prototype,"rotationEnabled",void 0),u([p()],mr.prototype,"snapToZoom",void 0),u([p({type:ge})],mr.prototype,"customConstraints",void 0),u([p()],mr.prototype,"view",void 0),u([p({readOnly:!0})],mr.prototype,"version",null),u([p({type:eh,readOnly:!0})],mr.prototype,"_geometry",null),u([p({type:rY})],mr.prototype,"_rotation",null),u([p({readOnly:!0,type:iY})],mr.prototype,"_zoom",null),mr=u([O("esri.views.2d.MapViewConstraints")],mr);const l8=mr;let Di=class extends Ae{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([je((()=>this.constraints?.version),(r=>{this.constraints&&r&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))}),Oa)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:r}=this.state.paddedViewState;return this.state.commitProperty("id"),new Pe({x:t[0],y:t[1],spatialReference:r})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let r;try{r=this._project(t,this.state.spatialReference)}catch(n){return void re.getLogger(this).error(new z("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:n}))}const i=this.viewpoint;ER(i,i,r),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void re.getLogger(this).error(new z("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let r;try{r=this._project(t,this.state.spatialReference)}catch(n){return void re.getLogger(this).error(new z("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const i=this.viewpoint;Fve(i,i,r,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const r=this.viewpoint;Zve(r,r,t),this.viewpoint=r}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const r=this.viewpoint;e8(r,r,t),this.viewpoint=r}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let r,i;try{r=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?i=new z("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(i=new z("mapview:invalid-viewpoint","geometry not defined"))}catch(s){i=new z("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(i)return void re.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const n=new Hs({targetGeometry:new Pe,scale:0,rotation:0});Bi(n,r),this.constraints?.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(t){if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const n=this._get("extent");return void(n&&(this._set("extent",void 0),this._set("center",n.center)))}const r=this.constraints?.zoomToScale(t)??0;if(!r)return void this._set("zoom",-1);const i=this.viewpoint;e8(i,i,r),this.viewpoint=i,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:r,constraints:i}=this,n=this._get("center"),s=this._get("extent"),a=this._get("scale"),c=this._get("rotation"),d=this._get("viewpoint"),f=this._get("zoom"),g=f!=null&&i!=null&&i.zoomToScale(f)||void 0;let v,w,S;const T=d?.rotation,E=d?.targetGeometry;E?.type==="extent"?v=E:E?.type==="point"&&(w=E,S=d?.scale);const M=s??v;return{center:n??w??M?.center,rotation:c??T,scale:(a??g??S??(M&&YT(M,[t[0]-r.left-r.right,t[1]-r.top-r.bottom])))||void 0}}startup(t,r,i,n){const s=t.targetGeometry;try{this._project(t,i)}catch(a){re.getLogger(this).warn(new gs("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:i,error:a})),t.targetGeometry=n||new Pe({x:0,y:0,spatialReference:i})}this.constraints?.fit(t),this._set("state",new dP({padding:this.padding,size:r,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,r],spatialReference:i,rotation:n,scale:s}=this.state.paddedViewState,a=new Pe({x:t,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",a),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(t){const r=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=r.scale;else{const d=r.viewpoint.clone();d.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=d}const i=r.clone(),[n,s]=r.center;let a=null;try{a=this._project(new Pe({x:n,y:s,spatialReference:r.spatialReference}),t)}catch(d){eN()||re.getLogger(this).warn(new gs("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:a?.toJSON(),spatialReference:t,error:d}))}a||(a=new Pe({x:0,y:0,spatialReference:t}));const c=ER(new Hs({targetGeometry:new Pe,scale:0,rotation:0}),r.viewpoint,a);i.viewpoint=c;try{const f=[r.size[0]/2,r.size[1]/2],g=[f[0]+20,f[1]],v=r.toMap([0,0],g),{x:w,y:S}=this._project(new Pe({x:v[0],y:v[1],spatialReference:r.spatialReference}),t);v[0]=w,v[1]=S,i.toScreen(v,v);const T=Bve(f,v,g),E=Math.hypot(v[0]-f[0],v[1]-f[1])/20;!Number.isFinite(E)||Math.abs(E)>4?(c.rotation=0,c.targetGeometry=new Pe({x:0,y:0,spatialReference:t})):(c.scale*=E,c.scale>V("mapview-srswitch-adjust-rotation-scale-threshold")?c.rotation=0:c.rotation+=Number.isFinite(T)?T:0)}catch{}this._get("constraints")?.constrain(c,void 0),this._get("state").viewpoint=c}resize(t,r){if(!this.ready)return;const i=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();i.size=[t,r],Wve(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=this.constraints?.constrain(n,void 0)??n,this.state.viewpoint=n}toMap(t){if(!this.ready)return null;const r=[0,0],[i,n]=this.state.toMap(r,[t.x,t.y]),s=this.state.spatialReference;return new Pe({x:i,y:n,spatialReference:s})}toScreen(t,r){if(!this.ready)return null;const i=this._project(t,this.state.spatialReference),n=[i.x,i.y];return r?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),bi(n[0],n[1])}_project(t,r){const i=t?.targetGeometry||t;if(!r)return t;if(!i)return null;if(r.imageCoordinateSystem||i.spatialReference?.imageCoordinateSystem||ni(r,i.spatialReference))return t;const n=Gc(i,r);if(!n)throw new z("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:r});return H1e(t)?(t.targetGeometry=n,t):n}};function H1e(e){return e?.declaredClass==="esri.Viewpoint"}u([p({type:Pe})],Di.prototype,"center",null),u([p()],Di.prototype,"constraints",void 0),u([p({type:Xe})],Di.prototype,"extent",null),u([p({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Di.prototype,"padding",null),u([p()],Di.prototype,"ready",void 0),u([p()],Di.prototype,"resizeAlign",void 0),u([p({readOnly:!0})],Di.prototype,"resolution",null),u([p({type:Number})],Di.prototype,"rotation",null),u([p({type:Number})],Di.prototype,"scale",null),u([p({readOnly:!0})],Di.prototype,"state",void 0),u([p({type:Hs})],Di.prototype,"viewpoint",null),u([p({readOnly:!0})],Di.prototype,"visibleArea",null),u([p()],Di.prototype,"zoom",null),Di=u([O("esri.views.2d.ViewStateManager")],Di);const u8=160;let W0=class extends Ae{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval((()=>{performance.now()-this._timestamp>=u8&&this.clear()}),u8))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};u([p()],W0.prototype,"_timer",void 0),u([p()],W0.prototype,"stationary",null),W0=u([O("esri.views.2d.support.StationaryManager")],W0);const W1e=e=>{let t=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new Di({constraints:new l8({view:this})}),this.stationaryManager=new W0,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new V1e(this),this.viewEvents=new rZ(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([je((()=>this.viewpoint),(()=>this.stationaryManager.flip()),Oa)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(r){const i=this._get("animation");if(r===i)return;if(i&&i.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const n=()=>{this.destroyed||r===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};r.when(n,n)}get constraints(){return this.stateManager?.constraints}set constraints(r){r.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=r,i?.destroy()}get padding(){return this.stateManager?.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=i}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}};return u([p({readOnly:!0})],t.prototype,"animationManager",void 0),u([p({readOnly:!0})],t.prototype,"fullOpacity",void 0),u([p()],t.prototype,"stateManager",void 0),u([p()],t.prototype,"constraintsInfo",null),u([p()],t.prototype,"extent",null),u([p({readOnly:!0})],t.prototype,"state",null),u([p({readOnly:!0})],t.prototype,"mapViewNavigation",void 0),u([p()],t.prototype,"renderingOptions",void 0),u([p({readOnly:!0})],t.prototype,"interacting",null),u([p()],t.prototype,"stationary",null),u([p()],t.prototype,"animation",null),u([p({type:l8})],t.prototype,"constraints",null),u([p()],t.prototype,"padding",null),u([p()],t.prototype,"resizeAlign",null),u([p()],t.prototype,"rotation",null),u([p({readOnly:!0})],t.prototype,"viewEvents",void 0),u([p({type:Hs})],t.prototype,"viewpoint",null),t=u([O("esri.views.Viewport2DBaseMixin")],t),t};let Yu=class extends jl{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=ys(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new z("view:animation-stopped","ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(t,r){r||(r=Ia(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",r)}};u([p({readOnly:!0})],Yu.prototype,"done",null),u([p({readOnly:!0,type:String})],Yu.prototype,"state",void 0),u([p()],Yu.prototype,"target",void 0),Yu=u([O("esri.views.ViewAnimation")],Yu),(function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}})(Yu||(Yu={}));const IR=Yu;let sS=class extends Ae{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,r){if(!t)return void re.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new IR;this.view.animation=i,await wN((()=>this.view.ready),r);const n={...r,animate:r?.animate??!lZ(),animationMode:r?.animationMode??"auto"},{extent:s,spatialReference:a,size:c,viewpoint:d,constraints:f,padding:g,allLayerViews:v}=this.view,w=Lve(t,{extent:s,spatialReference:a,size:c,viewpoint:d,constraints:f,padding:g,allLayerViews:v,pickClosestTarget:r?.pickClosestTarget??!0});return i?.update(w),this._gotoTask={},n.animate?this._gotoAnimated(w,n):this._gotoImmediate(w,n)}_gotoImmediate(t,r){const i=this._gotoTask,n=this.view.animation,s=t.then((a=>{if(Yt(r),i!==this._gotoTask)throw new z("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=a,n.finish()}));return this._cancellableGoTo(i,n,s,r)}_gotoAnimated(t,r){const i=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=t.then((a=>{if(Yt(r),i!==this._gotoTask)throw new z("view:goto-interrupted","Goto was interrupted");return n.update(a),this.view.animationManager.animate(n,this.view.viewpoint,r),n.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(i,n,s,r)}_cancellableGoTo(t,r,i,n){const s=()=>t===this._gotoTask;return iV(i,n).finally((()=>{s()&&(r.done||r.stop())}))}};u([p({constructOnly:!0})],sS.prototype,"view",void 0),sS=u([O("esri.views.2d.GoToManager")],sS);function nY(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}function sY(e,t){return t.some((r=>nY(e,r)))}function c8(e,{dragPrimary:t,dragSecondary:r,dragTertiary:i}){return[{key:"primary",value:t},{key:"secondary",value:r},{key:"tertiary",value:i}].filter((n=>n.value===e)).map((n=>n.key))}let d8=class extends si{constructor(t,r){super(!0),this._view=t,this.registerIncoming("double-click",r,(i=>this._handleDoubleClick(i,r)))}_handleDoubleClick(t,r){nY(t.data,"primary")&&(t.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},Z1e=class extends si{constructor(t,r,i){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",i,(n=>this._handleDoubleTapDrag(n)))}_handleDoubleTapDrag(t){const{data:r}=t,{pointerType:i}=r;if(i!==this.pointerType)return;t.stopPropagation();const{action:n,delta:s}=r,{view:a}=this,{mapViewNavigation:c}=a;switch(n){case"begin":{const{scale:d}=a;this._startScale=d,this._currentScale=d,this._previousDelta=s,c.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const d=1.015**s.y,f=this._startScale*d,g=f/this._currentScale;c.setViewpointImmediate(g),this._currentScale=f;break}case"end":{const{constraints:d}=a,{effectiveLODs:f,snapToZoom:g}=d;if(!g||!f)return void c.end();const v=d.snapScale(this._currentScale),w=(s.y>0?Math.max(v,d.snapToPreviousScale(this._startScale)):Math.min(v,d.snapToNextScale(this._startScale)))/this._currentScale;c.zoom(w).then((()=>{c.end()}));break}}}},XT=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const r=t.data,i=r.pointers.size;switch(r.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){this._startEvent=t,this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},Y1e=class extends si{constructor(t,r,i){super(!0),this.view=t,this.pointerActions=r,this.registerIncoming("drag",i,(n=>this._handleDrag(n))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()))}onInstall(t){super.onInstall(t),this._dragEventSeparator=new XT({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&sY(i.data,this.pointerActions)})}_handleDrag(t){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},J1e=class extends si{constructor(t,r,i){super(!0),this._view=t,this.pointerActions=r;const n=this._view.mapViewNavigation;this._dragEventSeparator=new XT({start:(s,a)=>{n.rotate.begin(this._view,a.data),a.stopPropagation()},update:(s,a)=>{n.rotate.update(this._view,a.data),a.stopPropagation()},end:(s,a)=>{n.rotate.end(),a.stopPropagation()},condition:(s,a)=>s===1&&sY(a.data,this.pointerActions)}),this.registerIncoming("drag",i,(s=>this._dragEventSeparator.handle(s)))}};function oY(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function X1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Q1e(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function K1e(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function aY(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function lY(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function uY(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function ebe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function tbe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function rbe(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function ibe(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function nbe(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function sbe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function obe(e,t=0,r=1){return e[0]=Math.min(Math.max(e[0],t),r),e[1]=Math.min(Math.max(e[1],t),r),e[2]=Math.min(Math.max(e[2],t),r),e}function abe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function cY(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function lbe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function dY(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)}function hY(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n}function pY(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function ube(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function cbe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function NR(e,t){const r=t[0],i=t[1],n=t[2];let s=r*r+i*i+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function fY(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function dbe(e,t,r){const i=t[0],n=t[1],s=t[2],a=r[0],c=r[1],d=r[2];return e[0]=n*d-s*c,e[1]=s*a-i*d,e[2]=i*c-n*a,e}function hbe(e,t,r){const i=t[0],n=t[1],s=t[2],a=r[0],c=r[1],d=r[2],f=n*d-s*c,g=s*a-i*d,v=i*c-n*a,w=Math.sqrt(f*f+g*g+v*v);return e[0]=f/w,e[1]=g/w,e[2]=v/w,e}function pbe(e,t,r,i){const n=t[0],s=t[1],a=t[2];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=a+i*(r[2]-a),e}function fbe(e,t,r,i,n,s){const a=s*s,c=a*(2*s-3)+1,d=a*(s-2)+s,f=a*(s-1),g=a*(3-2*s);return e[0]=t[0]*c+r[0]*d+i[0]*f+n[0]*g,e[1]=t[1]*c+r[1]*d+i[1]*f+n[1]*g,e[2]=t[2]*c+r[2]*d+i[2]*f+n[2]*g,e}function mbe(e,t,r,i,n,s){const a=1-s,c=a*a,d=s*s,f=c*a,g=3*s*c,v=3*d*a,w=d*s;return e[0]=t[0]*f+r[0]*g+i[0]*v+n[0]*w,e[1]=t[1]*f+r[1]*g+i[1]*v+n[1]*w,e[2]=t[2]*f+r[2]*g+i[2]*v+n[2]*w,e}function ybe(e,t=1){const r=DT,i=2*r()*Math.PI,n=2*r()-1,s=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(i)*s,e[1]=Math.sin(i)*s,e[2]=n*t,e}function gbe(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12],e[1]=r[1]*i+r[5]*n+r[9]*s+r[13],e[2]=r[2]*i+r[6]*n+r[10]*s+r[14],e}function vbe(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=i*r[0]+n*r[3]+s*r[6],e[1]=i*r[1]+n*r[4]+s*r[7],e[2]=i*r[2]+n*r[5]+s*r[8],e}function bbe(e,t,r){const i=r[0],n=r[1],s=r[2],a=r[3],c=t[0],d=t[1],f=t[2],g=n*f-s*d,v=s*c-i*f,w=i*d-n*c,S=n*w-s*v,T=s*g-i*w,E=i*v-n*g,M=2*a;return e[0]=c+g*M+2*S,e[1]=d+v*M+2*T,e[2]=f+w*M+2*E,e}function wbe(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0],s[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),s[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function _be(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),s[1]=n[1],s[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function Sbe(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),s[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),s[2]=n[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function Tbe(e,t){NR(h8,e),NR(p8,t);const r=fY(h8,p8);return r>1?0:r<-1?Math.PI:Math.acos(r)}const h8=zc(),p8=zc();function Ebe(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function xbe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function $be(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=t[0],a=t[1],c=t[2],d=mn();return Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-a)<=d*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-c)<=d*Math.max(1,Math.abs(n),Math.abs(c))}function Mbe(e,t,r){const i=r[0]-t[0],n=r[1]-t[1],s=r[2]-t[2];let a=i*i+n*n+s*s;return a>0?(a=1/Math.sqrt(a),e[0]=i*a,e[1]=n*a,e[2]=s*a,e):(e[0]=0,e[1]=0,e[2]=0,e)}const Abe=aY,Obe=lY,Rbe=uY,Cbe=dY,Ibe=hY,Nbe=oY,Pbe=pY;Object.freeze(Object.defineProperty({__proto__:null,abs:rbe,add:K1e,angle:Tbe,bezier:mbe,ceil:ebe,clamp:obe,copy:X1e,cross:dbe,crossAndNormalize:hbe,direction:Mbe,dist:Cbe,distance:dY,div:Rbe,divide:uY,dot:fY,equals:$be,exactEquals:xbe,floor:tbe,hermite:fbe,inverse:cbe,len:Nbe,length:oY,lerp:pbe,max:sbe,min:nbe,mul:Obe,multiply:lY,negate:ube,normalize:NR,random:ybe,rotateX:wbe,rotateY:_be,rotateZ:Sbe,round:abe,scale:cY,scaleAndAdd:lbe,set:Q1e,sign:ibe,sqrDist:Ibe,sqrLen:Pbe,squaredDistance:hY,squaredLength:pY,str:Ebe,sub:Abe,subtract:aY,transformMat3:vbe,transformMat4:gbe,transformQuat:bbe},Symbol.toStringTag,{value:"Module"}));function po(e){let t=e*e;return e<0&&(t*=-1),t}function Lbe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function Dbe(e,t,r){const i=r,n=e.state,s=e.device,a=t.tiltDirection==="forward-down"?1:-1,c=1;return s.deviceType==="standard"?(i.translation[0]=po(n.axes[0]),i.translation[1]=po(n.axes[1]),i.translation[2]=po(n.buttons[7])-po(n.buttons[6]),i.heading=po(n.axes[2]),i.tilt=po(n.axes[3])):s.deviceType==="spacemouse"&&(i.translation[0]=1.2*po(n.axes[0]),i.translation[1]=1.2*po(n.axes[1]),i.translation[2]=2*-po(n.axes[2]),i.heading=1.2*po(n.axes[5]),i.tilt=1.2*po(n.axes[3])),i.tilt*=a,cY(i.translation,i.translation,c),i}function kbe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let Fbe=class extends si{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new my,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",(r=>this._handleGamePadEvent(r))),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([je((()=>this._view.navigation.gamepad?.enabled),(r=>{r?(this._handle.resume(),this._frameTask||(this._frameTask=qm({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))}),Hi)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const r=this._view.navigation.gamepad.device;r&&t.data.device!==r||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,Lbe(this._transformation)):(this._currentDevice=t.data.device,Dbe(t.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(t){const r=this._transformation;if(kbe(r))return void this._frameTask?.pause();const i=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=jbe*n*t;JT(i,i,[r.translation[0]*s,-r.translation[1]*s]);const a=1+r.translation[2]*zbe*t,c=this._view.constraints.rotationEnabled?-r.heading*Ube*t:0,d=this._view.size,f=[d[0]/2,d[1]];zZ(i,i,a,c,f,d);const g=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=g}};const Ube=.06,jbe=.7,zbe=6e-4;function mY(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),ht((()=>document.removeEventListener("visibilitychange",t)))}let Vbe=class extends si{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const a=n.type==="key-down";if(this._pressedKeys[a?"add":"delete"](s),a){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout((()=>{this._isSticky&&this._handlePopKey()}))}else{const c=this._timeout===void 0,d=this._pressedKeys.size>0;c||d?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=mY((n=>n?null:this._stopMovement()))}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(t){const r=this._currentDirection!=null;if(t!=null){if(r||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else r&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout((()=>{this._timeout=void 0,t()}),this._stickyKeyDuration)}},Gbe=class extends si{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(r),this.registerIncoming("key-down",i,(n=>this._handleKeyDown(n))),this.registerIncoming("key-up",i,(n=>this._handleKeyUp(n))),this.registerIncoming("blur",i,(()=>this._handleStop())),this._visibilityHandle=mY((n=>n?null:this._handleStop()))}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(t){this._addKeyMapping(t.clockwise,"clockwise"),this._addKeyMapping(t.counterClockwise,"counterClockwise"),this._addKeyMapping(t.reset,"reset")}_addKeyMapping(t,r){for(const i of t)this._keyToDirection.set(i,r)}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection.get(t.data.key);if(this._pressed=n!=null,this._pressed){if(t.preventDefault(),r)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var Bf;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(Bf||(Bf={}));let qbe=class extends si{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,(n=>this._handleKeyDown(n))),r.zoomIn.forEach((n=>this._keysToZoomAction[n]=Bf.IN)),r.zoomOut.forEach((n=>this._keysToZoomAction[n]=Bf.OUT))}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const n=this._keysToZoomAction[i],{mapViewNavigation:s}=this.view;let a=null;switch(n){case Bf.IN:a=s.zoomIn();break;case Bf.OUT:a=s.zoomOut();break;default:return}s.begin(),a.then((()=>s.end())),t.stopPropagation()}};const Bbe=.6;let Hbe=class extends si{constructor(t,r){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,(i=>this._handleMouseWheel(i)))}_handleMouseWheel(t){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const r=this._view.mapViewNavigation,{x:i,y:n,deltaY:s}=t.data,a=1/Bbe**(1/60*s),c=r.zoom(a,[i,n]);c&&(this._canZoom=!1,c.catch((()=>{})).then((()=>{this._canZoom=!0,r.end()})))}},Wbe=class extends si{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",(i=>this._handleDrag(i))),this.registerIncoming("pointer-down",(()=>this._stopMomentumNavigation()));const r=this.view.mapViewNavigation;this._dragEventSeparator=new XT({start:(i,n)=>{r.pinch.begin(this.view,n.data),n.stopPropagation()},update:(i,n)=>{r.pinch.update(this.view,n.data),n.stopPropagation()},end:(i,n)=>{r.pinch.end(this.view),n.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function f8(e){const t=e.native;return t?{buttons:t.buttons.map((r=>r.pressed?r.value||1:0)),axes:t.axes.map((r=>Jbe(r,e.axisThreshold)))}:{buttons:[],axes:[]}}function Zbe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function Ybe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function Jbe(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}let Xbe=class{constructor(t,r){this._element=t,this._input=r,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const a=s.gamepad,c=a.index,d=this._inputDevices[c];d&&(this._emitGamepadEvent(a,f8(d),!1),this._inputDevices.splice(c,1),this._latestUpdate.splice(c,1),this._input.gamepad.devices.remove(d),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=i&&n,this.supported&&(m8((s=>this._connectGamepad(s))),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const r=new eP(t);r.deviceType!=="unknown"&&(this._inputDevices[t.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=qm({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),r=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!r;m8((n=>{const s=this._inputDevices[n.index];if(!s)return;const a=this._latestUpdate[n.index],c=f8(s),d=i||Ybe(c);a&&(a.timestamp===n.timestamp||!a.active&&d||Zbe(a.state,c))||this._emitGamepadEvent(n,c,!d)}))}_emitGamepadEvent(t,r,i){const n=this._latestUpdate[t.index],s=n&&n.active;if(!s&&!i)return;const a=!s&&i?"start":s&&i?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:r,action:a})}};function Qbe(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function m8(e){for(const t of navigator.getGamepads())Qbe(t)&&e(t)}const y8=V("edge"),Kbe=V("chrome"),ewe=V("ff"),twe=V("safari"),g8="esri-view-surface",Wp={touchNone:`${g8}--touch-none`,touchPan:`${g8}--touch-pan`};var $h;let rwe=($h=class{constructor(t,r){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Xbe(t,r),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach((t=>this._releasePointerCaptureSafe(t))),this._activePointerCaptures.clear(),this._gamepadSource=rr(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const i=this._active[r];this._element.removeEventListener(LM[r],i),delete this._active[r]}t&&t.forEach((r=>{if(!this._active[r]&&LM[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(LM[r],i),this._active[r]=i}})),this._gamepadSource&&(this._gamepadSource.hasEventListeners=t?.has("gamepad")??!1)}setPointerCapture(t,r){r?this._setPointerCaptureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Wp.touchNone:Wp.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Wp.touchPan:Wp.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Wp.touchNone),this._element.classList.remove(Wp.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const i=nZ(this._element,t);return $h.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(t,r){const{key:i}=r;i&&t==="key-up"&&this._keyDownState.delete(i);const n={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,i)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&V("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,r){let i=this._getDeltaFromTrackpadOrMouseWheel(r);switch(r.deltaMode){case 0:y8&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}y8?i*=.7:Kbe||twe?i*=.6:ewe&&(i*=1.375);const n=100,s=Math.abs(i);s>n&&(i=i/s*200/(1+Math.exp(-.02*(s-n))));const a=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(t,a)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const i={native:r};r.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}},$h.test={disableSubpixelCoordinates:!1},$h);const LM={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let iwe=class extends si{constructor(){super(!0),this.registerIncoming("context-menu",(t=>t.data.native.preventDefault()))}};const yY=()=>({maximumClickDelay:300}),nwe=(e={})=>({...yY(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...e}),pP=(e={})=>({...yY(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...e});function M2(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function swe(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}function owe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:bi()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[k,j]=e,[P,X]=[j.x-k.x,j.y-k.y];return t.radius=Math.sqrt(P*P+X*X)/2,t.center.x=(k.x+j.x)/2,t.center.y=(k.y+j.y)/2,t}let r=0,i=0;for(let k=0;k<e.length;k++)r+=e[k].x,i+=e[k].y;r/=e.length,i/=e.length;const n=e.map((k=>k.x-r)),s=e.map((k=>k.y-i));let a=0,c=0,d=0,f=0,g=0,v=0,w=0;for(let k=0;k<n.length;k++){const j=n[k],P=s[k],X=j*j,ae=P*P;a+=X,c+=ae,d+=j*P,f+=X*j,g+=ae*P,v+=j*ae,w+=P*X}const S=.5*(f+v),T=.5*(g+w),E=a*c-d*d,M=(S*c-T*d)/E,R=(a*T-d*S)/E,I=bi(M+r,R+i);return{radius:Math.sqrt(M*M+R*R+(a+c)/e.length),center:I}}function bh(e){const{native:t}=e,{pointerId:r,button:i,pointerType:n}=t;return n==="mouse"?`${r}:${i}`:`${n}`}let awe=class extends si{constructor(t={},r=hy){super(!1),this._clock=r,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=bi(0,0),this._pointerState=new Map,this._parameters=pP(t),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new XT({start:(i,n)=>this._dragStart(i,n),update:(i,n)=>this._dragUpdate(n),end:(i,n)=>this._dragEnd(n)}),this.registerIncoming("drag",(i=>this._dragEventSeparator.handle(i))),this.registerIncoming("pointer-down",(i=>this._handlePointerDown(i))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()))}onUninstall(){this._pointerState.forEach((t=>{t.doubleTapTimeout=ir(t.doubleTapTimeout)}))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const r=this._pointerState.get(t);r&&(r.doubleTapTimeout=ir(r.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,r){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:n}=r,{center:s}=i;this._dragStartCenter=s;const a=DM("begin",bi(0,0),i);this._doubleTapDrag.emit(a,void 0,n),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=DM("update",bi(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(s,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=DM("end",bi(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(s,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:r}=t,i=bh(r),n=this._pointerState.get(i),{pointerType:s}=r.native;if(n){const a=s==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(i),M2(n.event.data,r)>a?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:r}=t,{pointerType:i}=r.native,n=bh(r),s=i==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,a=this._clock.setTimeout((()=>this._clearPointerDown(n)),s);this._pointerState.set(n,{event:t,doubleTapTimeout:a}),this.refreshHasPendingInputs()}};function DM(e,t,r){const{button:i,buttons:n,pointer:s,pointers:a,pointerType:c,timestamp:d}=r;return{action:e,delta:t,button:i,buttons:n,pointer:s,pointers:a,pointerType:c,timestamp:d}}let lwe=class extends si{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,r,i,n){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:n,pointers:uwe(this._activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const r=t.native.pointerId,i=Vw(this._activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,n);const s=oS(n,gY(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const r=t.native.pointerId,i=this._activePointerMap.get(r);i?i.event=t:this._addPointer(t)}_removePointer(t){const r=Vw(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(r)}_updatePointerAngles(t){const r=Vw(this._activePointerMap);this._activePointerMap.forEach((i=>{i.initialAngle=oS(i,r)-t,i.lastAngle=oS(i,r)-t}))}_emitEvent(t,r,i){const n=Vw(this._activePointerMap);this._drag.emit(this._createPayload(t,r,n,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const r=t.data.native.pointerId,i=t.timestamp;this._activePointerMap.get(r)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const r=t.data,i=r.currentEvent,n=t.timestamp;switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,n)):(this._addPointer(i),this._emitEvent("added",i,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function gY(e){const t=[];return e.forEach((r=>{t.push(bi(r.event.x,r.event.y))})),owe(t)}function Vw(e){const t=gY(e);let r=0;return e.forEach((i=>{let n=oS(i,t),s=n-i.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=i.lastAngle+s,i.lastAngle=n;const a=n-i.initialAngle;r+=a})),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function uwe(e){const t=new Map;return e.forEach(((r,i)=>t.set(i,r.event))),t}function oS(e,t){const r=e.event,i=r.x-t.center.x,n=r.y-t.center.y;return Math.atan2(n,i)}var v8;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(v8||(v8={}));let cwe=class extends si{constructor(t={},r=hy){super(!1),this._clock=r,this._pointerState=new Map,this._parameters=pP(t),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach((t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()})),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=bh(r);if(!this._pointerState.has(i)){const n={downButton:r.native.button,x:r.x,y:r.y,immediateDoubleClick:null};this._pointerState.set(i,n),this.startCapturingPointer(r.native)}}_handlePointerUp(t){const r=t.data,i=bh(r),n=this._pointerState.get(i);if(n&&n.downButton===r.native.button){const s=n.immediateDoubleClick,a=t.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),M2(s,t.data)>a?this._startImmediateDoubleClick(t,n):(this._immediateDoubleClick.emit(t.data,void 0,s.modifiers),this._removeState(r))):M2(n,t.data)>a?this._removeState(r):this._startImmediateDoubleClick(t,n)}}_startImmediateDoubleClick(t,r){const i=t.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(t.data)),i)}}_removeState(t){const r=bh(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},dwe=class extends si{constructor(t={},r=hy){super(!1),this._clock=r,this._pointerState=new Map,this._parameters=nwe(t),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",(i=>this._handlePointerDown(i))),this.registerIncoming("pointer-up",(i=>this._handlePointerLoss(i,"pointer-up"))),this.registerIncoming("pointer-capture-lost",(i=>this._handlePointerLoss(i,"pointer-capture-lost"))),this.registerIncoming("pointer-cancel",(i=>this._handlePointerLoss(i,"pointer-cancel"))),this._moveHandle=this.registerIncoming("pointer-move",(i=>this._handlePointerMove(i))),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach((t=>{t.holdTimeout=ir(t.holdTimeout)})),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=r.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout((()=>{const a=this._pointerState.get(i);if(a){if(!a.isDragging){const c=a.previousEvent;this._pointerHold.emit(c,void 0,t.modifiers),a.holdEmitted=!0}a.holdTimeout=null}}),this._parameters.holdDelay));const s={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,s),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const r=t.data,i=r.native.pointerId,n=this._pointerState.get(i);n&&(n.isDragging?this._pointerDrag.emit(Gw("update",n,r),void 0,n.modifiers):swe(r,n.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(t),n.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(t){const r=t.data,i=r.native.pointerId;this._pointerState.forEach((n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(Gw("start",n,r)):this._pointerDrag.emit(Gw("start",n,n.previousEvent),t.timestamp))}))}_handlePointerLoss(t,r){const i=t.data,n=i.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(Gw("end",s,r==="pointer-up"?i:s.previousEvent),void 0,s.modifiers):r==="pointer-up"&&s.downButton===i.native.button&&t.timestamp-s.startTimestamp<=this._parameters.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(n),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function Gw(e,t,r){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:r}}let hwe=class extends si{constructor(t={},r=hy){super(!1),this._clock=r,this._pointerState=new Map,this._parameters=pP(t),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",(i=>this._handleImmediateClick(i))),this.registerIncoming("pointer-down",(i=>this._handlePointerDown(i)))}onUninstall(){this._pointerState.forEach((t=>t.doubleClickTimer=ir(t.doubleClickTimer)))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,r){const i=this._pointerState.get(t);i&&(i.doubleClickTimer=ir(i.doubleClickTimer),r&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const r=this._pointerState.get(t);r.pointerDownCount===1&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const r=t.data,{pointerType:i}=r.native,n=pwe(r);if(!this._pointerState.has(n))return void this._startClick(t);const s=this._pointerState.get(n),{data:a,modifiers:c}=s.event,d=i==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;M2(a,r)>d?(this._clearDoubleClickTimer(n,!0),this._startClick(t)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(a,void 0,c))}_handlePointerDown(t){const r=bh(t.data),i=this._pointerState.get(r);i&&(i.pointerDownCount+=1)}_startClick(t){const{data:r}=t,{native:{pointerType:i}}=r,n=bh(r),s=i==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,a=this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(n)),s);this._pointerState.set(n,{event:t,doubleClickTimer:a,pointerDownCount:1}),this.refreshHasPendingInputs()}};function pwe(e){const{pointerId:t,pointerType:r,button:i}=e.native;return r==="mouse"?`${t}:${i}`:`${r}`}const qw={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},b8=Symbol("handles");let jd=class extends Ae{initialize(){const t=()=>this.view?.ready;this.addHandles([Zs((()=>!t()),(()=>this._disconnect())),Zs(t,(()=>this._connect()))])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(t){return this._inputManager?.isModifierKeyDown(t)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(b8),this._inputManager=rr(this._inputManager)}_connect(){const t=this.view.surface,r=new rwe(t,this.view.input),i=[new cwe,new dwe,new hwe,new lwe(this.view.navigation),new awe],n=new Cs({eventSource:r,recognizers:i}),s=new Y1e(this.view,["primary"]),a=new J1e(this.view,["secondary"]);n.installHandlers("prevent-context-menu",[new iwe],Hl.INTERNAL),n.installHandlers("navigation",[new Wbe(this.view),new Fbe(this.view),new Hbe(this.view),new d8(this.view),new d8(this.view,[qw.counter]),s,new Vbe(this.view,qw.pan),new qbe(this.view,qw.zoom),new Gbe(this.view,qw.rotate),a,new Z1e(this.view,"touch")],Hl.INTERNAL),this.view.viewEvents.connect(n),this._source=r,this._inputManager=n,this.addHandles([je((()=>this.view?.navigation?.browserTouchPanEnabled),(c=>{this._source&&(this._source.browserTouchPanningEnabled=!c)}),Hi),je((()=>{const{actionMap:c}=this.view.navigation;return{panActions:c8("pan",c),rotateActions:c8("rotate",c)}}),(({panActions:c,rotateActions:d})=>{s.pointerActions=c,a.pointerActions=d}),an)],b8)}get test(){}};u([p()],jd.prototype,"view",void 0),u([p()],jd.prototype,"latestPointerType",null),u([p()],jd.prototype,"latestPointerLocation",null),u([p()],jd.prototype,"multiTouchActive",null),jd=u([O("esri.views.2d.input.MapViewInputManager")],jd);const fwe=jd,mwe=e=>{let t=class extends e{constructor(...r){super(...r),this.goToManager=new sS({view:this}),this.inputManager=new fwe({view:this}),this.addHandles([this.on("resize",(i=>this.stateManager.resize(i.width,i.height)))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(r,i,n,s){return this.inputManager&&this.viewEvents.on(r,i,n,s)||super.on(r,i)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,i){return this.goToManager.goTo(r,i)}toMap(r){if(!this.ready)return null;const i=oZ(r)?sZ(this,r):r;return this.stateManager.toMap(i)}};return u([p()],t.prototype,"goToManager",void 0),u([p({readOnly:!0})],t.prototype,"interacting",null),u([p()],t.prototype,"stationary",null),u([p({readOnly:!0})],t.prototype,"inputManager",void 0),t=u([O("esri.views.Viewport2DMixin")],t),t};let w8=class{constructor(t){this._view=t,this.viewpoint=new Hs({targetGeometry:new Pe,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,r]=this._view.size;return Math.sqrt(t*t+r*r)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return UZ(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,r){r.pan=RG(this.center,t.center);let i=Math.abs(t.rotation-this.rotation);i=i>=180?360-i:i,r.rotate=D1(i),r.sourceZoom=this.scale,r.targetZoom=t.scale}interpolate(t,r,i){const{pan:n,rotate:s,zoom:a,zoomOffset:c}=i,{center:d}=this;d.spatialReference=t.center.spatialReference,d.x=_0(t.center.x,r.center.x,n),d.y=_0(t.center.y,r.center.y,n),this.viewpoint.scale=_0(t.scale,r.scale+c,a);let f=t.rotation;const g=r.rotation;Math.abs(g-f)>=180&&(f+=360*(f<g?1:-1)),this.viewpoint.rotation=_0(f,g,s)}copyFrom(t){Bi(this.viewpoint,t.viewpoint),this._view=t.view}};function r0(e,t,r,i){const n=3*e,s=3*(r-e)-n,a=1-n-s,c=3*t,d=3*(i-t)-c,f=1-c-d;function g(T){return((a*T+s)*T+n)*T}function v(T){return((f*T+d)*T+c)*T}function w(T){return(3*a*T+2*s)*T+n}function S(T,E){let M,R,I,k,j,P;for(I=T,P=0;P<8;P++){if(k=g(I)-T,Math.abs(k)<E)return I;if(j=w(I),Math.abs(j)<1e-6)break;I-=k/j}if(M=0,R=1,I=T,I<M)return M;if(I>R)return R;for(;M<R;){if(k=g(I),Math.abs(k-T)<E)return I;T>k?M=I:R=I,I=.5*(R-M)+M}return I}return function(T,E=1e-6){return v(S(T,E))}}const ks={};ks.ease=r0(.25,.1,.25,1),ks.linear=r0(0,0,1,1),ks.easeIn=ks["ease-in"]=r0(.42,0,1,1),ks.easeOut=ks["ease-out"]=r0(0,0,.58,1),ks.easeInOut=ks["ease-in-out"]=r0(.42,0,.58,1);const ywe=e=>e,u1=e=>e*e,A2=e=>1-u1(1-e),_8=e=>e<.5?u1(2*e)/2:(A2(2*(e-.5))+1)/2,O2=e=>e*e*e,PR=e=>1-O2(1-e),S8=e=>e<.5?O2(2*e)/2:(PR(2*(e-.5))+1)/2,R2=e=>e*e*e*e,LR=e=>1-R2(1-e),T8=e=>e<.5?R2(2*e)/2:(LR(2*(e-.5))+1)/2,C2=e=>e*e*e*e*e,DR=e=>1-C2(1-e),E8=e=>e<.5?C2(2*e)/2:(DR(2*(e-.5))+1)/2,I2=e=>1-Math.cos(e*Math.PI/2),kR=e=>1-I2(1-e),x8=e=>e<.5?I2(2*e)/2:(kR(2*(e-.5))+1)/2,N2=e=>2**(10*(e-1)),P2=e=>1-N2(1-e),$8=e=>e<.5?N2(2*e)/2:(P2(2*(e-.5))+1)/2,L2=e=>-(Math.sqrt(1-e*e)-1),FR=e=>1-L2(1-e),M8=e=>e<.5?L2(2*e)/2:(FR(2*(e-.5))+1)/2;function Qs(e){const t=2*(e-Math.sqrt((e-1)*e)),r=t/2/e;return i=>i<r?e*i*i:t*i-t+1}function Ks(e,t){return(r,i)=>r<t?t*e(r/t,i):1-e((1-r)/(1-t),i)*(1-t)}const A8=Ks(Qs(1),1),O8=Ks(Qs(1),0),D2=Ks(Qs(1),.5),R8=Ks(Qs(2),1),C8=Ks(Qs(2),0),I8=Ks(Qs(2),.5),N8=Ks(Qs(3),1),P8=Ks(Qs(3),0),L8=Ks(Qs(3),.5),D8=Ks(Qs(4),1),k8=Ks(Qs(4),0),F8=Ks(Qs(4),.5),U8={linear:ywe,"in-quad":u1,"out-quad":A2,"in-out-quad":_8,"in-coast-quad":A8,"out-coast-quad":O8,"in-out-coast-quad":D2,"in-cubic":O2,"out-cubic":PR,"in-out-cubic":S8,"in-coast-cubic":R8,"out-coast-cubic":C8,"in-out-coast-cubic":I8,"in-quart":R2,"out-quart":LR,"in-out-quart":T8,"in-coast-quart":N8,"out-coast-quart":P8,"in-out-coast-quart":L8,"in-quint":C2,"out-quint":DR,"in-out-quint":E8,"in-coast-quint":D8,"out-coast-quint":k8,"in-out-coast-quint":F8,"in-sine":I2,"out-sine":kR,"in-out-sine":x8,"in-expo":N2,"out-expo":P2,"in-out-expo":$8,"in-circ":L2,"out-circ":FR,"in-out-circ":M8,"quad-in":u1,"quad-out":A2,"quad-in-out":_8,"quad-in-coast":A8,"quad-out-coast":O8,"quad-in-out-coast":D2,"cubic-in":O2,"cubic-out":PR,"cubic-in-out":S8,"cubic-in-coast":R8,"cubic-out-coast":C8,"cubic-in-out-coast":I8,"quart-in":R2,"quart-out":LR,"quart-in-out":T8,"quart-in-coast":N8,"quart-out-coast":P8,"quart-in-out-coast":L8,"quint-in":C2,"quint-out":DR,"quint-in-out":E8,"quint-in-coast":D8,"quint-out-coast":k8,"quint-in-out-coast":F8,"sine-in":I2,"sine-out":kR,"sine-in-out":x8,"expo-in":N2,"expo-out":P2,"expo-in-out":$8,"circ-in":L2,"circ-out":FR,"circ-in-out":M8,ease:e=>ks.ease(e),"ease-in":e=>ks.easeIn(e),"ease-out":e=>ks.easeOut(e),"ease-in-out":e=>ks.easeInOut(e)};let gwe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const k2={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},vY={maxDuration:4e3};let vwe=class bY{constructor(t){this._createCamera=t,this.compared=new gwe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:k2.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new bY(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,r,i){this.source!==t&&this.source.copyFrom(t),this.target!==r&&this.target.copyFrom(r),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=i.desiredScreenFlow??k2.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const r=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/r}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>mn()}get hasFov(){return Math.abs(this.compared.fov)>mn()}get hasRotate(){return this.compared.rotate>mn()}},bwe=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},wwe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce(((t,r)=>t+r.time),0)}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),t*=this.time;let i=0,n=0;const s=this.definition,a=this.segments.reduce(((c,d)=>c||d.definition.hasZoom),!1);for(let c=0;c<this.segments.length;c++){const d=this.segments[c],f=d.definition;if(t<=d.time||c===this.segments.length-1){if(this.segmentInterpolateComponentsAt(d,d.time===0?0:t/d.time,r),s.hasPan&&!isNaN(r.pan)&&isFinite(s.compared.pan)?r.pan=(i+f.compared.pan*r.pan)/s.compared.pan:r.pan=1,s.hasRotate&&!isNaN(r.rotate)&&isFinite(s.compared.rotate)?r.rotate=(n+f.compared.rotate*r.rotate)/s.compared.rotate:r.rotate=1,a&&!isNaN(r.zoom)&&isFinite(f.compared.targetZoom)){const{sourceZoom:g,targetZoom:v}=f.compared,w=r.zoom*(v-g)+g,S=this.segments[0].definition.compared.sourceZoom,T=this.segments[this.segments.length-1].definition.compared.targetZoom,E=Math.abs(v-S)>Math.abs(g-S)?v:g;r.zoomOffset=E-T,r.zoom=(w-S)/(E-S)}else r.zoom=1;return r}t-=d.time,i+=f.compared.pan,n+=f.compared.rotate}}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i)}},kM=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,r=t.compared,i=r.sourceZoom,n=r.targetZoom;this._zoomSign=i>n?1:-1,this._panPixelsAtSource=r.pan*t.source.pixelsPerPanAtZoom(i);const s=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=r.rotate*s}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom,{hasZoom:i,hasPan:n,hasRotate:s}=this.definition;let a=0,c=0;i&&(n&&(a=(r/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(c=this._zoomSign*(Math.log(t/r)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const d=this.definition.desiredPixelFlow;if(i&&n&&s){const f=a+c+a*c;this._zoomPixelFlow=a*c/f*d,this._panPixelFlow=c/f*d,this._rotatePixelFlow=a/f*d}else if(i&&n){const f=1+a;this._zoomPixelFlow=a/f*d,this._panPixelFlow=1/f*d}else if(i&&s){const f=1+c;this._zoomPixelFlow=c/f*d,this._rotatePixelFlow=1/f*d}else if(n&&s){const f=this._panPixelsAtSource/this._rotatePixels,g=1+f;this._panPixelFlow=f/g*d,this._rotatePixelFlow=1/g*d}else n?this._panPixelFlow=d:i?this._zoomPixelFlow=d:s&&(this._rotatePixelFlow=d);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const f=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=f,this._panPixelFlow/=f,this._rotatePixelFlow/=f}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/_we:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,r=t*this._panPixelsAtSource;return Math.log(r*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const r=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(r*(r/i)**-t-r)/(i-r)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:r,segmentEnd:i}=this.definition;return r+t*(i-r)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const r=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(r*t*this._time)-1))/(r*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),r.zoom=this._interpolateComponentsZoom(t),r.pan=this._interpolateComponentsPan(t),r.rotate=this._interpolateComponentsRotate(t),r.zoomOffset=0,r.fov=this._interpolateComponentsFov(t)}};const _we=D1(45);function Swe(e,t,r){const i=t-e.compared.sourceZoom,n=e.halfWindowPanAtZoom(i);return-e.halfWindowSize*(r.ascensionFactor*Math.LN2*e.compared.pan+n)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*n)}function Twe(e,t,r){const i=1/t,n=Math.log(e.compared.sourceZoom*i),s=1/e.desiredPixelFlow,a=1/Math.LN2,c=t-e.compared.sourceZoom,d=1/c,f=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(c))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*s*a*d*f-e.halfWindowSize*n*s*a*d+e.halfWindowSize*n*s*a*f/(c*c)}function Ewe(e,t,r){const i=t-e.compared.sourceZoom,n=1/i,s=1/t,a=Math.log(e.compared.sourceZoom*s),c=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(i))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*s*c+2*n*a+2*s-2*a*c/(i*i)-c/(t*t))/(e.desiredPixelFlow*Math.LN2)}function xwe(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function $we(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function Mwe(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function Awe(e,t,r){return-e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function Owe(e,t,r){return e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function Rwe(e,t,r){return-2*e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function Cwe(e,t,r){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function Iwe(e,t,r){const i=Math.log(t/e.compared.targetZoom),n=1/e.desiredPixelFlow,s=1/Math.LN2,a=-t+e.compared.targetZoom,c=1/a,d=(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*i*n*s*c+e.halfWindowSize*i*n*s*d/(a*a)+e.halfWindowSize*n*s*c*d/t}function Nwe(e,t,r){const i=t-e.compared.targetZoom,n=1/i,s=1/t,a=Math.log(t/e.compared.targetZoom),c=(e.halfWindowPanAtZoom(t)+r.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*s*c-2*n*a+2*s+2*a*c/(i*i)-c/(t*t))/(e.desiredPixelFlow*Math.LN2)}function Pwe(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function Lwe(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function Dwe(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function kwe(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const r=Math.LN2*e.compared.pan,i=t,n=e.halfWindowPanAtZoom(i),s=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*n);return e.compared.sourceZoom<=e.compared.targetZoom?s*(r-n):s*(r+n)}function Fwe(e,t){let r=Uwe(e,t);const i={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},n=i.ascensionFactor===0,s=i.descensionFactor===0,a=n?xwe:Swe,c=n?$we:Twe,d=n?Mwe:Ewe,f=s?Pwe:Cwe,g=s?Lwe:Iwe,v=s?Dwe:Nwe,w=P=>a(e,P,i)+Awe(e,P,i)+f(e,P,i),S=P=>c(e,P,i)+Owe(e,P,i)+g(e,P,i),T=P=>d(e,P,i)+Rwe(e,P,i)+v(e,P,i);let E=w(r);const M=kwe(e);let R;const I=t.maximumIterations||20,k=t.maximumDistance!=null?t.maximumDistance:1/0;for(R=0;R<I;R++){const P=t.desiredSlope??1e-6;let X=S(r);Math.abs(X)>P&&(X+=P);const ae=X/T(r);if(isNaN(ae)||r>=k&&ae<0){if(!isFinite(k))return null;r=k,E=w(r);break}if(r-=ae,r<=e.compared.sourceZoom||r<=e.compared.targetZoom)return null;const fe=w(r);if(Math.abs(fe-E)/E<=.005)break;E=fe}return isNaN(E)||E>M*(1-.3)||r<=e.compared.sourceZoom||r<=e.compared.targetZoom?null:r}function Uwe(e,t){const r=Math.max(e.compared.sourceZoom,e.compared.targetZoom),i=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return i<r?t.maximumDistance!=null?r+(t.maximumDistance-r)/2:1.5*r:t.maximumDistance?Math.min(t.maximumDistance,i):i}let jwe=class extends wwe{constructor(t,r){super(),this._preallocSegments=[new kM,new kM,new kM],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,r)}update(t,r){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const i=r?.apex?Fwe(t,r.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,r?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i),t===this._ascensionSegment?i.zoom=A2(i.zoom):t===this._descensionSegment&&(i.zoom=u1(i.zoom))}_updateWithApex(t,r){const[i,n,s]=this._preallocSegments,a=r?.ascensionFactor??.5,c=Math.min(1-a,r?.ascensionFactor!=null&&r.descensionFactor!=null?r.descensionFactor:.5),d=1-a-c;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*a,i.definition.compared.rotate=this.definition.compared.rotate*a,i.definition.segmentEnd=a,i.update(),this._ascensionSegment=i,this.segments.push(i),d>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=t,n.definition.compared.targetZoom=t,n.definition.compared.pan=this.definition.compared.pan*d,n.definition.compared.rotate=this.definition.compared.rotate*d,n.definition.segmentStart=i.definition.segmentEnd,n.definition.segmentEnd=i.definition.segmentEnd+d,n.update(),this.segments.push(n)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=t,s.definition.compared.pan=this.definition.compared.pan*c,s.definition.compared.rotate=this.definition.compared.rotate*c,s.definition.segmentStart=a+d,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const zwe=new bwe;let Vwe=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=D2,this.definition=new vwe(t),this.path=new jwe}update(t,r,i){this.definition.update(t,r,i),this.path.update(this.definition,i),this._time=this._applyTimeSettings(pne(isFinite(this.path.time)?this.path.time:0),i),this._easing=i.easing??(this._time>=1e3?D2:P2)}cameraAt(t,r){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const i=this.path.interpolateComponentsAt(t,zwe);r.interpolate(this.definition.source,this.definition.target,i)}_normalizedEasing(t){const r=this._easing(0,this._time),i=this._easing(1,this._time);return(this._easing(t,this._time)-r)/(i-r)}_applyTimeSettings(t,r){const i=r.speedFactor!=null?r.speedFactor:1,n=r.minDuration??k2.minDuration/i,s=r.maxDuration??k2.maxDuration/i;return t=r.duration!=null?r.duration:Math.min(Math.max(t/i,n),s)}};const Gwe=2e3,qwe=64;let Bwe=class{constructor(t){this._view=t,this._animation=new Vwe((()=>new w8(this._view))),this._current=new w8(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,r,i={}){Bi(this._current.viewpoint,t),Bi(this._source.viewpoint,t),Bi(this._target.viewpoint,r),this._animation.update(this._source,this._target,i)}applyRatio(t,r){this._animation.cameraAt(r,this._current),Bi(t,this._current.viewpoint)}},ff=class extends Ae{constructor(t){super(t),this._animation=null,this._destinationViewState=new dP,this.updateFunction=null,this.easing=U8.ease,this.viewpoint=new Hs({targetGeometry:new Pe,scale:0,rotation:0}),this._updateTask=qm({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new Bwe(t.view)}destroy(){this._updateTask=ir(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,r,i){this.stop();const n=this.viewpoint;Bi(n,r);const s=t.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(r.scale,s.scale)*qwe,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:i?.duration,maxDuration:i?.animationMode==="auto"?1/0:i?.maxDuration??vY.maxDuration,speedFactor:i?.speedFactor,easing:(typeof i?.easing=="string"?U8[i.easing]:i?.easing)||this.easing}),i?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,Hwe(this._transition.animation,i,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const a=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,r){this.stop(),this.updateFunction=r,this.viewpoint=t;const i=new IR({target:t.clone()}),n=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){const r=this.animation;if(r&&r.state!==IR.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),this.animation?.update(this.viewpoint);else{const i=performance.now()-this._startTime,n=this._transition.duration,s=n>0?i/n:1,a=s>=1;this._transition.applyRatio(this.viewpoint,s),a&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function Hwe(e,t,r,i){if(t?.duration!=null)return!0;const{time:n,isLinear:s}=e,a=t?.speedFactor||1;if(n>(t?.maxDuration??vY.maxDuration/a))return!1;if(s){const d=cr(),f=bi(...i.toScreen(d,...r.center)),g=bi(...r.toScreen(d,...i.center)),v=g!=null&&g.x>-1*r.size[0]&&g.x<(1.5+.5)*r.size[0]&&g.y>-1*r.size[1]&&g.y<(1.5+.5)*r.size[1],w=f!=null&&f.x>-1*i.size[0]&&f.x<(1.5+.5)*i.size[0]&&f.y>-1*i.size[1]&&f.y<(1.5+.5)*i.size[1];if(n>Gwe/a&&!v&&!w)return!1}return!0}u([p()],ff.prototype,"easing",void 0),u([p()],ff.prototype,"view",void 0),u([p()],ff.prototype,"viewpoint",void 0),ff=u([O("esri.views.2d.AnimationManager")],ff);const Wwe=ff;function Bt(){return Promise.all([ue(()=>import("./webglDeps-BRJcUMEO.js"),__vite__mapDeps([188,189,7,190,191])),ue(()=>import("./mapViewDeps-4637_grB.js"),__vite__mapDeps([192,120,85,86,29,7,87,88,89,90,84,57,193,94,194,190,189,158,136,195,91,196,110,197,143,142,97,33,34,92,98,198,95,96,199,20,141,188,191,200,105,201,202,203,155,152,134,204,73,83,31,26,37,205,206,93,207,100,208,102,62,81,209,210,211,212,151,213,214]))])}const i0=()=>Bt().then((()=>ue(()=>import("./TileLayerView2D-D_aGb7iz.js"),__vite__mapDeps([215,120,89,85,86,29,7,87,88,90,84,57,199,20,197,196,189,110,143,142,97,33,34,141,200,194,190,158,136,195,91,105,201,202,73,94,193,92,98,95,96,155,152,134,208,83,31,26,37,102,62,81,216,217,218,212,219,176,220,210,211,221,222,223,224,225,226])))),gd=()=>Bt().then((()=>ue(()=>import("./FeatureLayerView2D-DcED_P3C.js").then(e=>e.F),__vite__mapDeps([227,197,33,29,7,34,228,229,230,31,26,40,219,176,211,85,86,87,88,89,90,84,57,190,189,212,196,110,143,142,97,193,94,194,158,136,195,91,92,98,105,198,231,104,223,226,221])))),j8={"base-dynamic":()=>Bt().then((()=>ue(()=>import("./BaseDynamicLayerView2D-Cc7m5oBt.js"),__vite__mapDeps([232,233,196,84,57,189,7,110,197,143,142,97,33,29,34,217,194,190,158,136,94,218,219,176,234,221])))),"base-tile":i0,"bing-maps":i0,catalog:()=>Bt().then((()=>ue(()=>import("./CatalogLayerView2D-B_g_PgqT.js"),__vite__mapDeps([235,219,197,176])))),"catalog-dynamic-group":()=>Bt().then((()=>ue(()=>import("./CatalogDynamicGroupLayerView2D-B_Uhnb75.js"),__vite__mapDeps([236,219,197,176])))),"catalog-footprint":()=>Bt().then((()=>ue(()=>import("./CatalogFootprintLayerView2D-rRIj3yd1.js"),__vite__mapDeps([237,227,197,33,29,7,34,228,229,230,31,26,40,219,176,211,85,86,87,88,89,90,84,57,190,189,212,196,110,143,142,97,193,94,194,158,136,195,91,92,98,105,198,231,104,223,226,221])))),csv:gd,"geo-rss":()=>Bt().then((()=>ue(()=>import("./GeoRSSLayerView2D-CBm0-idV.js"),__vite__mapDeps([238,219,197,176,209,210,211,85,86,29,7,87,88,89,90,84,57,190,189,212,196,110,143,142,97,33,34,193,94,194,158,136,195,91,92,98,208,199,120,20,83,31,26,37,102,62,81])))),feature:gd,geojson:gd,parquet:gd,graphics:()=>Bt().then((()=>ue(()=>import("./GraphicsLayerView2D-D0HUEIqM.js"),__vite__mapDeps([239,219,197,176,209,210,211,85,86,29,7,87,88,89,90,84,57,190,189,212,196,110,143,142,97,33,34,193,94,194,158,136,195,91,92,98,208,199,120,20,83,31,26,37,102,62,81])))),group:()=>Bt().then((()=>ue(()=>import("./GroupLayerView2D-B-eardHG.js"),__vite__mapDeps([240,219,197,176])))),imagery:()=>Bt().then((()=>ue(()=>import("./ImageryLayerView2D-BFgJMLkS.js"),__vite__mapDeps([241,242,189,7,57,118,196,84,110,197,143,142,97,33,29,34,219,176,208,85,86,87,88,89,90,199,120,20,83,91,31,26,37,193,94,194,190,158,136,195,92,98,102,62,81,220,210,211,212,233,217,218,234,123,228,226,221])))),"imagery-tile":()=>Bt().then((()=>ue(()=>import("./ImageryTileLayerView2D-Byv16E7E.js"),__vite__mapDeps([243,244,242,189,7,57,118,196,84,110,197,143,142,97,33,29,34,219,176,122,245,212,194,190,158,136,94,218,195,91,246,123,228,226,221])))),kml:()=>Bt().then((()=>ue(()=>import("./KMLLayerView2D-D05fCurm.js"),__vite__mapDeps([247,248,217,197,194,190,189,7,158,136,94,218,233,196,84,57,110,143,142,97,33,29,34,219,176,209,210,211,85,86,87,88,89,90,212,193,195,91,92,98,208,199,120,20,83,31,26,37,102,62,81,207,100,123,203,188,191,155,152,134,201,245])))),"knowledge-graph":()=>Bt().then((()=>ue(()=>import("./KnowledgeGraphLayerView2D-DZ95etrv.js"),__vite__mapDeps([249,219,197,176])))),"link-chart":()=>Bt().then((()=>ue(()=>import("./KnowledgeGraphLayerView2D-DZ95etrv.js"),__vite__mapDeps([249,219,197,176])))),"knowledge-graph-sublayer":gd,"map-image":()=>Bt().then((()=>ue(()=>import("./MapImageLayerView2D-2KKdprWG.js"),__vite__mapDeps([250,233,196,84,57,189,7,110,197,143,142,97,33,29,34,217,194,190,158,136,94,218,219,176,208,85,86,87,88,89,90,199,120,20,83,91,31,26,37,193,195,92,98,102,62,81,220,210,211,212,234,251,223,225,228,221,222,224,226])))),"map-notes":()=>Bt().then((()=>ue(()=>import("./MapNotesLayerView2D-D9h2Ru4O.js"),__vite__mapDeps([252,219,197,176,209,210,211,85,86,29,7,87,88,89,90,84,57,190,189,212,196,110,143,142,97,33,34,193,94,194,158,136,195,91,92,98,208,199,120,20,83,31,26,37,102,62,81])))),media:()=>Bt().then((()=>ue(()=>import("./MediaLayerView2D-Bk-_0FBp.js"),__vite__mapDeps([253,254,102,62,120,89,85,86,29,7,87,88,90,84,57,199,20,197,196,189,110,143,142,97,33,34,141,200,194,190,158,136,195,91,105,201,202,73,94,193,92,98,95,96,155,152,134,208,83,31,26,37,81,205,255,206,219,176])))),"ogc-feature":()=>Bt().then((()=>ue(()=>import("./OGCFeatureLayerView2D-D0NDyTLs.js"),__vite__mapDeps([256,227,197,33,29,7,34,228,229,230,31,26,40,219,176,211,85,86,87,88,89,90,84,57,190,189,212,196,110,143,142,97,193,94,194,158,136,195,91,92,98,105,198,231,104,223,226,221])))),"open-street-map":i0,"oriented-imagery":gd,route:()=>Bt().then((()=>ue(()=>import("./RouteLayerView2D-BOoHLNfd.js"),__vite__mapDeps([257,258,259,219,197,176,209,210,211,85,86,29,7,87,88,89,90,84,57,190,189,212,196,110,143,142,97,33,34,193,94,194,158,136,195,91,92,98,208,199,120,20,83,31,26,37,102,62,81])))),stream:()=>Bt().then((()=>ue(()=>import("./StreamLayerView2D-Jp0comTP.js"),__vite__mapDeps([260,227,197,33,29,7,34,228,229,230,31,26,40,219,176,211,85,86,87,88,89,90,84,57,190,189,212,196,110,143,142,97,193,94,194,158,136,195,91,92,98,105,198,231,104,223,226,221])))),"subtype-group":()=>Bt().then((()=>ue(()=>import("./SubtypeGroupLayerView2D-CKHuch4B.js"),__vite__mapDeps([261,227,197,33,29,7,34,228,229,230,31,26,40,219,176,211,85,86,87,88,89,90,84,57,190,189,212,196,110,143,142,97,193,94,194,158,136,195,91,92,98,105,198,231,104,223,226,221])))),tile:i0,"vector-tile":()=>Bt().then((()=>ue(()=>import("./VectorTileLayerView2D-BKkWu3ZV.js"),__vite__mapDeps([262,141,90,73,7,88,89,202,142,87,143,189,196,84,57,110,197,97,33,29,34,212,43,144,145,120,219,176,221])))),video:()=>Bt().then((()=>ue(()=>import("./VideoLayerView2D-Dk2kO2g0.js"),__vite__mapDeps([263,264,265,170,169,255,110,196,84,57,189,7,197,143,142,97,33,29,34,193,85,86,87,88,89,90,94,194,190,158,136,195,91,92,98,206,219,176,209,210,211,212,208,199,120,20,83,31,26,37,102,62,81])))),wcs:()=>Bt().then((()=>ue(()=>import("./ImageryTileLayerView2D-Byv16E7E.js"),__vite__mapDeps([243,244,242,189,7,57,118,196,84,110,197,143,142,97,33,29,34,219,176,122,245,212,194,190,158,136,94,218,195,91,246,123,228,226,221])))),"web-tile":i0,wfs:gd,wms:()=>Bt().then((()=>ue(()=>import("./WMSLayerView2D-Bj3BJLxk.js"),__vite__mapDeps([266,233,196,84,57,189,7,110,197,143,142,97,33,29,34,217,194,190,158,136,94,218,219,176,234,221,267,228])))),wmts:()=>Bt().then((()=>ue(()=>import("./WMTSLayerView2D-BqncPYJK.js"),__vite__mapDeps([268,216,217,197,194,190,189,7,158,136,94,218,196,84,57,110,143,142,97,33,29,34,212,219,176,221])))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function Zwe(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new z(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const z8={hasLayerViewModule:e=>j8[e.type]!=null,importLayerView:e=>{const t=j8[e.type];if(t==null)throw Zwe(e);return t(e)}};var as;let $y=(as=class{static getId(t,r,i,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${i}/${n}`}constructor(t,r,i,n){this.set(t,r,i,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|t<<8|i}acquire(t,r,i,n){this.set(t,r,i,n)}contains(t){const r=t.level-this.level;return r>=0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}containsChild(t){const r=t.level-this.level;return r>0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new as(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,i,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[s,a,c,d]=t.split("/");this.level=parseFloat(s),this.row=parseFloat(a),this.col=parseFloat(c),this.world=parseFloat(d)}else this.level=+t,this.row=+r,this.col=+i,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new as(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,r,i){const n=this.clone();return n.col+=t,n.row+=r,i.normalizeKey(n),n}getChildKeys(){const t=this.level+1,r=this.row<<1,i=this.col<<1,n=this.world;return[new as(t,r,i,n),new as(t,r,i+1,n),new as(t,r+1,i,n),new as(t,r+1,i+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}},as.pool=new fy(as,null,null,25,50),as);function Zp(e,t){return[e,t]}function vd(e,t,r){return e[0]=t,e[1]=r,e}function Ywe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}const fo=new $y("0/0/0/0");let Jwe=class wY{static create(t,r,i=null){const n=fn(t.spatialReference),s=r.origin||Zp(t.origin.x,t.origin.y),a=Zp(t.size[0]*r.resolution,t.size[1]*r.resolution),c=Zp(-1/0,-1/0),d=Zp(1/0,1/0),f=Zp(1/0,1/0);i!=null&&(vd(c,Math.max(0,Math.floor((i.xmin-s[0])/a[0])),Math.max(0,Math.floor((s[1]-i.ymax)/a[1]))),vd(d,Math.max(0,Math.floor((i.xmax-s[0])/a[0])),Math.max(0,Math.floor((s[1]-i.ymin)/a[1]))),vd(f,d[0]-c[0]+1,d[1]-c[1]+1));const{cols:g,rows:v}=r;let w,S,T,E;return!i&&g&&v&&(vd(c,g[0],v[0]),vd(d,g[1],v[1]),vd(f,g[1]-g[0]+1,v[1]-v[0]+1)),t.isWrappable?(w=Zp(Math.ceil(Math.round((n.valid[1]-n.valid[0])/r.resolution)/t.size[0]),f[1]),S=!0,T=n.origin,E=n.valid):(w=f,S=!1),new wY(r.level,r.resolution,r.scale,s,c,d,f,a,w,S,T,E)}constructor(t,r,i,n,s,a,c,d,f,g,v,w){this.level=t,this.resolution=r,this.scale=i,this.origin=n,this.first=s,this.last=a,this.size=c,this.norm=d,this.worldSize=f,this.wrap=g,this._spatialReferenceOrigin=v,this._spatialReferenceValid=w}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}normalizeKey(t){if(!this.wrap)return;const r=this.worldSize[0],i=t.col;i<0?(t.col=i+r,t.world-=1):i>=r&&(t.col=i-r,t.world+=1)}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const r=this.origin[0]+t*this.norm[0],i=this._spatialReferenceOrigin,n=this._spatialReferenceValid;return this.wrap&&i&&n?r===i[0]?n[0]:this.origin[0]===i[0]&&t===this.worldSize[0]?n[1]:r:r}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,i=!1){fo.set(r);const n=i?fo.col:this.denormalizeCol(fo.col,fo.world),s=fo.row;return Ywe(t,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),t}getTileCoords(t,r,i=!1){fo.set(r);const n=i?fo.col:this.denormalizeCol(fo.col,fo.world);return Array.isArray(t)?vd(t,this.getXForColumn(n),this.getYForRow(fo.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(fo.row)),t}};var Mh;let fP=(Mh=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:r,colFrom:i,colTo:n}of this.spans)for(let s=i;s<=n;s++){const a=t.getWorldForColumn(s);yield new $y(t.level,r,t.normalizeCol(s),a)}}forEach(t,r){const{spans:i,lodInfo:n}=this,{level:s}=n;if(i.length!==0)for(const{row:a,colFrom:c,colTo:d}of i)for(let f=c;f<=d;f++)t.call(r,s,a,n.normalizeCol(f),n.getWorldForColumn(f))}},Mh.pool=new fy(Mh),Mh),FM=class{constructor(t,r,i){this.row=t,this.colFrom=r,this.colTo=i}};const Jt=new $y("0/0/0/0");let Xwe=class _Y{static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[i,n]=t,[s,a]=r,c=s-i,d=a-n,f=d!==0?c/d:0,g=(Math.ceil(n)-n)*f,v=(Math.floor(n)-n)*f;return new _Y(i,Math.floor(n),Math.ceil(a),f,c<0?g:v,c<0?v:g,c<0?s:i,c<0?i:s)}constructor(t,r,i,n,s,a,c,d){this.x=t,this.ymin=r,this.ymax=i,this.invM=n,this.leftAdjust=s,this.rightAdjust=a,this.leftBound=c,this.rightBound=d}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Jn=[[0,0],[0,0],[0,0],[0,0]],Qwe=1e-6;let Kwe=class{constructor(t,r=null,i=t.lods[0].level,n=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=t.lods.filter((c=>c.level>=i&&c.level<=n));this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const a=this._lodInfos=s.map((c=>Jwe.create(t,c,r)));s.forEach(((c,d)=>{this._infoByLevel[c.level]=a[d],this._infoByScale[c.scale]=a[d],this.scales[d]=c.scale}),this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,r,i=!1){Jt.set(r);const n=this._infoByLevel[Jt.level];return n?n.getTileBounds(t,Jt,i):t}getTileCoords(t,r,i=!1){Jt.set(r);const n=this._infoByLevel[Jt.level];return n?n.getTileCoords(t,Jt,i):t}getTileCoverage(t,r=192,i=!0,n="closest"){if(!i&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),a=fP.pool.acquire(s),c=this._wrap;let d,f,g,v=1/0,w=-1/0;const S=a.spans;Jn[0][0]=Jn[0][1]=Jn[1][1]=Jn[3][0]=-r,Jn[1][0]=Jn[2][0]=t.size[0]+r,Jn[2][1]=Jn[3][1]=t.size[1]+r;for(const R of Jn)t.toMap(R,R),R[0]=s.getColumnForX(R[0]),R[1]=s.getRowForY(R[1]);const T=[];let E=3;for(let R=0;R<4;R++){if(Jn[R][1]===Jn[E][1]){E=R;continue}const I=Xwe.create(Jn[R],Jn[E]);v=Math.min(I.ymin,v),w=Math.max(I.ymax,w),T[I.ymin]===void 0&&(T[I.ymin]=[]),T[I.ymin].push(I),E=R}if(v==null||w==null||w-v>100)return null;let M=[];for(d=v;d<w;){T[d]!=null&&(M=M.concat(T[d])),f=1/0,g=-1/0;for(let R=M.length-1;R>=0;R--){const I=M[R];f=Math.min(f,I.getLeftCol()),g=Math.max(g,I.getRightCol())}if(f=Math.floor(f),g=Math.floor(g),d>=s.first[1]&&d<=s.last[1])if(c)if(s.size[0]<s.worldSize[0]){const R=Math.floor(g/s.worldSize[0]);for(let I=Math.floor(f/s.worldSize[0]);I<=R;I++)S.push(new FM(d,Math.max(s.getFirstColumnForWorld(I),f),Math.min(s.getLastColumnForWorld(I),g)))}else S.push(new FM(d,f,g));else f>s.last[0]||g<s.first[0]||(f=Math.max(f,s.first[0]),g=Math.min(g,s.last[0]),S.push(new FM(d,f,g)));d+=1;for(let R=M.length-1;R>=0;R--){const I=M[R];I.ymax>=d?I.incrRow():M.splice(R,1)}}return a}getTileParentId(t){Jt.set(t);const r=this._infoByLevel[Jt.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(Jt,this._lodInfos[i],Jt),Jt.id)}getTileResolution(t){const r=this._infoByLevel[typeof t=="object"?t.level:t];return r?r.resolution:-1}getTileScale(t){const r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){Jt.set(r);const i=this._infoByLevel[Jt.level],n=t.lodInfo;if(n.resolution>i.resolution){this._getTileIdAtLOD(Jt,n,Jt);const a=n.denormalizeCol(Jt.col,Jt.world);for(const c of t.spans)if(c.row===Jt.row&&c.colFrom<=a&&c.colTo>=a)return!0}if(n.resolution<i.resolution){const[a,c,d,f]=t.spans.reduce(((E,M)=>(E[0]=Math.min(E[0],M.row),E[1]=Math.max(E[1],M.row),E[2]=Math.min(E[2],M.colFrom),E[3]=Math.max(E[3],M.colTo),E)),[1/0,-1/0,1/0,-1/0]),g=i.denormalizeCol(Jt.col,Jt.world),v=n.getColumnForX(i.getXForColumn(g)),w=n.getRowForY(i.getYForRow(Jt.row)),S=n.getColumnForX(i.getXForColumn(g+1))-1,T=n.getRowForY(i.getYForRow(Jt.row+1))-1;return!(v>f||S<d||w>c||T<a)}const s=n.denormalizeCol(Jt.col,Jt.world);return t.spans.some((a=>a.row===Jt.row&&a.colFrom<=s&&a.colTo>=s))}normalizeBounds(t,r,i){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){const n=fn(this.tileInfo.spatialReference),s=-i*(n.valid[1]-n.valid[0]);t[0]+=s,t[2]+=s}return t}getSmallestInfoForScale(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(t>r[i]+Qwe)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){const r=this.scales;return this._infoByScale[t]||(t=r.reduce(((i,n)=>Math.abs(n-t)<Math.abs(i-t)?n:i),r[0])),this._infoByScale[t]}scaleToLevel(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=r.length-1;i>=0;i--)if(t<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-t)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,r,i){const n=this._infoByLevel[i.level];return t.set(i),r.resolution<n.resolution?null:(r.resolution===n.resolution||(t.level=r.level,t.col=Math.floor(i.col*n.resolution/r.resolution+.01),t.row=Math.floor(i.row*n.resolution/r.resolution+.01)),t)}},e_e=class{constructor(t,r){this.item=t,this.controller=r,this.promise=null}},t_e=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new tS,this._controllers=new tS,this._processingItems=new tS,this._pausedSignal=ey(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new t1(t.peeker),this.process=t.process;const r=t.scheduler;t.priority&&r&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=ir(this._schedule),this._task=ir(this._task)}get updating(){return!!this._task?.updating||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach((r=>t.push(r))),this._controllers.clear(),t.forEach((r=>r.abort())),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach(((r,i)=>t(i)))}get(t){const r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,r){const i=this.get(t);if(i)return i;const n=new AbortController;let s=null;r&&(s=jo(r,(()=>n.abort())));const a=()=>{const g=this._processingItems.get(t);g&&g.controller.abort(),c(),f.reject(Zt())},c=()=>{d.remove(),s?.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},d=PI(n.signal,a),f=ys();return this._deferreds.set(t,f),this._controllers.set(t,n),f.promise.then(c,c),this._queue.push(t),this._scheduleNext(),f.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){const t=this._queue.popLast();return t&&(this._deferreds.get(t)?.reject(Zt()),this._removeItem(t)),t}reset(){const t=Array.from(this._processingItems.values());this._processingItems.clear();for(const r of t)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=A1((()=>{this._schedule=null,this._next()})))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let r;const i=new AbortController,n=new e_e(t,i);this._processingItems.set(t,n);try{r=this.process(t,i.signal)}catch(s){this._processError(n,s)}Ia(r)?(n.promise=r,r.then((s=>this._processResult(n,s)),(s=>this._processError(n,s)))):this._processResult(n,r)}get test(){}};const V8=[0,0];let fl=class extends Ae{constructor(t){super(t),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:t,process:r,scheduler:i,priority:n}=this;this._queue=new t_e({concurrency:t,scheduler:i,priority:n,process:(s,a)=>{const c=this._keyToItem.get(s);return r(c,{signal:a})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=rr(this._queue)}get length(){return this._queue?this._queue.length:0}abort(t){const r=typeof t=="string"?t:t.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}pause(){this._queue.pause()}push(t){const r=t.key.id;if(this._queue.has(r))return this._queue.get(r);const i=this._queue.push(r),n=this.tileInfoView.getTileScale(t.key),s=dy(this._tilesByScale,n,(()=>new Set)),a=()=>{s.delete(t.key),s.size===0&&this._tilesByScale.delete(n),this._keyToItem.delete(r)};return s.add(t.key),this._keyToItem.set(r,t),i.then(a,a),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(t){if(!this.state)return t.values().next().value;const r=new Set;for(const a of t)r.add(this._keyToItem.get(a).key);const i=this.state.scale;let n,s=Number.POSITIVE_INFINITY;for(const[a,c]of this._tilesByScale)if(NV(c,(d=>r.has(d)))){const d=Math.abs(a-i);d<s&&(n=c,s=d)}return this._getClosestTileKey(n,t).id}_getClosestTileKey(t,r){const i=this.tileInfoView,n=this.state.center;let s,a=Number.POSITIVE_INFINITY;for(const c of t)if(r.has(c.id)){i.getTileCoords(V8,c);const d=WT(V8,n);d<a&&(a=d,s=c)}return s}};u([p({constructOnly:!0})],fl.prototype,"concurrency",void 0),u([p({constructOnly:!0})],fl.prototype,"priority",void 0),u([p({constructOnly:!0})],fl.prototype,"process",void 0),u([p({constructOnly:!0})],fl.prototype,"scheduler",void 0),u([p()],fl.prototype,"state",void 0),u([p({constructOnly:!0})],fl.prototype,"tileInfoView",void 0),fl=u([O("esri.views.2d.tiling.TileQueue")],fl);const $De=fl;let r_e=class{constructor(t,r,i){this.maxSize=t,this._tileInfoView=r,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const r=this._tilePerId.get(t);if(!r)return;const i=r.key.level,n=this._tileKeysPerLevel[i];G8(this._tilePerId,t);for(let s=0;s<n.length;s++)if(n[s].id===t){n.splice(s,1);break}return r.visible=!0,r}add(t){t.visible=!1;const r=t.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);const n=r.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(r)}prune(t,r,i){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==t&&(n=this._pruneAroundCenterTile(n,r,i,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,r,i,t))}_pruneAroundCenterTile(t,r,i,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return t;const{size:a,origin:c}=this._tileInfoView.tileInfo,d=i*a[0],f=i*a[1],g=[0,0],v=[0,0];for(s.sort(((w,S)=>(g[0]=c.x+d*(w.col+.5),g[1]=c.y-f*(w.row+.5),v[0]=c.x+d*(S.col+.5),v[1]=c.y-f*(S.row+.5),E2(g,r)-E2(v,r))));s.length>0;){const w=s.pop();if(this._removeTile(w.id),--t===this.maxSize)break}return t}_removeTile(t){const r=this._tilePerId.get(t);this._removedFunc&&r&&this._removedFunc(r),G8(this._tilePerId,t)}};function G8(e,t){e.delete(t)}const bd=new $y(0,0,0,0),Ka=new Map,n0=[],UM=[];let ADe=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new r_e(t.cacheSize,this.tileInfoView,(r=>{this.releaseTile(r)})))}destroy(){this.tileIndex.clear()}update(t){const{resampling:r,tileIndex:i}=this,{scale:n,center:s,resolution:a}=t.state,{minScale:c,maxScale:d}=this.tileInfoView,f=!t.stationary&&n>this._previousScale;if(this._previousScale=n,!r&&(n>c||n<d))return this.tiles.length=0,void this.clear();const g=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!g)return this.tiles.length=0,void this.clear();const{spans:v,lodInfo:w}=g,{level:S}=w;this.tiles.length=0,i.forEach((R=>R.visible=!0));let T=0,E=0;if(v.length>0)for(const{row:R,colFrom:I,colTo:k}of v)for(let j=I;j<=k;j++){T++;const P=bd.set(S,R,w.normalizeCol(j),w.getWorldForColumn(j)).id;let X=i.get(P);if(X)X.isReady?(Ka.set(P,X),E++):f||this._addParentTile(P,Ka);else{if(this._tileCache?.has(P)){if(X=this._tileCache.pop(P),this.tileIndex.set(P,X),X.isReady){Ka.set(P,X),E++;continue}}else X=this.acquireTile(bd),this.tileIndex.set(P,X);f||this._addParentTile(P,Ka)}}const M=E===T;for(const[R,I]of i){if(Ka.has(R))continue;bd.set(R);const k=this.tileInfoView.intersects(g,bd),j=this.cachePolicy==="purge"?bd.level!==S:bd.level>S;!k||!f&&M?!j&&k||n0.push(I):I.isReady?j&&this.cachePolicy==="purge"&&this._hasReadyAncestor(bd,S)?n0.push(I):UM.push(I):j&&n0.push(I)}for(const R of UM)R.isReady&&Ka.set(R.key.id,R);for(const R of n0)this._tileCache?this._tileCache.add(R):this.releaseTile(R),i.delete(R.key.id);for(const R of Ka.values())this.tiles.push(R);for(const R of i.values())Ka.has(R.key.id)||(R.visible=!1);this._tileCache?.prune(S,s,a),fP.pool.release(g),UM.length=0,n0.length=0,Ka.clear()}clear(){const{tileIndex:t}=this;for(const r of t.values())this.releaseTile(r);t.clear()}refresh(t){for(const r of this.tileIndex.values())t(r);this._tileCache?.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){let i=t,n=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(n=this.tileIndex.get(i),n?.isReady){r.has(n.key.id)||r.set(n.key.id,n);break}}else if(this._tileCache?.has(i)&&(n=this._tileCache.pop(i),this.tileIndex.set(i,n),n?.isReady)){r.has(n.key.id)||r.set(n.key.id,n);break}}_hasReadyAncestor(t,r){const i=pn();this.tileInfoView.getTileBounds(i,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=r&&n.key.level<t.level){const s=pn();if(this.tileInfoView.getTileBounds(s,n.key,!0),Pce(s,i))return!0}return!1}},i_e=class{constructor(t,r={}){this.events=new Na,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,t!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),t.contains(this._canvas)||t.appendChild(this._canvas)):r.canvas!=null&&(this._canvas=r.canvas);const i={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let n=this._canvas.getContext("webgl2",i);n||(n=this._canvas.getContext("webgl2",{...i,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=n,this._handles=Zh([py(this._canvas,"webglcontextlost",(s=>this.events.emit("webgl-context-lost",s)))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(t,r){if(this._hasMajorPerformanceCaveat||V("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=V("esri-performance-mode-frames-between-render")&&(r(),this._lastRenderViewState=t.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[i,n,s,a,c,d]=this._computeViewTransform(this._lastRenderViewState,t.state);this._canvas.style.transform=`matrix(${i}, ${n}, ${s}, ${a}, ${c}, ${d})`}}else r()}resize(t){const r=this._canvas,i=r.style,{state:{size:n},pixelRatio:s}=t,a=n[0],c=n[1],d=Math.round(a*s),f=Math.round(c*s);r.width===d&&r.height===f||(r.width=d,r.height=f),i.width=a+"px",i.height=c+"px"}_computeViewTransform(t,r){const[i,n]=t.center,[s,a]=r.center,[c,d]=t.toScreen([0,0],s,a),[f,g]=t.toScreen([0,0],i,n),v=f-c,w=g-d,S=t.scale/r.scale,T=r.rotation-t.rotation,E=Ea();return MZ(E),ZT(E,E,[S,S]),Z1(E,E,D1(T)),iy(E,E,[v,w]),E}};function n_e(e,t,r,i,n){SY(e,t,r||0,i||e.length-1,n||s_e)}function SY(e,t,r,i,n){for(;i>r;){if(i-r>600){var s=i-r+1,a=t-r+1,c=Math.log(s),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(s-d)/s)*(a-s/2<0?-1:1);SY(e,t,Math.max(r,Math.floor(t-a*d/s+f)),Math.min(i,Math.floor(t+(s-a)*d/s+f)),n)}var g=e[t],v=r,w=i;for(s0(e,r,t),n(e[i],g)>0&&s0(e,r,i);v<w;){for(s0(e,v,w),v++,w--;n(e[v],g)<0;)v++;for(;n(e[w],g)>0;)w--}n(e[r],g)===0?s0(e,r,w):s0(e,++w,i),w<=t&&(r=w+1),t<=w&&(i=w-1)}}function s0(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function s_e(e,t){return e<t?-1:e>t?1:0}function F2(e,t){if(!(this instanceof F2))return new F2(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function o_e(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++)if(r(e,t[i]))return i;return-1}function Yp(e,t){Z0(e,0,e.children.length,t,e)}function Z0(e,t,r,i,n){n||(n=mf(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,a=t;a<r;a++)s=e.children[a],Y0(n,e.leaf?i(s):s);return n}function Y0(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function q8(e,t){return e.minX-t.minX}function B8(e,t){return e.minY-t.minY}function jM(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Bw(e){return e.maxX-e.minX+(e.maxY-e.minY)}function a_e(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function l_e(e,t){var r=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,n-r)*Math.max(0,s-i)}function zM(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Hw(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function mf(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function H8(e,t,r,i,n){for(var s,a=[t,r];a.length;)(r=a.pop())-(t=a.pop())<=i||(s=t+Math.ceil((r-t)/i/2)*i,n_e(e,s,t,r,n),a.push(t,s,s,r))}F2.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],i=this.toBBox;if(!Hw(e,t))return r;for(var n,s,a,c,d=[];t;){for(n=0,s=t.children.length;n<s;n++)a=t.children[n],Hw(e,c=t.leaf?i(a):a)&&(t.leaf?r.push(a):zM(e,c)?this._all(a,r):d.push(a));t=d.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!Hw(e,t))return!1;for(var i,n,s,a,c=[];t;){for(i=0,n=t.children.length;i<n;i++)if(s=t.children[i],Hw(e,a=t.leaf?r(s):s)){if(t.leaf||zM(e,a))return!0;c.push(s)}t=c.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=mf([]),this},remove:function(e,t){if(e==null)return this;for(var r,i,n,s,a=this.data,c=this.toBBox(e),d=[],f=[];a||d.length;){if(a||(a=d.pop(),i=d[d.length-1],r=f.pop(),s=!0),a.leaf&&(n=o_e(e,a.children,t))!==-1)return a.children.splice(n,1),d.push(a),this._condense(d),this;s||a.leaf||!zM(a,c)?i?(r++,a=i.children[r],s=!1):a=null:(d.push(a),f.push(r),r=0,i=a,a=a.children[0])}return this},toBBox:function(e){return e},compareMinX:q8,compareMinY:B8,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var n,s=r-t+1,a=this._maxEntries;if(s<=a)return Yp(n=mf(e.slice(t,r+1)),this.toBBox),n;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),(n=mf([])).leaf=!1,n.height=i;var c,d,f,g,v=Math.ceil(s/a),w=v*Math.ceil(Math.sqrt(a));for(H8(e,t,r,w,this.compareMinX),c=t;c<=r;c+=w)for(H8(e,c,f=Math.min(c+w-1,r),v,this.compareMinY),d=c;d<=f;d+=v)g=Math.min(d+v-1,f),n.children.push(this._build(e,d,g,i-1));return Yp(n,this.toBBox),n},_chooseSubtree:function(e,t,r,i){for(var n,s,a,c,d,f,g,v;i.push(t),!t.leaf&&i.length-1!==r;){for(g=v=1/0,n=0,s=t.children.length;n<s;n++)d=jM(a=t.children[n]),(f=a_e(e,a)-d)<v?(v=f,g=d<g?d:g,c=a):f===v&&d<g&&(g=d,c=a);t=c||t.children[0]}return t},_insert:function(e,t,r){var i=this.toBBox,n=r?e:i(e),s=[],a=this._chooseSubtree(n,this.data,t,s);for(a.children.push(e),Y0(a,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)},_split:function(e,t){var r=e[t],i=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,i);var s=this._chooseSplitIndex(r,n,i),a=mf(r.children.splice(s,r.children.length-s));a.height=r.height,a.leaf=r.leaf,Yp(r,this.toBBox),Yp(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(r,a)},_splitRoot:function(e,t){this.data=mf([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Yp(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var i,n,s,a,c,d,f,g;for(d=f=1/0,i=t;i<=r-t;i++)a=l_e(n=Z0(e,0,i,this.toBBox),s=Z0(e,i,r,this.toBBox)),c=jM(n)+jM(s),a<d?(d=a,g=i,f=c<f?c:f):a===d&&c<f&&(f=c,g=i);return g},_chooseSplitAxis:function(e,t,r){var i=e.leaf?this.compareMinX:q8,n=e.leaf?this.compareMinY:B8;this._allDistMargin(e,t,r,i)<this._allDistMargin(e,t,r,n)&&e.children.sort(i)},_allDistMargin:function(e,t,r,i){e.children.sort(i);var n,s,a=this.toBBox,c=Z0(e,0,t,a),d=Z0(e,r-t,r,a),f=Bw(c)+Bw(d);for(n=t;n<r-t;n++)s=e.children[n],Y0(c,e.leaf?a(s):s),f+=Bw(c);for(n=r-t-1;n>=t;n--)s=e.children[n],Y0(d,e.leaf?a(s):s),f+=Bw(d);return f},_adjustParentBBoxes:function(e,t,r){for(var i=r;i>=0;i--)Y0(t[i],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():Yp(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function u_e(e,{timeZone:t,timeExtent:r}){return{$view:{scale:e,timeZone:t,timeProperties:{currentStart:r?.start,currentEnd:r?.end}}}}let W8=class TY{constructor(t,r){this.key=new $y(0,0,0,0),this.bounds=pn(),this.objectIds=new Set,this.key.set(r);const i=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.level=i.level,this.scale=i.scale,this.minScale=t.zoomToScale(i.level-1),this.maxScale=t.zoomToScale(i.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return Ice(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return u_e(this.scale,t)}createChildTiles(){const t=this.key.getChildKeys(),r=ln.acquire();for(let i=0;i<t.length;i++)r[i]=new TY(this.tileInfoView,t[i]);return r}getQuantizationParameters(){return nc.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const wd={added:[],removed:[]},VM=new Set,c_e=new $y(0,0,0,0);function d_e(e,t){const r=fn(t);if(!r)return null;const[i,n]=r.valid;return e[2]>n?[pn([e[0],e[1],n,e[3]]),pn([i,e[1],i+e[2]-n,e[3]])]:e[0]<i?[pn([i,e[1],e[2],e[3]]),pn([n-(i-e[0]),e[1],n,e[3]])]:null}let h_e=class extends Na{constructor(t){super(),this._tiles=new Map,this._index=F2(9,V("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||xN(t)===0||$N(t)===0)return[];const r=d_e(t,this.tileScheme.spatialReference);return r!=null?[...new Set([...this.boundsIntersections(r[0]),...this.boundsIntersections(r[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const r={added:[],removed:[]};for(const i of t.added)if(!this.has(i)){const n=new W8(this.tileScheme,i);this._tiles.set(i,n),this._index.insert(n),r.added.push(n)}for(const i of t.removed)if(this.has(i)){const n=this.get(i);this._tiles.delete(i),this._index.remove(n),r.removed.push(n)}this.tiles.length=0,this._tiles.forEach((i=>this.tiles.push(i))),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){const r=this.tileScheme.getTileCoverage(t,0);if(!r)return;const{spans:i,lodInfo:n}=r,{level:s}=n;if(i.length>0)for(const{row:a,colFrom:c,colTo:d}of i)for(let f=c;f<=d;f++){const g=c_e.set(s,a,n.normalizeCol(f),n.getWorldForColumn(f)).id;if(VM.add(g),!this.has(g)){const v=new W8(this.tileScheme,g);this._tiles.set(g,v),this._index.insert(v),this.tiles.push(v),wd.added.push(v)}}for(let a=this.tiles.length-1;a>=0;a--){const c=this.tiles[a];VM.has(c.id)||(this._tiles.delete(c.id),this.tiles.splice(a,1),this._index.remove(c),wd.removed.push(c))}(wd.added.length||wd.removed.length)&&this.emit("update",wd),fP.pool.release(r),VM.clear(),wd.added.length=0,wd.removed.length=0}};const IDe=1e-30,Z8=512,Ww=16777216,NDe=8,PDe=29,LDe=24,DDe=4,kDe=0,FDe=0,UDe=0,jDe=1,zDe=2,VDe=3,GDe=4,qDe=5,BDe=6,HDe=12,WDe=13,ZDe=5,p_e=6,YDe=5,JDe=6;var Y8;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(Y8||(Y8={}));const EY=6,f_e=1<<EY,XDe=f_e<<1,QDe=1.05,KDe=3,eke=1,tke=3,rke=3,ike=5,nke=6,ske=1.15,m_e=4,oke=128,y_e=256,ake=y_e-2*m_e,lke=2,uke=128,cke=1,dke=10,hke=1024,pke=128,fke=4,mke=1,yke=1<<20,gke=.75,vke=10,bke=.75,wke=256,_ke=32,Ske=512,Tke=0,Eke=1,g_e=1,xke=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],$ke=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o0=256;var J8,X8,Q8,K8,eU,UR,tU,rU,la,jR,Dv,or,U2,Vs,zR,Pr,Re,j2,sy,wh,VR,c1,iU,nU,sU;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(J8||(J8={})),(function(e){e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(X8||(X8={})),(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Q8||(Q8={})),(function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(K8||(K8={})),(function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(eU||(eU={})),(function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"})(UR||(UR={})),(function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(tU||(tU={})),(function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"})(rU||(rU={})),(function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"})(la||(la={})),(function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"})(jR||(jR={})),(function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"})(Dv||(Dv={})),(function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(or||(or={})),(function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(U2||(U2={})),(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(Vs||(Vs={})),(function(e){e[e.MIN_LOD=33082]="MIN_LOD",e[e.MAX_LOD=33083]="MAX_LOD",e[e.BASE_LEVEL=33084]="BASE_LEVEL",e[e.MAX_LEVEL=33085]="MAX_LEVEL",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE"})(zR||(zR={})),(function(e){e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"})(Pr||(Pr={})),(function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"})(Re||(Re={})),(function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(j2||(j2={})),(function(e){e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(sy||(sy={})),(function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F"})(wh||(wh={})),(function(e){e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8"})(VR||(VR={})),(function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(c1||(c1={})),(function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"})(iU||(iU={})),(function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"})(nU||(nU={})),(function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(sU||(sU={}));const Mke=33984;var z2,oU;(function(e){e[e.Texture=0]="Texture",e[e.TileTexture=1]="TileTexture",e[e.BufferObject=2]="BufferObject",e[e.VertexArrayObject=3]="VertexArrayObject",e[e.Shader=4]="Shader",e[e.Program=5]="Program",e[e.FramebufferObject=6]="FramebufferObject",e[e.Renderbuffer=7]="Renderbuffer",e[e.TransformFeedback=8]="TransformFeedback",e[e.Sync=9]="Sync",e[e.UNCOUNTED=10]="UNCOUNTED",e[e.LinesOfCode=10]="LinesOfCode",e[e.Uniform=11]="Uniform",e[e.COUNT=12]="COUNT"})(z2||(z2={})),(function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"})(oU||(oU={}));const Ake=36064,Oke=36065,Rke=36066,Cke=33306,Ike=36096,Nke=36128;var fi,aU,lU,uU,cU,dU,hU,sc,pU;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(fi||(fi={})),(function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(aU||(aU={})),(function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"})(lU||(lU={})),(function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"})(uU||(uU={})),(function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"})(cU||(cU={})),(function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(dU||(dU={})),(function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(hU||(hU={})),(function(e){e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL"})(sc||(sc={})),(function(e){e[e.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR"})(pU||(pU={}));const v_e=()=>re.getLogger("esri.views.webgl.checkWebGLError");function b_e(e){switch(e){case sc.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case sc.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case sc.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case sc.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case sc.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case sc.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const xY=!!V("enable-feature:webgl-debug");function $Y(){return xY}function Pke(){return xY}function _d(e,t=$Y()){if(t){const r=e.getError();if(r){const i=b_e(r),n=new Error().stack;v_e().error(new z("webgl-error","WebGL error occurred",{message:i,stack:n}))}}}var V2;(function(e){e[e.TextureDescriptor=0]="TextureDescriptor",e[e.Texture=1]="Texture",e[e.Renderbuffer=2]="Renderbuffer"})(V2||(V2={}));function w_e(e){switch(e){case la.BYTE:case la.UNSIGNED_BYTE:return 1;case la.SHORT:case la.UNSIGNED_SHORT:case la.HALF_FLOAT:return 2;case la.FLOAT:case la.INT:case la.UNSIGNED_INT:return 4}}function __e(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function Lke(e,t,r,i,n=0){const s=e.gl;e.bindBuffer(r);for(const a of i){const c=t.get(a.name);if(c==null){console.warn(`There is no location for vertex attribute '${a.name}' defined.`);continue}const d=n*a.stride;if(a.count<=4)s.vertexAttribPointer(c,a.count,a.type,a.normalized,a.stride,a.offset+d),s.enableVertexAttribArray(c),a.divisor>0&&e.gl.vertexAttribDivisor(c,a.divisor);else if(a.count===9)for(let f=0;f<3;f++)s.vertexAttribPointer(c+f,3,a.type,a.normalized,a.stride,a.offset+12*f+d),s.enableVertexAttribArray(c+f),a.divisor>0&&e.gl.vertexAttribDivisor(c+f,a.divisor);else if(a.count===16)for(let f=0;f<4;f++)s.vertexAttribPointer(c+f,4,a.type,a.normalized,a.stride,a.offset+16*f+d),s.enableVertexAttribArray(c+f),a.divisor>0&&e.gl?.vertexAttribDivisor(c+f,a.divisor);else console.error("Unsupported vertex attribute element count: "+a.count);if($Y()){const f=__e(e),g=w_e(a.type),v=a.offset,w=Math.round(g/v)!==g/v?`. Offset not a multiple of stride. DataType requires ${g} bytes, but descriptor has an offset of ${v}`:"";f&&console.error(`Unable to bind vertex attribute "${a.name}" with baseInstanceOffset ${d}${w}:`,f,a)}}}function Dke(e,t,r,i){const n=e.gl;e.bindBuffer(r);for(const s of i){const a=t.get(s.name);if(s.count<=4)n.disableVertexAttribArray(a),s.divisor&&s.divisor>0&&e.gl?.vertexAttribDivisor(a,0);else if(s.count===9)for(let c=0;c<3;c++)n.disableVertexAttribArray(a+c),s.divisor&&s.divisor>0&&e.gl?.vertexAttribDivisor(a+c,0);else if(s.count===16)for(let c=0;c<4;c++)n.disableVertexAttribArray(a+c),s.divisor&&s.divisor>0&&e.gl?.vertexAttribDivisor(a+c,0);else console.error("Unsupported vertex attribute element count: "+s.count)}e.unbindBuffer(UR.ARRAY_BUFFER)}function S_e(e){switch(e){case Pr.ALPHA:case Pr.LUMINANCE:case Pr.RED:case Pr.RED_INTEGER:case Re.R8:case Re.R8I:case Re.R8UI:case Re.R8_SNORM:case VR.STENCIL_INDEX8:return 1;case Pr.LUMINANCE_ALPHA:case Pr.RG:case Pr.RG_INTEGER:case Re.RGBA4:case Re.R16F:case Re.R16I:case Re.R16UI:case Re.RG8:case Re.RG8I:case Re.RG8UI:case Re.RG8_SNORM:case Re.RGB565:case Re.RGB5_A1:case wh.DEPTH_COMPONENT16:return 2;case Pr.RGB:case Pr.RGB_INTEGER:case Re.RGB8:case Re.RGB8I:case Re.RGB8UI:case Re.RGB8_SNORM:case Re.SRGB8:case wh.DEPTH_COMPONENT24:return 3;case Pr.RGBA:case Pr.RGBA_INTEGER:case Re.RGBA8:case Re.R32F:case Re.R11F_G11F_B10F:case Re.RG16F:case Re.R32I:case Re.R32UI:case Re.RG16I:case Re.RG16UI:case Re.RGBA8I:case Re.RGBA8UI:case Re.RGBA8_SNORM:case Re.SRGB8_ALPHA8:case Re.RGB9_E5:case Re.RGB10_A2UI:case Re.RGB10_A2:case wh.DEPTH_COMPONENT32F:case sy.DEPTH24_STENCIL8:return 4;case sy.DEPTH32F_STENCIL8:return 5;case Re.RGB16F:case Re.RGB16I:case Re.RGB16UI:return 6;case Re.RG32F:case Re.RG32I:case Re.RG32UI:case Re.RGBA16F:case Re.RGBA16I:case Re.RGBA16UI:return 8;case Re.RGB32F:case Re.RGB32I:case Re.RGB32UI:return 12;case Re.RGBA32F:case Re.RGBA32I:case Re.RGBA32UI:return 16;case fi.COMPRESSED_RGB_S3TC_DXT1_EXT:case fi.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case fi.COMPRESSED_RGBA_S3TC_DXT3_EXT:case fi.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case fi.COMPRESSED_R11_EAC:case fi.COMPRESSED_SIGNED_R11_EAC:case fi.COMPRESSED_RGB8_ETC2:case fi.COMPRESSED_SRGB8_ETC2:case fi.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case fi.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case fi.COMPRESSED_RG11_EAC:case fi.COMPRESSED_SIGNED_RG11_EAC:case fi.COMPRESSED_RGBA8_ETC2_EAC:case fi.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let MY=class{constructor(t=0,r=t){this.width=t,this.height=r,this.type=V2.TextureDescriptor,this.target=Vs.TEXTURE_2D,this.pixelFormat=Pr.RGBA,this.dataType=c1.UNSIGNED_BYTE,this.samplingMode=or.LINEAR,this.wrapMode=U2.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function T_e(e){return e.width<=0||e.height<=0||e.depth<=0?0:Math.round(e.width*e.height*e.depth*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:S_e(e.internalFormat))*(e.target===Vs.TEXTURE_CUBE_MAP?6:1))}const a0=()=>re.getLogger("esri/views/webgl/textureUtils");function l0(e){const{width:t,height:r,depth:i}=e;(t!=null&&t<0||r!=null&&r<0||i!=null&&i<0)&&a0().error("Negative dimension parameters are not allowed!");const{internalFormat:n}=e;if(n&&(AY(n)||OY(n))){const{linearFilterDepth:s,compareEnabled:a,samplingMode:c,hasMipmap:d}=e;d&&a0().error("Depth textures cannot have mipmaps"),s?c!==or.LINEAR&&c!==or.NEAREST&&a0().error("Depth textures cannot sample mipmaps"):(c!==or.NEAREST&&a0().error("Depth textures without filtering must use NEAREST filtering"),a&&a0().error("Depth textures without filtering cannot use compare function"))}}function E_e(e){return e in Re}function AY(e){return e in wh}function OY(e){return e in sy}function x_e(e){return e!=null&&e in fi}function yf(e){return e!=null&&"type"in e&&e.type==="compressed"}function $_e(e){return e!=null&&"byteLength"in e}function fU(e){return e!=null&&!yf(e)&&!$_e(e)}function Jp(e){return e===Vs.TEXTURE_3D||e===Vs.TEXTURE_2D_ARRAY}function mU(e,t,r,i=1){let n=Math.max(t,r);return e===Vs.TEXTURE_3D&&(n=Math.max(n,i)),Math.floor(Math.log2(n))+1}function Zw(e){if(e.internalFormat!=null)return e.internalFormat;switch(e.dataType){case c1.FLOAT:switch(e.pixelFormat){case Pr.RGBA:return Re.RGBA32F;case Pr.RGB:return Re.RGB32F;default:throw new z("texture:unknown-format","Unable to derive format")}case c1.UNSIGNED_BYTE:switch(e.pixelFormat){case Pr.RGBA:return Re.RGBA8;case Pr.RGB:return Re.RGB8}}const{pixelFormat:t}=e;return e.internalFormat=t===j2.DEPTH_STENCIL?sy.DEPTH24_STENCIL8:t===j2.DEPTH_COMPONENT?wh.DEPTH_COMPONENT24:t,e.internalFormat}function M_e(e){let t="width"in e?e.width:e.codedWidth,r="height"in e?e.height:e.codedHeight;return e instanceof HTMLVideoElement&&(t=e.videoWidth,r=e.videoHeight),{width:t,height:r,depth:1}}let A_e=class RY extends MY{constructor(t,r){switch(super(),this.context=t,Object.assign(this,r),this.internalFormat){case Re.R16F:case Re.R32F:case Re.R8_SNORM:case Re.R8:this.pixelFormat=Pr.RED;break;case Re.R8I:case Re.R8UI:case Re.R16I:case Re.R16UI:case Re.R32I:case Re.R32UI:this.pixelFormat=Pr.RED_INTEGER}}static validate(t,r){return new RY(t,r)}};const el=()=>re.getLogger("esri/views/webgl/Texture");var zr;let O_e=(zr=class{constructor(t,r=null,i=null){if(this.type=V2.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in t)this._descriptor=t,i=r;else{const n=A_e.validate(t,r);if(!n)throw new z("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=n}this._descriptor.target===Vs.TEXTURE_CUBE_MAP?this._setDataCubeMap(i):this.setData(i)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return T_e(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this._descriptor.context.gl&&this.hasWebGLTextureObject&&(this._descriptor.context.instanceCounter.decrement(z2.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,r){const i=this._descriptor;if(i.width!==t||i.height!==r){if(this._wasImmutablyAllocated)throw new z("texture:immutable-resize","Immutable textures can't be resized!");i.width=t,i.height=r,this._descriptor.target===Vs.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(t){this._descriptor.compress=t}disableCompression(){this._descriptor.compress=void 0}setData(t){this.abortCompression(),!yf(t)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in fi&&(this._descriptor.internalFormat=void 0),this._setData(t),!yf(t)&&this._descriptor.compress&&this._compressOnWorker(t)}updateData(t,r,i,n,s,a,c=0){a||el().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||el().error("An attempt to update uninitialized texture!");const d=this._descriptor;d.internalFormat=Zw(d);const{context:f,pixelFormat:g,dataType:v,target:w,isImmutable:S}=d;if(S&&!this._wasImmutablyAllocated)throw new z("texture:uninitialized","Cannot update immutable texture before allocation!");const T=f.bindTexture(this,zr.TEXTURE_UNIT_FOR_UPDATES,!0);(r<0||i<0||r+n>d.width||i+s>d.height)&&el().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:E}=f;c&&(n&&s||el().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),E.pixelStorei(E.UNPACK_SKIP_ROWS,c)),fU(a)?E.texSubImage2D(w,t,r,i,n,s,g,v,a):yf(a)?E.compressedTexSubImage2D(w,t,r,i,n,s,d.internalFormat,a.levels[t]):E.texSubImage2D(w,t,r,i,n,s,g,v,a),c&&E.pixelStorei(E.UNPACK_SKIP_ROWS,0),f.bindTexture(T,zr.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,r,i,n,s,a,c,d){d||el().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||el().error("An attempt to update an uninitialized texture!");const f=this._descriptor;f.internalFormat=Zw(f);const{context:g,pixelFormat:v,dataType:w,isImmutable:S,target:T}=f;if(S&&!this._wasImmutablyAllocated)throw new z("texture:uninitialized","Cannot update immutable texture before allocation!");Jp(T)||el().warn("Attempting to set 3D texture data on a non-3D texture");const E=g.bindTexture(this,zr.TEXTURE_UNIT_FOR_UPDATES);g.setActiveTexture(zr.TEXTURE_UNIT_FOR_UPDATES),(r<0||i<0||n<0||r+s>f.width||i+a>f.height||n+c>f.depth)&&el().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:M}=g;if(yf(d))d=d.levels[t],M.compressedTexSubImage3D(T,t,r,i,n,s,a,c,f.internalFormat,d);else{const R=d;M.texSubImage3D(T,t,r,i,n,s,a,c,v,w,R)}g.bindTexture(E,zr.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(t.width===0||t.height===0)return;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new z("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,l0(t)}t.samplingMode===or.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=or.LINEAR_MIPMAP_NEAREST):t.samplingMode===or.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=or.NEAREST_MIPMAP_NEAREST);const r=this._descriptor.context.bindTexture(this,zr.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(zr.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(r,zr.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new z("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,l0(t)}t.samplingMode===or.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=or.LINEAR):t.samplingMode===or.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=or.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,l0(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(t){t!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=t,this.setSamplingMode(t?or.LINEAR:or.NEAREST),l0(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=zm(this._compressionAbortController)}_setData(t,r){const i=this._descriptor,n=i.context?.gl;if(!n)return;_d(n),this.hasWebGLTextureObject||(this._glName=n.createTexture(),i.context.instanceCounter.increment(z2.Texture,this)),l0(i);const s=i.context.bindTexture(this,zr.TEXTURE_UNIT_FOR_UPDATES);i.context.setActiveTexture(zr.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),_d(n);const a=r??i.target,c=Jp(a);if(fU(t))this._setDataFromTexImageSource(t,a);else{const{width:d,height:f,depth:g}=i;if(d==null||f==null)throw new z("texture:missing-size","Width and height must be specified!");if(c&&g==null)throw new z("texture:missing-depth","Depth must be specified!");if(i.internalFormat=Zw(i),i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(a,i.internalFormat,i.hasMipmap,d,f,g),yf(t)){if(!x_e(i.internalFormat))throw new z("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(t,i.internalFormat,a)}else this._texImage(a,0,i.internalFormat,d,f,g,t),_d(n),i.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),_d(n),i.context.bindTexture(s,zr.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(t=null){for(let r=Vs.TEXTURE_CUBE_MAP_POSITIVE_X;r<=Vs.TEXTURE_CUBE_MAP_NEGATIVE_Z;r++)this._setData(t,r)}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:r,flipped:i,preMultiplyAlpha:n}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,r),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n?1:0)}_setDataFromTexImageSource(t,r){const{gl:i}=this._descriptor.context,n=this._descriptor;n.internalFormat=Zw(n);const s=Jp(r),{width:a,height:c,depth:d}=M_e(t);n.width&&n.height,n.width||(n.width=a),n.height||(n.height=c),s&&n.depth,s&&(n.depth=d),n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(r,n.internalFormat,n.hasMipmap,a,c,d),this._texImage(r,0,n.internalFormat,a,c,d,t),_d(i),n.hasMipmap&&(this.generateMipmap(),_d(i))}_setDataFromCompressedSource(t,r,i){const n=this._descriptor,{width:s,height:a,depth:c}=n,d=t.levels,f=mU(i,s,a,c),g=Math.min(f,d.length)-1;this._descriptor.context.gl.texParameteri(n.target,zR.MAX_LEVEL,g),this._forEachMipmapLevel(((v,w,S,T)=>{const E=d[Math.min(v,d.length-1)];this._compressedTexImage(i,v,r,w,S,T,E)}),g)}_texStorage(t,r,i,n,s,a){const{gl:c}=this._descriptor.context;if(!E_e(r)&&!AY(r)&&!OY(r))throw new z("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const d=i?mU(t,n,s,a):1;if(Jp(t)){if(a==null)throw new z("texture:missing-depth","Missing depth dimension for 3D texture upload");c.texStorage3D(t,d,r,n,s,a)}else c.texStorage2D(t,d,r,n,s);this._wasImmutablyAllocated=!0}_texImage(t,r,i,n,s,a,c){const d=this._descriptor.context.gl,f=Jp(t),{isImmutable:g,pixelFormat:v,dataType:w}=this._descriptor;if(g){if(c!=null){const S=c;if(f){if(a==null)throw new z("texture:missing-depth","Missing depth dimension for 3D texture upload");d.texSubImage3D(t,r,0,0,0,n,s,a,v,w,S)}else d.texSubImage2D(t,r,0,0,n,s,v,w,S)}}else{const S=c;if(f){if(a==null)throw new z("texture:missing-depth","Missing depth dimension for 3D texture upload");d.texImage3D(t,r,i,n,s,a,0,v,w,S)}else d.texImage2D(t,r,i,n,s,0,v,w,S)}}_compressedTexImage(t,r,i,n,s,a,c){const d=this._descriptor.context.gl,f=Jp(t);if(this._descriptor.isImmutable){if(c!=null)if(f){if(a==null)throw new z("texture:missing-depth","Missing depth dimension for 3D texture upload");d.compressedTexSubImage3D(t,r,0,0,0,n,s,a,i,c)}else d.compressedTexSubImage2D(t,r,0,0,n,s,i,c)}else if(f){if(a==null)throw new z("texture:missing-depth","Missing depth dimension for 3D texture upload");d.compressedTexImage3D(t,r,i,n,s,a,0,c)}else d.compressedTexImage2D(t,r,i,n,s,0,c)}async _compressOnWorker(t){const{width:r,height:i,context:n,flipped:s,preMultiplyAlpha:a,hasMipmap:c}=this._descriptor,d=this._descriptor.compress?.compressionTracker,f=this._descriptor.compress?.compressionCallback,{compressedTextureETC:g,compressedTextureS3TC:v}=n.capabilities;if(!zr.compressionWorkerHandle?.isCompressible(t,this._descriptor)||!g&&!v)return;this.abortCompression();const w=new AbortController;this._compressionAbortController=w,d?.increment();try{let S;t instanceof Uint8Array?S=t.buffer:(S=await createImageBitmap(t,{imageOrientation:s?"flipY":"none"}),Yt(w));const T={data:S,width:r,height:i,needsFlip:t instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===Pr.RGBA?4:3,preMultiplyAlpha:a,hasMipmap:c,hasETC:!!g,hasS3TC:!!v},E=await zr.compressionWorkerHandle.invoke(T,w.signal,"low");if(Yt(w),E.compressedTexture&&this.hasWebGLTextureObject){const M=this.usedMemory;this._descriptor.internalFormat=E.internalFormat,this._setData(E.compressedTexture),f?.(M-this.usedMemory)}}catch(S){Zi(S)||el().error("Texture compression failed!")}finally{d?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null)}}_forEachMipmapLevel(t,r=1/0){let{width:i,height:n,depth:s,hasMipmap:a,target:c}=this._descriptor;const d=c===Vs.TEXTURE_3D;if(i==null||n==null||d&&s==null)throw new z("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let f=0;t(f,i,n,s),a&&(i!==1||n!==1||d&&s!==1)&&!(f>=r);++f)i=Math.max(1,i>>1),n=Math.max(1,n>>1),d&&(s=Math.max(1,s>>1))}_applySamplingMode(){const t=this._descriptor,r=t.context?.gl;let i=t.samplingMode,n=t.samplingMode;i===or.LINEAR_MIPMAP_NEAREST||i===or.LINEAR_MIPMAP_LINEAR?(i=or.LINEAR,t.hasMipmap||(n=or.LINEAR)):i!==or.NEAREST_MIPMAP_NEAREST&&i!==or.NEAREST_MIPMAP_LINEAR||(i=or.NEAREST,t.hasMipmap||(n=or.NEAREST)),r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,i),r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,n)}_applyWrapMode(){const t=this._descriptor,r=t.context?.gl;typeof t.wrapMode=="number"?(r.texParameteri(t.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,t.wrapMode)):(r.texParameteri(t.target,r.TEXTURE_WRAP_S,t.wrapMode.s),r.texParameteri(t.target,r.TEXTURE_WRAP_T,t.wrapMode.t))}_applyShadowMode(){const t=this._descriptor,r=t.context?.gl,i=t.compareEnabled?r.COMPARE_REF_TO_TEXTURE:r.NONE;r.texParameteri(t.target,r.TEXTURE_COMPARE_MODE,i),t.compareEnabled&&r.texParameteri(t.target,r.TEXTURE_COMPARE_FUNC,r.GREATER),_d(r)}_applyAnisotropicFilteringParameters(){const t=this._descriptor,r=t.context.capabilities.textureFilterAnisotropic;r&&t.context.gl.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}},zr.TEXTURE_UNIT_FOR_UPDATES=0,zr.compressionWorkerHandle=null,zr);const GM=()=>re.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function R_e(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const C_e=[0,0,0,0];let CY=class{constructor(){this.type="single",this._highlightOptions=new xc,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*o0),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,r){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,p_e),r.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<EY)-1,activeGradient:this}]}_updateGradientTexture(t){const r=I_e(this._highlightOptions);if(r===this._optionsShadeTexKey)return;this._optionsShadeTexKey=r,R_e(this._highlightOptions,this._convertedHighlightOptions);const i=this._convertedHighlightOptions,n=i.outlinePosition-i.outlineWidth/2-i.outerHaloWidth,s=i.outlinePosition-i.outlineWidth/2,a=i.outlinePosition+i.outlineWidth/2,c=i.outlinePosition+i.outlineWidth/2+i.innerHaloWidth,d=Math.sqrt(Math.PI/2)*g_e,f=Math.abs(n)>d?Math.round(10*(Math.abs(n)-d))/10:0,g=Math.abs(c)>d?Math.round(10*(Math.abs(c)-d))/10:0;let v;f&&!g?GM().error("The outer rim of the highlight is "+f+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!f&&g?GM().error("The inner rim of the highlight is "+g+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):f&&g&&GM().error("The highlight is "+Math.max(f,g)+"px away from the edge of the feature; consider reducing some width values.");const w=[void 0,void 0,void 0,void 0];function S(E,M,R){w[0]=(1-R)*E[0]+R*M[0],w[1]=(1-R)*E[1]+R*M[1],w[2]=(1-R)*E[2]+R*M[2],w[3]=(1-R)*E[3]+R*M[3]}const{_texelData:T}=this;for(let E=0;E<o0;++E)v=n+E/(o0-1)*(c-n),v<n?(w[0]=0,w[1]=0,w[2]=0,w[3]=0):v<s?S(C_e,i.outlineColor,(v-n)/(s-n)):v<a?[w[0],w[1],w[2],w[3]]=i.outlineColor:v<c?S(i.outlineColor,i.fillColor,(v-a)/(c-a)):[w[0],w[1],w[2],w[3]]=i.fillColor,T[4*E]=255*w[0],T[4*E+1]=255*w[1],T[4*E+2]=255*w[2],T[4*E+3]=255*w[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=c,!this._shadeTex){const E=new MY;E.wrapMode=U2.CLAMP_TO_EDGE,E.width=o0,E.height=1,this._shadeTex=new O_e(t,E)}this._shadeTex.updateData(0,0,0,o0,1,this._texelData)}};function I_e(e){return`${e.color};${e.haloColor};${e.haloOpacity};${e.fillOpacity};${e.haloWidth};${e.haloBlur}`}let N_e=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let r=0;r<t.length;r++)this.gradients[r]||(this.gradients[r]=new CY),this.gradients[r].setHighlightOptions(t[r]);for(let r=t.length+1;r<this.gradients.length;r++)this.gradients[r].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const r=[];for(let i=0;i<this.gradients.length;i++){const n=this.gradients[i];r.push({activeReasons:t,activeGradient:n}),t<<=1}return r}};var yU,gU,vU,bU,wU,_U,G2,SU,TU;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(yU||(yU={})),(function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(gU||(gU={})),(function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"})(vU||(vU={})),(function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(bU||(bU={})),(function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"})(wU||(wU={})),(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"})(_U||(_U={})),(function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"})(G2||(G2={})),(function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"})(SU||(SU={})),(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"})(TU||(TU={}));const IY={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:jR.EQUAL,mask:255,op:{fail:Dv.KEEP,zFail:Dv.KEEP,zPass:Dv.REPLACE}}}},P_e={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},L_e={...IY,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function D_e({pixelRatio:e,state:t,displayLevel:r,requiredLevel:i},n){const s=1/2**(r-n.key.level),a=1/2**(i-n.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:n.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:n.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:a,tileOffset:[n.x,n.y],currentScale:t.scale,currentZoom:r,metersPerSRUnit:Xs(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function NY(e){return e.passOptions?.type==="highlight"}function PY(e){return e.passOptions?.type==="hittest"}function k_e(e){if(!PY(e))return null;const{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:n}=e.passOptions;return{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:n}}function F_e(e){if(!NY(e))return null;const{activeReasons:t,highlightAll:r}=e.passOptions;return{activeReasons:t,highlightAll:r?1:0}}function jke(e,t,r){const i={};for(const n in r)typeof r[n]!="function"?i[n]=r[n]:i[n]=r[n](e,t);return i}function zke(e,t){const{attributeView:r,context:i}=e;return{storage:r.getUniforms(i),view:D_e(e,t),hittestRequest:k_e(e),highlight:F_e(e)}}function Vke(e){return{inside:e.selection===G2.InsideEffect,outside:e.selection===G2.OutsideEffect}}function U_e(e){return PY(e)?P_e:NY(e)&&e.passOptions.stepType==="clear"?L_e:IY}function Gke(e){const{row:t,col:r}=e.key,i=r*Z8,n=t*Z8;return{tileOffsetFromLocalOrigin:[i%Ww,n%Ww],maxIntsToLocalOrigin:[Math.floor(i/Ww),Math.floor(n/Ww)]}}const j_e=new tt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function qke(e){return j_e.toJSON(e)}function Bke(e){const{bandCount:t,attributeTable:r,colormap:i,pixelType:n}=e.raster.rasterInfo;return t===1&&(r!=null||i!=null||n==="u8"||n==="s8")}function z_e(e,t){return t==null?(e?.destroy(),null):(e?.type==="single"&&Array.isArray(t)&&(e.destroy(),e=null),e?.type!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new N_e:new CY),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function Hke(e,t,r,i){const{painter:n,highlightGradient:s}=e,{highlight:a}=n.effects;if(!s)return;const c=e.passOptions,d=s.getReasonsWithGradients();for(let f=0;f<d.length;f++){const g={...e,passOptions:{type:"highlight",activeGradient:d[f].activeGradient,activeReasons:d[f].activeReasons,stepType:"burn",highlightAll:t}};if(a.bind(g),r(g),f<d.length-1){let w=0;for(let S=f+1;S<d.length;S++)w|=d[S].activeReasons;r({...e,passOptions:{type:"highlight",activeGradient:d[f].activeGradient,activeReasons:w,stepType:"clear",highlightAll:t}})}const v={...e,passOptions:{type:"highlight",activeGradient:d[f].activeGradient,activeReasons:d[f].activeReasons,stepType:"draw",highlightAll:t}};n.setPipelineState(U_e(e)),n.updatePipelineState(e.context),a.draw(v),a.unbind()}e.passOptions=c}const Yw=e=>parseFloat(e)/100;function V_e(e,t,r){const i=typeof e.left=="string"?Yw(e.left)*t:e.left,n=typeof e.right=="string"?Yw(e.right)*t:e.right,s=typeof e.top=="string"?Yw(e.top)*r:e.top,a=typeof e.bottom=="string"?Yw(e.bottom)*r:e.bottom,c=s;return{xmin:i,xmax:Math.max(t-n,i),ymin:c,ymax:Math.max(r-a,s)}}function LY(e,t,r,i){switch(t.type){case"rect":{const{width:n,height:s}=e,{xmin:a,xmax:c,ymin:d,ymax:f}=V_e(t,n,s),{x:g,y:v}=r;return g>a&&g<c&&v>d&&v<f}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||oN(t.path,[r.x,r.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?sN(t.geometry,i):I1(t.geometry,i))}}function G_e(e){if(!e.highlights)return null;const t=e.highlights.findIndex((r=>r.name==="default"));return t===-1?null:e.highlights.items[t]}function q_e(e,t){if(!e.highlights){if(!t)return;e.highlights=new ge([new xc])}const r=e.highlights.findIndex((i=>i.name==="default"));t?e.highlights.items[r].assignFrom(t):(e.highlights.removeAt(r),e.highlights.length===0&&(e.highlights=null))}async function B_e(e,t,r){const i=oZ(t)?sZ(e,t):t;if(!e.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let n=new Set;const s=new Set;let a=!1,c=null,d=null;r?.include?xU(r.include,EU(e,(w=>{n.add(w),qM(w,(S=>s.add(S)))}),((w,S)=>{s.add(w),n.add(S)}),(w=>{c||(c=new Set),c.add(w)}),(w=>n.add(w)),(()=>a=!0))):(a=!0,n=new Set(e.allLayerViews),n.forEach((w=>{qM(w,(S=>s.add(S)))}))),r?.exclude&&xU(r.exclude,EU(e,(w=>{n.delete(w),qM(w,(S=>s.delete(S)))}),(w=>s.delete(w)),(w=>{d||(d=new Set),d.add(w)})));const f=e.toMap(i),g=e.allLayerViews.filter((w=>!w.suspended&&n.has(w)&&w.clips.every((S=>LY(e,S,i,f))))).reverse();let v=[...a?e.graphicsView.hitTest(f).map((w=>({type:"graphic",graphic:w,layer:null,mapPoint:f}))):[],...await Promise.all(g.map((w=>w.hitTest(f,i))).toArray())].filter(Yl).flat().filter(Yl);return v=v.filter((w=>w.type!=="graphic"||w.layer?.type!=="subtype-group"||s.has(w.graphic.layer))),c&&(v=v.filter((w=>!("graphic"in w)||!w.graphic||c?.has(GR(w.graphic))))),d&&(v=v.filter((w=>!("graphic"in w)||!w.graphic||!d?.has(GR(w.graphic))))),{screenPoint:i,results:v}}function EU(e,t,r,i,n,s){return a=>{if(a instanceof Nr){if(a.layer===e)s?.();else{const c=e.allLayerViews.find((d=>d.layer===a.layer));c&&n?.(c)}i(GR(a))}else if(!("layer"in a&&"element"in a))if(a.type==="subtype-sublayer"){const c=e.allLayerViews.find((d=>d.layer===a.parent));c&&r(a,c)}else{const c=e.allLayerViews.find((d=>d.layer===a));c&&t(c)}}}function xU(e,t){if(e)if(kS(e))for(const r of e)if(kS(r))for(const i of r)t(i);else t(r);else t(e)}function GR(e){const t=e.getObjectId();return t?`${e.layer?.uid??e.sourceLayer?.uid??"MapView"}/${t}`:`"MapView/${e.uid}`}function qM({layer:e},t){e?.type==="subtype-group"&&e.sublayers.forEach((r=>{t(r)}))}let u0=null,q2=!0;function H_e(e,t,r){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(q2)try{return new ImageData(e,t)}catch{q2=!1}return DY(e,t,r)}function Wke(e,t,r,i){if(!t||!r)throw new Error("Cannot construct image data without dimensions");if(q2)try{return new ImageData(e,t,r)}catch{q2=!1}const n=DY(t,r,i);return n.data.set(e,0),n}function W_e(){return u0||(u0=document.createElement("canvas"),u0.width=1,u0.height=1),u0}function DY(e,t,r){return r||(r=W_e()),r.getContext("2d").createImageData(e,t)}async function Z_e(e,t){const r=window.URL.createObjectURL(e);try{const{data:i}=await Ft(r,{...t,responseType:"image"});return i}catch(i){throw Zi(i)?i:new z("invalid-image",`Could not fetch requested image at ${r}`)}finally{window.URL.revokeObjectURL(r)}}async function Zke(e,t){const{arrayBuffer:r,mediaType:i}=await Y_e(e,t),n=i==="image/png";if(i==="image/gif"){const{isAnimatedGIF:s,parseGif:a}=await ue(()=>import("./gif-CL4VHZtF.js"),[]);if(s(r))return a(r,t)}if(n){const{isAnimatedPNG:s,parseApng:a}=await ue(()=>import("./apng-GuNPwDTL.js"),__vite__mapDeps([269,16]));if(s(r))return a(r,t)}return Z_e(new Blob([r],{type:i}),t)}async function Y_e(e,t){const r=jm(e);if(r?.isBase64)return{arrayBuffer:F7(r.data),mediaType:r.mediaType};const i=await Ft(e,{responseType:"array-buffer",...t});return{arrayBuffer:i.data,mediaType:i.getHeader?.("Content-Type")??""}}function kY(e,t,r){const{ctx:i,canvas:n}=UY(e,r),s=i.getImageData(0,0,e.width,e.height),a=zY(n,t);return jY(n),{dataUrl:a,data:s}}function FY(e,t){const{ctx:r,canvas:i}=UY(e,t),n=r.getImageData(0,0,e.width,e.height);return jY(i),n}function UY(e,t){const r=J_e();t.premultipliedAlpha&&eSe(e),r.width=e.width,r.height=e.height;const i=r.getContext("2d",{willReadFrequently:!0});return i.putImageData(e,0,0),t.flipY&&K_e(i),{ctx:i,canvas:r}}function jY(e){e.width=0,e.height=0}function J_e(){return BM==null&&(BM=document.createElement("canvas")),BM}let BM=null;function zY(e,t){const r=tSe[t.format],i=t.quality/100;return e.toDataURL(r,i)}function VY(e,t){const r=Q_e(e),i=iSe[r];return{format:r,quality:Ys(t??i,0,100)}}function GY(e,t){return t/Math.max(e[0],e[1])}function X_e(e,t,r,i=0,n=0,s=e.width-i,a=e.height-n,c=!1){const{data:d}=e,{width:f,height:g,data:v}=t,w=s/f,S=a/g,T=Math.ceil(w/2),E=Math.ceil(S/2),M=e.width;for(let R=0;R<g;R++)for(let I=0;I<f;I++){const k=4*(I+(c?g-R-1:R)*f);let j=0,P=0,X=0,ae=0,fe=0,he=0;const me=(R+.5)*S;for(let Oe=Math.floor(R*S);Oe<(R+1)*S;Oe++){const Se=Math.abs(me-(Oe+.5))/E,ft=(I+.5)*w,Ue=Se*Se;for(let mt=Math.floor(I*w);mt<(I+1)*w;mt++){const Q=Math.abs(ft-(mt+.5))/T,pe=Math.sqrt(Ue+Q*Q);if(pe>=1)continue;let ye=2*pe*pe*pe-3*pe*pe+1;const rt=4*(i+mt+(n+Oe)*M);he+=ye*d[rt+3],P+=ye,!r&&d[rt+3]<255&&(ye=ye*d[rt+3]/255),X+=ye*d[rt],ae+=ye*d[rt+1],fe+=ye*d[rt+2],j+=ye}}v[k]=X/j,v[k+1]=ae/j,v[k+2]=fe/j,v[k+3]=he/P}return t}function Q_e(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return rSe}}function K_e(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function eSe(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const n=t[i+3];if(n!==255&&n>0){const s=255/n;t[i]=t[i]*s,t[i+1]=t[i+1]*s,t[i+2]=t[i+2]*s}}}const tSe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},$U=98,rSe="png",iSe={png:100,jpg:$U,jpeg:$U},Yke=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:H_e,encode:kY,encodeData:FY,getFormatAndQuality:VY,getMaximumResolutionScale:GY,resampleHermite:X_e,toDataUrl:zY},Symbol.toStringTag,{value:"Module"})),qY={flipY:!0,premultipliedAlpha:!0};async function nSe(e,t){const r=await BY(e,t),{format:i,quality:n}=VY(t?.format,t?.quality);return kY(r,{format:i,quality:n},qY)}async function sSe(e,t){const r=await BY(e,t);return FY(r,qY)}function BY(e,t){const r=lSe(t||{},aSe(e.stage,e.size),e.size,e.padding),i=oSe(t,e.allLayerViews);return e.stage.takeScreenshot(r,i,e.backgroundColor,t?.rotation)}function oSe(e={},t){if(!e.layers)return;const r=[];return e.layers.forEach((i=>{const n=t.find((s=>s.layer.id===i.id));n?.container&&r.push(n.container)})),r}function aSe(e,t){return Math.min(4,GY(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function lSe(e,t,r,i){e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let n=null;e.width!=null&&e.height!=null?n=[e.width,e.height]:e.width==null&&e.height!=null?n=[e.height,e.height]:e.width!=null&&e.height==null?n=[e.width,e.width]:e.width==null&&e.height==null&&(n=null);const s=r[0]-(i.left+i.right),a=r[1]-(i.top+i.bottom);let c,d,f=e.area||{x:0,y:0,width:s,height:a};if(n){const g=s/a,v=n[0]/n[1];if(v>g){const w=f.width/v;f={x:f.x,y:Math.round(f.y+(f.height-w)/2),width:f.width,height:Math.round(w)}}else{const w=f.height*v;f={x:Math.round(f.x+(f.width-w)/2),y:f.y,width:Math.round(w),height:f.height}}}else n=[f.width,f.height];return n[0]>f.width?(c=Math.min(n[0]/f.width,t),d=n[0]/f.width/c):(c=1,d=n[0]/f.width),{cropArea:{x:Math.round((f.x+i.left)*c),y:Math.round((f.y+i.top)*c),width:Math.round(f.width*c),height:Math.round(f.height*c)},outputScale:d,resolutionScale:c}}const uSe=e=>e.includes("Brush");let HY=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),uSe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}},cSe=class{constructor(t){this.getUnmaskedRenderer=t}};function dSe(e){const t=e.getExtension("WEBGL_debug_renderer_info");return t?new cSe((()=>e.getParameter(t.UNMASKED_RENDERER_WEBGL))):null}let MU;function hSe(){return MU??=mSe(),MU}let pSe=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function fSe(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let r=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=t.getContext("webgl2"),r!=null&&(e.majorPerformanceCaveat=!0,e.unmaskedRenderer=dSe(r)?.getUnmaskedRenderer()??"unknown")),r==null)return r;e.available=!0,e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return i&&(e.supportsHighPrecisionFragment=i.precision>0),r}function mSe(){const e=new pSe,t=fSe(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function ySe(e){const t=hSe();return t.available?e==="3d"&&t.majorPerformanceCaveat?new z("webgl:major-performance-caveat-detected",`Your WebGL implementation (${t.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new z("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new z("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new z("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function gSe(e){return e&&"nodeType"in e}function vSe(e){return e&&typeof e.render=="function"}const AU={component:"esri-component"};let zd=class extends Ae{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(t){this._set("id",t)}set node(t){const r=this._get("node");t!==r&&(t&&t.classList.add(AU.component),r&&r.classList.remove(AU.component),this._set("node",t))}castNode(t){return this.widget?.destroy(),t?typeof t=="string"||gSe(t)?(this._set("widget",null),FN(t)):(vSe(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};u([p()],zd.prototype,"id",null),u([p()],zd.prototype,"node",null),u([wt("node")],zd.prototype,"castNode",null),u([p({readOnly:!0})],zd.prototype,"widget",void 0),zd=u([O("esri.views.ui.Component")],zd);const aS=zd,WY="calcite-mode-",ZY="dark",bSe="light",wSe=/\W/g,_Se="--esri-calcite-mode-name";function YY(){return getComputedStyle(document.body).getPropertyValue(_Se).replaceAll(wSe,"").toLowerCase()}function e4e(){return YY()===ZY}function SSe(){const e=YY();switch(e){case ZY:case bSe:return`${WY}${e}`;default:return null}}function TSe(e){const t=SSe();t&&(ESe(e),e.classList.add(t))}function ESe(e){Array.from(e.classList).forEach((t=>{t.startsWith(WY)&&e.classList.remove(t)}))}const QT=new Map;function JY(){QT.clear()}function xSe(e){return QT.get(e)}function $Se(e,t){QT.set(e,t)}function HM(e){QT.delete(e)}function MSe(...e){const t=ln.acquire();for(let i=0;i<e.length;i++){const n=e[i],s=typeof n;if(s==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(s==="object")for(const a in n)n[a]&&t.push(a)}const r=t.join(" ");return ln.release(t),r}(()=>{const e=new Map,t=new ResizeObserver((i=>{JY();for(const n of i)e.get(n.target)?.(n)})),r=(i,n,s)=>(e.set(i,n),t.observe(i,s),ht((()=>{t.unobserve(i),e.delete(i)})));return(i,n,s)=>{let a=null;return Zh([je((()=>typeof i=="function"?i():i),(c=>{a?.remove(),c&&(a=r(c,n,s))}),an),ht((()=>a?.remove()))])}})();function ASe(e){const t=e?.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function t4e(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function r4e(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function OSe(e){return e==="Enter"||e===" "}async function RSe(e,t){await Sne(E1(t));const r=typeof e=="function"?e():e;r&&("setFocus"in r&&typeof r.setFocus=="function"?await r.setFocus():r instanceof HTMLElement&&r.focus())}const CSe={left:0,top:0,bottom:0,right:0},XY={bottom:30,top:15,right:15,left:15},tl="esri-ui",En={ui:tl,corner:`${tl}-corner`,innerContainer:`${tl}-inner-container`,manualContainer:`${tl}-manual-container`,cornerContainer:`${tl}-corner-container`,topLeft:`${tl}-top-left`,topRight:`${tl}-top-right`,bottomLeft:`${tl}-bottom-left`,bottomRight:`${tl}-bottom-right`};function ISe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function Jw(e){return e===0?"0":`${e}px`}function WM(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function ZM(e,{top:t,bottom:r,left:i,right:n}){e.style.top=t,e.style.bottom=r,e.style.left=i,e.style.right=n}let na=class extends Na.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Un(),this.view=null,this._applyViewPadding=()=>{const r=this.container;r&&ZM(r,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const r=this._innerContainer;r&&ZM(r,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([je((()=>[this.view?.padding,this.container]),this._applyViewPadding,Hi),je((()=>this.padding),this._applyUIPadding,Hi),je((()=>[this.container,this._locale]),(([t,r])=>{t&&t.setAttribute("lang",r)}),Hi),DG((t=>{this._locale=t}))])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const r=this._get("container");t!==r&&(t&&(t.classList.add(En.ui),TSe(t),this._attachContainers(t)),r&&(r.classList.remove(En.ui),ZM(r,{top:"",bottom:"",left:"",right:""}),r.textContent=""),this._set("container",t))}get height(){const t=this.view?.height??0;if(t===0)return t;const r=this._getViewPadding(),{top:i,bottom:n}=r;return Math.max(t-i-n,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...XY,...t}}get width(){const t=this.view?.width??0;if(t===0)return t;const r=this._getViewPadding(),{left:i,right:n}=r;return Math.max(t-i-n,0)}add(t,r){let i,n,s;if(Array.isArray(t))return void t.forEach((c=>this.add(c,r)));const a=WM(t);a&&({index:i,position:r,component:t,key:n}=a),r&&typeof r=="object"&&({index:i,key:n,position:r,internal:s}=r),!t||r&&!this._isValidPosition(r)||this._add(t,r,i??this._getNumComponentsAtPosition(r),n,s)}remove(t,r){if(!t)return;if(Array.isArray(t))return t.map((n=>this.remove(n,r)));const i=this._find(t);if(i){const n=this._componentMap.get(i);if(!n||n.key!==r)return;const s=this._components.indexOf(i);return i.node.parentNode?.removeChild(i.node),this._componentMap.delete(i),i.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach((c=>{const d=this._componentMap.get(c);d&&d.position===n.position&&d.index>n.index&&d.index--})),this._components.splice(s,1)[0]}}empty(t,r={removeInternal:!1}){if(Array.isArray(t)){for(const s of t)this.empty(s,r);return}const i=this._positionNameToContainerLookup[t??"manual"],n=Array.prototype.slice.call(i.children).map((s=>this._findByNode(s))).filter((s=>s==null?!1:!(this._componentMap.get(s)?.internal??!1)||r.removeInternal));for(const s of n)this.remove(s)}move(t,r){if(Array.isArray(t)&&t.forEach((a=>this.move(a,r))),!t)return;let i;const n=WM(t)||WM(r);if(n&&(i=n.index,r=n.position,t=n.component||t),r&&!this._isValidPosition(r))return;const s=this.remove(t);s&&this.add(s,{position:r,index:i})}find(t){if(!t)return null;const r=this._findById(t);return r&&(r.widget||r.node)}getComponents(t,r={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap((i=>this._getComponentsAtPosition(i,r))):this._getComponentsAtPosition(t,r):this._components.filter((i=>r.includeInternal||!this._componentMap.get(i)?.internal)).map((({widget:i,node:n})=>i??n))}getPosition(t){for(const r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(t))return r;return null}_add(t,r,i,n,s){t instanceof aS||(t=new aS({node:t}));const{widget:a}=t;a!=null&&a instanceof Ae&&a.addHandles(ht((()=>{queueMicrotask((()=>this.remove(t)))})),this._removeWidgetHandleKey),this._components.some((c=>this._componentMap.get(c)?.position===r&&this._componentMap.get(c)?.index===i))&&this._components.forEach((c=>{const d=this._componentMap.get(c);d&&d.position===r&&d.index>=i&&d.index++})),this._place({component:t,position:r,index:i}),this._components.push(t),this._componentMap.set(t,{key:n,position:r,internal:s,index:i})}_find(t){return t?t instanceof aS?this._findByComponent(t):typeof t=="string"?this._findById(t):"domNode"in t?this._findByNode(t.domNode):this._findByNode(t):null}_getViewPadding(){return this.view?.padding??CSe}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(En.innerContainer,En.cornerContainer);const r=document.createElement("div");r.classList.add(En.innerContainer,En.manualContainer);const i=document.createElement("div");i.classList.add(En.topLeft,En.corner),t.appendChild(i);const n=document.createElement("div");n.classList.add(En.topRight,En.corner),t.appendChild(n);const s=document.createElement("div");s.classList.add(En.bottomLeft,En.corner),t.appendChild(s);const a=document.createElement("div");a.classList.add(En.bottomRight,En.corner),t.appendChild(a),this._innerContainer=t,this._manualContainer=r;const c=ASe();this._cornerNameToContainerLookup={"top-left":i,"top-right":n,"bottom-left":s,"bottom-right":a,"top-leading":c?n:i,"top-trailing":c?i:n,"bottom-leading":c?a:s,"bottom-trailing":c?s:a},this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){const r=t.position??"manual",{component:i,index:n}=t,s=this._positionNameToContainerLookup[r],a=n!=null&&n>-1;if(ISe(i.widget)&&i.widget.startup(),!a)return void s.appendChild(i.node);const c=Array.from(s.children);if(c.length!==0){for(const d of c){const f=this._findByNode(d);if(f&&n<(this._componentMap.get(f)?.index??0))return void d.parentNode?.insertBefore(i.node,d)}s.appendChild(i.node)}else s.appendChild(i.node)}_toPixelPosition(t){return{top:Jw(t.top),left:Jw(t.left),right:Jw(t.right),bottom:Jw(t.bottom)}}_findByComponent(t){return this._components.find((r=>r===t))??null}_findById(t){return this._components.find((({id:r})=>r===t))??null}_findByNode(t){return t?this._components.find((({node:r})=>r===t)):null}_getComponentsAtPosition(t,r){const i=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(i.children).map((n=>this._findByNode(n))).filter(Yl).filter((n=>r.includeInternal||!this._componentMap.get(n)?.internal)).map((({widget:n,node:s})=>n??s))}_getNumComponentsAtPosition(t){return this._positionNameToContainerLookup[t]?.children.length??0}};u([p()],na.prototype,"_locale",void 0),u([p()],na.prototype,"container",null),u([p()],na.prototype,"height",null),u([p({value:XY})],na.prototype,"padding",null),u([wt("padding")],na.prototype,"castPadding",null),u([p()],na.prototype,"view",void 0),u([p()],na.prototype,"width",null),na=u([O("esri.views.ui.UI")],na);const NSe=na,PSe={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))},LSe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}},DSe=e=>({...LSe,...e}),kSe=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},FSe=(e,t)=>e.find(t),OU=(e,t,r=!1)=>{let i=e;return t.forEach(((n,s)=>{const a=i?.children?FSe(i.children,(c=>c.domNode===n)):void 0;r&&!a&&s!==t.length-1||(i=a)})),i},USe=e=>{let t;const r={...PSe,...e},i=DSe(r),n=i.performanceLogger;let s,a=!0,c=!1;const d=[],f=[],g=(w,S,T)=>{let E;i.eventHandlerInterceptor=(R,I,k,j)=>function(P){let X;n("domEvent",P);const ae=kSe(P.currentTarget,E.domNode),fe=ae.some((me=>customElements.get(me?.tagName?.toLowerCase())));if(P.eventPhase===Event.CAPTURING_PHASE||!fe)ae.reverse(),X=OU(E.getLastRender(),ae);else{const me=P.composedPath(),Oe=me.slice(me.indexOf(P.currentTarget),me.indexOf(E.domNode)).reverse();X=OU(E.getLastRender(),Oe,!0)}let he;return X&&(he=r.handleInterceptedEvent(t,X,this,P)),n("domEventProcessed",P),he},r.postProcessProjectionOptions?.(i);const M=T();E=w(S,M,i),i.eventHandlerInterceptor=void 0,d.push(E),f.push(T),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(E,M)};let v=()=>{if(s=void 0,a){a=!1,n("renderStart",void 0);for(let w=0;w<d.length;w++){const S=f[w]();n("rendered",void 0);try{d[w].update(S)}catch(T){console.error(T)}n("patched",void 0)}n("renderDone",void 0),a=!0}};return r.modifyDoRenderImplementation&&(v=r.modifyDoRenderImplementation(v,d,f)),t={renderNow:v,scheduleRender:()=>{s||c||(s=requestAnimationFrame(v))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),c=!0},resume:()=>{c=!1,a=!0,t.scheduleRender()},append:(w,S)=>{g(vc.append,w,S)},insertBefore:(w,S)=>{g(vc.insertBefore,w,S)},merge:(w,S)=>{g(vc.merge,w,S)},replace:(w,S)=>{g(vc.replace,w,S)},detach:w=>{for(let S=0;S<f.length;S++)if(f[S]===w)return f.splice(S,1),d.splice(S,1)[0];throw new Error("renderFunction was not found")}},t};class d1{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}const jSe=(e,t)=>{let r=e;for(;r;){if(r===t)return!0;if(!r.parentNode)return!1;r.parentNode instanceof ShadowRoot?r=r.parentNode.host:r=r.parentNode}return!1},zSe=(e,t,r)=>{const i=VSe(t).subscribe;return i(n=>{n.some(a=>jSe(e,a.target))&&r()})},YM={},VSe=e=>{const t=e.join(","),r=YM[t];if(r!==void 0)return r;const i=new Set,n=new MutationObserver(a=>i.forEach(c=>c(a)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const s={subscribe:a=>(i.add(a),()=>{i.delete(a),i.size===0&&(n.disconnect(),YM[t]=void 0)})};return YM[t]=s,s},GSe=(e,t)=>{let r=e;for(;r;){const i=r.closest?.(t);if(i)return i;const n=r.getRootNode?.();if(n===globalThis.document)return null;r=n.host}return null},qSe=(e,t,r)=>GSe(e,`[${t}]`)?.getAttribute(t)??r,lr=(e,t,...r)=>{try{return e?.call(t,...r)}catch(i){console.error(i,e)}},qR=async(e,t,...r)=>{try{return await e?.call(t,...r)}catch(i){console.error(i,e)}},BSe="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),HSe=new Set(BSe),B2="en",WSe={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},ZSe=async(e,t,r="")=>{const i=`${t}/${r}`,n=`${i}${e}.json`;return JM[n]??(JM[n]=QY(e,i)),await JM[n]},JM={},QY=async(e,t)=>{const r=`${t}${e}.json`;try{const i=await fetch(r);if(i.ok)return await i.json()}catch(i){return console.error(i),{}}return e===B2?{}:await QY(B2,t)},YSe=e=>{const t=qSe(e,"lang",globalThis.navigator?.language||B2);return{lang:t,t9nLocale:KY(t)}},KY=e=>{const[t,r]=e.split("-"),i=t.toLowerCase();let n=i;return r&&(n=`${i}-${r.toUpperCase()}`),n=WSe[n]??n,HSe.has(n)?n:r?KY(i):B2},n4e=(e,t,r,i)=>{let n;const s=()=>JSe(e,t(),i).then(a=>{(n?.lang!==a.lang||n.t9nLocale!==a.t9nLocale||n.t9nStrings!==a.t9nStrings)&&r(a),n=a}).catch(console.error);return queueMicrotask(s),zSe(e,["lang"],s)},JSe=async(e,t,r=e.localName.split("-").slice(1).join("-"))=>{const{lang:i,t9nLocale:n}=YSe(e),s=`${t}/${r}/t9n`,c=r===null?{}:await ZSe(n,s,"messages.");return{lang:i,t9nLocale:n,t9nStrings:c}},XSe=e=>e.replace(QSe,(t,r)=>`${r===0?"":"-"}${t.toLowerCase()}`),QSe=/[A-Z]+(?![a-z])|[A-Z]/gu,KSe=(e,t)=>{const r=t/e2e;let i=0;const n=setInterval(()=>{i+=r,i>=t&&(clearInterval(n),e())},r);return n},e2e=4;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const lS=globalThis,mP=lS.ShadowRoot&&(lS.ShadyCSS===void 0||lS.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,yP=Symbol(),RU=new WeakMap;let eJ=class{constructor(t,r,i){if(this._$cssResult$=!0,i!==yP)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=r}get styleSheet(){let t=this.o;const r=this.t;if(mP&&t===void 0){const i=r!==void 0&&r.length===1;i&&(t=RU.get(r)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&RU.set(r,t))}return t}toString(){return this.cssText}};const t2e=e=>new eJ(typeof e=="string"?e:e+"",void 0,yP),o4e=(e,...t)=>{const r=e.length===1?e[0]:t.reduce(((i,n,s)=>i+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[s+1]),e[0]);return new eJ(r,e,yP)},r2e=(e,t)=>{if(mP)e.adoptedStyleSheets=t.map((r=>r instanceof CSSStyleSheet?r:r.styleSheet));else for(const r of t){const i=document.createElement("style"),n=lS.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=r.cssText,e.appendChild(i)}},CU=mP?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let r="";for(const i of t.cssRules)r+=i.cssText;return t2e(r)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:i2e,defineProperty:n2e,getOwnPropertyDescriptor:s2e,getOwnPropertyNames:o2e,getOwnPropertySymbols:a2e,getPrototypeOf:l2e}=Object,KT=globalThis,IU=KT.trustedTypes,u2e=IU?IU.emptyScript:"",c2e=KT.reactiveElementPolyfillSupport,kv=(e,t)=>e,BR={toAttribute(e,t){switch(t){case Boolean:e=e?u2e:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=e!==null;break;case Number:r=e===null?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch{r=null}}return r}},gP=(e,t)=>!i2e(e,t),NU={attribute:!0,type:String,converter:BR,reflect:!1,useDefault:!1,hasChanged:gP};Symbol.metadata??=Symbol("metadata"),KT.litPropertyMetadata??=new WeakMap;let gf=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,r=NU){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(t,r),!r.noAccessor){const i=Symbol(),n=this.getPropertyDescriptor(t,i,r);n!==void 0&&n2e(this.prototype,t,n)}}static getPropertyDescriptor(t,r,i){const{get:n,set:s}=s2e(this.prototype,t)??{get(){return this[r]},set(a){this[r]=a}};return{get:n,set(a){const c=n?.call(this);s?.call(this,a),this.requestUpdate(t,c,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??NU}static _$Ei(){if(this.hasOwnProperty(kv("elementProperties")))return;const t=l2e(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(kv("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(kv("properties"))){const r=this.properties,i=[...o2e(r),...a2e(r)];for(const n of i)this.createProperty(n,r[n])}const t=this[Symbol.metadata];if(t!==null){const r=litPropertyMetadata.get(t);if(r!==void 0)for(const[i,n]of r)this.elementProperties.set(i,n)}this._$Eh=new Map;for(const[r,i]of this.elementProperties){const n=this._$Eu(r,i);n!==void 0&&this._$Eh.set(n,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const r=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const n of i)r.unshift(CU(n))}else t!==void 0&&r.push(CU(t));return r}static _$Eu(t,r){const i=r.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),this.renderRoot!==void 0&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,r=this.constructor.elementProperties;for(const i of r.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return r2e(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,r,i){this._$AK(t,i)}_$ET(t,r){const i=this.constructor.elementProperties.get(t),n=this.constructor._$Eu(t,i);if(n!==void 0&&i.reflect===!0){const s=(i.converter?.toAttribute!==void 0?i.converter:BR).toAttribute(r,i.type);this._$Em=t,s==null?this.removeAttribute(n):this.setAttribute(n,s),this._$Em=null}}_$AK(t,r){const i=this.constructor,n=i._$Eh.get(t);if(n!==void 0&&this._$Em!==n){const s=i.getPropertyOptions(n),a=typeof s.converter=="function"?{fromAttribute:s.converter}:s.converter?.fromAttribute!==void 0?s.converter:BR;this._$Em=n;const c=a.fromAttribute(r,s.type);this[n]=c??this._$Ej?.get(n)??c,this._$Em=null}}requestUpdate(t,r,i){if(t!==void 0){const n=this.constructor,s=this[t];if(i??=n.getPropertyOptions(t),!((i.hasChanged??gP)(s,r)||i.useDefault&&i.reflect&&s===this._$Ej?.get(t)&&!this.hasAttribute(n._$Eu(t,i))))return;this.C(t,r,i)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(t,r,{useDefault:i,reflect:n,wrapped:s},a){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,a??r??this[t]),s!==!0||a!==void 0)||(this._$AL.has(t)||(this.hasUpdated||i||(r=void 0),this._$AL.set(t,r)),n===!0&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[n,s]of this._$Ep)this[n]=s;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[n,s]of i){const{wrapped:a}=s,c=this[n];a!==!0||this._$AL.has(n)||c===void 0||this.C(n,void 0,s,c)}}let t=!1;const r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),this._$EO?.forEach((i=>i.hostUpdate?.())),this.update(r)):this._$EM()}catch(i){throw t=!1,this._$EM(),i}t&&this._$AE(r)}willUpdate(t){}_$AE(t){this._$EO?.forEach((r=>r.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach((r=>this._$ET(r,this[r]))),this._$EM()}updated(t){}firstUpdated(t){}};gf.elementStyles=[],gf.shadowRootOptions={mode:"open"},gf[kv("elementProperties")]=new Map,gf[kv("finalized")]=new Map,c2e?.({ReactiveElement:gf}),(KT.reactiveElementVersions??=[]).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const vP=globalThis,H2=vP.trustedTypes,PU=H2?H2.createPolicy("lit-html",{createHTML:e=>e}):void 0,tJ="$lit$",hc=`lit$${Math.random().toFixed(9).slice(2)}$`,rJ="?"+hc,d2e=`<${rJ}>`,Vh=document,h1=()=>Vh.createComment(""),p1=e=>e===null||typeof e!="object"&&typeof e!="function",bP=Array.isArray,h2e=e=>bP(e)||typeof e?.[Symbol.iterator]=="function",XM=`[ 	
\f\r]`,c0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,LU=/-->/g,DU=/>/g,Sd=RegExp(`>|${XM}(?:([^\\s"'>=/]+)(${XM}*=${XM}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),kU=/'/g,FU=/"/g,iJ=/^(?:script|style|textarea|title)$/i,nJ=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),l4e=nJ(1),u4e=nJ(2),kc=Symbol.for("lit-noChange"),Sr=Symbol.for("lit-nothing"),UU=new WeakMap,ch=Vh.createTreeWalker(Vh,129);function sJ(e,t){if(!bP(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return PU!==void 0?PU.createHTML(t):t}const p2e=(e,t)=>{const r=e.length-1,i=[];let n,s=t===2?"<svg>":t===3?"<math>":"",a=c0;for(let c=0;c<r;c++){const d=e[c];let f,g,v=-1,w=0;for(;w<d.length&&(a.lastIndex=w,g=a.exec(d),g!==null);)w=a.lastIndex,a===c0?g[1]==="!--"?a=LU:g[1]!==void 0?a=DU:g[2]!==void 0?(iJ.test(g[2])&&(n=RegExp("</"+g[2],"g")),a=Sd):g[3]!==void 0&&(a=Sd):a===Sd?g[0]===">"?(a=n??c0,v=-1):g[1]===void 0?v=-2:(v=a.lastIndex-g[2].length,f=g[1],a=g[3]===void 0?Sd:g[3]==='"'?FU:kU):a===FU||a===kU?a=Sd:a===LU||a===DU?a=c0:(a=Sd,n=void 0);const S=a===Sd&&e[c+1].startsWith("/>")?" ":"";s+=a===c0?d+d2e:v>=0?(i.push(f),d.slice(0,v)+tJ+d.slice(v)+hc+S):d+hc+(v===-2?c:S)}return[sJ(e,s+(e[r]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),i]};let HR=class oJ{constructor({strings:t,_$litType$:r},i){let n;this.parts=[];let s=0,a=0;const c=t.length-1,d=this.parts,[f,g]=p2e(t,r);if(this.el=oJ.createElement(f,i),ch.currentNode=this.el.content,r===2||r===3){const v=this.el.content.firstChild;v.replaceWith(...v.childNodes)}for(;(n=ch.nextNode())!==null&&d.length<c;){if(n.nodeType===1){if(n.hasAttributes())for(const v of n.getAttributeNames())if(v.endsWith(tJ)){const w=g[a++],S=n.getAttribute(v).split(hc),T=/([.?@])?(.*)/.exec(w);d.push({type:1,index:s,name:T[2],strings:S,ctor:T[1]==="."?m2e:T[1]==="?"?y2e:T[1]==="@"?g2e:eE}),n.removeAttribute(v)}else v.startsWith(hc)&&(d.push({type:6,index:s}),n.removeAttribute(v));if(iJ.test(n.tagName)){const v=n.textContent.split(hc),w=v.length-1;if(w>0){n.textContent=H2?H2.emptyScript:"";for(let S=0;S<w;S++)n.append(v[S],h1()),ch.nextNode(),d.push({type:2,index:++s});n.append(v[w],h1())}}}else if(n.nodeType===8)if(n.data===rJ)d.push({type:2,index:s});else{let v=-1;for(;(v=n.data.indexOf(hc,v+1))!==-1;)d.push({type:7,index:s}),v+=hc.length-1}s++}}static createElement(t,r){const i=Vh.createElement("template");return i.innerHTML=t,i}};function oy(e,t,r=e,i){if(t===kc)return t;let n=i!==void 0?r._$Co?.[i]:r._$Cl;const s=p1(t)?void 0:t._$litDirective$;return n?.constructor!==s&&(n?._$AO?.(!1),s===void 0?n=void 0:(n=new s(e),n._$AT(e,r,i)),i!==void 0?(r._$Co??=[])[i]=n:r._$Cl=n),n!==void 0&&(t=oy(e,n._$AS(e,t.values),n,i)),t}let f2e=class{constructor(t,r){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:r},parts:i}=this._$AD,n=(t?.creationScope??Vh).importNode(r,!0);ch.currentNode=n;let s=ch.nextNode(),a=0,c=0,d=i[0];for(;d!==void 0;){if(a===d.index){let f;d.type===2?f=new wP(s,s.nextSibling,this,t):d.type===1?f=new d.ctor(s,d.name,d.strings,this,t):d.type===6&&(f=new v2e(s,this,t)),this._$AV.push(f),d=i[++c]}a!==d?.index&&(s=ch.nextNode(),a++)}return ch.currentNode=Vh,n}p(t){let r=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(t,i,r),r+=i.strings.length-2):i._$AI(t[r])),r++}},wP=class aJ{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,r,i,n){this.type=2,this._$AH=Sr,this._$AN=void 0,this._$AA=t,this._$AB=r,this._$AM=i,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&t?.nodeType===11&&(t=r.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,r=this){t=oy(this,t,r),p1(t)?t===Sr||t==null||t===""?(this._$AH!==Sr&&this._$AR(),this._$AH=Sr):t!==this._$AH&&t!==kc&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):h2e(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==Sr&&p1(this._$AH)?this._$AA.nextSibling.data=t:this.T(Vh.createTextNode(t)),this._$AH=t}$(t){const{values:r,_$litType$:i}=t,n=typeof i=="number"?this._$AC(t):(i.el===void 0&&(i.el=HR.createElement(sJ(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===n)this._$AH.p(r);else{const s=new f2e(n,this),a=s.u(this.options);s.p(r),this.T(a),this._$AH=s}}_$AC(t){let r=UU.get(t.strings);return r===void 0&&UU.set(t.strings,r=new HR(t)),r}k(t){bP(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let i,n=0;for(const s of t)n===r.length?r.push(i=new aJ(this.O(h1()),this.O(h1()),this,this.options)):i=r[n],i._$AI(s),n++;n<r.length&&(this._$AR(i&&i._$AB.nextSibling,n),r.length=n)}_$AR(t=this._$AA.nextSibling,r){for(this._$AP?.(!1,!0,r);t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){this._$AM===void 0&&(this._$Cv=t,this._$AP?.(t))}},eE=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,r,i,n,s){this.type=1,this._$AH=Sr,this._$AN=void 0,this.element=t,this.name=r,this._$AM=n,this.options=s,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Sr}_$AI(t,r=this,i,n){const s=this.strings;let a=!1;if(s===void 0)t=oy(this,t,r,0),a=!p1(t)||t!==this._$AH&&t!==kc,a&&(this._$AH=t);else{const c=t;let d,f;for(t=s[0],d=0;d<s.length-1;d++)f=oy(this,c[i+d],r,d),f===kc&&(f=this._$AH[d]),a||=!p1(f)||f!==this._$AH[d],f===Sr?t=Sr:t!==Sr&&(t+=(f??"")+s[d+1]),this._$AH[d]=f}a&&!n&&this.j(t)}j(t){t===Sr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},m2e=class extends eE{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===Sr?void 0:t}},y2e=class extends eE{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==Sr)}},g2e=class extends eE{constructor(t,r,i,n,s){super(t,r,i,n,s),this.type=5}_$AI(t,r=this){if((t=oy(this,t,r,0)??Sr)===kc)return;const i=this._$AH,n=t===Sr&&i!==Sr||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,s=t!==Sr&&(i===Sr||n);n&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}},v2e=class{constructor(t,r,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=r,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){oy(this,t)}};const b2e=vP.litHtmlPolyfillSupport;b2e?.(HR,wP),(vP.litHtmlVersions??=[]).push("3.3.1");const w2e=(e,t,r)=>{const i=r?.renderBefore??t;let n=i._$litPart$;if(n===void 0){const s=r?.renderBefore??null;i._$litPart$=n=new wP(t.insertBefore(h1(),s),s,void 0,r??{})}return n._$AI(e),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _P=globalThis;let _h=class extends gf{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=w2e(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return kc}};_h._$litElement$=!0,_h.finalized=!0,_P.litElementHydrateSupport?.({LitElement:_h});const _2e=_P.litElementPolyfillSupport;_2e?.({LitElement:_h});(_P.litElementVersions??=[]).push("4.2.1");const SP=Symbol.for("controller"),S2e=e=>typeof e=="object"&&e!==null&&(SP in e||"hostConnected"in e||"hostDisconnected"in e||"hostUpdate"in e||"hostUpdated"in e),g4e=e=>typeof e?.then=="function";let J0;const X0=e=>{J0!==e&&(J0=e,queueMicrotask(()=>J0===e?J0=void 0:0))},tE=e=>J0;let Vd=[];const T2e=e=>{if(e===void 0){Vd=[];return}const t=Vd.indexOf(e);Vd=t===-1?[...Vd,e]:Vd.slice(0,t+1),queueMicrotask(()=>Vd=[])},E2e=()=>Vd;let Hf;const v4e=e=>{Hf!==e&&(Hf=e,queueMicrotask(()=>Hf===e?Hf=void 0:0))},x2e=()=>{const e=Hf;return Hf=void 0,e},$2e=async(e,t)=>{const r=TP(e);if(r===void 0)return e;if(await r.ready,typeof t=="function"){const i=r.watchExports(n=>t(n,i))}return r.exports},M2e=async e=>{const t=TP(e);return await t.ready,t},TP=e=>{const r=tE().manager.X(e);if(r!==void 0)return r;if(S2e(e))return e;const i=x2e();if(i!==void 0)return i};let WR=!1;const b4e=e=>{WR=!0;try{return e()}finally{WR=!1}},A2e=(e,t,r)=>{const i=Object.keys(e),n=i.length;Wf===void 0&&queueMicrotask(EP),Wf??=new Map;let s=Wf.get(e);return s===void 0&&(s={callbacks:[],keyCount:n},Wf.set(e,s)),s.keyCount!==n&&(s.callbacks.forEach(a=>a(i)),s.callbacks=[],s.keyCount=n),s.callbacks.push(a=>{const c=f=>lr(t,null,f),d=a[n];d===void 0?c(void 0):e[d]===r?c(d):c(void 0)}),r};let Wf;const EP=()=>{Wf?.forEach(({callbacks:e},t)=>{const r=Object.keys(t);e.forEach(i=>i(r))}),Wf=void 0},O2e=(e,t,r)=>{const i=e.manager;return i.V!==Sr&&i.V!==r&&i.S(void 0,void 0),i.T.length===0&&queueMicrotask(()=>i.S(void 0,void 0)),i.V=r,i.T.push((n,s)=>lr(t,void 0,r===s?n:void 0)),r},R2e=(e=[tE(),...E2e()],t,r)=>{const i=Array.isArray(e)?e:[e];let n=i.length+1;const s=a=>{n-=1,a!==void 0&&(n=Math.min(n,0)),n===0&&t(a)};i.forEach(a=>A2e(a,c=>s(c===void 0?void 0:{key:c,host:a,isReactive:!1}),r));for(const a of i)if("manager"in a&&a.manager.component===a){O2e(a,c=>s(c===void 0?void 0:{key:c,host:a,isReactive:!0}),r);break}return r},C2e=(e="",t={},r=tE())=>{const i={emit:n=>{e===""&&EP();const s=new CustomEvent(e,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...t});return r.el.dispatchEvent(s),s}};return e===""&&R2e(void 0,n=>e=n.key,i),i},w4e=C2e.bind(null,"");var lJ;lJ=SP;class I2e{constructor(t){this.#r=[],this.#e=[],this.#i=[],this.#l=[],this.#u=[],this.#c=[],this.#d=[],this.#h=[],this.#o=[],this.#a=!1,this.P=new d1,this.connectedCalled=!1,this.loadedCalled=!1,this[lJ]=!0,this.#s=[];const r=this,i=t??tE();r.#t=i,r.ready=r.P.promise,r.#n=zU(r),r.component=i,r.#t.addController(r),r.#t.manager===void 0||(T2e(r),queueMicrotask(()=>r.catchUpLifecycle()))}#r;#e;#i;#l;#u;#c;#d;#h;#o;#a;#t;catchUpLifecycle(){const{manager:t}=this.#t;t.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),t.#a&&this.triggerLoad().then(()=>t.loadedCalled&&this.triggerLoaded()).catch(console.error)}#n;get exports(){return this.#n}set exports(t){const r=this.#n;r!==t&&(this.#n=t,this.#s.forEach(lr),this.connectedCalled&&this.O!==!1&&this.#t.requestUpdate(this.O,r)),this.P.resolve(t)}setProvisionalExports(t,r=!0){this.#n=r?zU(t):t,this.#s.forEach(lr)}#s;watchExports(t){const r=()=>t(this.#n);return this.#s.push(r),()=>void this.#s.splice(this.#s.indexOf(r),1)}get use(){return X0(this.#t),$2e}get useRef(){return X0(this.#t),M2e}get useRefSync(){return X0(this.#t),TP}controllerRemoved(){this.#t.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(t){this.#r.push(t)}onDisconnected(t){this.#e.push(t)}onLoad(t){this.#i.push(t)}onLoaded(t){this.#l.push(t)}onUpdate(t){this.#u.push(t)}onUpdated(t){this.#c.push(t)}onDestroy(t){this.#d.push(t)}onLifecycle(t){this.#h.push(t),this.connectedCalled&&this.#t.el.isConnected&&this.#p(t)}triggerConnected(){const t=this;t.hostConnected&&lr(t.hostConnected,t),t.#r.forEach(lr),t.triggerLifecycle(),t.connectedCalled=!0}triggerDisconnected(){const t=this;t.hostDisconnected&&lr(t.hostDisconnected,t),t.#e.forEach(lr),t.#o.forEach(lr),t.#o=[]}async triggerLoad(){if(this.#a)return;this.#a=!0;const t=this;t.hostLoad&&await qR(t.hostLoad,t),this.#i.length>0&&await Promise.allSettled(this.#i.map(qR)),this.P.resolve(this.#n)}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&lr(this.hostLoaded,this),this.#l.forEach(lr),this.loadedCalled=!0)}triggerUpdate(t){this.hostUpdate&&lr(this.hostUpdate,this,t),this.#u.forEach(jU,t)}triggerUpdated(t){this.hostUpdated&&lr(this.hostUpdated,this,t),this.#c.forEach(jU,t)}triggerDestroy(){this.hostDestroy&&lr(this.hostDestroy,this),this.#d.forEach(lr)}triggerLifecycle(){this.hostLifecycle&&this.#p(()=>this.hostLifecycle()),this.#h.forEach(this.#p,this)}#p(t){X0(this.#t);const r=lr(t);(Array.isArray(r)?r:[r]).forEach(n=>{typeof n=="function"?this.#o.push(n):typeof n=="object"&&typeof n.remove=="function"&&this.#o.push(n.remove)})}}function jU(e){lr(e,void 0,this)}const N2e=I2e,zU=e=>{if(typeof e!="object"&&typeof e!="function"||e===null)return e;const t={get(i,n,s){if(!((n==="exports"||n==="_exports")&&n in i&&i[n]===r)&&(n in i||n in Promise.prototype||typeof n=="symbol"))return typeof i=="function"?i[n]:Reflect.get(i,n,s)}},r=new Proxy(e,t);return r},P2e=1,L2e=2,D2e=4,k2e=8,F2e=16,U2e=32,j2e=64,uJ=e=>{let t=e;for(;t=t.parentNode??t.host;)if(t?.constructor?.lumina){const r=t;return r.manager?.loadedCalled||(r.J??r._offspring).push(e),(r.I??r._postLoad).promise}return!1},VU={};function cJ(){}const uS=Object.defineProperty,z2e=globalThis.HTMLElement??cJ;var In,kl,Rm,v1,ZR;const WP=class WP extends z2e{constructor(){var n;super();so(this,v1);so(this,In);so(this,kl);so(this,Rm);oo(this,kl,{}),oo(this,Rm,[]),this.I=new d1,this.H=new d1,this.J=[];const r=this,i=r.constructor;r._offspring=r.J,r._postLoad=r.I,i.C?.forEach(s=>{Object.hasOwn(r,s)&&(xt(r,kl)[s]=r[s],delete r[s])}),i.A?kg(n=r,v1,ZR).call(n,{a:i.A}):i.B.then(async s=>{var a;await i.K.p,kg(a=r,v1,ZR).call(a,await(s.default?.then(c=>typeof c=="function"?{a:c}:c)??s))}).catch(s=>{r.H.reject(s),setTimeout(()=>{throw s})})}static F(){for(const r of this.C??[])uS(this.prototype,r,{configurable:!0,enumerable:!0,get(){return xt(this,kl)[r]},set(i){xt(this,kl)[r]=i}});for(const r of this.E??[])uS(this.prototype,r,{async value(...i){return xt(this,In)||await this.H.promise,await xt(this,In)[r](...i)},configurable:!0});for(const r of this.D??[])uS(this.prototype,r,{value(...i){return xt(this,In)[r](...i)},configurable:!0})}get manager(){return xt(this,In)?.manager}attributeChangedCallback(r,i,n){xt(this,In)?.attributeChangedCallback(r,i,n),xt(this,In)||xt(this,Rm).push(r)}connectedCallback(){xt(this,In)?xt(this,In).connectedCallback?.():queueMicrotask(()=>this.G=uJ(this))}disconnectedCallback(){xt(this,In)?.disconnectedCallback?.()}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){xt(this,In)?.requestUpdate()}};In=new WeakMap,kl=new WeakMap,Rm=new WeakMap,v1=new WeakSet,ZR=function(r){const i=this.constructor,n=i.L,s=xt(this,kl),a=Object.values(r).find(w=>w.L===n),c=`${n}--lazy`;let d=a;for(;d&&!Object.hasOwn(d,"lumina");)d=Object.getPrototypeOf(d);G2e(d),!i.A&&(i.A=a,customElements.define(c,a)),a.N=this;const g=document.createElement(c);a.N=void 0,oo(this,In,g),oo(this,kl,g),xt(this,Rm).forEach(w=>g.attributeChangedCallback(w,null,this.getAttribute(w))),Object.entries(s).forEach(V2e,g);const v=this.isConnected;(v||this.G)&&(g.connectedCallback?.(),v||g.disconnectedCallback())},WP.lumina=!0;let GU=WP;function V2e([e,t]){this[e]=t}const G2e=e=>{const t=e.prototype,r=Element.prototype;Object.hasOwn(t,"isConnected")||(t.setAttribute=function(n,s){r.setAttribute.call(this.el,n,s)},t.removeAttribute=function(n){r.removeAttribute.call(this.el,n)},uS(t,"isConnected",{get(){return Reflect.get(r,"isConnected",this.el)}}))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const dJ={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},hJ=e=>(...t)=>({_$litDirective$:e,values:t});let pJ=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,r,i){this._$Ct=t,this._$AM=r,this._$Ci=i}_$AS(t,r){return this.update(t,r)}update(t,r){return this.render(...r)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const q2e=hJ(class extends pJ{constructor(e){if(super(e),e.type!==dJ.ATTRIBUTE||e.name!=="class"||e.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){if(this.st===void 0){this.st=new Set,e.strings!==void 0&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((i=>i!==""))));for(const i in t)t[i]&&!this.nt?.has(i)&&this.st.add(i);return this.render(t)}const r=e.element.classList;for(const i of this.st)i in t||(r.remove(i),this.st.delete(i));for(const i in t){const n=!!t[i];n===this.st.has(i)||this.nt?.has(i)||(n?(r.add(i),this.st.add(i)):(r.remove(i),this.st.delete(i)))}return kc}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fJ="important",B2e=" !"+fJ,H2e=hJ(class extends pJ{constructor(e){if(super(e),e.type!==dJ.ATTRIBUTE||e.name!=="style"||e.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,r)=>{const i=e[r];return i==null?t:t+`${r=r.includes("-")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`}),"")}update(e,[t]){const{style:r}=e.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(t)),this.render(t);for(const i of this.ft)t[i]==null&&(this.ft.delete(i),i.includes("-")?r.removeProperty(i):r[i]=null);for(const i in t){const n=t[i];if(n!=null){this.ft.add(i);const s=typeof n=="string"&&n.endsWith(B2e);i.includes("-")||s?r.setProperty(i,s?n.slice(0,-11):n,s?fJ:""):r[i]=n}}return kc}});class W2e extends N2e{constructor(t){super(t),this.destroyed=!1,this.R=!1,this.V=Sr,this.T=[],this.#i=new WeakMap,this.#e=t,this.exports=void 0,this.hasDestroy=YR in t&&typeof t.destroy=="function",_h.prototype.addController.call(t,{hostConnected:()=>{if(this.destroyed){const r=t.el.localName;throw t.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${YR} prop.`)}this.#r!==void 0&&clearTimeout(this.#r),EP();for(const r of t.M)"triggerConnected"in r?r.triggerConnected():lr(r.hostConnected,r)},hostDisconnected:()=>{for(const r of t.M)"triggerDisconnected"in r?r.triggerDisconnected():lr(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of t.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):lr(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of t.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):lr(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),X0(t)}#r;#e;async destroy(){if(!this.destroyed){this.#e.el.isConnected&&(this.hasDestroy=!1,this.#e.el.remove()),this.#r=void 0,this.destroyed=!0;for(const t of this.#e.M)"triggerDestroy"in t?t.triggerDestroy():lr(t.hostDestroy,t);this.#e.M.splice(0)}}U(){if(this.#r!==void 0&&clearTimeout(this.#r),!this.#e.el.isConnected&&!this.#e.autoDestroyDisabled){const t=()=>void this.#e.destroy();this.#r=KSe(t,Z2e)}}S(t,r){const i=this.T;this.V=Sr,this.T=[],i.forEach(n=>n(t,r))}#i;W(t,r){(typeof r=="object"&&r!==null||typeof r=="function")&&this.#i.set(r,t)}X(t){if(typeof t=="object"&&t!==null||typeof t=="function")return this.#i.get(t)}}let Z2e=1e3;const YR="autoDestroyDisabled";var hh,b1,w1,ph,ma,ay,mJ,yJ;const Gv=class Gv extends _h{constructor(){super();so(this,ay);so(this,hh);so(this,b1);so(this,w1);so(this,ph);so(this,ma);this.M=[],this.manager=new W2e(this);const r=this,i=r.constructor,n=i.N,s=i.K.o,a=Gv.prototype.shouldUpdate;oo(r,ph,n?.H??new d1),r.I=n?.I??new d1,r.J=n?.J??[],r._offspring=r.J,r._postLoad=r.I,r.el=n??r,oo(r,w1,r.enableUpdating),r.enableUpdating=cJ,r.shouldUpdate!==a&&(oo(r,b1,r.shouldUpdate),r.shouldUpdate=a),s&&(oo(r,hh,new Map),i.elementProperties.forEach((c,d)=>xt(r,hh).set(d,s())))}static finalizeStyles(r){const i=super.finalizeStyles(r),n=this.shadowRootOptions===VU;return this.K?.commonStyles===void 0||n?i:[this.K.commonStyles,...i]}static createProperty(r,i){const n=typeof i=="number"?i:Array.isArray(i)?i[0]:0,s=Array.isArray(i)?i[1]:void 0,a=s?.hasChanged??gP,c={attribute:n&P2e&&typeof r=="string"?XSe(r):!1,reflect:!!(n&L2e),type:n&D2e?Boolean:n&k2e?Number:void 0,state:!!(n&F2e),readOnly:!!(n&U2e),noAccessor:!!(n&j2e),c:!1,...s,hasChanged(d,f){const g=a(d,f);return c.c=g,g}};super.createProperty(r,c)}static getPropertyDescriptor(r,i,n){const s=this.K,a=super.getPropertyDescriptor(r,i,n);return n.d=a,{...a,get(){return s.t?.(xt(this,hh).get(r)),a.get?.call(this)},set(c){const d=this.manager;if(n.readOnly&&!WR&&(d.R||d.connectedCalled))throw Error(`Cannot assign to read-only property "${r}" of ${this.el.localName}. Trying to assign "${c}"`);a.set.call(this,c??void 0),n.c&&xt(this,hh)?.get(r)?.notify(),d.T.length>0&&d?.S(r,c)}}}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const r=this.constructor.K.c?.(()=>this.requestUpdate());oo(this,ma,r);const i=!this.manager.connectedCalled;super.connectedCallback(),i?queueMicrotask(()=>kg(this,ay,yJ).call(this).catch(n=>{xt(this,ph).reject(n),setTimeout(()=>{throw n})})):r&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),xt(this,ma)?.destroy(),oo(this,ma,void 0)}createRenderRoot(){const r=this.el.shadowRoot,i=this.constructor,n=i.shadowRootOptions,a=r??(n===VU?this.el:this.el.attachShadow(n));if(r)return _h.prototype.createRenderRoot.call(this),r;if(this.isConnected){const c=a.getRootNode();c.adoptedStyleSheets=[...c.adoptedStyleSheets,...i.elementStyles.map(d=>"styleSheet"in d?d.styleSheet:d)]}return a}shouldUpdate(r){var i;return this.manager.Q=r,((i=xt(this,b1))==null?void 0:i.call(this,r))??!0}update(r){xt(this,ma)?kg(this,ay,mJ).call(this,r):super.update(r)}listen(r,i,n){const s=i?.bind(this)??i;this.manager.onLifecycle(()=>(this.el.addEventListener(r,s,n),()=>this.el.removeEventListener(r,s,n)))}listenOn(r,i,n,s){const a=n?.bind(this)??n;this.manager.onLifecycle(()=>(r.addEventListener(i,a,s),()=>r.removeEventListener(i,a,s)))}async componentOnReady(){return await xt(this,ph).promise,this}addController(r){this.M.push(r),!(SP in r)&&this.renderRoot&&this.el.isConnected&&r.hostConnected?.()}removeController(r){this.M.splice(this.M.indexOf(r),1),r.controllerRemoved?.()}};hh=new WeakMap,b1=new WeakMap,w1=new WeakMap,ph=new WeakMap,ma=new WeakMap,ay=new WeakSet,mJ=function(r){try{xt(this,ma).clear(),this.constructor.K.r(xt(this,ma),()=>E4(Gv.prototype,this,"update").call(this,r))}catch(i){throw xt(this,ma).clear(),i}},yJ=async function(){const r=this.el.G??uJ(this.el);r&&await r;const i=[];for(const s of this.M)"triggerLoad"in s?i.push(s.triggerLoad()):i.push(qR(s.hostLoad,s));await Promise.all(i),await this.load?.(),this.manager.hasDestroy&&this.manager.onUpdate(s=>s.has(YR)&&this.manager.U()),xt(this,w1).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const n=this.J.filter(s=>!s.manager?.loadedCalled);n.length&&await Promise.allSettled(n.map(async s=>await s.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const s of this.M)"triggerLoaded"in s?s.triggerLoaded():lr(s.hostLoaded,s);this.loaded?.(),xt(this,ph).resolve()},Gv.lumina=!0;let qU=Gv;const Y2e=e=>{let t;const r=n=>{t=new URL(n,globalThis.location?.href||void 0).href},i={...e,getAssetPath(n){const s=new URL(n,t);return s.origin!==globalThis.location?.origin?s.href:s.pathname},setAssetPath:r,customElement(n,s){s.K=i,s.L=n,customElements.get(n)||customElements.define(n,s)}};return r(e.defaultAssetPath),i},S4e=e=>typeof e=="object"&&e!=null?q2e(e):e,T4e=e=>typeof e=="object"&&e!=null?H2e(e):e,E4e=Sr;function x4e(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}const $4e={toAttribute:e=>e===!0?"":e===!1?null:e};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const J2e="calcite-mode-auto",X2e="calcite-mode-dark",M4e={rtl:"calcite--rtl"},A4e={filter:250,nextTick:0,resize:150,reposition:100},O4e=25;function BU(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(X2e)||e.contains(J2e)&&t?"dark":"light",i=a=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:a}})),n=a=>{s!==a&&i(a),s=a};let s=r();i(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",a=>n(a.matches?"dark":"light")),new MutationObserver(()=>n(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const Fv=globalThis.calciteConfig,R4e=Fv?.focusTrapStack||[],C4e=Fv?.logLevel||"info",HU="3.2.1",Q2e="2025-05-29",K2e="618973fec";function eTe(){if(Fv&&Fv.version)return;console.info(`Using Calcite Components ${HU} [Date: ${Q2e}, Revision: ${K2e}]`);const e=Fv||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:HU,writable:!1}),globalThis.calciteConfig=e}function tTe(){document.readyState==="interactive"?BU():document.addEventListener("DOMContentLoaded",()=>BU(),{once:!0}),eTe()}tTe();const rTe=Y2e({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.2.1/",hydratedAttribute:"calcite-hydrated"}),{customElement:I4e,getAssetPath:N4e,setAssetPath:iTe}=rTe;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */let gJ=!1;const nTe=e=>{gJ=!0,iTe(e)};let vJ;function sTe(){gJ||nTe(zs(gr(vJ)))}function xP(e){const t=[];for(const r of Object.keys(e))customElements.get(`calcite-${r}`)||t.push(e[r]?.());return t.length>0?Promise.all(t):null}vJ="components/assets";const bJ=Symbol("widget"),wJ=Symbol("widget-test-data"),oTe=[],aTe={},W2=new WeakMap;function _J(e,t){let r=t.children;if(r?.length)for(let n=0;n<r.length;++n)r[n]=_J(e,r[n]);else r=oTe;const i=t.vnodeSelector;if(Z2(i)){const n=t.properties||aTe,s=n.key||i,a={key:s,afterCreate:lTe,afterUpdate:uTe,afterRemoved:SJ,parentWidget:e,widgetConstructor:i,widgetProperties:{...n,key:s,children:r}};return{vnodeSelector:i.vnodeSelector,properties:a,children:void 0,text:void 0,domNode:null}}return t}function lTe(e,t,r,{parentWidget:i,widgetConstructor:n,widgetProperties:s}){const a=new n(s);a.container=e,W2.set(e,a),a.afterCreate?.(a,e),i.addHandles(ht((()=>SJ(e)))),queueMicrotask((()=>{a[wJ].projector.renderNow()}))}function uTe(e,t,r,{widgetProperties:i}){const n=W2.get(e);n&&(n.set(i),n.afterUpdate?.(n,e))}function SJ(e){const t=W2.get(e);t&&(t.afterRemoved?.(t,e),t.destroy(),W2.delete(e))}function Z2(e){return typeof e=="function"&&e[bJ]}const WU=new Set;function cTe(e){WU.add(e),e.finally((()=>WU.delete(e)))}function dTe(e){return ht()}var ZU;let hTe=0;function TJ(e,t){const r=Object.prototype.hasOwnProperty;for(const i in t)r.call(t,i)&&r.call(e,i)&&(e[i]!=null&&t[i]!=null&&typeof e[i]=="object"&&typeof t[i]=="object"?TJ(e[i],t[i]):e[i]=t[i]);return e}const pTe=USe({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,n,s,a)=>{const c=t?.(i,n,s,a),d=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in s)||d){const f=i[2].toLowerCase()+i.slice(3),g=S=>c?.call(s,S);s.addEventListener(f,g,d);const v=()=>s.removeEventListener(f,g,d),w=a.afterRemoved;a.afterRemoved=S=>{w?.(S),v()}}return c}},handleInterceptedEvent(e,t,r,i){const{eventPhase:n,type:s}=i,a=n===Event.CAPTURING_PHASE;let c=`on${s}${a?"capture":""}`;const d=t.properties;(d&&c in d||(c=`on${s[0].toUpperCase()}${s.slice(1)}${a?"Capture":""}`,d&&c in d))&&(JY(),e.scheduleRender(),d[c].call(d.bind||r,i))}});let QM=!1;var Ah;let ci=(Ah=class extends jl.EsriPromiseMixin(Na.EventedAccessor){constructor(t,r){super(t,r),this._attached=!1,this._projector=pTe,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=DI((async()=>{if(this._messageBundleProps?.length){const d=await Promise.allSettled(this._messageBundleProps.map((async({bundlePath:f,propertyName:g})=>{if(this.destroyed)return;let v=await UG(f);this.uiStrings&&Object.keys(this.uiStrings)&&(v=TJ(U(v),this.uiStrings)),this[g]=v})));if(this.destroyed)return;for(const f of d)f.status==="rejected"&&re.getLogger(this).error("widget-intl:locale-error",this.declaredClass,f.reason)}await this.loadLocale()})),this.addHandles(dTe()),sTe();const i="esri-widget-uid-"+Sy(),n=this.render.bind(this);this._trackingTarget=new mT((()=>{this.autoRenderingEnabled&&this.scheduleRender()}));const s=()=>({vnodeSelector:"div",properties:{key:`${i}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),a=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const d=n()??s(),f=d.properties??={};if(f.key??=i,Z2(d.vnodeSelector)){if(!this.visible)return s()}else this.visible?f.styles||(f.styles={}):(f.class="",f.styles={display:"none"}),f.styles.display??="";let g=0;return d.children?.forEach((v=>{Z2(v.vnodeSelector)||(v.properties??={},v.properties.key??=`${this.id}--${g++}`)})),_J(this,d)};this.render=()=>{if(QM)return a();let d=xSe(this)??null;if(d)return d;this._trackingTarget.clear(),QM=!0;try{d=Jl(this._trackingTarget,a)}catch(f){throw re.getLogger(this).error(f),f}finally{QM=!1}return d&&$Se(this,d),d};const c=this.beforeFirstRender();c?this._resourcesFetch=c.then((()=>{this._readyForTrueRender=!0,this._postInitialize()})):(this._resourcesFetch=Promise.resolve().then((()=>{this._postInitialize()})),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),cTe(this._resourcesFetch)}normalizeCtorArgs(t,r){const i={...t};return r&&(i.container=r),i}postInitialize(){}beforeFirstRender(){const t=this.loadDependencies();return this._messageBundleProps?.length||t?Promise.all([t,this._loadLocale()]).then((()=>{})).catch(X4):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(rr(this._trackingTarget),rr(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,HM(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return FN(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+hTe++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(ZU=bJ,wJ)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(HM(this),this._projector.scheduleRender())}classes(...t){return MSe.apply(this,t)}renderNow(){HM(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(je((()=>this.viewModel),((r,i)=>{i&&this.removeHandles("delegated-events"),r&&dT(r)&&this.addHandles(this._delegatedEventNames.map((n=>py(r,n,(s=>{this.emit(n,s)})))),"delegated-events")}),an)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(X4),this.scheduleRender()};this.addHandles([DG(t),je((()=>this.uiStrings),t)]),this.addHandles(Zs((()=>this.container),(r=>{this.destroyed||this._attach(r)}),{initial:!0,once:!0}))}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){this._attached&&(this._projector.detach(this.render),this._attached=!1),t?.parentNode?.removeChild(t)}},Ah[ZU]=!0,Ah.vnodeSelector="div",Ah);u([p()],ci.prototype,"_readyForTrueRender",void 0),u([p({value:null})],ci.prototype,"container",null),u([wt("container")],ci.prototype,"castContainer",null),u([p()],ci.prototype,"icon",null),u([p()],ci.prototype,"id",null),u([p()],ci.prototype,"label",null),u([p()],ci.prototype,"renderable",null),u([p()],ci.prototype,"uiStrings",void 0),u([p()],ci.prototype,"viewModel",void 0),u([p({value:!0})],ci.prototype,"visible",null),u([p()],ci.prototype,"key",void 0),u([p()],ci.prototype,"children",void 0),u([p()],ci.prototype,"afterCreate",void 0),u([p()],ci.prototype,"afterUpdate",void 0),u([p()],ci.prototype,"afterRemoved",void 0),ci=u([O("esri.widgets.Widget")],ci);const rE=ci;var YU,JU,XU,QU,KU,ej,tj,rj,ij,nj,sj,oj,aj,lj,uj;(function(e){e.U8="U8",e.I8="I8",e.U16="U16",e.I16="I16",e.U32="U32",e.I32="I32",e.F32="F32",e.F64="F64",e.Utf8String="Utf8String",e.NotSet="NotSet"})(YU||(YU={})),(function(e){e.Png="Png",e.Jpeg="Jpeg",e.Dds="Dds",e.Raw="Raw",e.Dxt1="Dxt1",e.Dxt5="Dxt5",e.Bc7="Bc7",e.Basis="Basis",e.Etc1="Etc1",e.Etc2="Etc2",e.Astc="Astc",e.Pvrtc="Pvrtc",e.NotSet="NotSet"})(JU||(JU={})),(function(e){e.Position="Position",e.Normal="Normal",e.TexCoord="TexCoord",e.Color="Color",e.Tangent="Tangent",e.FeatureIndex="FeatureIndex",e.UvRegion="UvRegion",e.FeatureVariable="FeatureVariable",e.NotSet="NotSet"})(XU||(XU={})),(function(e){e.Opaque="Opaque",e.Mask="Mask",e.Blend="Blend"})(QU||(QU={})),(function(e){e.None="None",e.Mask="Mask",e.Alpha="Alpha",e.PreMultAlpha="PreMultAlpha",e.NotSet="NotSet"})(KU||(KU={})),(function(e){e.Points="Points",e.Lines="Lines",e.LineStrip="LineStrip",e.Triangles="Triangles",e.TriangleStrip="TriangleStrip",e.NotSet="NotSet"})(ej||(ej={})),(function(e){e.None="None",e.WrapXBit="WrapXBit",e.WrapYBit="WrapYBit",e.WrapXy="WrapXy",e.NotSet="NotSet"})(tj||(tj={})),(function(e){e.Linear="Linear",e.Nearest="Nearest",e.NotSet="NotSet"})(rj||(rj={})),(function(e){e.Linear="Linear",e.Nearest="Nearest",e.NearestMipmapNearest="NearestMipmapNearest",e.LinearMipmapNearest="LinearMipmapNearest",e.NearestMipmapLinear="NearestMipmapLinear",e.LinearMipmapLinear="LinearMipmapLinear",e.NotSet="NotSet"})(ij||(ij={})),(function(e){e.FeatureId="FeatureId",e.GlobalUid="GlobalUid",e.UnspecifiedDateTime="UnspecifiedDateTime",e.EcmaIso8601DateTime="EcmaIso8601DateTime",e.EcmaIso8601DateOnly="EcmaIso8601DateOnly",e.TimeOnly="TimeOnly",e.TimeStamp="TimeStamp",e.ColorRgb="ColorRgb",e.ColorRgba="ColorRgba",e.Unrecognized="Unrecognized",e.NotSet="NotSet"})(nj||(nj={})),(function(e){e.Texture="Texture",e.VertexAtrb="VertexAtrb",e.Implicit="Implicit",e.NotSet="NotSet"})(sj||(sj={})),(function(e){e.Front="Front",e.Back="Back",e.None="None",e.NotSet="NotSet"})(oj||(oj={})),(function(e){e.Pbr="Pbr",e.Unlit="Unlit"})(aj||(aj={})),(function(e){e.Rgb8="Rgb8",e.Rgba8="Rgba8",e.R8="R8",e.Bgr8="Bgr8",e.Bgra8="Bgra8",e.Rg8="Rg8",e.Ga8="Ga8",e.Etc1="Etc1",e.Etc2="Etc2",e.Dxt1="Dxt1",e.Dxt5="Dxt5",e.Bc7="Bc7",e.NotSet="NotSet"})(lj||(lj={})),(function(e){e[e.Succeeded=0]="Succeeded",e[e.Failed=1]="Failed",e[e.MissingInputs=2]="MissingInputs"})(uj||(uj={}));const fTe=new Map;function mTe(e){return fTe.get(e)}function cj(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function yTe(e,t){return e.length!==t.length||e.some(((r,i)=>r.text!==t[i].text))}function d0(e,t,r){!r||!t||e.find((i=>i.layerView===t&&i.text===r))||e.push({text:r,layerView:t})}function gTe(e){return e.type==="bing-maps"}const rl=[];let vf=class extends Ae{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new ge,this.view=null,this._allLayerViewsChange=r=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const i=this.view?.allLayerViews;i&&(this.addHandles(i.map((n=>je((()=>[n.suspended,n.layer?.attributionVisible]),(()=>this._updateAttributionItems())))).toArray(),"suspension"),i.forEach((n=>{n.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(n.on("visible-geometry-changed",(()=>this._updateAttributionItems())),"visible-geometry-changed")}))),r?.removed&&r.removed.forEach((n=>{this._pendingAttributions.delete(n),this._fetchedAttributionData.delete(n)})),this._updateAttributionItems()},this.addHandles([Uh((()=>this.view?.allLayerViews),"change",(r=>this._allLayerViewsChange(r)),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Zs((()=>this.view?.stationary===!0),(()=>this._updateAttributionItems()))])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,r=t?.allLayerViews;if(rl.length=0,!t||!r)return void this._clear();r.forEach((n=>{if(n.suspended||!n.layer?.attributionVisible)return;const s=n.layer;if(cj(s,"user"))return void d0(rl,n,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(n)){const c=this._fetchedAttributionData.get(n);return void(c?d0(rl,n,this._getDynamicAttribution(c,t,s)):cj(s)&&d0(rl,n,s.copyright))}return void this._fetchAttributionData(n)}const a="portalItem"in s?s.portalItem?.accessInformation:void 0;d0(rl,n,a||s.copyright)}));const i=r.find((n=>n.layer?.type==="integrated-mesh-3dtiles"));if(this.view&&i){const n=mTe(this.view);if(n){const s=n.getAttributionText();for(let a=0;a<s.length;++a)d0(rl,i,s[a])}}yTe(this.items,rl)&&(this.items.removeAll(),this.items.addMany(rl)),rl.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const r=await vT(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const i=r.ok?this._createContributionIndex(r.value,gTe(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,i)}this._updateAttributionItems()}_createContributionIndex(t,r){const i=t.contributors,n={};if(!i)return n;for(let s=0;s<i.length;s++){const a=i[s],c=a.coverageAreas;if(!c)return;for(const d of c){const f=d.bbox,g=d.zoomMin-(r&&d.zoomMin?1:0),v=d.zoomMax-(r&&d.zoomMax?1:0),w=new Xe({xmin:f[1],ymin:f[0],xmax:f[3],ymax:f[2],spatialReference:Ee.WGS84}),S={extent:yh(w),attribution:a.attribution||"",score:d.score!=null?d.score:100,id:s};for(let T=g;T<=v;T++)n[T]??=[],n[T].push(S)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(t,r,i){const{extent:n,scale:s}=r;let a=i.tileInfo?.scaleToZoom(s)??0;if(a=Math.min(t.maxKey??0,Math.round(a)),!n||a==null||a<=-1)return"";const c=t[a],d=ST(n.center.clone().normalize(),Ee.WebMercator),f=new Set;return c?c.filter((g=>{const v=g.id,w=!f.has(v)&&d&&g.extent&&I1(g.extent,d);return w&&f.add(v),w})).sort(((g,v)=>v.score-g.score||g.objectId-v.objectId)).map((g=>g.attribution)).join(", "):""}};u([p({readOnly:!0,type:ge})],vf.prototype,"items",void 0),u([p({readOnly:!0})],vf.prototype,"state",null),u([p()],vf.prototype,"view",void 0),vf=u([O("esri.widgets.Attribution.AttributionViewModel")],vf);const EJ=vf,xa={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function vTe(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:wTe(e[t])}}}function bTe(e){const t=e?.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function wTe(e){return function(t,...r){bTe(t)?OSe(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function iE(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var _Te=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},xJ=function(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r];Array.isArray(n)?xJ(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=_Te(n)),t.push(n))}},STe=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var n=[];return xJ(r,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function kn(e,t,...r){return typeof e!="function"||Z2(e)?STe(e,t??null,...r):e(t,...r)}function L4e(...e){return e}const Xp="esri-attribution",Qp={base:Xp,poweredBy:`${Xp}__powered-by`,sources:`${Xp}__sources`,open:`${Xp}--open`,sourcesOpen:`${Xp}__sources--open`,link:`${Xp}__link`};let Ki=class extends rE{constructor(t,r){super(t,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver((i=>i.forEach((({target:n})=>this._checkSourceTextOverflow(n))))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new EJ}initialize(){this.addHandles(Uh((()=>this.viewModel?.items),"change",(()=>this.scheduleRender())))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce(((t,r)=>(t.includes(r.text)||t.push(r.text),t)),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[Qp.open]:this._isOpen};return kn("div",{bind:this,class:this.classes(Qp.base,xa.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return kn("div",{class:Qp.poweredBy},"Powered by"," ",kn("a",{class:Qp.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,r=this._isInteractive,i=r?0:void 0,{attributionText:n}=this,s={[Qp.sourcesOpen]:t,[xa.interactive]:r};return kn("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Qp.sources,s),innerHTML:n,tabIndex:i})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let r=!1;const{clientHeight:i,clientWidth:n,scrollWidth:s}=t,a=s>n,c=this._attributionTextOverflowed!==a;if(this._attributionTextOverflowed=a,c&&(r=!0),this._isOpen){const d=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,d&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};u([p()],Ki.prototype,"_isOpen",void 0),u([p()],Ki.prototype,"_isInteractive",null),u([p()],Ki.prototype,"_attributionTextOverflowed",void 0),u([p()],Ki.prototype,"_prevSourceNodeHeight",void 0),u([p({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Ki.prototype,"attributionText",null),u([p()],Ki.prototype,"icon",null),u([p()],Ki.prototype,"itemDelimiter",void 0),u([p()],Ki.prototype,"label",null),u([p(),iE("esri/widgets/Attribution/t9n/Attribution")],Ki.prototype,"messages",void 0),u([p()],Ki.prototype,"view",null),u([p({type:EJ})],Ki.prototype,"viewModel",void 0),u([vTe()],Ki.prototype,"_toggleState",null),Ki=u([O("esri.widgets.Attribution")],Ki);const TTe=Ki;function ETe(){const e=V("mapview-essential-goto-duration");return e==null?e:e}function xTe(e){return e?.spatialReference?.isWebMercator||e?.spatialReference?.isGeographic||!1}function $Te(e,t,r){return e.goTo(t,r)}const MTe=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return rV(i),this.goToOverride?this.goToOverride(i,r):$Te(i,r.target,r.options)}};return u([p()],t.prototype,"goToOverride",void 0),u([p()],t.prototype,"view",void 0),t=u([O("esri.widgets.support.GoTo")],t),t};let Gd=class extends MTe(Ae){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(Hi)}destroy(){this.view=null}get canShowNorth(){return xTe(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:ETe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const r=-t.heading;this._set("orientation",{x:0,y:0,z:r})}_updateRotationWatcher(t){this.removeAllHandles(),this._watchForView(),t&&this.addHandles(t.type==="2d"?je((()=>t?.rotation),this._updateForRotation,Hi):je((()=>t?.camera),this._updateForCamera,Hi))}_watchForView(t){this.addHandles(je((()=>this.view),this._updateRotationWatcher,t))}};u([p({readOnly:!0})],Gd.prototype,"canShowNorth",null),u([p({readOnly:!0})],Gd.prototype,"orientation",void 0),u([p({readOnly:!0})],Gd.prototype,"state",null),u([p()],Gd.prototype,"view",void 0),Gd=u([O("esri.widgets.Compass.CompassViewModel")],Gd);const $J=Gd,dj="esri-compass",hj={base:dj,iconContainer:`${dj}__icon-container`};let ml=class extends rE{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new $J,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=i=>({transform:`rotateZ(${i.z}deg)`})}loadDependencies(){return xP({button:()=>ue(()=>import("./index-Dr5X_34f.js"),__vite__mapDeps([270,271,272,273,274,275,276,277,278,279,280,281,282])),icon:()=>ue(()=>import("./index-BTEniU83.js").then(t=>t.i),__vite__mapDeps([274,275,276]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:r}=this.viewModel,{messages:i}=this;return kn("div",{class:this.classes(hj.base,xa.widget)},kn("calcite-button",{class:xa.widgetButton,disabled:r==="disabled",kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},kn("div",{"aria-hidden":"true",class:hj.iconContainer,title:i.reset},kn("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};u([p()],ml.prototype,"goToOverride",null),u([p()],ml.prototype,"icon",null),u([p()],ml.prototype,"label",null),u([p(),iE("esri/widgets/Compass/t9n/Compass")],ml.prototype,"messages",void 0),u([p()],ml.prototype,"view",null),u([p({type:$J})],ml.prototype,"viewModel",void 0),ml=u([O("esri.widgets.Compass")],ml);const ATe=ml,pj="esri-navigation-toggle",fj={base:pj,isLayoutHorizontal:`${pj}--horizontal`};let bf=class extends Ae{constructor(t){super(t),this._navigationMode="pan",this.view=null,t?.isDefaultViewModel||qie(re.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(t={}){const{isDefaultViewModel:r,...i}=t;return i}initialize(){this.addHandles(Zs((()=>this.view?.navigation?.actionMap),(()=>this._updateNavigationActionMap())))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){const t=this.view?.navigation?.actionMap;if(!t)return;const r=this._navigationMode==="pan";t.dragPrimary=r?"pan":"rotate",t.dragSecondary=r?"rotate":"pan"}};u([p({readOnly:!0})],bf.prototype,"state",null),u([p()],bf.prototype,"_navigationMode",void 0),u([p()],bf.prototype,"view",void 0),bf=u([O("esri.widgets.NavigationToggle.NavigationToggleViewModel")],bf);const MJ=bf;let yl=class extends rE{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new MJ({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const i=this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton;RSe(i),this.toggle()},t?.isDefaultUI||Gie(re.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(t={}){const{isDefaultUI:r,...i}=t;return i}loadDependencies(){return xP({button:()=>ue(()=>import("./index-Dr5X_34f.js"),__vite__mapDeps([270,271,272,273,274,275,276,277,278,279,280,281,282]))})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t=this.viewModel?.state==="disabled",r=this.viewModel?.navigationMode==="pan",i=this.messages.toggle;return kn("div",{class:this.classes(fj.base,xa.widget,{[fj.isLayoutHorizontal]:this.layout==="horizontal"})},kn("calcite-button",{afterCreate:n=>{this._panButton=n},appearance:r?"outline-fill":"solid",class:xa.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?void 0:-1,title:i}),kn("calcite-button",{afterCreate:n=>{this._rotateButton=n},appearance:r?"solid":"outline-fill",class:xa.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?-1:void 0,title:i}))}};u([p()],yl.prototype,"icon",null),u([p()],yl.prototype,"label",null),u([p({value:"vertical"})],yl.prototype,"layout",null),u([p(),iE("esri/widgets/NavigationToggle/t9n/NavigationToggle")],yl.prototype,"messages",void 0),u([p()],yl.prototype,"view",null),u([p({type:MJ})],yl.prototype,"viewModel",void 0),yl=u([O("esri.widgets.NavigationToggle")],yl);const OTe=yl;let qd=class extends Ae{get canZoomIn(){if(!this.view?.ready)return!1;const r=this.view?.constraints?.effectiveMaxScale;return r===0||this._scale>r}get canZoomOut(){const{view:t}=this;if(!t?.ready)return!1;const i=t.constraints?.effectiveMinScale;return i===0||this._scale<i}get _scale(){const t=this.view?.animation?.target;return(t&&"then"in t?void 0:t?.scale)??this.view?.scale??0}};u([p({readOnly:!0})],qd.prototype,"canZoomIn",null),u([p({readOnly:!0})],qd.prototype,"canZoomOut",null),u([p()],qd.prototype,"view",void 0),u([p()],qd.prototype,"_scale",null),qd=u([O("esri.widgets.Zoom.ZoomConditions2D")],qd);const RTe=qd;let wf=class extends Ae{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};u([p({readOnly:!0})],wf.prototype,"canZoomIn",null),u([p({readOnly:!0})],wf.prototype,"canZoomOut",null),u([p()],wf.prototype,"view",void 0),wf=u([O("esri.widgets.Zoom.ZoomConditions3D")],wf);const CTe=wf;let Ju=class extends Ae{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new RTe({view:t}):t.type==="3d"&&(this._zoomConditions=new CTe({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){const t=this.view;this.canZoomIn&&t&&(t.type==="2d"?t.mapViewNavigation.zoomIn():A3(t.goTo({zoomFactor:2})))}zoomOut(){const t=this.view;this.canZoomOut&&t&&(t.type==="2d"?t.mapViewNavigation.zoomOut():A3(t.goTo({zoomFactor:.5})))}};u([p()],Ju.prototype,"_zoomConditions",void 0),u([p()],Ju.prototype,"canZoomIn",null),u([p()],Ju.prototype,"canZoomOut",null),u([p({readOnly:!0})],Ju.prototype,"state",null),u([p()],Ju.prototype,"view",null),Ju=u([O("esri.widgets.Zoom.ZoomViewModel")],Ju);const AJ=Ju,mj={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let gl=class extends rE{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new AJ,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return xP({button:()=>ue(()=>import("./index-Dr5X_34f.js"),__vite__mapDeps([270,271,272,273,274,275,276,277,278,279,280,281,282]))})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[mj.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:i}=this.viewModel,{zoomIn:n,zoomOut:s}=this.messages;return kn("div",{class:this.classes(mj.base,xa.widget,t)},kn("calcite-button",{class:xa.widgetButton,disabled:!r,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),kn("calcite-button",{class:xa.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};u([p()],gl.prototype,"icon",null),u([p()],gl.prototype,"label",null),u([p({value:"vertical"})],gl.prototype,"layout",null),u([p(),iE("esri/widgets/Zoom/t9n/Zoom")],gl.prototype,"messages",void 0),u([p()],gl.prototype,"view",null),u([p({type:AJ})],gl.prototype,"viewModel",void 0),gl=u([O("esri.widgets.Zoom")],gl);const ITe=gl;function NTe(e){return e?.view!==void 0}let cS=class extends NSe{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=r=>{this.components.forEach((i=>{const n=this._find(i),s=n?.widget;NTe(s)&&(s.view=r)}))},this._componentsWatcher=(r,i)=>{this._removeComponents(i),this._addComponents(r),this._adjustPadding(r)}}initialize(){this.addHandles([je((()=>this.components),this._componentsWatcher,Hi),je((()=>this.view),this._updateViewAwareWidgets,Hi)])}_add(t,r,i,n,s){let a=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;a=this._createComponent(t)}super._add(a,r,i,n,s)}_removeComponents(t){t.forEach((r=>{const i=this._find(r);i&&(this.remove(i),i.destroy())}))}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:r}=this.padding;this.padding=r}}_addComponents(t){this.constructed&&t.forEach((r=>this.add(this._createComponent(r),this._defaultPositionLookup[r])))}_createComponent(t){const r=this._createWidget(t);return new aS({id:t,node:r})}_createWidget(t){const r=this.view;switch(t){case"attribution":return new TTe({view:r});case"compass":return new ATe({view:r});case"navigation-toggle":return new OTe({view:r,isDefaultUI:!0});case"zoom":return new ITe({view:r})}}};u([p()],cS.prototype,"components",void 0),cS=u([O("esri.views.ui.DefaultUI")],cS);const OJ=cS;let dS=class extends OJ{constructor(t){super(t),this.components=["attribution","zoom"]}};u([p()],dS.prototype,"components",void 0),dS=u([O("esri.views.ui.2d.DefaultUI2D")],dS);const RJ=dS;let CJ=class JR{constructor(t,r,i=""){this.major=t,this.minor=r,this._context=i}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}greaterEqual(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new z(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new JR(this.major,this.minor,this._context)}static parse(t,r=""){const[i,n]=t.split("."),s=/^\s*\d+\s*$/;if(!i?.match||!s.test(i))throw new z((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!n?.match||!s.test(n))throw new z((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const a=parseInt(i,10),c=parseInt(n,10);return new JR(a,c,r)}},PTe=class extends CJ{constructor(t,r){super(t,r,"webmap")}};function KM(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}new PTe(2,34);var XR;let hS=XR=class extends K{constructor(e){super(e),this.color=new De([0,0,0,1])}clone(){return new XR(U({color:this.color}))}};u([p({type:De,json:{write:!0}})],hS.prototype,"color",void 0),hS=XR=u([O("esri.webmap.background.ColorBackground")],hS);const LTe=hS;let IJ,NJ,PJ,LJ,DJ,kJ,FJ;async function DTe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:i,MagnifierView2D:n,GridView2D:s,Stage:a}]=await Promise.all([ue(()=>import("./webglDeps-BRJcUMEO.js"),__vite__mapDeps([188,189,7,190,191])),ue(()=>import("./mapViewDeps-4637_grB.js"),__vite__mapDeps([192,120,85,86,29,7,87,88,89,90,84,57,193,94,194,190,189,158,136,195,91,196,110,197,143,142,97,33,34,92,98,198,95,96,199,20,141,188,191,200,105,201,202,203,155,152,134,204,73,83,31,26,37,205,206,93,207,100,208,102,62,81,209,210,211,212,151,213,214]))]);NJ=e,PJ=t,LJ=r,DJ=i,kJ=n,FJ=s,IJ=a}var Cm;let ot=(Cm=class extends mwe(W1e(kpe(ome(Wfe(x0e))))){constructor(t){super(t),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new ba({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new HT({actionMap:new tP({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new ge,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new HY,this.type="2d",this.view2dType=null,this.ui=new RJ,this.test={takeScreenshot:async r=>sSe(this._getScreenshotView(r),r)},this.padding={top:0,right:0,bottom:0,left:0},Npe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=rr(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new h_e(this.featuresTilingScheme)}get constraintsInfo(){const t=this.defaultsFromMap?.tileInfo,r=this.spatialReference;return{lods:t?.spatialReference?.equals(r)?t.lods:null,spatialReference:r}}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:t,constraints:r,center:i,viewpoint:n,extent:s}=this;let a=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!s&&(r?.effectiveLODs||(a=-1),(!i||t===0&&a===-1)&&(n?.targetGeometry==null||n.targetGeometry.type!=="extent"&&!n.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const r=t.targetGeometry,i=this.spatialReference;return BB(r.spatialReference,i)}get background(){return KM(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){return this.stateManager?.center??null}set center(t){this.stateManager.center=t}get highlightOptions(){return G_e(this)}set highlightOptions(t){q_e(this,t)}get padding(){return this.stateManager?.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get rendering(){return this.stage?.renderRequested??!1}get resolution(){return this.stateManager.resolution??0}get scale(){return this.stateManager?.scale??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const t=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),r=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some((i=>!i.destroyed&&!("layerViews"in i)&&i.updating===!0))||t);if(V("esri-2d-log-updating")){const i=this.allLayerViews.reduce(((n,s)=>({...n,[`${s.layer.id}(${s.layer.type})`]:!s.destroyed&&!("layerViews"in s)&&s.updating})),{});console.log(`Updating MapView: ${r}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(i)}
-> updatingMagnifier: ${t}
`)}return r}get visibleArea(){const t=this.stateManager.visibleArea;return t&&new er({rings:[t.map((r=>[r[0],r[1]]))],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(t,r){return B_e(this,t,r)}async takeScreenshot(t){return nSe(this._getScreenshotView(t),t)}toScreen(t,r){return this.stateManager.toScreen(t,r)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise((t=>{this.ready?t(this):this._resolveWhenReady.push(t)}))}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return KM(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return KM(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(t){return z8.hasLayerViewModule(t)}importLayerView(t){return z8.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(re.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(t){const r=this.toMap(t),i=await this.hitTest(t),n=this.allLayerViews.toArray().filter((f=>f.clips.every((g=>LY(this,g,t,r))))).reverse(),s=new globalThis.Map(n.map((f=>[f.layer.uid,f]))),a=[];let c=0,d=0;for(;c<i.results.length||d<n.length;){const f=i.results.at(c);if(f&&f.type!=="graphic"){++c;continue}const g=s.get((f?.layer??f?.graphic.layer)?.uid);if((!f||g)&&d<n.length&&n.at(d)!==g){const v=n.at(d);"fetchPopupFeaturesAtLocation"in v&&a.push({mapPoint:r,layerView:v}),++d}else f&&(a.push({graphic:f.graphic,layerView:g}),++c)}return{hits:a,location:r}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let t=ySe(this.type);if(V("safari")&&V("safari")<9&&(t=new z("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:V("safari")})),t!=null){re.getLogger(this).warn("#validate()",t.message);const r=document.createElement("div");r.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const i=document.createElement("div");i.innerHTML="Unable to display map. WebGL2 support is required.",i.setAttribute("style","font-size: 24px; font-weight: bold;");const n=document.createElement("div");n.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",n.setAttribute("style","font-size: 18px;");const s=document.createElement("a");throw s.innerHTML="https://esriurl.com/systemRequirements",s.target="_blank",s.setAttribute("style","font-size: 18px;"),s.href="https://esriurl.com/systemRequirements",r.appendChild(i),r.appendChild(n),r.appendChild(s),this.surface.appendChild(r),t}}loadAsyncDependencies(){return DTe()}_getDefaultViewpoint(){const{constraints:t,initialExtent:r,map:i,padding:n,size:s}=this;if(!t)return null;const a=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,c=this.stateManager.getUserStartupOptions(this.size),d=a?.viewpoint,f=d?.targetGeometry?.extent??r,g=f?.center,v=d?.rotation??0,w=d?.scale||f&&YT(f,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),S=c.center??g,T=c.rotation??v,E=c.scale??w;return S&&E?new Hs({targetGeometry:S,scale:E,rotation:T}):null}_startup(){this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const r=new i_e(this.surface),i=new IJ(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline},r);this.stage=i,this._magnifierView=new kJ,this._magnifierView.magnifier=this.magnifier,this._gridView=new FJ;const n=new LJ({view:this});this._set("labelManager",n);const s=new Wwe({view:this});this._set("animationManager",s);const a=new DJ({view:this,animationManager:s});this._set("mapViewNavigation",a),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),i.on("webgl-error",(d=>this.fatalError=d.error)),je((()=>this.stationary),(d=>i.stationary=d),an),je((()=>this.background),(d=>{i.backgroundColor=d?.color,this._magnifierView.backgroundColor=d?.color}),an),je((()=>this.magnifier),(d=>this._magnifierView.magnifier=d),an),je((()=>this.grid),(d=>this._gridView.grid=d),an),je((()=>this.renderingOptions),(d=>i.renderingOptions=d),an),je((()=>this.highlights.items.map((d=>({name:d.name,options:{fillColor:d.color,haloColor:d.haloColor,fillOpacity:d.fillOpacity,haloOpacity:d.haloOpacity,haloWidth:d.haloWidth,haloBlur:d.haloBlur}})))),(()=>{i.highlightGradient=z_e(i.highlightGradient,this.highlights.items)}),an),je((()=>this.state.id),(()=>i.state=this.state),an)],"map-view"),this._updateStageChildren();const c=this._resolveWhenReady;this._resolveWhenReady=[],c.forEach((d=>d(this))),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach((r=>{this.stage.addChild(r.container)}));const t=this.graphicsView;this.stage.addChild(t.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const t=new Kwe(xi.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const r=new NJ({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new PJ(t)});this._set("graphicsView",r)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(t){const{allLayerViews:r,padding:i,size:n,stage:s}=this;return{allLayerViews:r,backgroundColor:t?.ignoreBackground?null:this.background?.color,padding:i,size:n,stage:s}}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const r of this.allLayerViews)r.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const r of this.allLayerViews)r.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},Cm.type="2d",Cm);u([p({constructOnly:!0})],ot.prototype,"deactivatedWebGLExtensions",void 0),u([p({constructOnly:!0})],ot.prototype,"debugWebGLExtensions",void 0),u([p({readOnly:!0})],ot.prototype,"featuresTilingScheme",void 0),u([p({readOnly:!0})],ot.prototype,"graphicsTileStore",null),u([p()],ot.prototype,"graphicsView",void 0),u([p()],ot.prototype,"constraintsInfo",null),u([p()],ot.prototype,"initialExtentRequired",null),u([p()],ot.prototype,"labelManager",void 0),u([p({type:HT,nonNullable:!0})],ot.prototype,"navigation",void 0),u([p({constructOnly:!0})],ot.prototype,"renderCanvas",void 0),u([p()],ot.prototype,"renderingOptions",void 0),u([p({constructOnly:!0})],ot.prototype,"supersampleScreenshotsEnabled",void 0),u([p({readOnly:!0})],ot.prototype,"supportsGround",void 0),u([p()],ot.prototype,"defaultsFromMapSettings",null),u([p({readOnly:!0})],ot.prototype,"typeSpecificPreconditionsReady",null),u([p({type:LTe})],ot.prototype,"background",null),u([p()],ot.prototype,"center",null),u([p({type:ge})],ot.prototype,"floors",void 0),u([p()],ot.prototype,"grid",void 0),u([p({type:xc})],ot.prototype,"highlightOptions",null),u([p()],ot.prototype,"map",void 0),u([p()],ot.prototype,"padding",null),u([p({readOnly:!0})],ot.prototype,"rendering",null),u([p({readOnly:!0})],ot.prototype,"resolution",null),u([p()],ot.prototype,"scale",null),u([p({constructOnly:!0})],ot.prototype,"spatialReferenceLocked",void 0),u([p({readOnly:!0})],ot.prototype,"tileInfo",null),u([p({type:HY,readOnly:!0})],ot.prototype,"timeline",void 0),u([p({readOnly:!0})],ot.prototype,"type",void 0),u([p({readOnly:!0})],ot.prototype,"updating",null),u([p({readOnly:!0})],ot.prototype,"view2dType",void 0),u([p({readOnly:!0})],ot.prototype,"visibleArea",null),u([p()],ot.prototype,"zoom",null),u([p({readOnly:!0})],ot.prototype,"navigating",null),u([p(),wt((e=>e instanceof OJ?e:R1(RJ,e)))],ot.prototype,"ui",void 0),ot=u([O("esri.views.View2D")],ot);const kTe=ot;let pS=class extends kTe{constructor(t){super(t),this.view2dType="map"}};u([p({readOnly:!0})],pS.prototype,"view2dType",void 0),pS=u([O("esri.views.MapView")],pS);const FTe=pS;let UTe=class UJ{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(L3),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new UJ,i=this._originStores[Ke.DEFAULTS];i&&i.forEach(((n,s)=>{r.set(s,U(n),Ke.DEFAULTS)}));for(let n=Ke.SERVICE;n<L3;n++){const s=this._originStores[n];s&&s.forEach(((a,c)=>{t&&t.has(c)||r.set(c,U(a),n)}))}return r}get(t,r){const i=r===void 0?this._values:this._originStores[r];return i?i.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,i=Ke.USER){let n=this._originStores[i];if(n||(n=new Map,this._originStores[i]=n),n.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=i){const s=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,i),s!==r}return!1}delete(t,r=Ke.USER){const i=this._originStores[r];if(!i)return;const n=i.get(t);if(i.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let s=r-1;s>=0;s--){const a=this._originStores[s];if(a&&a.has(t)){this._values.set(t,a.get(t)),this._propertyOriginMap.set(t,s);break}}}return n}has(t,r){const i=r===void 0?this._values:this._originStores[r];return!!i&&i.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const i=this._originStores[r],n=i?.get(t),s=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,r),s!==n}originOf(t){return this._propertyOriginMap.get(t)||Ke.DEFAULTS}isAtOrigin(t,r){return this.has(t,r)&&this.originOf(t)===r}isBelowOrigin(t,r){return!this.has(t)||this.originOf(t)<r}forEach(t){this._values.forEach(t)}};const jJ=e=>{let t=class extends e{constructor(...r){super(...r);const i=gn(this),n=i.store,s=new UTe;i.store=s,rG(i,n,s)}read(r,i){nG(this,r,i)}getAtOrigin(r,i){const n=e3(this),s=Ul(i);if(typeof r=="string")return n.get(r,s);const a={};return r.forEach((c=>{a[c]=n.get(c,s)})),a}originOf(r){return Wv(this.originIdOf(r))}originIdOf(r){return e3(this).originOf(r)}revert(r,i){const n=e3(this),s=Ul(i),a=gn(this);let c;c=typeof r=="string"?r==="*"?n.keys(s):[r]:r,c.forEach((d=>{a.invalidate(d),n.revert(d,s),a.commit(d)}))}};return t=u([O("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function e3(e){return gn(e).store}let yj=class extends jJ(Ae){};yj=u([O("esri.core.ReadOnlyMultiOriginJSONSupport")],yj);const jTe=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,i="user"){gn(this).clearOrigin(r,Ul(i))}write(r,i){return oG(this,r=r||{},i),r}setAtOrigin(r,i,n){gn(this).setAtOrigin(r,i,Ul(n))}removeOrigin(r){const i=gj(this),n=Ul(r),s=i.keys(n);for(const a of s)i.originOf(a)===n&&i.set(a,i.get(a,n),Ke.USER)}updateOrigin(r,i){const n=gj(this),s=Ul(i),a=Io(this,r);for(let c=s+1;c<L3;++c)n.delete(r,c);n.set(r,a,s)}toJSON(r){return this.write({},r)}};return t=u([O("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function gj(e){return gn(e).store}const zJ=e=>{let t=class extends jTe(jJ(e)){constructor(...r){super(...r)}};return t=u([O("esri.core.MultiOriginJSONSupport")],t),t};let vj=class extends zJ(Ae){};vj=u([O("esri.core.MultiOriginJSONSupport")],vj);const kt=(e=>e)(["operational-layers","basemap","ground"]);var QR;let Bd=QR=class extends K{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new QR({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([p({type:String,json:{write:!0}})],Bd.prototype,"expression",void 0),u([p({type:String,json:{write:!0}})],Bd.prototype,"name",void 0),u([p({type:["boolean","date","number","string"],json:{write:!0}})],Bd.prototype,"returnType",void 0),u([p({type:String,json:{write:!0}})],Bd.prototype,"title",void 0),Bd=QR=u([O("esri.form.ExpressionInfo")],Bd);const zTe=Bd;let Hd=class extends K{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};u([p({type:String,json:{write:!0}})],Hd.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],Hd.prototype,"label",void 0),u([p()],Hd.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],Hd.prototype,"visibilityExpression",void 0),Hd=u([O("esri.form.elements.Element")],Hd);const Fc=Hd;let fS=class extends We.ClonableMixin(K){constructor(t){super(t),this.type=null}};u([p()],fS.prototype,"type",void 0),fS=u([O("esri.form.elements.inputs.attachments.Input")],fS);const Uc=fS,nE=["any","capture","upload"];let _f=class extends Uc{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};u([p({type:["audio"],readOnly:!0,json:{write:!0}})],_f.prototype,"type",void 0),u([p({type:nE,json:{write:!0}})],_f.prototype,"inputMethod",void 0),u([p({type:Number,json:{write:!0}})],_f.prototype,"maxDuration",void 0),_f=u([O("esri.form.elements.inputs.attachments.AudioInput")],_f);const bj=_f;let Q0=class extends Uc{constructor(t){super(t),this.type="document",this.maxFileSize=null}};u([p({type:["document"],readOnly:!0,json:{write:!0}})],Q0.prototype,"type",void 0),u([p({type:Number,json:{write:!0}})],Q0.prototype,"maxFileSize",void 0),Q0=u([O("esri.form.elements.inputs.attachments.DocumentInput")],Q0);const wj=Q0;let Sf=class extends Uc{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};u([p({type:["image"],readOnly:!0,json:{write:!0}})],Sf.prototype,"type",void 0),u([p({type:nE,json:{write:!0}})],Sf.prototype,"inputMethod",void 0),u([p({type:Number,json:{write:!0}})],Sf.prototype,"maxImageSize",void 0),Sf=u([O("esri.form.elements.inputs.attachments.ImageInput")],Sf);const _j=Sf;let K0=class extends Uc{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};u([p({type:["signature"],readOnly:!0,json:{write:!0}})],K0.prototype,"type",void 0),u([p({type:nE,json:{write:!0}})],K0.prototype,"inputMethod",void 0),K0=u([O("esri.form.elements.inputs.attachments.SignatureInput")],K0);const Sj=K0;let Tf=class extends Uc{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};u([p({type:["video"],readOnly:!0,json:{write:!0}})],Tf.prototype,"type",void 0),u([p({type:nE,json:{write:!0}})],Tf.prototype,"inputMethod",void 0),u([p({type:Number,json:{write:!0}})],Tf.prototype,"maxDuration",void 0),Tf=u([O("esri.form.elements.inputs.attachments.VideoInput")],Tf);const Tj=Tf;function VJ(e){return{nestableTypes:{base:Uc,key:"type",typeMap:{audio:bj,document:wj,image:_j,signature:Sj,video:Tj}},allTypes:{base:Uc,key:"type",typeMap:{attachment:e,audio:bj,document:wj,image:_j,signature:Sj,video:Tj}}}}function VTe(e,t,r){return e?e.map((i=>Ma(t.nestableTypes,i))):null}function GTe(e,t,r){if(!e)return null;const i=t.nestableTypes.typeMap;return e.filter((n=>i[n.type])).map((n=>i[n.type].fromJSON(n)))}function qTe(e,t,r){if(!e)return null;const i=t.nestableTypes.typeMap;return e.filter((n=>i[n.type])).map((n=>n.toJSON()))}let ua=class extends Uc{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return VTe(t,t3)}readInputs(t,r){return GTe(r.inputTypes,t3)}writeInputs(t,r){r.inputTypes=qTe(t,t3)}};u([p({type:["attachment"],readOnly:!0,json:{write:!0}})],ua.prototype,"type",void 0),u([p({type:["any","exact","exactOrNone"],json:{write:!0}})],ua.prototype,"attachmentAssociationType",void 0),u([p({json:{write:{isRequired:!0}}})],ua.prototype,"inputTypes",void 0),u([wt("inputTypes")],ua.prototype,"castInputs",null),u([le("inputTypes")],ua.prototype,"readInputs",null),u([de("inputTypes")],ua.prototype,"writeInputs",null),ua=u([O("esri.form.elements.inputs.attachments.AttachmentInput")],ua);const t3=VJ(ua),BTe=ua;var KR;const HTe=VJ(BTe);let is=KR=class extends Fc{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){return new KR({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};u([p({type:Boolean,json:{write:!0}})],is.prototype,"allowUserRename",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],is.prototype,"attachmentKeyword",void 0),u([p({type:Boolean,json:{write:!0}})],is.prototype,"displayFilename",void 0),u([p({type:String,json:{write:!0}})],is.prototype,"editableExpression",void 0),u([p({type:String,json:{write:!0}})],is.prototype,"filenameExpression",void 0),u([p({types:HTe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],is.prototype,"input",void 0),u([p({type:Number,json:{write:!0}})],is.prototype,"maxAttachmentCount",void 0),u([p({type:Number,json:{write:!0}})],is.prototype,"minAttachmentCount",void 0),u([p({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],is.prototype,"type",void 0),u([p({type:Boolean,json:{write:!0}})],is.prototype,"useOriginalFilename",void 0),is=KR=u([O("esri.form.elements.AttachmentElement")],is);const Ej=is;let mS=class extends K{constructor(t){super(t),this.type=null}};u([p()],mS.prototype,"type",void 0),mS=u([O("esri.form.elements.inputs.Input")],mS);const eu=mS;let ev=class extends eu{constructor(t){super(t),this.maxLength=null,this.minLength=0}};u([p({type:Number,json:{write:!0}})],ev.prototype,"maxLength",void 0),u([p({type:Number,json:{write:!0}})],ev.prototype,"minLength",void 0),ev=u([O("esri.form.elements.inputs.TextInput")],ev);const $P=ev;var eC;let yS=eC=class extends $P{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new eC({maxLength:this.maxLength,minLength:this.minLength})}};u([p({type:["barcode-scanner"],json:{read:!1,write:!0}})],yS.prototype,"type",void 0),yS=eC=u([O("esri.form.elements.inputs.BarcodeScannerInput")],yS);const WTe=yS;var tC;let Ef=tC=class extends eu{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new tC({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};u([p({type:String,json:{write:!0}})],Ef.prototype,"noValueOptionLabel",void 0),u([p({type:Boolean,json:{write:!0}})],Ef.prototype,"showNoValueOption",void 0),u([p({type:["combo-box"],json:{read:!1,write:!0}})],Ef.prototype,"type",void 0),Ef=tC=u([O("esri.form.elements.inputs.ComboBoxInput")],Ef);const ZTe=Ef;var rC;function xj(e){return e??null}function $j(e){return e??null}let sa=rC=class extends eu{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return xj(t.max)}writeMax(e,t){t.max=$j(e)}readMin(e,t){return xj(t.min)}writeMin(e,t){t.min=$j(e)}clone(){return new rC({max:this.max,min:this.min})}};u([p({type:String,json:{type:String,write:!0}})],sa.prototype,"max",void 0),u([le("max")],sa.prototype,"readMax",null),u([de("max")],sa.prototype,"writeMax",null),u([p({type:String,json:{type:String,write:!0}})],sa.prototype,"min",void 0),u([le("min")],sa.prototype,"readMin",null),u([de("min")],sa.prototype,"writeMin",null),u([p({type:["date-picker"],json:{read:!1,write:!0}})],sa.prototype,"type",void 0),sa=rC=u([O("esri.form.elements.inputs.DatePickerInput")],sa);const YTe=sa;var iC;function r3(e){return e??null}function i3(e){return e??null}let Mn=iC=class extends eu{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return r3(t.max)}writeMax(e,t){t.max=i3(e)}readMin(e,t){return r3(t.min)}writeMin(e,t){t.min=i3(e)}readTimeResolution(e,t){return r3(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=i3(e)}clone(){return new iC({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([p({type:Boolean,json:{write:!0}})],Mn.prototype,"includeTimeOffset",void 0),u([p({type:String,json:{type:String,write:!0}})],Mn.prototype,"max",void 0),u([le("max")],Mn.prototype,"readMax",null),u([de("max")],Mn.prototype,"writeMax",null),u([p({type:String,json:{type:String,write:!0}})],Mn.prototype,"min",void 0),u([le("min")],Mn.prototype,"readMin",null),u([de("min")],Mn.prototype,"writeMin",null),u([p({type:String,json:{type:String,write:!0}})],Mn.prototype,"timeResolution",void 0),u([le("timeResolution")],Mn.prototype,"readTimeResolution",null),u([de("timeResolution")],Mn.prototype,"writeTimeResolution",null),u([p({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Mn.prototype,"type",void 0),Mn=iC=u([O("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Mn);const JTe=Mn;var nC;function Mj(e){return e!=null?new Date(e):null}function Aj(e){return e?e.getTime():null}let bo=nC=class extends eu{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return Mj(t.max)}writeMax(e,t){t.max=Aj(e)}readMin(e,t){return Mj(t.min)}writeMin(e,t){t.min=Aj(e)}clone(){return new nC({includeTime:this.includeTime,max:this.max,min:this.min})}};u([p({type:Boolean,json:{write:!0}})],bo.prototype,"includeTime",void 0),u([p({type:Date,json:{type:Number,write:!0}})],bo.prototype,"max",void 0),u([le("max")],bo.prototype,"readMax",null),u([de("max")],bo.prototype,"writeMax",null),u([p({type:Date,json:{type:Number,write:!0}})],bo.prototype,"min",void 0),u([le("min")],bo.prototype,"readMin",null),u([de("min")],bo.prototype,"writeMin",null),u([p({type:["datetime-picker"],json:{read:!1,write:!0}})],bo.prototype,"type",void 0),bo=nC=u([O("esri.form.elements.inputs.DateTimePickerInput")],bo);const XTe=bo;var sC;let xf=sC=class extends eu{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new sC({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};u([p({type:String,json:{write:!0}})],xf.prototype,"noValueOptionLabel",void 0),u([p({type:Boolean,json:{write:!0}})],xf.prototype,"showNoValueOption",void 0),u([p({type:["radio-buttons"],json:{read:!1,write:!0}})],xf.prototype,"type",void 0),xf=sC=u([O("esri.form.elements.inputs.RadioButtonsInput")],xf);const QTe=xf;var oC;let $f=oC=class extends eu{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new oC({offValue:this.offValue,onValue:this.onValue})}};u([p({type:[String,Number],json:{write:!0}})],$f.prototype,"offValue",void 0),u([p({type:[String,Number],json:{write:!0}})],$f.prototype,"onValue",void 0),u([p({type:["switch"],json:{read:!1,write:!0}})],$f.prototype,"type",void 0),$f=oC=u([O("esri.form.elements.inputs.SwitchInput")],$f);const KTe=$f;var aC;let gS=aC=class extends $P{constructor(e){super(e),this.type="text-area"}clone(){return new aC({maxLength:this.maxLength,minLength:this.minLength})}};u([p({type:["text-area"],json:{read:!1,write:!0}})],gS.prototype,"type",void 0),gS=aC=u([O("esri.form.elements.inputs.TextAreaInput")],gS);const eEe=gS;var lC;let vS=lC=class extends $P{constructor(e){super(e),this.type="text-box"}clone(){return new lC({maxLength:this.maxLength,minLength:this.minLength})}};u([p({type:["text-box"],json:{read:!1,write:!0}})],vS.prototype,"type",void 0),vS=lC=u([O("esri.form.elements.inputs.TextBoxInput")],vS);const tEe=vS;var uC;function n3(e){return e??null}function s3(e){return e??null}let ns=uC=class extends eu{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return n3(t.max)}writeMax(e,t){t.max=s3(e)}readMin(e,t){return n3(t.min)}writeMin(e,t){t.min=s3(e)}readTimeResolution(e,t){return n3(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=s3(e)}clone(){return new uC({max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([p({type:String,json:{type:String,write:!0}})],ns.prototype,"max",void 0),u([le("max")],ns.prototype,"readMax",null),u([de("max")],ns.prototype,"writeMax",null),u([p({type:String,json:{type:String,write:!0}})],ns.prototype,"min",void 0),u([le("min")],ns.prototype,"readMin",null),u([de("min")],ns.prototype,"writeMin",null),u([p({type:String,json:{type:String,write:!0}})],ns.prototype,"timeResolution",void 0),u([le("timeResolution")],ns.prototype,"readTimeResolution",null),u([de("timeResolution")],ns.prototype,"writeTimeResolution",null),u([p({type:["time-picker"],json:{read:!1,write:!0}})],ns.prototype,"type",void 0),ns=uC=u([O("esri.form.elements.inputs.TimePickerInput")],ns);const rEe=ns,iEe={base:eu,key:"type",typeMap:{"barcode-scanner":WTe,"combo-box":ZTe,"date-picker":YTe,"datetime-picker":XTe,"datetimeoffset-picker":JTe,"radio-buttons":QTe,switch:KTe,"text-area":eEe,"text-box":tEe,"time-picker":rEe}};var cC;let Ps=cC=class extends Fc{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new cC({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};u([p({types:QW,json:{read:{reader:BT},write:!0}})],Ps.prototype,"domain",void 0),u([p({type:Boolean,json:{write:!0}})],Ps.prototype,"editable",void 0),u([p({type:String,json:{write:!0}})],Ps.prototype,"editableExpression",void 0),u([p({type:String,json:{write:!0}})],Ps.prototype,"fieldName",void 0),u([p({type:String,json:{write:!0}})],Ps.prototype,"hint",void 0),u([p({types:iEe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Ps.prototype,"input",void 0),u([p({type:String,json:{write:!0}})],Ps.prototype,"requiredExpression",void 0),u([p({type:String,json:{read:!1,write:!0}})],Ps.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],Ps.prototype,"valueExpression",void 0),Ps=cC=u([O("esri.form.elements.FieldElement")],Ps);const Oj=Ps;var dC;let vl=dC=class extends Fc{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new dC({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:U(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};u([p({type:Number,json:{write:!0}})],vl.prototype,"displayCount",void 0),u([p({type:["list"],json:{write:!0}})],vl.prototype,"displayType",void 0),u([p({type:String,json:{write:!0}})],vl.prototype,"editableExpression",void 0),u([p({type:[WN],json:{write:!0}})],vl.prototype,"orderByFields",void 0),u([p({type:Number,json:{write:!0}})],vl.prototype,"relationshipId",void 0),u([p({type:["relationship"],json:{read:!1,write:!0}})],vl.prototype,"type",void 0),vl=dC=u([O("esri.form.elements.RelationshipElement")],vl);const Rj=vl;var hC;let Mf=hC=class extends Fc{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new hC({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};u([p({type:String,json:{write:!0}})],Mf.prototype,"text",void 0),u([p({type:String,json:{write:!0}})],Mf.prototype,"textFormat",void 0),u([p({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Mf.prototype,"type",void 0),Mf=hC=u([O("esri.form.elements.TextElement")],Mf);const Cj=Mf;let Af=class extends We.ClonableMixin(Fc){constructor(t){super(t),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};u([p({type:[$W],json:{write:{isRequired:!0}}})],Af.prototype,"associationTypes",void 0),u([p({type:String,json:{write:!0}})],Af.prototype,"editableExpression",void 0),u([p({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],Af.prototype,"type",void 0),Af=u([O("esri.form.elements.UtilityNetworkAssociationsElement")],Af);const Ij=Af,nEe=e=>e.type==="field",sEe=e=>e.type==="group",oEe=e=>e.type==="text";function GJ(e){return{typesWithGroup:{base:Fc,key:"type",typeMap:{attachment:Ej,field:Oj,group:e,relationship:Rj,text:Cj,utilityNetworkAssociations:Ij}},typesWithoutGroup:{base:Fc,key:"type",typeMap:{attachment:Ej,field:Oj,relationship:Rj,text:Cj,utilityNetworkAssociations:Ij}}}}function qJ(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((n=>i[n.type])).map((n=>i[n.type].fromJSON(n)))}function BJ(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((n=>i[n.type])).map((n=>n.toJSON()))}function HJ(e,t,r=!0){return e?e.map((i=>Ma(r?t.typesWithGroup:t.typesWithoutGroup,i))):null}var pC;let ca=pC=class extends Fc{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return HJ(e,o3,!1)}readElements(e,t){return qJ(t.formElements,o3,!1)}writeElements(e,t){t.formElements=BJ(e,o3,!1)}clone(){return new pC({description:this.description,elements:U(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};u([p({json:{write:!0}})],ca.prototype,"elements",void 0),u([wt("elements")],ca.prototype,"castElements",null),u([le("elements",["formElements"])],ca.prototype,"readElements",null),u([de("elements")],ca.prototype,"writeElements",null),u([p({type:["collapsed","expanded"],json:{write:!0}})],ca.prototype,"initialState",void 0),u([p({type:String,json:{read:!1,write:!0}})],ca.prototype,"type",void 0),ca=pC=u([O("esri.form.elements.GroupElement")],ca);const o3=GJ(ca),aEe=ca;var fC;const a3=GJ(aEe);let wo=fC=class extends K{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return HJ(e,a3)}readElements(e,t){return qJ(t.formElements,a3)}writeElements(e,t){t.formElements=BJ(e,a3)}clone(){return new fC({description:this.description,expressionInfos:U(this.expressionInfos),elements:U(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const r=new Set,{description:i,elements:n,expressionInfos:s,title:a}=this;if(Uv(r,e,i),Uv(r,e,a),!n)return[];const c=lEe(n,s).map((d=>Yi(r,e,d)));await Promise.all(c);for(const d of n)WJ(r,{fieldsIndex:e,relationships:t},d);return Array.from(r).sort()}};function WJ(e,t,r){const{fieldsIndex:i}=t;if(!i||i.fields.length!==e.size)switch(Uv(e,i,r.label),Uv(e,i,r.description),r.type){case"field":yn(e,i,r.fieldName);break;case"group":r.elements.forEach((n=>WJ(e,t,n)));break;case"relationship":if(t.relationships){const n=t.relationships.find((s=>s.id===r.relationshipId));n&&yn(e,i,n.keyField)}zh(e,i,r.orderByFields?.map((n=>n.field)));break;case"text":Uv(e,i,r.text)}}function lEe(e,t){if(!t||t.length===0)return[];const r=ZJ(e),i=[];for(const n of t)r.has(n.name)&&i.push(n.expression);return i}function ZJ(e){const t=new Set;for(const r of e)if(y5(t,r.visibilityExpression),!oEe(r)){if(sEe(r))GS(t,ZJ(r.elements));else if(y5(t,r.editableExpression),nEe(r)){const{requiredExpression:i,valueExpression:n}=r;GS(t,[i,n])}}return t}function Uv(e,t,r){zh(e,t,qN(r))}u([p({type:String,json:{write:!0}})],wo.prototype,"description",void 0),u([p({json:{write:!0}})],wo.prototype,"elements",void 0),u([wt("elements")],wo.prototype,"castElements",null),u([le("elements",["formElements"])],wo.prototype,"readElements",null),u([de("elements")],wo.prototype,"writeElements",null),u([p({type:[zTe],json:{write:!0}})],wo.prototype,"expressionInfos",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],wo.prototype,"preserveFieldValuesWhenHidden",void 0),u([p({type:String,json:{write:!0}})],wo.prototype,"title",void 0),wo=fC=u([O("esri.form.FormTemplate")],wo);const uEe=wo;function Nj(e,t,r){if(e.hasM==null||e.hasZ)for(const i of t)for(const n of i)n.length>2&&(n[2]*=r)}function cEe(e,t,r){if(!e&&!t||!r)return;const i=r2(r);Pj(e,r,i),Pj(t,r,i)}function Pj(e,t,r){if(e)for(const i of e)dEe(i.geometry,t,r)}function dEe(e,t,r){if(!e?.spatialReference||ni(e.spatialReference,t))return;const i=r2(e.spatialReference)/r;if(i!==1){if("x"in e)e.z!=null&&(e.z*=i);else if("rings"in e)Nj(e,e.rings,i);else if("paths"in e)Nj(e,e.paths,i);else if("points"in e&&(e.hasM==null||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=i)}}function Lj(e,t,r){if(!r?.features||!r.hasZ)return;const i=GB(r.geometryType,t,e.outSpatialReference);if(i!=null)for(const n of r.features)i(n.geometry)}var mC;const yC=new tt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Qr=mC=class extends K{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,Nr)}writeGeometryType(e,t,r,i){if(e)return void yC.write(e,t,r,i);const{features:n}=this;if(n){for(const s of n)if(s?.geometry!=null)return void yC.write(s.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=Dc(e);return i&&!r&&t.spatialReference&&(i.spatialReference=Ee.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const i of r)if(i&&i.geometry!=null&&i.geometry.spatialReference)return void(t.spatialReference=i.geometry.spatialReference.toJSON())}}clone(){return new mC(this.cloneProperties())}cloneProperties(){return U({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const n=e?.[r];i.geometry=n?.toJSON()||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,n]}=e,s=f=>Math.round((f-i)/t),a=f=>Math.round((n-f)/r),c=this.features,d=this._getQuantizationFunction(this.geometryType,s,a);for(let f=0,g=c.length;f<g;f++)d?.(c[f].geometry)||(c.splice(f,1),f--,g--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,n],scale:[s,a]}=r,c=w=>w*s+i,d=w=>n-w*a;let f=null,g=null;if(this.hasZ&&r?.scale?.[2]!=null){const{translate:[,,w],scale:[,,S]}=r;f=T=>T*S+w}if(this.hasM&&r?.scale?.[3]!=null){const{translate:[,,,w],scale:[,,,S]}=r;g=T=>T==null?T:T*S+w}const v=this._getHydrationFunction(e,c,d,f,g);for(const{geometry:w}of t)w!=null&&v&&v(w);return this.transform=null,this}readFeaturesWithClass(e,t,r){const i=Ee.fromJSON(t.spatialReference),n=[];for(let s=0;s<e.length;s++){const a=e[s],c=r.fromJSON(a),d=a.geometry?.spatialReference;c.geometry==null||d||(c.geometry.spatialReference=i);const f=a.aggregateGeometries,g=c.aggregateGeometries;if(f&&g!=null)for(const v in g){const w=g[v],S=f[v],T=S?.spatialReference;w==null||T||(w.spatialReference=i)}n.push(c)}return n}_quantizePoints(e,t,r){let i,n;const s=[];for(let a=0,c=e.length;a<c;a++){const d=e[a];if(a>0){const f=t(d[0]),g=r(d[1]);f===i&&g===n||(s.push([f-i,g-n]),i=f,n=g)}else i=t(d[0]),n=r(d[1]),s.push([i,n])}return s.length>0?s:null}_getQuantizationFunction(e,t,r){return e==="point"?i=>(i.x=t(i.x),i.y=r(i.y),i):e==="polyline"||e==="polygon"?i=>{const n=cm(i)?i.rings:i.paths,s=[];for(let a=0,c=n.length;a<c;a++){const d=n[a],f=this._quantizePoints(d,t,r);f&&s.push(f)}return s.length>0?(cm(i)?i.rings=s:i.paths=s,i):null}:e==="multipoint"?i=>{const n=this._quantizePoints(i.points,t,r);return n&&n.length>0?(i.points=n,i):null}:e==="extent"?i=>i:null}_getHydrationFunction(e,t,r,i,n){return e==="point"?s=>{s.x=t(s.x),s.y=r(s.y),i&&(s.z=i(s.z))}:e==="polyline"||e==="polygon"?s=>{const a=cm(s)?s.rings:s.paths;let c,d;for(let f=0,g=a.length;f<g;f++){const v=a[f];for(let w=0,S=v.length;w<S;w++){const T=v[w];w>0?(c+=T[0],d+=T[1]):(c=T[0],d=T[1]),T[0]=t(c),T[1]=r(d)}}if(i&&n)for(let f=0,g=a.length;f<g;f++){const v=a[f];for(let w=0,S=v.length;w<S;w++){const T=v[w];T[2]=i(T[2]),T[3]=n(T[3])}}else if(i)for(let f=0,g=a.length;f<g;f++){const v=a[f];for(let w=0,S=v.length;w<S;w++){const T=v[w];T[2]=i(T[2])}}else if(n)for(let f=0,g=a.length;f<g;f++){const v=a[f];for(let w=0,S=v.length;w<S;w++){const T=v[w];T[2]=n(T[2])}}}:e==="extent"?s=>{s.xmin=t(s.xmin),s.ymin=r(s.ymin),s.xmax=t(s.xmax),s.ymax=r(s.ymax),i&&s.zmax!=null&&s.zmin!=null&&(s.zmax=i(s.zmax),s.zmin=i(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:e==="multipoint"?s=>{const a=s.points;let c,d;for(let f=0,g=a.length;f<g;f++){const v=a[f];f>0?(c+=v[0],d+=v[1]):(c=v[0],d=v[1]),v[0]=t(c),v[1]=r(d)}if(i&&n)for(let f=0,g=a.length;f<g;f++){const v=a[f];v[2]=i(v[2]),v[3]=n(v[3])}else if(i)for(let f=0,g=a.length;f<g;f++){const v=a[f];v[2]=i(v[2])}else if(n)for(let f=0,g=a.length;f<g;f++){const v=a[f];v[2]=n(v[2])}}:null}};u([p({type:String,json:{write:!0}})],Qr.prototype,"displayFieldName",void 0),u([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Qr.prototype,"exceededTransferLimit",void 0),u([p({type:[Nr],json:{write:!0}})],Qr.prototype,"features",void 0),u([le("features")],Qr.prototype,"readFeatures",null),u([p({type:[pi],json:{write:!0}})],Qr.prototype,"fields",void 0),u([p({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:yC.read}}})],Qr.prototype,"geometryType",void 0),u([de("geometryType")],Qr.prototype,"writeGeometryType",null),u([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Qr.prototype,"hasM",void 0),u([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Qr.prototype,"hasZ",void 0),u([p({types:U1,json:{write:!0}})],Qr.prototype,"queryGeometry",void 0),u([le("queryGeometry")],Qr.prototype,"readQueryGeometry",null),u([p({type:Ee,json:{write:!0}})],Qr.prototype,"spatialReference",void 0),u([de("spatialReference")],Qr.prototype,"writeSpatialReference",null),u([p({json:{write:!0}})],Qr.prototype,"transform",void 0),Qr=mC=u([O("esri.rest.support.FeatureSet")],Qr),Qr.prototype.toJSON.isDefaultToJSON=!0;let hEe=0,Ml=class extends cs.LoadableMixin(jl.EsriPromiseMixin(ge)){constructor(t){super(t),this._idToClientGeometry=null,this.type="memory"}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(r)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const t=this.layer?.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then((()=>this._applyEdits(t)))}openPorts(){return this.load().then((()=>this._connection.openPorts()))}async queryFeatures(t,r={}){await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);Lj(t,this.layer.spatialReference,i);const n=Qr.fromJSON(i);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return n;const s=this.layer.objectIdField;for(const a of n.features){const c=a.attributes[s],d=this._idToClientGeometry.get(c);d!==void 0&&(a.geometry=d)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(t,r={}){if(this._requiresClientGraphicMapping())throw new z("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);return Lj(t,this.layer.spatialReference,i),i}queryFeatureCount(t,r={}){return this.load(r).then((()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,r)))}queryObjectIds(t,r={}){return this.load(r).then((()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,r)))}queryExtent(t,r={}){return this.load(r).then((()=>this._connection.invoke("queryExtent",t?t.toJSON():null,r))).then((i=>({count:i.count,extent:Xe.fromJSON(i.extent)})))}querySnapping(t,r={}){return this.load(r).then((()=>this._connection.invoke("querySnapping",t,r)))}async queryAttributeBins(t,r={}){return await this.load(),this._connection.invoke("queryAttributeBins",t?.toJSON(),r)}async _applyEdits(t){if(!this._connection)throw new z("feature-layer-source:edit-failure","Memory source not loaded");const r=this.layer.objectIdField;let i=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const a=g=>"objectId"in g&&g.objectId!=null?g.objectId:"attributes"in g&&g.attributes[r]!=null?g.attributes[r]:null;if(t.addFeatures&&(i=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const g of t.deleteFeatures){const v=a(g);v!=null&&n.push(v)}const c=t.updateFeatures&&this._idToClientGeometry?new Map:null;if(t.updateFeatures){for(const g of t.updateFeatures)if(s.push(this._serializeFeature(g)),c&&g.geometry!=null){const v=a(g);v!=null&&c.set(v,g)}}cEe(i?i.features:null,s,this.layer.spatialReference);const{fullExtent:d,featureEditResults:f}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:s,deletes:n});return this.fullExtent=d,i&&i.finish(f.uidToObjectId),this._updateIdToClientGeometries(c,f),this._createEditsResult(f)}async _prepareClientMapping(t,r){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const i=[];for(const{geometry:n}of t)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||i.push(n.load({signal:r}));i.length&&await Promise.all(i)}_updateIdToClientGeometries(t,r){if(this._idToClientGeometry){if(t)for(const i of r.updateResults){if(!i.success)continue;const n=t.get(i.objectId);n!=null&&this._addIdToClientGeometry(n)}for(const i of r.deleteResults)i.success&&this._idToClientGeometry.delete(i.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const r=t.success===!0?null:t.error||{code:void 0,description:""};return{objectId:t.objectId,globalId:t.globalId,error:r?new z("feature-layer-source:edit-failure",r.description,{code:r.code}):null}}_prepareAddFeatures(t){const r=new Map,i=new Array(t.length);let n=null;for(let a=0;a<t.length;a++){const c=t[a],d=this._serializeFeature(c);n||c.geometry==null||(n=c.geometry.type),i[a]=d,r.set(`${d.uid}`,c)}const s=this;return{features:i,inferredGeometryType:n,finish(a){const c=s.sourceJSON.objectIdField;for(const d in a){const f=a[d],g=r.get(d);g&&(g.attributes||(g.attributes={}),f===-1?delete g.attributes[c]:g.attributes[c]=f,s._addIdToClientGeometry(g))}}}}_addIdToClientGeometry(t){if(!this._idToClientGeometry)return;const r=this.sourceJSON.objectIdField,i=t.attributes?.[r];i!=null&&this._idToClientGeometry.set(i,t.geometry??null)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:r}=t,i=this._geometryForSerialization(t),n=(hEe++).toString();return i?{uid:n,geometry:i.toJSON(),attributes:r}:{uid:n,attributes:r}}_geometryForSerialization(t){const{geometry:r}=t;return r==null?null:this._geometryRequiresClientGraphicMapping(r)?r.extent?er.fromExtent(r.extent):null:r}async _startWorker(t){this._connection=await Ppe("MemorySourceWorker",{strategy:V("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:r,spatialReference:i,objectIdField:n,hasM:s,hasZ:a,timeInfo:c,dateFieldsTimeZone:d}=this.layer,f=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const g=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",(T=>{re.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),T.preventDefault()})));const v={features:g.features,fields:r?.map((T=>T.toJSON())),geometryType:Z6.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||a,objectIdField:n,spatialReference:f?null:i&&i.toJSON(),timeInfo:c?.toJSON()??null,dateFieldsTimeZone:d},w=await this._connection.invoke("load",v,{signal:t});for(const T of w.warnings)re.getLogger(this.layer).warn("#load()",`${T.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:T});w.featureErrors.length&&re.getLogger(this.layer).warn("#load()",`Encountered ${w.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:w.featureErrors});const S=w.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(g.inferredGeometryType)&&(S.geometryType=Z6.toJSON(g.inferredGeometryType)),this.sourceJSON=S,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),g.finish(w.assignedObjectIds)}};u([JI({Type:Nr,ensureType:Br(Nr)})],Ml.prototype,"itemType",void 0),u([p()],Ml.prototype,"type",void 0),u([p({constructOnly:!0})],Ml.prototype,"layer",void 0),u([p({readOnly:!0})],Ml.prototype,"_workerGeometryType",null),u([p()],Ml.prototype,"sourceJSON",void 0),Ml=u([O("esri.layers.graphics.sources.MemorySource")],Ml);function pEe(e){return"portalItem"in e}const fEe=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):pEe(this)?this.portalItem?.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return u([p({type:String})],t.prototype,"apiKey",null),t=u([O("esri.layers.mixins.APIKeyMixin")],t),t},mEe=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=jc(this.url);if(r?.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",yie(r,re.getLogger(this)))}};return u([p()],t.prototype,"title",null),u([p({type:String})],t.prototype,"url",null),t=u([O("esri.layers.mixins.ArcGISService")],t),t};let Dj=class extends SyntaxError{constructor(t,r,i,n){super(t),this.expected=r,this.found=i,this.location=n,this.name="SyntaxError"}format(t){let r="Error: "+this.message;if(this.location){let i=null;const n=t.find((d=>d.source===this.location.source));n&&(i=n.text.split(/\r\n|\n|\r/g));const s=this.location.start,a=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,c=this.location.source+":"+a.line+":"+a.column;if(i){const d=this.location.end,f="".padEnd(a.line.toString().length," "),g=i[s.line-1],v=(s.line===d.line?d.column:g.length+1)-s.column||1;r+=`
 --> `+c+`
`+f+` |
`+a.line+" | "+g+`
`+f+" | "+"".padEnd(s.column-1," ")+"".padEnd(v,"^")}else r+=`
 at `+c}return r}static buildMessage(t,r){function i(w){return w.codePointAt(0).toString(16).toUpperCase()}const n=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function s(w){return n?w.replace(n,(S=>"\\u{"+i(S)+"}")):w}function a(w){return s(w.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(S=>"\\x0"+i(S))).replace(/[\x10-\x1F\x7F-\x9F]/g,(S=>"\\x"+i(S))))}function c(w){return s(w.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(S=>"\\x0"+i(S))).replace(/[\x10-\x1F\x7F-\x9F]/g,(S=>"\\x"+i(S))))}const d={literal:w=>'"'+a(w.text)+'"',class(w){const S=w.parts.map((T=>Array.isArray(T)?c(T[0])+"-"+c(T[1]):c(T)));return"["+(w.inverted?"^":"")+S.join("")+"]"+(w.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:w=>w.description};function f(w){return d[w.type](w)}function g(w){const S=w.map(f);if(S.sort(),S.length>0){let T=1;for(let E=1;E<S.length;E++)S[E-1]!==S[E]&&(S[T]=S[E],T++);S.length=T}switch(S.length){case 1:return S[0];case 2:return S[0]+" or "+S[1];default:return S.slice(0,-1).join(", ")+", or "+S[S.length-1]}}function v(w){return w?'"'+a(w)+'"':"end of input"}return"Expected "+g(t)+" but "+v(r)+" found."}};function yEe(e,t){const r={},i=(t=t!==void 0?t:{}).grammarSource,n={start:Er};let s=Er;const a="none",c=")",d=",",f="(",g="%",v="px",w="cm",S="mm",T="in",E="pt",M="pc",R="deg",I="rad",k="grad",j="turn",P="#",X=".",ae="e",fe=/^[ \t\n\r]/,he=/^[a-z\-]/,me=/^[0-9a-fA-F]/,Oe=/^[+\-]/,Se=/^[0-9]/,ft=bs("none"),Ue=kr("none",!1),mt=kr(")",!1),Q=kr(",",!1),pe=iu([" ","	",`
`,"\r"],!1,!1,!1),ye=bs("function"),rt=kr("(",!1),L=bs("identifier"),oe=iu([["a","z"],"-"],!1,!1,!1),xe=bs("percentage"),we=kr("%",!1),ze=bs("length"),yt=kr("px",!1),Ze=kr("cm",!1),Ji=kr("mm",!1),Gt=kr("in",!1),qo=kr("pt",!1),Cy=kr("pc",!1),ep=bs("angle"),Iy=kr("deg",!1),Ny=kr("rad",!1),Py=kr("grad",!1),yE=kr("turn",!1),gE=bs("number"),vs=bs("color"),vE=kr("#",!1),Ly=iu([["0","9"],["a","f"],["A","F"]],!1,!1,!1),Dy=iu(["+","-"],!1,!1,!1),Vn=iu([["0","9"]],!1,!1,!1),bE=kr(".",!1),Q1=kr("e",!1);function wE(){return[]}function _E(C,Z){return{type:"function",name:C,parameters:Z||[]}}function Zc(C,Z){return Z.length>0?Vy(C,Z,3):[C]}function Xi(C){return{type:"quantity",value:C.value,unit:C.unit}}function Bo(C){return{type:"color",colorType:C.type,value:C.value}}function vn(C){return C}function SE(){return ru()}function TE(C){return{value:C,unit:"%"}}function EE(C){return{value:C,unit:"px"}}function tp(C){return{value:C,unit:"cm"}}function rp(C){return{value:C,unit:"mm"}}function Pa(C){return{value:C,unit:"in"}}function ip(C){return{value:C,unit:"pt"}}function Yc(C){return{value:C,unit:"pc"}}function xE(C){return{value:C,unit:"deg"}}function K1(C){return{value:C,unit:"rad"}}function eb(C){return{value:C,unit:"grad"}}function ky(C){return{value:C,unit:"turn"}}function Jc(C){return{value:C,unit:null}}function $E(){return{type:"hex",value:ru()}}function tb(C){return{type:"function",value:C}}function rb(){return{type:"named",value:ru()}}function Fy(){return parseFloat(ru())}let Y=0|t.peg$currPos,Ut=Y;const tu=[{line:1,column:1}];let bn,It=Y,Hr=t.peg$maxFailExpected||[],$e=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in n))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');s=n[t.startRule]}function ru(){return e.substring(Ut,Y)}function ME(C=Y){const Z=e.codePointAt(C);return Z===void 0?"":String.fromCodePoint(Z)}function kr(C,Z){return{type:"literal",text:C,ignoreCase:Z}}function iu(C,Z,ce,ke){return{type:"class",parts:C,inverted:Z,ignoreCase:ce,unicode:ke}}function Xc(){return{type:"end"}}function bs(C){return{type:"other",description:C}}function La(C){let Z,ce=tu[C];if(ce)return ce;if(C>=tu.length)Z=tu.length-1;else for(Z=C;!tu[--Z];);for(ce=tu[Z],ce={line:ce.line,column:ce.column};Z<C;)e.charCodeAt(Z)===10?(ce.line++,ce.column=1):ce.column++,Z++;return tu[C]=ce,ce}function Da(C,Z,ce){const ke=La(C),vt=La(Z);return{source:i,start:{offset:C,line:ke.line,column:ke.column},end:{offset:Z,line:vt.line,column:vt.column}}}function qe(C){Y<It||(Y>It&&(It=Y,Hr=[]),Hr.push(C))}function nu(C,Z,ce){return new Dj(Dj.buildMessage(C,Z),C,Z,ce)}function Er(){let C;return C=ib(),C===r&&(C=nb()),C}function ib(){let C,Z;return $e++,C=Y,xr(),e.substr(Y,4)===a?(Z=a,Y+=4):(Z=r,$e===0&&qe(Ue)),Z!==r?(xr(),Ut=C,C=wE()):(Y=C,C=r),$e--,C===r&&$e===0&&qe(ft),C}function nb(){let C,Z;if(C=[],Z=eo(),Z!==r)for(;Z!==r;)C.push(Z),Z=eo();else C=r;return C}function eo(){let C,Z,ce,ke;return C=Y,xr(),Z=sb(),Z!==r?(xr(),ce=su(),ce===r&&(ce=null),xr(),e.charCodeAt(Y)===41?(ke=c,Y++):(ke=r,$e===0&&qe(mt)),ke!==r?(xr(),Ut=C,C=_E(Z,ce)):(Y=C,C=r)):(Y=C,C=r),C}function su(){let C,Z,ce,ke,vt,jt,$r,Ot;if(C=Y,Z=Uy(),Z!==r){for(ce=[],ke=Y,vt=xr(),e.charCodeAt(Y)===44?(jt=d,Y++):(jt=r,$e===0&&qe(Q)),jt===r&&(jt=null),$r=xr(),Ot=Uy(),Ot!==r?(vt=[vt,jt,$r,Ot],ke=vt):(Y=ke,ke=r);ke!==r;)ce.push(ke),ke=Y,vt=xr(),e.charCodeAt(Y)===44?(jt=d,Y++):(jt=r,$e===0&&qe(Q)),jt===r&&(jt=null),$r=xr(),Ot=Uy(),Ot!==r?(vt=[vt,jt,$r,Ot],ke=vt):(Y=ke,ke=r);Ut=C,C=Zc(Z,ce)}else Y=C,C=r;return C}function Uy(){let C,Z;return C=Y,Z=np(),Z===r&&(Z=sp(),Z===r&&(Z=to(),Z===r&&(Z=jy()))),Z!==r&&(Ut=C,Z=Xi(Z)),C=Z,C===r&&(C=Y,Z=ab(),Z!==r&&(Ut=C,Z=Bo(Z)),C=Z),C}function xr(){let C,Z;for($e++,C=[],Z=e.charAt(Y),fe.test(Z)?Y++:(Z=r,$e===0&&qe(pe));Z!==r;)C.push(Z),Z=e.charAt(Y),fe.test(Z)?Y++:(Z=r,$e===0&&qe(pe));return $e--,C}function sb(){let C,Z,ce;return $e++,C=Y,Z=ob(),Z!==r?(e.charCodeAt(Y)===40?(ce=f,Y++):(ce=r,$e===0&&qe(rt)),ce!==r?(Ut=C,C=Z):(Y=C,C=r)):(Y=C,C=r),$e--,C===r&&(Z=r,$e===0&&qe(ye)),C}function ob(){let C,Z,ce;if($e++,C=Y,Z=[],ce=e.charAt(Y),he.test(ce)?Y++:(ce=r,$e===0&&qe(oe)),ce!==r)for(;ce!==r;)Z.push(ce),ce=e.charAt(Y),he.test(ce)?Y++:(ce=r,$e===0&&qe(oe));else Z=r;return Z!==r&&(Ut=C,Z=SE()),C=Z,$e--,C===r&&(Z=r,$e===0&&qe(L)),C}function np(){let C,Z,ce;return $e++,C=Y,xr(),Z=Wr(),Z!==r?(e.charCodeAt(Y)===37?(ce=g,Y++):(ce=r,$e===0&&qe(we)),ce!==r?(Ut=C,C=TE(Z)):(Y=C,C=r)):(Y=C,C=r),$e--,C===r&&$e===0&&qe(xe),C}function sp(){let C,Z,ce;return $e++,C=Y,xr(),Z=Wr(),Z!==r?(e.substr(Y,2)===v?(ce=v,Y+=2):(ce=r,$e===0&&qe(yt)),ce!==r?(Ut=C,C=EE(Z)):(Y=C,C=r)):(Y=C,C=r),C===r&&(C=Y,xr(),Z=Wr(),Z!==r?(e.substr(Y,2)===w?(ce=w,Y+=2):(ce=r,$e===0&&qe(Ze)),ce!==r?(Ut=C,C=tp(Z)):(Y=C,C=r)):(Y=C,C=r),C===r&&(C=Y,xr(),Z=Wr(),Z!==r?(e.substr(Y,2)===S?(ce=S,Y+=2):(ce=r,$e===0&&qe(Ji)),ce!==r?(Ut=C,C=rp(Z)):(Y=C,C=r)):(Y=C,C=r),C===r&&(C=Y,xr(),Z=Wr(),Z!==r?(e.substr(Y,2)===T?(ce=T,Y+=2):(ce=r,$e===0&&qe(Gt)),ce!==r?(Ut=C,C=Pa(Z)):(Y=C,C=r)):(Y=C,C=r),C===r&&(C=Y,xr(),Z=Wr(),Z!==r?(e.substr(Y,2)===E?(ce=E,Y+=2):(ce=r,$e===0&&qe(qo)),ce!==r?(Ut=C,C=ip(Z)):(Y=C,C=r)):(Y=C,C=r),C===r&&(C=Y,xr(),Z=Wr(),Z!==r?(e.substr(Y,2)===M?(ce=M,Y+=2):(ce=r,$e===0&&qe(Cy)),ce!==r?(Ut=C,C=Yc(Z)):(Y=C,C=r)):(Y=C,C=r)))))),$e--,C===r&&$e===0&&qe(ze),C}function to(){let C,Z,ce;return $e++,C=Y,Z=Wr(),Z!==r?(e.substr(Y,3)===R?(ce=R,Y+=3):(ce=r,$e===0&&qe(Iy)),ce!==r?(Ut=C,C=xE(Z)):(Y=C,C=r)):(Y=C,C=r),C===r&&(C=Y,Z=Wr(),Z!==r?(e.substr(Y,3)===I?(ce=I,Y+=3):(ce=r,$e===0&&qe(Ny)),ce!==r?(Ut=C,C=K1(Z)):(Y=C,C=r)):(Y=C,C=r),C===r&&(C=Y,Z=Wr(),Z!==r?(e.substr(Y,4)===k?(ce=k,Y+=4):(ce=r,$e===0&&qe(Py)),ce!==r?(Ut=C,C=eb(Z)):(Y=C,C=r)):(Y=C,C=r),C===r&&(C=Y,Z=Wr(),Z!==r?(e.substr(Y,4)===j?(ce=j,Y+=4):(ce=r,$e===0&&qe(yE)),ce!==r?(Ut=C,C=ky(Z)):(Y=C,C=r)):(Y=C,C=r)))),$e--,C===r&&(Z=r,$e===0&&qe(ep)),C}function jy(){let C,Z;return $e++,C=Y,xr(),Z=Wr(),Z!==r?(Ut=C,C=Jc(Z)):(Y=C,C=r),$e--,C===r&&$e===0&&qe(gE),C}function ab(){let C,Z,ce,ke;if($e++,C=Y,e.charCodeAt(Y)===35?(Z=P,Y++):(Z=r,$e===0&&qe(vE)),Z!==r){if(ce=[],ke=e.charAt(Y),me.test(ke)?Y++:(ke=r,$e===0&&qe(Ly)),ke!==r)for(;ke!==r;)ce.push(ke),ke=e.charAt(Y),me.test(ke)?Y++:(ke=r,$e===0&&qe(Ly));else ce=r;ce!==r?(Ut=C,C=$E()):(Y=C,C=r)}else Y=C,C=r;return C===r&&(C=Y,Z=eo(),Z!==r&&(Ut=C,Z=tb(Z)),C=Z,C===r&&(C=Y,Z=ob(),Z!==r&&(Ut=C,Z=rb()),C=Z)),$e--,C===r&&(Z=r,$e===0&&qe(vs)),C}function Wr(){let C,Z,ce,ke,vt,jt,$r,Ot;for(C=Y,Z=e.charAt(Y),Oe.test(Z)?Y++:(Z=r,$e===0&&qe(Dy)),Z===r&&(Z=null),ce=Y,ke=[],vt=e.charAt(Y),Se.test(vt)?Y++:(vt=r,$e===0&&qe(Vn));vt!==r;)ke.push(vt),vt=e.charAt(Y),Se.test(vt)?Y++:(vt=r,$e===0&&qe(Vn));if(e.charCodeAt(Y)===46?(vt=X,Y++):(vt=r,$e===0&&qe(bE)),vt!==r){if(jt=[],$r=e.charAt(Y),Se.test($r)?Y++:($r=r,$e===0&&qe(Vn)),$r!==r)for(;$r!==r;)jt.push($r),$r=e.charAt(Y),Se.test($r)?Y++:($r=r,$e===0&&qe(Vn));else jt=r;jt!==r?(ke=[ke,vt,jt],ce=ke):(Y=ce,ce=r)}else Y=ce,ce=r;if(ce===r)if(ce=[],ke=e.charAt(Y),Se.test(ke)?Y++:(ke=r,$e===0&&qe(Vn)),ke!==r)for(;ke!==r;)ce.push(ke),ke=e.charAt(Y),Se.test(ke)?Y++:(ke=r,$e===0&&qe(Vn));else ce=r;if(ce!==r){if(ke=Y,e.charCodeAt(Y)===101?(vt=ae,Y++):(vt=r,$e===0&&qe(Q1)),vt!==r){if(jt=e.charAt(Y),Oe.test(jt)?Y++:(jt=r,$e===0&&qe(Dy)),jt===r&&(jt=null),$r=[],Ot=e.charAt(Y),Se.test(Ot)?Y++:(Ot=r,$e===0&&qe(Vn)),Ot!==r)for(;Ot!==r;)$r.push(Ot),Ot=e.charAt(Y),Se.test(Ot)?Y++:(Ot=r,$e===0&&qe(Vn));else $r=r;$r!==r?(vt=[vt,jt,$r],ke=vt):(Y=ke,ke=r)}else Y=ke,ke=r;ke===r&&(ke=null),Ut=C,C=Fy()}else Y=C,C=r;return C}function zy(C,Z){return C.map((function(ce){return ce[Z]}))}function Vy(C,Z,ce){return[C].concat(zy(Z,ce))}bn=s();const Gy=bn!==r&&Y===e.length;function qy(){throw bn!==r&&Y<e.length&&qe(Xc()),nu(Hr,It<e.length?ME(It):null,It<e.length?Da(It,It+1):Da(It,It))}return t.peg$library?{peg$result:bn,peg$currPos:Y,peg$FAILED:r,peg$maxFailExpected:Hr,peg$maxFailPos:It,peg$success:Gy,peg$throw:Gy?void 0:qy}:Gy?bn:void qy()}function YJ(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=kj(e);return r&&r.length!==0?r:null}const t=e.map((r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new z("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:kj(r.value)}}));t.sort(((r,i)=>i.effects.length-r.effects.length));for(let r=0;r<t.length-1;r++){if(!qhe(t[r].effects,t[r+1].effects))throw new z("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});Bhe(t[r].effects,t[r+1].effects)}return t.sort(((r,i)=>i.scale-r.scale)),t}function kj(e){let t;if(!e)return[];try{t=yEe(e)}catch(r){throw new z("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map((r=>gEe(r)))}function gEe(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return vEe(e);case"opacity":return bEe(e);case"hue-rotate":return wEe(e);case"blur":return _Ee(e);case"drop-shadow":return SEe(e);case"bloom":return TEe(e)}}catch(t){throw t.details.filter=e,t}throw new z("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function vEe(e){let t=1;return My(e.parameters,1),e.parameters.length===1&&(t=Mo(e.parameters[0])),new jA(e.name,t)}function bEe(e){let t=1;return My(e.parameters,1),e.parameters.length===1&&(t=Mo(e.parameters[0])),new vH(t)}function wEe(e){let t=0;return My(e.parameters,1),e.parameters.length===1&&(t=OEe(e.parameters[0])),new yH(t)}function _Ee(e){let t=0;return My(e.parameters,1),e.parameters.length===1&&(t=OP(e.parameters[0]),Y1(t,e.parameters[0])),new dH(t)}function SEe(e){const t=[];let r=null;for(const i of e.parameters)if(i.type==="color"){if(t.length&&Object.freeze(t),r)throw new z("effect:type-error","Accepts only one color",{});r=REe(i)}else{const n=OP(i);if(Object.isFrozen(t))throw new z("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&Y1(n,i)}if(t.length<2||t.length>3)throw new z("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new fH(t[0],t[1],t[2]||0,r||JJ("black"))}function TEe(e){let t=1,r=0,i=0;return My(e.parameters,3),e.parameters[0]&&(t=Mo(e.parameters[0])),e.parameters[1]&&(r=OP(e.parameters[1]),Y1(r,e.parameters[1])),e.parameters[2]&&(i=Mo(e.parameters[2])),new uH(t,r,i)}function My(e,t){if(e.length>t)throw new z("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function sE(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in AP)return"<length>";if(e.unit in MP)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function Y1(e,t){if(e<0)throw new z("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function EEe(e){if(e.type!=="quantity"||e.unit!==null)throw new z("effect:type-error",`Expected <double>, Actual: ${sE(e)}`,{term:e})}function xEe(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new z("effect:type-error",`Expected <double> or <percentage>, Actual: ${sE(e)}`,{term:e})}const MP={deg:1,grad:.9,rad:180/Math.PI,turn:360};function $Ee(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&MP[e.unit]!=null))throw new z("effect:type-error",`Expected <angle>, Actual: ${sE(e)}`,{term:e})}const AP={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function MEe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&AP[e.unit]!=null))throw new z("effect:type-error",`Expected <length>, Actual: ${sE(e)}`,{term:e})}function Mo(e){xEe(e);const t=e.value;return Y1(t,e),e.unit==="%"?.01*t:t}function AEe(e){return EEe(e),Y1(e.value,e),e.value}function OEe(e){return $Ee(e),e.value*MP[e.unit]||0}function OP(e){return MEe(e),e.value*AP[e.unit]||0}function REe(e){switch(e.colorType){case"hex":return Gue(e.value);case"named":return JJ(e.value);case"function":return NEe(e.value)}}function JJ(e){if(!tB(e))throw new z("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Vue(e)}const CEe=/^rgba?/i,IEe=/^hsla?/i;function NEe(e){if(My(e.parameters,4),CEe.test(e.name))return[Mo(e.parameters[0]),Mo(e.parameters[1]),Mo(e.parameters[2]),e.parameters[3]?Mo(e.parameters[3]):1];if(IEe.test(e.name))return rB(AEe(e.parameters[0]),Mo(e.parameters[1]),Mo(e.parameters[2]),e.parameters[3]?Mo(e.parameters[3]):1);throw new z("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function f1(e,t,r){try{return LEe(e)}catch(i){r?.messages?.push(i)}return null}function m1(e,t,r,i){try{const n=PEe(e);ii(r,n,t)}catch(n){i.messages&&i.messages.push(n)}}function PEe(e){const t=YJ(e);return t?Hhe(t)?t.map((r=>r.toJSON())):t.map((({scale:r,effects:i})=>({scale:r,value:i.map((n=>n.toJSON()))}))):null}function LEe(e){if(!e||e.length===0)return null;if(DEe(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:Fj(r.value)});return t}return Fj(e)}function DEe(e){const t=e[0];return!!t&&"scale"in t}function Fj(e){if(!e?.length)return"";const t=[];for(const r of e){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[il(r,"amount")];break;case"blur":i=[il(r,"radius","pt")];break;case"hue-rotate":i=[il(r,"angle","deg")];break;case"drop-shadow":i=[il(r,"xoffset","pt"),il(r,"yoffset","pt"),il(r,"blurRadius","pt"),kEe(r,"color")];break;case"bloom":i=[il(r,"strength"),il(r,"radius","pt"),il(r,"threshold")]}const n=`${r.type}(${i.filter(Boolean).join(" ")})`;YJ(n),t.push(n)}return t.join(" ")}function il(e,t,r){if(e[t]==null)throw new z("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function kEe(e,t){if(e[t]==null)throw new z("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const FEe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:kt}},"portal-item":{read:!0,write:{layerContainerTypes:kt}}}}},Uj={read:{reader:f1},write:{allowNull:!0,writer:m1,layerContainerTypes:kt}},UEe={json:{read:!1,write:!1,origins:{"web-map":Uj,"portal-item":Uj}}},jEe=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return u([p(FEe)],t.prototype,"blendMode",void 0),u([p(UEe)],t.prototype,"effect",void 0),t=u([O("esri.layers.mixins.BlendLayer")],t),t},zEe=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return u([p({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=u([O("esri.layers.mixins.CustomParametersMixin")],t),t},XJ=96;function c5e(e,t){const r=e.extent,i=e.width,n=Xs(r?.spatialReference);return r&&i?r.width/i*n*SG*XJ:0}function d5e(e,t){return e/(Xs(t)*SG*XJ)}function h5e(e,t,r){return VEe(e,t)&&GEe(e,r)}function VEe(e,t){return t===0||ko(e,t)||e<t}function GEe(e,t){return t===0||ko(e,t)||e>t}function qEe(e,t){return ko(e,t)?0:(e||Number.POSITIVE_INFINITY)>(t||Number.POSITIVE_INFINITY)?1:-1}const jj={write:{overridePolicy:(e,t,r)=>({enabled:!r||r.filterMode==="scale"})}};let Al=class extends We.ClonableMixin(K){constructor(t){super(t),this.id=Sy(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};u([p({type:String,json:{write:!0}})],Al.prototype,"id",void 0),u([p({type:Number,json:jj})],Al.prototype,"maxScale",void 0),u([p({type:Number,json:jj})],Al.prototype,"minScale",void 0),u([p({type:String,json:{write:!0}})],Al.prototype,"title",void 0),u([p({type:String,json:{write:!0}})],Al.prototype,"where",void 0),Al=u([O("esri.layers.support.DisplayFilter")],Al);function BEe(e,t){return{...t,filterMode:e.mode}}function f5e(e,t){return QJ(e,t).next().value??null}function m5e(e,t,r){const i=HEe(e);if(i&&(uB(t,i[0])||MA(r,i[1])))return"";const n=Array.from(QJ(e,t,r)),s=WEe(n,t,r)?"1=1":n.map((a=>a.where||"1=1")).reduce(((a,c)=>hme(a,c)),"");return s&&s!=="1=1"?s:""}function HEe(e){if(KJ(e)==="manual")return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:r,maxScale:i}of e.filters)t[0]=Math.max(t[0],y1(r)),t[1]=Math.min(t[1],Y2(i));return t}function*QJ(e,t,r){if(KJ(e)==="manual"){const i=e.filters.find((n=>n.id===e.activeFilterId));i&&(yield i)}else{typeof t=="object"&&(t=t.scale);for(const i of e.filters)ZEe(i.minScale,i.maxScale,t,r)&&(yield i)}}function WEe(e,t,r){if(e.length===0)return!0;const i=y1(e.at(0)?.minScale),n=Y2(e.at(-1)?.maxScale);if(MA(i,t)||uB(n,r))return!0;for(let s=0;s<e.length-1;s++){const a=e[s],c=e[s+1];if(MA(y1(c.minScale),Y2(a.maxScale)))return!0}return!1}function ZEe(e,t,r,i){return e=y1(e),r=y1(r),t=Y2(t),!(!ko(r,e)&&(i??r)>e)&&!Bue(t,r)&&(i===void 0||!ko(i,e))}function KJ(e){return"mode"in e?e.mode:e.filterMode}function y1(e){return e||Number.POSITIVE_INFINITY}function Y2(e){return e||0}let Wd=class extends We.ClonableMixin(K){constructor(t){super(t),this.activeFilterId=null,this.filters=new(ge.ofType(Al)),this.mode="manual"}writeFilters(t,r,i,n){const s=t.toArray();this.mode==="scale"&&s.sort(((a,c)=>{const d=qEe(c.minScale,a.minScale),f=a.maxScale-c.maxScale;return d===0?f:d})),r[i]=s.map((a=>a.toJSON(n)))}write(t,r){return super.write(t,BEe(this,r))}};u([p({type:String,json:{write:{overridePolicy:(e,t,r)=>({enabled:r.filterMode==="manual",isRequired:!0})}}})],Wd.prototype,"activeFilterId",void 0),u([p({type:ge.ofType(Al),nonNullable:!0,json:{write:!0}})],Wd.prototype,"filters",void 0),u([de("filters")],Wd.prototype,"writeFilters",null),u([p({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],Wd.prototype,"mode",void 0),Wd=u([O("esri.layers.support.DisplayFilterInfo")],Wd);const YEe=e=>{let t=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return u([p(JEe)],t.prototype,"displayFilterEnabled",void 0),u([p(XEe)],t.prototype,"displayFilterInfo",void 0),t=u([O("esri.layers.mixins.DisplayFilteredLayer")],t),t},JEe={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:kt,writer(e,t,r){ii(r,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},XEe={type:Wd,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:kt},origins:{"web-scene":{write:!1,read:!1}}}},QEe=Xue(),eX=new Map,tX=new Map;async function g5e(e,t,r){if(!e||!r)return!1;if(!t)return!0;const i=new URL(e).host;let n=eX.get(i);if(!n){const s=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await Ft(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===t}async function v5e(e,t,r=!1){if(!e||!t)return!0;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=tX.get(i)?.entries();if(n){for(const[s,a]of n)if(a.name===t){const c=!a.stack?.hasForwardEdits();if(!c&&r){const[{deleteForwardEdits:d},{default:f}]=await Promise.all([ue(()=>import("./deleteForwardEdits-BstXjuuN.js"),[]),ue(()=>import("./DeleteForwardEditsParameters-DwENrx_0.js"),[])]),g=await d(i,s,new f({sessionId:QEe,moment:a.moment}));return g.success&&a.stack?.clearForwardEdits(),g.success}return c}}return!0}function KEe(e,t){if(!e)return!1;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=tX.get(r)?.entries();if(i){for(const[n,s]of i)if(s.name===t)return s.lockType==="edit"}return!1}const RP=new Na.EventEmitter;function exe(e){return RP.on("apply-edits",new WeakRef(e))}function txe(e){return RP.on("update-moment",new WeakRef(e))}function b5e(e,t,r=null,i=!1){const n=ys();return i=t==null||i,RP.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:r,mayReceiveServiceEdits:i,result:n.promise}),n}const rX=Symbol();function w5e(e){return e!=null&&typeof e=="object"&&rX in e}function h0(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function l3(e,t,r){const i=new URL(e).host,n=eX.get(i),s=a=>!a||a===n;return s(t)&&s(r)||t===r}const rxe=e=>{var i;var t;let r=(i=class extends e{constructor(...n){super(...n),this[t]=!0,this._applyEditsHandler=s=>{const{serviceUrl:a,layerId:c,gdbVersion:d,mayReceiveServiceEdits:f,result:g}=s,v=a===this.url,w=c!=null&&this.layerId!=null&&c===this.layerId,S=h0(this),T=h0(this)&&l3(a,d,this.gdbVersion);if(!v||S&&!T||!w&&!f)return;const E=g.then((M=>{if(this.lastEditsEventDate=new Date,w&&(M.addedFeatures.length||M.updatedFeatures.length||M.deletedFeatures.length||M.addedAttachments.length||M.updatedAttachments.length||M.deletedAttachments.length))return this.emit("edits",U(M)),M;const R=M.editedFeatures?.find((({layerId:k})=>k===this.layerId));if(R){const{adds:k,updates:j,deletes:P}=R.editedFeatures,X={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:k?k.map((({attributes:ae})=>({objectId:this.objectIdField&&ae[this.objectIdField],globalId:this.globalIdField&&ae[this.globalIdField]}))):[],deletedFeatures:P?P.map((({attributes:ae})=>({objectId:this.objectIdField&&ae[this.objectIdField],globalId:this.globalIdField&&ae[this.globalIdField]}))):[],updatedFeatures:j?j.map((({current:{attributes:ae}})=>({objectId:this.objectIdField&&ae[this.objectIdField],globalId:this.globalIdField&&ae[this.globalIdField]}))):[],editedFeatures:U(M.editedFeatures),exceededTransferLimit:!1,historicMoment:U(M.historicMoment)};return this.emit("edits",X),X}const I={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:U(M.editedFeatures),exceededTransferLimit:!1,historicMoment:U(M.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(a,d,I.historicMoment)&&this.emit("edits",I),I})).then((M=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(a,d,M.historicMoment)&&(this.historicMoment=M.historicMoment),M)));this.emit("apply-edits",{result:E})},this._updateMomentHandler=s=>{const{serviceUrl:a,gdbVersion:c,moment:d}=s,f=a===this.url,g=h0(this),v=h0(this)&&l3(a,c,this.gdbVersion),w=h0(this)&&!l3(a,this.gdbVersion,null);f&&g&&v&&w&&"historicMoment"in this&&this.historicMoment!==d&&(this.historicMoment=d)},this.when().then((()=>{this.addHandles(exe(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(txe(this._updateMomentHandler))}),(()=>{}))}_shouldUpdateHistoricMoment(n,s,a){return"historicMoment"in this&&this.historicMoment!==a&&KEe(n,s)}},t=rX,i);return u([p()],r.prototype,"lastEditsEventDate",void 0),r=u([O("esri.layers.mixins.EditBusLayer")],r),r};var gC;const u3=new tt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),c3=new tt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let oa=gC=class extends K{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:n,objectIds:s,units:a,distance:c}=this;return new Ce({geometry:U(r),objectIds:U(s),spatialRelationship:i,timeExtent:U(n),where:t,units:a,distance:c,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:i,objectIds:n,units:s,distance:a}=this;return new gC({geometry:U(t),objectIds:U(n),spatialRelationship:r,timeExtent:U(i),where:e,units:s,distance:a})}};u([p({type:String,json:{write:!0}})],oa.prototype,"where",void 0),u([p({types:U1,json:{write:!0}})],oa.prototype,"geometry",void 0),u([p({type:u3.apiValues,json:{name:"spatialRel",read:{reader:u3.read},write:{allowNull:!1,writer:u3.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],oa.prototype,"spatialRelationship",void 0),u([p({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],oa.prototype,"distance",void 0),u([p({type:[Number],json:{write:!0}})],oa.prototype,"objectIds",void 0),u([p({type:c3.apiValues,json:{read:c3.read,write:{writer:c3.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],oa.prototype,"units",void 0),u([p({type:Lr,json:{write:!0}})],oa.prototype,"timeExtent",void 0),oa=gC=u([O("esri.layers.support.FeatureFilter")],oa);const ixe=oa;var vC;const zj={read:{reader:f1},write:{writer:m1,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},Vj={read:{reader:f1},write:{writer:m1,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},Gj={name:"showExcludedLabels",default:!0};let Zd=vC=class extends K{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const r=super.write(e,t);if(t?.origin){if(r.filter){const i=Object.keys(r.filter);if(i.length>1||i[0]!=="where")return t.messages?.push(new z("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in r)return t.messages?.push(new z("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new vC({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};u([p({type:ixe,json:{write:{allowNull:!0,writer(e,t,r,i){const n=e?.write({},i);n&&Object.keys(n).length!==0?ii(r,n,t):ii(r,null,t)}}}})],Zd.prototype,"filter",void 0),u([p({json:{read:f1,write:{writer:m1,allowNull:!0},origins:{"web-map":zj,"portal-item":zj}}})],Zd.prototype,"includedEffect",void 0),u([p({json:{read:f1,write:{writer:m1,allowNull:!0},origins:{"web-map":Vj,"portal-item":Vj}}})],Zd.prototype,"excludedEffect",void 0),u([p({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":Gj,"portal-item":Gj}}})],Zd.prototype,"excludedLabelsVisible",void 0),Zd=vC=u([O("esri.layers.support.FeatureEffect")],Zd);const qj={write:{allowNull:!0}},nxe={type:Zd,json:{origins:{"web-map":qj,"portal-item":qj}}},sxe=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return u([p(nxe)],t.prototype,"featureEffect",void 0),t=u([O("esri.layers.mixins.FeatureEffectLayer")],t),t};var bC;let tv=bC=class extends K{constructor(e){super(e)}async collectRequiredFields(e,t){return Yi(e,t,this.expression)}clone(){return new bC({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};u([p({type:String,json:{write:{isRequired:!0}}})],tv.prototype,"expression",void 0),u([p({type:String,json:{write:!0}})],tv.prototype,"title",void 0),tv=bC=u([O("esri.symbols.support.FeatureExpressionInfo")],tv);const Bj=tv,oE={unknown:1,inches:br(1,"meters","inches"),feet:br(1,"meters","feet"),"us-feet":br(1,"meters","us-feet"),yards:br(1,"meters","yards"),miles:br(1,"meters","miles"),"nautical-miles":br(1,"meters","nautical-miles"),millimeters:br(1,"meters","millimeters"),centimeters:br(1,"meters","centimeters"),decimeters:br(1,"meters","decimeters"),meters:br(1,"meters","meters"),kilometers:br(1,"meters","kilometers"),"decimal-degrees":1/yoe(1,"meters",dr.radius)};function _5e(e){return!!e&&oE[e]!=null}function S5e(e){return 1/(oE[e]||1)}function oxe(){const e=Object.keys(oE);return bI(e,"decimal-degrees"),e.sort(),e}const axe=oxe();var wC;const Xw=wi()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),Hj=new tt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});var Im;let bl=(Im=class extends K{constructor(t){super(t),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(t,r){return t!=null?t.expression?t:void 0:r.featureExpression&&r.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(t,r,i,n){r[i]=t.write({},n),t.expression==="0"&&(r.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:r}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||r?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,r){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,r):null}clone(){return new wC({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&oie(this.featureExpressionInfo,t.featureExpressionInfo)}},wC=Im,Im);u([p({type:Bj,json:{write:!0}})],bl.prototype,"featureExpressionInfo",void 0),u([le("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],bl.prototype,"readFeatureExpressionInfo",null),u([de("featureExpressionInfo",{featureExpressionInfo:{type:Bj},"featureExpression.value":{type:[0]}})],bl.prototype,"writeFeatureExpressionInfo",null),u([p({type:Xw.apiValues,nonNullable:!0,json:{type:Xw.jsonValues,read:Xw.read,write:{writer:Xw.write,isRequired:!0}}})],bl.prototype,"mode",null),u([p({type:Number,json:{write:!0}})],bl.prototype,"offset",void 0),u([p({type:axe,json:{type:String,read:Hj.read,write:Hj.write}})],bl.prototype,"unit",null),bl=wC=u([O("esri.symbols.support.ElevationInfo")],bl);let Of=class extends K{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};u([p({type:String,json:{write:!0}})],Of.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],Of.prototype,"label",void 0),u([p()],Of.prototype,"type",void 0),Of=u([O("esri.tables.elements.AttributeTableElement")],Of);const Ay=Of;let rv=class extends We.ClonableMixin(Ay){constructor(t){super(t),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};u([p({type:["auto"],json:{write:!0}})],rv.prototype,"displayType",void 0),u([p({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],rv.prototype,"type",void 0),rv=u([O("esri.tables.elements.AttributeTableAttachmentElement")],rv);const iX=rv;let Yd=class extends We.ClonableMixin(Ay){constructor(t){super(t),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};u([p({type:String,json:{read:!1,write:!1}})],Yd.prototype,"description",void 0),u([p({type:String,json:{write:{enabled:!0,isRequired:!0}}})],Yd.prototype,"fieldName",void 0),u([p({type:String,json:{read:!1,write:!1}})],Yd.prototype,"label",void 0),u([p({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Yd.prototype,"type",void 0),Yd=u([O("esri.tables.elements.AttributeTableFieldElement")],Yd);const nX=Yd;let iv=class extends We.ClonableMixin(Ay){constructor(t){super(t),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};u([p({type:Number,json:{type:dt,write:{enabled:!0,isRequired:!0}}})],iv.prototype,"relationshipId",void 0),u([p({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],iv.prototype,"type",void 0),iv=u([O("esri.tables.elements.AttributeTableRelationshipElement")],iv);const sX=iv,oX={base:Ay,key:"type",typeMap:{attachment:iX,field:nX,relationship:sX}};function lxe(e){return{typesWithGroup:{base:Ay,key:"type",typeMap:{attachment:iX,field:nX,group:e,relationship:sX}},typesWithoutGroup:oX}}let nv=class extends We.ClonableMixin(Ay){constructor(t){super(t),this.elements=null,this.type="group"}clone(){return super.clone()}};u([p({types:[oX],json:{name:"attributeTableElements",write:!0}})],nv.prototype,"elements",void 0),u([p({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],nv.prototype,"type",void 0),nv=u([O("esri.tables.elements.AttributeTableGroupElement")],nv);const uxe=nv;let sv=class extends We.ClonableMixin(K){constructor(t){super(t),this.field=null,this.order=null}};u([p({type:String,json:{write:!0}})],sv.prototype,"field",void 0),u([p({type:["asc","desc"],json:{write:!0}})],sv.prototype,"order",void 0),sv=u([O("esri.tables.support.FieldOrder")],sv);const cxe=sv;var _C;const dxe=lxe(uxe);let ov=_C=class extends K{constructor(e){super(e),this.elements=null,this.orderByFields=null}clone(){return new _C({elements:U(this.elements),orderByFields:U(this.orderByFields)})}};u([p({types:[dxe.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],ov.prototype,"elements",void 0),u([p({type:[cxe],json:{write:!0}})],ov.prototype,"orderByFields",void 0),ov=_C=u([O("esri.tables.AttributeTableTemplate")],ov);const hxe=ov,pxe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:kt}}},aE={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},lE={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:kt}}},fxe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Ch}}},mxe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:kt}}},yxe={value:null,type:bl,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:kt}}};function O5e(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const aX={write:{enabled:!0,layerContainerTypes:kt},read:!0},SC={type:Number,json:{origins:{"web-document":aX,"portal-item":{write:{layerContainerTypes:kt}}}}},gxe={...SC,json:{...SC.json,origins:{"web-document":{...aX,write:{enabled:!0,layerContainerTypes:kt,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition?.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?Kv(t.layerDefinition.drawingInfo.transparency):void 0:Kv(t.drawingInfo.transparency)}}},R5e={type:Xe,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=Xe.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=Ee.fromJSON(t.spatialReference)),r}}}},read:!1}},vxe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},bxe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:kt}}},wxe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:kt}}},lX={json:{write:{ignoreOrigin:!0,layerContainerTypes:kt},origins:{"web-map":{read:!1,write:!1}}}},_xe={type:hxe,json:{name:"attributeTableInfo",write:!0}};let wl=class extends We.ClonableMixin(K){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};u([p()],wl.prototype,"creatorField",void 0),u([p()],wl.prototype,"creationDateField",void 0),u([p()],wl.prototype,"editorField",void 0),u([p()],wl.prototype,"editDateField",void 0),u([p()],wl.prototype,"realm",void 0),u([p(l2("dateFieldsTimeReference",!0))],wl.prototype,"timeZone",void 0),wl=u([O("esri.layers.support.EditFieldsInfo")],wl);let da=class extends We.ClonableMixin(K){constructor(t){super(t)}};u([p({constructOnly:!0,json:{write:!0}})],da.prototype,"name",void 0),u([p({constructOnly:!0,json:{write:!0}})],da.prototype,"fields",void 0),u([p({constructOnly:!0,json:{write:!0}})],da.prototype,"isAscending",void 0),u([p({constructOnly:!0,json:{write:!0}})],da.prototype,"indexType",void 0),u([p({constructOnly:!0,json:{write:!0}})],da.prototype,"isUnique",void 0),u([p({constructOnly:!0,json:{write:!0}})],da.prototype,"description",void 0),da=u([O("esri.layers.support.FeatureIndex")],da);async function Sxe(e,t,r){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=uX(e));const i=Txe(e),n=e.capabilities.query.supportsPagination;t.start=0,t.num=i;let s=null;for(;;){const a=await e.source.queryFeaturesJSON(t,r);if(s==null?s=a:s.features=s.features.concat(a.features),s.exceededTransferLimit=a.exceededTransferLimit,!n||!a.exceededTransferLimit)break;t.start+=i}return s}function Txe(e){return uX(e)*Exe(e)}function Exe(e){return e.capabilities.query.maxRecordCount||2e3}function uX(e){return e.capabilities.query.supportsMaxRecordCountFactor?Ce.MAX_MAX_RECORD_COUNT_FACTOR:1}var TC;let av=TC=class extends K{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new TC({minValue:this.minValue,maxValue:this.maxValue})}};u([p({type:Number,json:{write:!0}})],av.prototype,"minValue",void 0),u([p({type:Number,json:{write:!0}})],av.prototype,"maxValue",void 0),av=TC=u([O("esri.renderers.support.AuthoringInfoClassBreakInfo")],av);var EC;let oc=EC=class extends K{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new EC({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:U(this.classBreakInfos)})}};u([p({type:String,json:{write:!0}})],oc.prototype,"field",void 0),u([p({type:String,json:{write:!0}})],oc.prototype,"normalizationField",void 0),u([p({type:String,json:{write:!0}})],oc.prototype,"label",void 0),u([p({type:[av],json:{write:!0}})],oc.prototype,"classBreakInfos",void 0),oc=EC=u([O("esri.renderers.support.AuthoringInfoFieldInfo")],oc);var xC;let Rf=xC=class extends K{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new xC({label:this.label,value:this.value,size:this.size})}};u([p({type:String,json:{write:!0}})],Rf.prototype,"label",void 0),u([p({type:Number,json:{write:!0}})],Rf.prototype,"size",void 0),u([p({type:Number,json:{write:!0}})],Rf.prototype,"value",void 0),Rf=xC=u([O("esri.renderers.support.AuthoringInfoSizeStop")],Rf);const xxe=Rf;var $C;const Qw=new tt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),Kw=new tt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),Wj={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},Zj=["high-to-low","above-and-below","centered-on","extremes"],Yj=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],Jj=["seconds","minutes","hours","days","months","years"],$xe=["circle","diamond","hexagon-flat","hexagon-pointy","square"],Mxe=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let Jr=$C=class extends K{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(e){this._set("spikeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new $C({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:U(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};u([p({types:Wj,json:{write:!0}})],Jr.prototype,"endTime",void 0),u([wt("endTime")],Jr.prototype,"castEndTime",null),u([p({type:String,json:{write:!0}})],Jr.prototype,"field",void 0),u([p({type:Number,json:{write:!0}})],Jr.prototype,"maxSliderValue",void 0),u([p({type:Number,json:{write:!0}})],Jr.prototype,"minSliderValue",void 0),u([p({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],Jr.prototype,"normalizationField",null),u([p({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Jr.prototype,"referenceSizeScale",null),u([p({type:$xe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Jr.prototype,"referenceSizeSymbolStyle",null),u([p({type:Mxe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Jr.prototype,"spikeSymbolStyle",null),u([p({types:Wj,json:{write:!0}})],Jr.prototype,"startTime",void 0),u([wt("startTime")],Jr.prototype,"castStartTime",null),u([p({type:[xxe],json:{origins:{"web-scene":{write:!1}},write:!0}})],Jr.prototype,"sizeStops",null),u([p({type:Qw.apiValues,value:null,json:{type:Qw.jsonValues,read:Qw.read,write:Qw.write}})],Jr.prototype,"style",null),u([p({type:Yj,value:null,json:{type:Yj,origins:{"web-scene":{type:Zj,write:{writer:(e,t)=>{Zj.includes(e)&&(t.theme=e)}}}},write:!0}})],Jr.prototype,"theme",null),u([p({type:Kw.apiValues,json:{type:Kw.jsonValues,read:Kw.read,write:Kw.write}})],Jr.prototype,"type",void 0),u([p({type:Jj,json:{type:Jj,write:!0}})],Jr.prototype,"units",void 0),Jr=$C=u([O("esri.renderers.support.AuthoringInfoVisualVariable")],Jr);const Axe=Jr;let hm=class extends K{constructor(t){super(t),this.type=null}};u([p({readOnly:!0,json:{read:!1,write:!0}})],hm.prototype,"type",void 0),hm=u([O("esri.rest.support.ColorRamp")],hm);var MC;let Ll=MC=class extends hm{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new MC({fromColor:U(this.fromColor),toColor:U(this.toColor),algorithm:this.algorithm})}};u([Ne({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Ll.prototype,"algorithm",void 0),u([p({type:De,json:{type:[dt],write:!0}})],Ll.prototype,"fromColor",void 0),u([p({type:De,json:{type:[dt],write:!0}})],Ll.prototype,"toColor",void 0),u([p({type:["algorithmic"]})],Ll.prototype,"type",void 0),Ll=MC=u([O("esri.rest.support.AlgorithmicColorRamp")],Ll);var AC;let Zf=AC=class extends hm{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new AC({colorRamps:U(this.colorRamps)})}};u([p({type:[Ll],json:{write:!0}})],Zf.prototype,"colorRamps",void 0),u([p({type:["multipart"]})],Zf.prototype,"type",void 0),Zf=AC=u([O("esri.rest.support.MultipartColorRamp")],Zf);const Oxe={key:"type",base:hm,typeMap:{algorithmic:Ll,multipart:Zf}};function Rxe(e){return e?.type?e.type==="algorithmic"?Ll.fromJSON(e):e.type==="multipart"?Zf.fromJSON(e):null:null}var OC;const Td=new tt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),e_=new tt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),Xj=new tt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),Qj=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],Cxe=["high-to-low","above-and-below","above","below"],Ixe=["flow-line","wave-front"],Nxe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Qt=OC=class extends K{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?Rxe(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new OC({classificationMethod:this.classificationMethod,colorRamp:U(this.colorRamp),fadeRatio:U(this.fadeRatio),fields:this.fields?.slice(),field1:U(this.field1),field2:U(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((e=>e.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};u([p({type:Td.apiValues,value:null,json:{type:Td.jsonValues,read:Td.read,write:Td.write,origins:{"web-document":{default:"manual",type:Td.jsonValues,read:Td.read,write:Td.write}}}})],Qt.prototype,"classificationMethod",null),u([p({types:Oxe,json:{write:!0}})],Qt.prototype,"colorRamp",void 0),u([le("colorRamp")],Qt.prototype,"readColorRamp",null),u([p({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qt.prototype,"fadeRatio",void 0),u([p({type:[String],value:null,json:{write:!0}})],Qt.prototype,"fields",null),u([p({type:oc,value:null,json:{write:!0}})],Qt.prototype,"field1",null),u([p({type:oc,value:null,json:{write:!0}})],Qt.prototype,"field2",null),u([p({type:Ixe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Qt.prototype,"flowTheme",null),u([p({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Qt.prototype,"focus",null),u([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Qt.prototype,"isAutoGenerated",void 0),u([p({type:Number,value:null,json:{type:dt,write:!0}})],Qt.prototype,"numClasses",null),u([p({type:Qj,json:{type:Qj,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Qt.prototype,"lengthUnit",void 0),u([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qt.prototype,"maxSliderValue",void 0),u([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qt.prototype,"minSliderValue",void 0),u([p({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qt.prototype,"statistics",null),u([p({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Qt.prototype,"standardDeviationInterval",null),u([p({type:e_.apiValues,value:null,json:{type:e_.jsonValues,read:e_.read,write:e_.write,origins:{"web-scene":{type:Xj.jsonValues,write:{writer:Xj.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],Qt.prototype,"type",null),u([p({type:[Axe],json:{write:!0}})],Qt.prototype,"visualVariables",void 0),u([p({type:Nxe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Qt.prototype,"univariateSymbolStyle",null),u([p({type:Cxe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Qt.prototype,"univariateTheme",null),Qt=OC=u([O("esri.renderers.support.AuthoringInfo")],Qt);const d3=new tt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let ps=class extends K{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const r=new Set;return await this.collectRequiredFields(r,t),Array.from(r).sort()}getSymbol(t,r){}async getSymbolAsync(t,r){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};u([p({type:Qt,json:{write:!0}})],ps.prototype,"authoringInfo",void 0),u([p({type:d3.apiValues,readOnly:!0,json:{type:d3.jsonValues,read:!1,write:{writer:d3.write,ignoreOrigin:!0,isRequired:!0}}})],ps.prototype,"type",void 0),ps=u([O("esri.renderers.Renderer")],ps);let lv=class extends We.ClonableMixin(K){constructor(){super(...arguments),this.showLegend=null,this.title=null}};u([p({type:Boolean,json:{write:!0}})],lv.prototype,"showLegend",void 0),u([p({type:String,json:{write:!0}})],lv.prototype,"title",void 0),lv=u([O("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],lv);const cX=lv,h3=new tt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Fi=class extends K{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(re.getLogger(this).error(".field: field must be a string value"),null):O1(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};u([p()],Fi.prototype,"index",void 0),u([p({type:h3.apiValues,readOnly:!0,json:{read:h3.read,write:{writer:h3.write,isRequired:!0}}})],Fi.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],Fi.prototype,"field",void 0),u([wt("field")],Fi.prototype,"castField",null),u([p({type:String,json:{write:!0}})],Fi.prototype,"valueExpression",void 0),u([p({type:String,json:{write:!0}})],Fi.prototype,"valueExpressionTitle",void 0),u([p({readOnly:!0})],Fi.prototype,"arcadeRequired",null),u([p({type:cX,json:{write:!0}})],Fi.prototype,"legendOptions",void 0),Fi=u([O("esri.renderers.visualVariables.VisualVariable")],Fi);var RC;let Jd=RC=class extends K{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new RC({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};u([p({type:De,json:{type:[dt],write:{isRequired:!0}}})],Jd.prototype,"color",void 0),u([p({type:String,json:{write:!0}})],Jd.prototype,"label",void 0),u([p({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Jd.prototype,"value",void 0),u([de("value")],Jd.prototype,"writeValue",null),Jd=RC=u([O("esri.renderers.visualVariables.support.ColorStop")],Jd);const Pxe=Jd;var CC;let ac=CC=class extends Fi{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((t=>!!t))).sort(((t,r)=>t.value-r.value)),this._set("stops",e)}clone(){return new CC({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};u([p({readOnly:!0})],ac.prototype,"cache",null),u([p({type:["color"],json:{type:["colorInfo"]}})],ac.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],ac.prototype,"normalizationField",void 0),u([p({type:[Pxe],json:{write:!0}})],ac.prototype,"stops",null),ac=CC=u([O("esri.renderers.visualVariables.ColorVariable")],ac);var IC;let Xu=IC=class extends K{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return Kv(t.transparency)}writeOpacity(e,t,r){t[r]=CT(e)}clone(){return new IC({label:this.label,opacity:this.opacity,value:this.value})}};u([p({type:String,json:{write:!0}})],Xu.prototype,"label",void 0),u([p({type:Number,json:{type:dt,write:{target:"transparency",isRequired:!0}}})],Xu.prototype,"opacity",void 0),u([le("opacity",["transparency"])],Xu.prototype,"readOpacity",null),u([de("opacity")],Xu.prototype,"writeOpacity",null),u([p({type:Number,json:{write:{isRequired:!0}}})],Xu.prototype,"value",void 0),Xu=IC=u([O("esri.renderers.visualVariables.support.OpacityStop")],Xu);const Lxe=Xu;var NC;let Dl=NC=class extends Fi{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((t=>!!t))).sort(((t,r)=>t.value-r.value)),this._set("stops",e)}clone(){return new NC({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};u([p({readOnly:!0})],Dl.prototype,"cache",null),u([p({type:["opacity"],json:{type:["transparencyInfo"]}})],Dl.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],Dl.prototype,"normalizationField",void 0),u([p({type:[Lxe],json:{write:!0}})],Dl.prototype,"stops",null),Dl=NC=u([O("esri.renderers.visualVariables.OpacityVariable")],Dl);var PC;let lc=PC=class extends Fi{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){return new PC({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};u([p({readOnly:!0})],lc.prototype,"cache",null),u([p({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],lc.prototype,"axis",void 0),u([p({type:["rotation"],json:{type:["rotationInfo"]}})],lc.prototype,"type",void 0),u([p({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],lc.prototype,"rotationType",void 0),lc=PC=u([O("esri.renderers.visualVariables.RotationVariable")],lc);function Dxe(e){return ut(e)}var LC;let Ao=LC=class extends K{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new LC({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};u([p({type:String,json:{write:!0}})],Ao.prototype,"label",void 0),u([p({type:Number,cast:ut,json:{write:{isRequired:!0}}})],Ao.prototype,"size",void 0),u([p({type:Number,json:{write:{isRequired:!0}}})],Ao.prototype,"value",void 0),u([p({type:Boolean,json:{write:!1}})],Ao.prototype,"useMinValue",void 0),u([p({type:Boolean,json:{write:!1}})],Ao.prototype,"useMaxValue",void 0),Ao=LC=u([O("esri.renderers.visualVariables.support.SizeStop")],Ao);let bS=class extends cX{constructor(){super(...arguments),this.customValues=null}};u([p({type:[Number],json:{write:!0}})],bS.prototype,"customValues",void 0),bS=u([O("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],bS);const kxe=bS;var Wl,ri;function Yf(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function Gh(e){return e!=null&&!isNaN(e)&&isFinite(e)}function dX(e){return e.valueExpression?Wl.Expression:e.field&&typeof e.field=="string"?Wl.Field:Wl.Unknown}function Fxe(e,t){const r=t||dX(e),i=e.valueUnit||"unknown";return r===Wl.Unknown?ri.Constant:e.stops?ri.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?ri.ClampedLinear:i==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?ri.Proportional:ri.Additive:ri.Identity:ri.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Wl||(Wl={})),(function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"})(ri||(ri={}));const hX=()=>re.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),uE=e=>hX().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),cE=()=>hX().error("Use of arcade expressions requires an arcade context"),Kj=new Nr,wS=Math.PI,pX=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function fX(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((T=>T.type==="color")):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void uE("ColorVariable");const n=typeof t=="number",s=n?null:t,a=s?.attributes;let c=n?t:null;const d=i.field,{ipData:f,hasExpression:g}=i.cache;let v=i.cache.compiledFunc;if(!d&&!g){const T=i.stops;return T&&T[0]&&T[0].color}if(typeof c!="number")if(g){if(r?.arcade==null)return void cE();const T={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},E=r.arcade.arcadeUtils,M=E.getViewInfo(T),R=E.createExecContext(s,M,r.timeZone);if(!v){const I=E.createSyntaxTree(i.valueExpression);v=E.createFunction(I),i.cache.compiledFunc=v}c=E.executeFunction(v,R)}else a&&(c=a[d]);const w=i.normalizationField,S=a!=null&&w!=null?parseFloat(a[w]):void 0;if(c!=null&&(!w||n||!isNaN(S)&&S!==0)){Gh(S)&&!n&&(c/=S);const T=CP(c,f);if(T){const E=T[0],M=T[1],R=E===M?i.stops[E].color:De.blendColors(i.stops[E].color,i.stops[M].color,T[2],r?.color);return new De(R)}}}function mX(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((T=>T.type==="opacity")):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void uE("OpacityVariable");const n=typeof t=="number",s=n?null:t,a=s?.attributes;let c=n?t:null;const d=i.field,{ipData:f,hasExpression:g}=i.cache;let v=i.cache.compiledFunc;if(!d&&!g){const T=i.stops;return T&&T[0]&&T[0].opacity}if(typeof c!="number")if(g){if(r?.arcade==null)return void cE();const T={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},E=r.arcade.arcadeUtils,M=E.getViewInfo(T),R=E.createExecContext(s,M,r.timeZone);if(!v){const I=E.createSyntaxTree(i.valueExpression);v=E.createFunction(I),i.cache.compiledFunc=v}c=E.executeFunction(v,R)}else a&&(c=a[d]);const w=i.normalizationField,S=a!=null&&w!=null?parseFloat(a[w]):void 0;if(c!=null&&(!w||n||!isNaN(S)&&S!==0)){Gh(S)&&!n&&(c/=S);const T=CP(c,f);if(T){const E=T[0],M=T[1];if(E===M)return i.stops[E].opacity;{const R=i.stops[E].opacity;return R+(i.stops[M].opacity-R)*T[2]}}}}function yX(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((S=>S.type==="rotation")):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void uE("RotationVariable");const n=i.axis||"heading",s=n==="heading"&&i.rotationType==="arithmetic"?90:0,a=n==="heading"&&i.rotationType==="arithmetic"?-1:1,c=typeof t=="number"?null:t,d=c?.attributes,f=i.field,{hasExpression:g}=i.cache;let v=i.cache.compiledFunc,w=null;if(!f&&!g)return w;if(g){if(r?.arcade==null)return void cE();const S={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},T=r.arcade.arcadeUtils,E=T.getViewInfo(S),M=T.createExecContext(c,E,r.timeZone);if(!v){const R=T.createSyntaxTree(i.valueExpression);v=T.createFunction(R),i.cache.compiledFunc=v}w=T.executeFunction(v,M)}else d&&(w=d[f]);return w=typeof w!="number"||isNaN(w)?null:s+a*w,w}function Uxe(e,t,r){const i=typeof t=="number",n=i?null:t,s=n?.attributes;let a=i?t:null;const{isScaleDriven:c}=e.cache;let d=e.cache.compiledFunc;if(c){const g=r?.scale,v=r?.view;a=g==null||v==="3d"?jxe(e):g}else if(!i)switch(e.inputValueType){case Wl.Expression:{if(r?.arcade==null)return void cE();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,w=v.getViewInfo(g),S=v.createExecContext(n,w,r.timeZone);if(!d){const T=v.createSyntaxTree(e.valueExpression);d=v.createFunction(T),e.cache.compiledFunc=d}a=v.executeFunction(d,S);break}case Wl.Field:s&&(a=s[e.field]);break;case Wl.Unknown:a=null}if(!Gh(a))return null;if(i||!e.normalizationField)return a;const f=s?parseFloat(s[e.normalizationField]):null;return Gh(f)&&f!==0?a/f:null}function jxe(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function dE(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((s=>s.type==="size")):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void uE("SizeVariable");const n=vX(Uxe(i,t,r),i,t,r,i.cache.ipData);return n==null||isNaN(n)?void 0:n}function jn(e,t,r){return e==null?null:Yf(e)?dE(e,t,r):Gh(e)?e:null}function gX(e,t,r){return Gh(r)&&e>r?r:Gh(t)&&e<t?t:e}function zxe(e,t,r,i){const n=jn(t.minSize,r,i)||t.minDataValue;return e==null&&n==null?null:(e??0)+(n??0)}function Vxe(e,t,r){const i=e.stops;let n=i?.length&&i[0].size;return n==null&&(n=e.minSize),jn(n,t,r)}function Gxe(e,t,r,i){const n=jn(t.minSize,r,i);if(e==null)return n;const{minDataValue:s,maxDataValue:a}=t;if(s==null||a==null)return null;const c=(e-s)/(a-s),d=jn(t.maxSize,r,i),f=i?.shape;if(e<=s)return n;if(e>=a)return d;if(n==null||d==null)return null;if(t.scaleBy==="area"&&f){const g=f==="circle",v=g?wS*(n/2)**2:n*n,w=v+c*((g?wS*(d/2)**2:d*d)-v);return g?2*Math.sqrt(w/wS):Math.sqrt(w)}return n+c*(d-n)}function qxe(e,t,r,i){const n=jn(t.minSize,r,i);if(e==null||n==null)return n;const s=i?.shape,{minDataValue:a}=t;if(a==null)return null;const c=e/a,d=jn(t.maxSize,r,i);let f=null;return f=s==="circle"?2*Math.sqrt(c*(n/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(c*n**2):c*n,gX(f,n,d)}function Bxe(e,t,r,i,n){if(e==null)return null;const[s,a,c]=CP(e,n);if(s===a)return jn(t.stops?.[s].size,r,i);{const d=jn(t.stops?.[s].size,r,i),f=jn(t.stops?.[a].size,r,i);return d==null||f==null?null:d+(f-d)*c}}function Hxe(e,t,r,i){const n=(i?.resolution??1)*oE[t.valueUnit],s=jn(t.minSize,r,i),a=jn(t.maxSize,r,i),{valueRepresentation:c}=t;if(e==null)return s;let d=null;return d=c==="area"?2*Math.sqrt(e/wS)/n:c==="radius"||c==="distance"?2*e/n:e/n,gX(d,s,a)}function vX(e,t,r,i,n){switch(t.transformationType){case ri.Additive:return zxe(e,t,r,i);case ri.Constant:return Vxe(t,r,i);case ri.ClampedLinear:return Gxe(e,t,r,i);case ri.Proportional:return qxe(e,t,r,i);case ri.Stops:return Bxe(e,t,r,i,n);case ri.RealWorldSize:return Hxe(e,t,r,i);case ri.Identity:return e;case ri.Unknown:return null}}function Wxe(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&r==="3d"||t))return null;const n={scale:t,view:r};let s=jn(e.minSize,Kj,n),a=jn(e.maxSize,Kj,n);if(s!=null||a!=null){if(s>a){const c=a;a=s,s=c}return{minSize:s,maxSize:a}}}function Zxe(e,t,r){if(!e.visualVariables)return;const i=[],n=[],s=[],a=[],c=[];for(const d of e.visualVariables)switch(d.type){case"color":n.push(d);break;case"opacity":s.push(d);break;case"rotation":c.push(d);break;case"size":a.push(d)}return n.forEach((d=>{const f=fX(d,t,r);i.push({variable:d,value:f})})),s.forEach((d=>{const f=mX(d,t,r);i.push({variable:d,value:f})})),c.forEach((d=>{const f=yX(d,t,r);i.push({variable:d,value:f})})),a.forEach((d=>{const f=dE(d,t,r);i.push({variable:d,value:f})})),i}function CP(e,t){if(!t)return;let r=0,i=t.length-1;return t.some(((n,s)=>e<n?(i=s,!0):(r=s,!1))),[r,i,(e-t[r])/(t[i]-t[r])]}function Yxe(e,t,r){const i=["proportional","proportional","proportional"];for(const n of e){const s=n.useSymbolValue?"symbol-value":dE(n,t,r)??"proportional";switch(n.axis){case"width":i[0]=s;break;case"depth":i[1]=s;break;case"height":i[2]=s;break;case"width-and-depth":i[0]=s,i[1]=s;break;case"all":case void 0:case null:i[0]=s,i[1]=s,i[2]=s;break;default:n.axis}}return i}const F5e=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Yxe,getColor:fX,getOpacity:mX,getRotationAngle:yX,getSize:dE,getSizeForValue:vX,getSizeFromNumberOrVariable:jn,getSizeRangeAtScale:Wxe,getVisualVariableValues:Zxe,viewScaleRE:pX},Symbol.toStringTag,{value:"Module"}));var DC;const t_=new tt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),kC=new tt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function e9(e){if(e!=null)return typeof e=="string"||typeof e=="number"?Dxe(e):e.type==="size"?Yf(e)?e:(delete(e={...e}).type,new pt(e)):void 0}function t9(e,t,r){if(typeof e!="object")return e;const i=new pt;return i.read(e,r),i}let pt=DC=class extends Fi{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&pX.test(this.valueExpression)}}set index(e){Yf(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),Yf(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return dX(this)}set maxDataValue(e){e&&this.stops&&(re.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(re.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return e9(e)}readMaxSize(e,t,r){return t9(e,t,r)}set minDataValue(e){e&&this.stops&&(re.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(re.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return e9(e)}readMinSize(e,t,r){return t9(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter((t=>!!t))).sort(((t,r)=>t.value-r.value)):e&&(re.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return Fxe(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if(e==="$view.scale"){if(i?.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;i.messages.push(new z("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?kC.read(e):null}clone(){return new DC({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Yf(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Yf(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map((e=>e.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType===ri.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===ri.Stops){const e=this.stops;if(!e)return this;const t=e.map((i=>i.size)).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map((e=>e.value||0))}};u([p({readOnly:!0})],pt.prototype,"cache",null),u([p({type:t_.apiValues,json:{type:t_.jsonValues,origins:{"web-map":{read:!1}},read:t_.read,write:t_.write}})],pt.prototype,"axis",void 0),u([p()],pt.prototype,"index",null),u([p({type:String,readOnly:!0})],pt.prototype,"inputValueType",null),u([p({type:kxe,json:{write:!0}})],pt.prototype,"legendOptions",void 0),u([p({type:Number,value:null,json:{write:!0}})],pt.prototype,"maxDataValue",null),u([p({type:Number,value:null,json:{write:!0}})],pt.prototype,"maxSize",null),u([wt("maxSize")],pt.prototype,"castMaxSize",null),u([le("maxSize")],pt.prototype,"readMaxSize",null),u([p({type:Number,value:null,json:{write:!0}})],pt.prototype,"minDataValue",null),u([p({type:Number,value:null,json:{write:!0}})],pt.prototype,"minSize",null),u([wt("minSize")],pt.prototype,"castMinSize",null),u([le("minSize")],pt.prototype,"readMinSize",null),u([p({type:String,json:{write:!0}})],pt.prototype,"normalizationField",void 0),u([p({readOnly:!0})],pt.prototype,"arcadeRequired",null),u([p({type:String})],pt.prototype,"scaleBy",void 0),u([p({type:[Ao],value:null,json:{write:!0}})],pt.prototype,"stops",null),u([p({type:["outline"],json:{write:!0}})],pt.prototype,"target",void 0),u([p({type:String,readOnly:!0})],pt.prototype,"transformationType",null),u([p({type:["size"],json:{type:["sizeInfo"]}})],pt.prototype,"type",void 0),u([p({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],pt.prototype,"useSymbolValue",void 0),u([p({type:String,json:{write:!0}})],pt.prototype,"valueExpression",void 0),u([le("valueExpression",["valueExpression","expression"])],pt.prototype,"readValueExpression",null),u([de("web-scene","valueExpression")],pt.prototype,"writeValueExpressionWebScene",null),u([p({type:["radius","diameter","area","width","distance"],json:{write:!0}})],pt.prototype,"valueRepresentation",void 0),u([p({type:kC.apiValues,json:{write:kC.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],pt.prototype,"valueUnit",void 0),u([le("valueUnit")],pt.prototype,"readValueUnit",null),pt=DC=u([O("esri.renderers.visualVariables.SizeVariable")],pt);const Jxe={color:ac,size:pt,opacity:Dl,rotation:lc},Xxe=new tt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Qxe=/^\[([^\]]+)\]$/i;let _S=class extends Ae{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t?.filter((r=>!!r)),t?.length){for(const r of t)switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}this.sizeVariables.length&&this.sizeVariables.some((r=>!!r.target))&&t.sort(((r,i)=>{let n=null;return n=r.target===i.target?0:r.target?1:-1,n}));for(let r=0;r<t.length;r++)t[r].index=r;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,r,i){const{rotationExpression:n,rotationType:s}=r,a=n?.match(Qxe),c=a?.[1];if(c&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:s,field:c})),t)return t.map((d=>{const f=Xxe.read(d.type),g=Jxe[f];g||(re.getLogger(this).warn(`Unknown variable type: ${f}`),i?.messages&&i.messages.push(new gs("visual-variable:unsupported",`visualVariable of type '${f}' is not supported`,{definition:d,context:i})));const v=new g;return v.read(d,i),v}))}writeVariables(t,r){const i=[];for(const n of t){const s=n.toJSON(r);s&&i.push(s)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};u([p()],_S.prototype,"visualVariables",null),_S=u([O("esri.renderers.visualVariables.VisualVariableFactory")],_S);const Kxe={base:Fi,key:"type",typeMap:{opacity:Dl,color:ac,rotation:lc,size:pt}},Oy=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new _S}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,i,n){return this._vvFactory.readVariables(r,i,n)}writeVisualVariables(r,i,n,s){i[n]=this._vvFactory.writeVariables(r,s)}get arcadeRequiredForVisualVariables(){return this.visualVariables?.some((({arcadeRequired:r})=>r))??!1}hasVisualVariables(r,i){return r?this.getVisualVariablesForType(r,i).length>0:this.getVisualVariablesForType("size",i).length>0||this.getVisualVariablesForType("color",i).length>0||this.getVisualVariablesForType("opacity",i).length>0||this.getVisualVariablesForType("rotation",i).length>0}getVisualVariablesForType(r,i){return this.visualVariables?.filter((n=>n.type===r&&(typeof i=="string"?n.target===i:i!==!1||!n.target)))??[]}async collectVVRequiredFields(r,i){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&yn(r,i,s.field),s.normalizationField&&yn(r,i,s.normalizationField),s.valueExpression&&(e$e(s.valueExpression,r,i)||await Yi(r,i,s.valueExpression)))}};return u([p({types:[Kxe],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),u([le("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),u([de("visualVariables")],t.prototype,"writeVisualVariables",null),t=u([O("esri.renderers.mixins.VisualVariablesMixin")],t),t};function e$e(e,t,r){const i=Mme(e);return i!=null&&(yn(t,r,i),!0)}const IP=[252,146,31,255],t$e=[153,153,153,255],r$e={type:"esriSMS",style:"esriSMSCircle",size:6,color:IP,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},i$e={type:"esriSLS",style:"esriSLSSolid",width:.75,color:IP},n$e={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},s$e={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},o$e={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},a$e={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},l$e={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},J2=ti.fromJSON(r$e),NP=Dr.fromJSON(i$e),bX=us.fromJSON(n$e),u$e=Mt.fromJSON(s$e);function j5e(e){if(e==null)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return J2;case"polyline":return NP;case"polygon":case"extent":return bX}return null}const z5e=ti.fromJSON(o$e),V5e=Dr.fromJSON(a$e),G5e=us.fromJSON(l$e),c$e=cn.fromSimpleMarkerSymbol(J2),d$e=Po.fromSimpleLineSymbol(NP),h$e=Bs.fromSimpleFillSymbol(bX),p$e=new zl({symbolLayers:new ge([new on({material:{color:IP},edges:new AW({size:Js(1),color:new De(t$e)})})])}),f$e=new Po({symbolLayers:new ge([new sn({material:{color:new De([0,0,0])},size:Js(1)})])}),m$e=new Bs({symbolLayers:new ge([new on({outline:{color:new De([0,0,0]),size:Js(1)}})])});function q5e(e){if(e==null)return null;switch(e.type){case"mesh":return p$e;case"point":case"multipoint":return c$e;case"polyline":return d$e;case"polygon":case"extent":return h$e}return null}const r9="#useCIMFallbackSymbology()",Kp={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function y$e(e,t=Kp){if(!e)return{symbol:null};const{retainId:r=Kp.retainId,ignoreDrivers:i=Kp.ignoreDrivers,hasLabelingContext:n=Kp.hasLabelingContext,retainCIM:s=Kp.retainCIM,cimFallbackEnabled:a=Kp.cimFallbackEnabled}=t;let c=null;if(ZW(e)||e instanceof mi)c=e.clone();else if(e.type==="cim"){const d=e.data?.symbol?.type;switch(d){case"CIMPointSymbol":c=s?e.clone():cn.fromCIMSymbol(e);break;case"CIMLineSymbol":a&&(c=f$e.clone(),t?.logWarning?.(r9,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":a&&(c=m$e.clone(),t?.logWarning?.(r9,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!c)return{error:new z("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${d||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof Dr)c=Po.fromSimpleLineSymbol(e);else if(e instanceof ti)c=cn.fromSimpleMarkerSymbol(e);else if(e instanceof nn)c=cn.fromPictureMarkerSymbol(e);else if(e instanceof us)c=t.geometryType&&t.geometryType==="mesh"?zl.fromSimpleFillSymbol(e):Bs.fromSimpleFillSymbol(e);else{if(!(e instanceof Mt))return{error:new z("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};c=n?xo.fromTextSymbol(e):cn.fromTextSymbol(e)}return r&&c&&c.type!=="cim"&&(c.id=e.id),!i||c.type==="cim"||c instanceof mi||c.symbolLayers.forEach((d=>d.ignoreDrivers=!0)),{symbol:c}}function X2(e,t,r,i){const n=wX(e,{},{context:i,isLabelSymbol:!1});n!=null&&ii(r,n,t)}function i9(e,t,r,i){const n=wX(e,{},{context:i,isLabelSymbol:!0});n!=null&&(t[r]=n)}function n9(e){return ZW(e)||e instanceof mi}function g$e(e){return e?.type==="polygon-3d"||e?.type==="line-3d"}function wX(e,t,r){if(e==null)return null;const{context:i,isLabelSymbol:n}=r,s=i?.origin,a=i?.messages;if(s==="web-scene"&&!n9(e)){const c=y$e(e,{retainCIM:!0,hasLabelingContext:n});return c.symbol!=null?c.symbol.write(t,i):(a?.push(new z("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:c.error})),null)}return xA(i?.layer)&&g$e(e)?(a?.push(new z("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${i?.layer?.declaredClass}'.`,{symbol:e,context:i})),null):(s==="web-map"||s==="portal-item"&&!xA(i?.layer))&&n9(e)?(a?.push(new z("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:i})),null):e.write(t,i)}function B5e(e,t){return fge(e,null,t)}const hE={types:YW,json:{write:{writer:X2},origins:{"web-scene":{types:LF,write:{writer:X2},read:{reader:yy({types:LF})}}}}},PP=EI({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},hE),LP={types:{base:Tr,key:"type",typeMap:{"simple-fill":bc.typeMap["simple-fill"],"picture-fill":bc.typeMap["picture-fill"],"polygon-3d":bc.typeMap["polygon-3d"],cim:bc.typeMap.cim}},json:{write:{writer:X2},origins:{"web-scene":{type:Bs,write:{writer:X2}}}}},SS={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e?.toString()}}}};var FC;let dn=FC=class extends Oy(ps){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.symbols.map((r=>r.collectRequiredFields(e,t))))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){return this.symbols.reduce(((e,t)=>e+JSON.stringify(t)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new FC({description:this.description,label:this.label,symbol:U(this.symbol),visualVariables:U(this.visualVariables),authoringInfo:U(this.authoringInfo)})}};u([p({type:String,json:{write:!0}})],dn.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],dn.prototype,"label",void 0),u([p(PP)],dn.prototype,"symbol",void 0),u([Ne({simple:"simple"})],dn.prototype,"type",void 0),dn=FC=u([O("esri.renderers.SimpleRenderer")],dn);const v$e=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function UC(e){return e instanceof Ae}function s9(e){return e instanceof ge?Object.keys(e.items):UC(e)?gn(e).keys():e?Object.keys(e):[]}function r_(e,t){return e instanceof ge?e.items[t]:e[t]}function b$e(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function jv(e){return e?e.declaredClass:null}function _X(e,t){const r=e.diff;if(r&&typeof r=="function")return r(e,t);const i=s9(e),n=s9(t);if(i.length===0&&n.length===0)return;if(!i.length||!n.length||b$e(e,t))return{type:"complete",oldValue:e,newValue:t};const s=n.filter((v=>!i.includes(v))),a=i.filter((v=>!n.includes(v))),c=i.filter((v=>n.includes(v)&&r_(e,v)!==r_(t,v))).concat(s,a).sort(),d=jv(e);if(d&&v$e.has(d)&&c.length)return{type:"complete",oldValue:e,newValue:t};let f;const g=UC(e)&&UC(t);for(const v of c){const w=r_(e,v),S=r_(t,v);let T;if((g||typeof w!="function"&&typeof S!="function")&&w!==S&&(w!=null||S!=null)){if(r&&r[v]&&typeof r[v]=="function")T=r[v]?.(w,S);else if(w instanceof Date&&S instanceof Date){if(w.getTime()===S.getTime())continue;T={type:"complete",oldValue:w,newValue:S}}else T=typeof w=="object"&&typeof S=="object"&&jv(w)===jv(S)?_X(w,S):{type:"complete",oldValue:w,newValue:S};T!=null&&(f!=null?f.diff[v]=T:f={type:"partial",diff:{[v]:T}})}}return f}function H5e(e,t){return w$e(e,t)}function w$e(e,t){if(e==null)return!1;const r=t.split(".");let i=e;for(const n of r){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const s=i.diff[n];if(!s)return!1;i=s}}return!0}function W5e(e,t){if(!e)return!1;if(e.type==="partial"){const r=Object.keys(e.diff);return r.length===1&&r[0]===t}return!1}function _$e(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&jv(e)!==jv(t)?{type:"complete",oldValue:e,newValue:t}:_X(e,t)}function i_(e){if(e==null)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const r of t.added)if(!i_(r))return!1;for(const r of t.removed)if(!i_(r))return!1;for(const r of t.changed)if(!i_(r))return!1;return!0}case"partial":for(const t in e.diff)if(!i_(e.diff[t]))return!1;return!0}}var jC;const S$e=wi()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let uv=jC=class extends We.ClonableMixin(K){static from(e){return R1(jC,e)}constructor(e){super(e),this.title=null,this.order=null}};u([p({type:String,json:{write:!0}})],uv.prototype,"title",void 0),u([Ne(S$e)],uv.prototype,"order",void 0),uv=jC=u([O("esri.renderers.support.RendererLegendOptions")],uv);const DP=uv;let Co=class extends We.ClonableMixin(K){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};u([p(SS)],Co.prototype,"value",void 0),u([p(SS)],Co.prototype,"value2",void 0),u([p(SS)],Co.prototype,"value3",void 0),Co=u([O("esri.renderers.support.UniqueValue")],Co);let Ol=class extends We.ClonableMixin(K){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const r=typeof(t=Array.isArray(t)?t:[t])[0];return r==="string"||r==="number"?t.map((i=>new Co({value:i}))):r==="object"?t[0]instanceof Co?t:t.map((i=>new Co(i))):null}};u([p({type:String,json:{write:!0}})],Ol.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],Ol.prototype,"label",void 0),u([p(hE)],Ol.prototype,"symbol",void 0),u([p({type:[Co],json:{type:[[String]],read:{reader:e=>e?e.map((t=>new Co({value:t[0],value2:t[1],value3:t[2]}))):null},write:{writer:(e,t)=>{const r=[];for(const i of e){const n=[i.value,i.value2,i.value3].filter(Yl).map((s=>s.toString()));r.push(n)}t.values=r}}}})],Ol.prototype,"values",void 0),u([wt("values")],Ol.prototype,"castValues",null),Ol=u([O("esri.renderers.support.UniqueValueClass")],Ol);let dh=class extends We.ClonableMixin(K){constructor(t){super(t),this.heading=null,this.classes=null}};u([p({type:String,json:{write:!0}})],dh.prototype,"heading",void 0),u([p({type:[Ol],json:{write:{isRequired:!0}}})],dh.prototype,"classes",void 0),dh=u([O("esri.renderers.support.UniqueValueGroup")],dh);var zC;let Ro=zC=class extends K{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new zC({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${e}`}};u([p({type:String,json:{write:!0}})],Ro.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],Ro.prototype,"label",void 0),u([p(PP)],Ro.prototype,"symbol",void 0),u([p(SS)],Ro.prototype,"value",void 0),Ro=zC=u([O("esri.renderers.support.UniqueValueInfo")],Ro);const o9=new Map;async function T$e(e,t){try{return{data:(await M$e(e,t)).data,baseUrl:Bre(e),styleUrl:e}}catch(r){return ya(r),null}}function E$e(e,t,r){const i=t.portal!=null?t.portal:se.getDefault();let n;const s=`${i.url} - ${i.user?.username} - ${e}`,a=o9.get(s);if(a)return a;const c=x$e(e,i,r).then((d=>(n=d,d.fetchData()))).then((d=>({data:d,baseUrl:n.itemUrl??"",styleName:e})));return o9.set(s,c),c}function x$e(e,t,r){return t.load(r).then((()=>{const i=new wr({disableExtraQuery:!0,query:`owner:${a9} AND type:${l9} AND typekeywords:"${e}"`});return t.queryItems(i,r)})).then((({results:i})=>{let n=null;const s=e.toLowerCase();if(i&&Array.isArray(i)){for(const a of i)if(a.typeKeywords?.some((d=>d.toLowerCase()===s))&&a.type===l9&&a.owner===a9){n=a;break}}if(!n)throw new z("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(r)}))}function $$e(e,t,r){return e?.styleUrl!=null?T$e(e.styleUrl,r):e?.styleName!=null?E$e(e.styleName,t,r):Promise.reject(new z("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function X5e(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function Q5e(e,t){for(const r of t)switch(r){case"cim":if(e.cimRef)return{format:r,url:encodeURI(e.cimRef)};break;case"web-gltf-basisu":{const i=p3(e,"gltf_basisu");if(i)return{format:r,url:i};break}case"web-gltf":{const i=p3(e,"gltf");if(i)return{format:r,url:i};break}case"web":{const i=p3(e,"gltf");if(i)return{format:"web-gltf",url:i};if(e.webRef)return{format:r,url:encodeURI(e.webRef)};break}}}function p3(e,t){if(!V("enable-feature:force-wosr"))return e.formatInfos?.find((r=>r.type===t))?.href}function M$e(e,t){const r={responseType:"json",query:{f:"json"},...t};return Ft(Lo(e),r)}const a9="esri_en",l9="Style",K5e="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var cv;const u9="uvInfos-watcher",c9="uvGroups-watcher",A$e=",",O$e=Br(Ro);function R$e(e){const{field1:t,field2:r,field3:i,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:a}=e,c=!(!t||!r);return[{classes:(s??[]).map((d=>{const{symbol:f,label:g,value:v,description:w}=d,[S,T,E]=c?v?.toString()?.split(n||"")||[]:[v],M=[];return(t||a)&&M.push(S),r&&M.push(T),i&&M.push(E),{symbol:f,label:g,values:[M],description:w}}))}]}function ef(e){return e!=null&&e!==""&&(typeof e!="string"||e.trim()!==""&&e.toLowerCase()!=="<null>")||(e=null),e+""}let Vt=cv=class extends Oy(ps){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let i=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<r.length;s++){const a=t.find((c=>c.value===r[s].value));a?_$e(a,r[s])?(n.changed.push({type:"complete",oldValue:a,newValue:r[s]}),i=!0):n.unchanged.push({oldValue:a,newValue:r[s]}):(n.added.push(r[s]),i=!0)}for(let s=0;s<t.length;s++)r.find((a=>a.value===t[s].value))||(n.removed.push(t[s]),i=!0);return i?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:O1(e)}writeField(e,t,r,i){typeof e=="string"?t[r]=e:i?.messages?i.messages.push(new z("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):re.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||se.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const i=Yh(t.styleUrl,r);return Object.freeze({styleUrl:i})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=Rh(e.styleUrl,i))}set uniqueValueGroups(e){this.styleOrigin?re.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?re.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void re.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?O$e(e):new Ro({value:e,symbol:JW(t)}),this.uniqueValueInfos?.push(r),this._valueInfoMap[ef(r.value)]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void re.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let r=0;r<t.length;r++){const i=t[r];if(String(i.value)===String(e)){delete this._valueInfoMap[ef(e)],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&t?.arcade==null&&(r={...r,arcade:await jh()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){return this.valueExpression&&t?.arcade==null?void re.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used"):this._getUniqueValueInfo(e,t)?.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&r?.arcade==null){const n=await jh(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}return this._getUniqueValueInfo(e,r)?.symbol||this.defaultSymbol}get symbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=this.uniqueValueInfos?.reduce(((i,n)=>i+n.getMeshHash()),"");return`${e}.${t}.${r}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new cv({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:U(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:U(this.visualVariables),legendOptions:U(this.legendOptions),authoringInfo:U(this.authoringInfo),backgroundFillSymbol:U(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=U(this.uniqueValueInfos),r=U(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(U(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.symbols.map((i=>i.collectRequiredFields(e,t))),Yi(e,t,this.valueExpression)];yn(e,t,this.field),yn(e,t,this.field2),yn(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return $$e(this.styleOrigin,{portal:this.portal}).then((e=>{const t=[];return this._valueInfoMap={},e?.data&&Array.isArray(e.data.items)&&e.data.items.forEach((r=>{const i=new mi({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=i,this._isDefaultSymbolDerived=!0);const n=new Ro({value:r.name,symbol:i});t.push(n),this._valueInfoMap[ef(r.name)]=n})),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this}))}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",A$e)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[ef(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(u9);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push(je((()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description})),((i,n)=>{i!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)}),{sync:!0}));this.addHandles(t,u9)}}_watchUniqueValueGroups(){this.removeHandles(c9);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push(je((()=>({classes:r.classes})),((i,n)=>{i!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}));for(const i of r.classes??[])t.push(je((()=>({symbol:i.symbol,values:i.values,label:i.label,description:i.description})),((n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}))}this.addHandles(t,c9)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:i,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:a}=this;if(!t&&!a)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const c=!(!t||!r);for(const d of s)for(const f of d.classes??[]){const{symbol:g,label:v,values:w,description:S}=f;for(const T of w??[]){const{value:E,value2:M,value3:R}=T,I=[E];r&&I.push(M),i&&I.push(R);const k=c?I.join(n||""):I[0]??void 0;e.push(new Ro({symbol:g,label:v,value:k,description:S}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:i,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!t&&!i||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const a=!(!t||!r),c=s.map((f=>{const{symbol:g,label:v,value:w,description:S}=f,[T,E,M]=a?w?.toString()?.split(n||"")||[]:[w];return new Ol({symbol:g,label:v,description:S,values:[new Co({value:T,value2:E,value3:M})]})})),d=[new dh({classes:c})];e&&Object.freeze(d),this._set("uniqueValueGroups",d),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s,timeZone:a}=t??{};let c=this._cache.compiledFunc;const d=s.arcadeUtils;if(!c){const g=d.createSyntaxTree(this.valueExpression);c=d.createFunction(g),this._cache.compiledFunc=c}const f=d.executeFunction(c,d.createExecContext(e,d.getViewInfo({viewingMode:r,scale:i,spatialReference:n}),a));return this._valueInfoMap[ef(f)]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if(this.field2){const n=this.field2,s=this.field3,a=[];t&&a.push(r[t]),n&&a.push(r[n]),s&&a.push(r[s]),i=a.join(this.fieldDelimiter||"")}else t&&(i=r[t]);return this._valueInfoMap[ef(i)]}static fromPortalStyle(e,t){const r=new cv(t?.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t?.portal||se.getDefault());const i=r.populateFromStyle();return i.catch((n=>{re.getLogger(this.prototype).error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",n)})),i}static fromStyleUrl(e,t){const r=new cv(t?.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch((n=>{re.getLogger(this.prototype).error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",n)})),i}};u([p({readOnly:!0})],Vt.prototype,"_cache",null),u([Ne({uniqueValue:"unique-value"})],Vt.prototype,"type",void 0),u([p(LP)],Vt.prototype,"backgroundFillSymbol",void 0),u([p({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Vt.prototype,"field",null),u([wt("field")],Vt.prototype,"castField",null),u([de("field")],Vt.prototype,"writeField",null),u([p({type:String,value:null,json:{write:!0}})],Vt.prototype,"field2",null),u([p({type:String,value:null,json:{write:!0}})],Vt.prototype,"field3",null),u([p({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Vt.prototype,"orderByClassesEnabled",void 0),u([p({type:String,value:null,json:{write:!0}})],Vt.prototype,"valueExpression",null),u([p({type:String,json:{write:!0}})],Vt.prototype,"valueExpressionTitle",void 0),u([p({type:DP,json:{write:!0}})],Vt.prototype,"legendOptions",void 0),u([p({type:String,json:{write:!0}})],Vt.prototype,"defaultLabel",void 0),u([p(EI({...hE},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Vt.prototype,"defaultSymbol",null),u([p({type:String,value:null,json:{write:!0}})],Vt.prototype,"fieldDelimiter",null),u([p({type:se,readOnly:!0})],Vt.prototype,"portal",void 0),u([le("portal",["styleName"])],Vt.prototype,"readPortal",null),u([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Vt.prototype,"styleOrigin",void 0),u([le("styleOrigin",["styleName","styleUrl"])],Vt.prototype,"readStyleOrigin",null),u([de("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Vt.prototype,"writeStyleOrigin",null),u([p({type:[dh],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>(t.uniqueValueGroups||R$e(t)).map((i=>dh.fromJSON(i,r)))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Vt.prototype,"uniqueValueGroups",null),u([p({type:[Ro],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],Vt.prototype,"uniqueValueInfos",null),Vt=cv=u([O("esri.renderers.UniqueValueRenderer")],Vt);var VC,Nm;let Xr=(Nm=class extends K{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10}clone(){return new VC(U({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},VC=Nm,Nm);u([p({type:[String],json:{write:!0}})],Xr.prototype,"attachmentTypes",void 0),u([p({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Xr.prototype,"attachmentsWhere",void 0),u([p({type:Boolean,json:{write:!0}})],Xr.prototype,"cacheHint",void 0),u([p({type:[String],json:{write:!0}})],Xr.prototype,"keywords",void 0),u([p({type:[String],json:{write:!0}})],Xr.prototype,"globalIds",void 0),u([p({json:{write:!0}})],Xr.prototype,"name",void 0),u([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Xr.prototype,"num",void 0),u([p({type:[Number],json:{write:!0}})],Xr.prototype,"objectIds",void 0),u([p({type:[String],json:{write:!0}})],Xr.prototype,"orderByFields",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],Xr.prototype,"returnMetadata",void 0),u([p({type:[Number],json:{write:!0}})],Xr.prototype,"size",void 0),u([p({type:Number,json:{read:{source:"resultOffset"}}})],Xr.prototype,"start",void 0),u([de("start"),de("num")],Xr.prototype,"writeStart",null),u([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Xr.prototype,"where",void 0),Xr=VC=u([O("esri.rest.support.AttachmentQuery")],Xr),Xr.from=Br(Xr);const SX=wi()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),d9="percent-of-total",h9="field",e6e=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let r=this._get("normalizationType");const i=!!this.normalizationField,n=this.normalizationTotal!=null;return i||n?(r=i&&h9||n&&d9||null,i&&n&&re.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):r!==h9&&r!==d9||(r=null),r}set normalizationType(r){this._set("normalizationType",r)}};return u([p({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),u([p({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),u([p({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),u([p({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),u([Ne(SX,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=u([O("esri.rest.support.NormalizationBinParametersMixin")],t),t};var GC,Pm;let Ht=(Pm=class extends K{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,r){r.historicMoment=t&&t.getTime()}writeStart(t,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(r.definitionExpression="1=1")}clone(){return new GC(U({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},GC=Pm,Pm);u([p({type:Boolean,json:{write:!0}})],Ht.prototype,"cacheHint",void 0),u([p({type:$o,json:{write:!0}})],Ht.prototype,"dynamicDataSource",void 0),u([p({type:String,json:{write:!0}})],Ht.prototype,"gdbVersion",void 0),u([p({type:Number,json:{write:!0}})],Ht.prototype,"geometryPrecision",void 0),u([p({type:Date})],Ht.prototype,"historicMoment",void 0),u([de("historicMoment")],Ht.prototype,"_writeHistoricMoment",null),u([p({type:Number,json:{write:!0}})],Ht.prototype,"maxAllowableOffset",void 0),u([p({json:{write:!0}})],Ht.prototype,"objectIds",void 0),u([p({type:[String],json:{write:!0}})],Ht.prototype,"orderByFields",void 0),u([p({type:[String],json:{write:!0}})],Ht.prototype,"outFields",void 0),u([p({type:Ee,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ht.prototype,"outSpatialReference",void 0),u([p({json:{write:!0}})],Ht.prototype,"relationshipId",void 0),u([p({type:Number,json:{read:{source:"resultOffset"}}})],Ht.prototype,"start",void 0),u([de("start"),de("num")],Ht.prototype,"writeStart",null),u([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Ht.prototype,"num",void 0),u([p({json:{write:!0}})],Ht.prototype,"returnGeometry",void 0),u([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ht.prototype,"returnM",void 0),u([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ht.prototype,"returnZ",void 0),u([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Ht.prototype,"where",void 0),Ht=GC=u([O("esri.rest.support.RelationshipQuery")],Ht),Ht.from=Br(Ht);const t6e=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Ht}},Symbol.toStringTag,{value:"Module"})),qC=new tt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function C$e(e,t,r,i){const n=await Wc(e);if(await kP(e,t,i),!n.addAttachment)throw new z(i,"Layer source does not support addAttachment capability");return n.addAttachment(t,r)}function kP(e,t,r){const{attributes:i}=t,{objectIdField:n}=e;return e.capabilities?.data?.supportsAttachment?t?i?n&&i[n]?Promise.resolve():Promise.reject(new z(r,`feature is missing the identifying attribute ${n}`)):Promise.reject(new z(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new z(r,"A feature is required to add/delete/update attachments")):Promise.reject(new z(r,"this layer doesn't support attachments"))}async function I$e(e,t,r,i,n){const s=await Wc(e);if(await kP(e,t,n),!s.updateAttachment)throw new z(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(t,r,i)}async function N$e(e,t,r){const{applyEdits:i}=await ue(()=>import("./editingSupport-i4w-Mggt.js"),[]),n=await e.load();let s=r;return n.type==="feature"&&n.infoFor3D&&t.deleteFeatures!=null&&n.globalIdField!=null&&(s={...s,globalIdToObjectId:await tMe(n,t.deleteFeatures,n.globalIdField)}),i(n,n.source,t,r)}async function P$e(e,t,r){const{uploadAssets:i}=await ue(()=>import("./editingSupport-i4w-Mggt.js"),[]),n=await e.load();return i(n,n.source,t,r)}async function L$e(e,t,r,i){const n=await Wc(e);if(await kP(e,t,i),!n.deleteAttachments)throw new z(i,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(t,r)}async function D$e(e,t,r){const i=(await e.load({signal:t?.signal})).source;if(!i.fetchRecomputedExtents)throw new z(r,"Layer source does not support fetchUpdates capability");return i.fetchRecomputedExtents(t)}async function k$e(e,t,r,i){t=Xr.from(t),await e.load();const n=e.source,s=e.capabilities;if(!s?.data?.supportsAttachment)throw new z(i,"this layer doesn't support attachments");const{attachmentTypes:a,objectIds:c,globalIds:d,num:f,size:g,start:v,where:w}=t;if(!s?.operations?.supportsQueryAttachments&&(a?.length>0||d?.length>0||g?.length>0||f||v||w))throw new z(i,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(c?.length||d?.length||w))throw new z(i,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!n.queryAttachments)throw new z(i,"Layer source does not support queryAttachments capability",t);return!s?.attachment?.supportsOrderByFields&&t.orderByFields?.length&&((t=t.clone()).orderByFields=null),n.queryAttachments(t)}async function F$e(e,t,r,i){const n=await Wc(e);if(!n.queryObjectIds)throw new z(i,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(Ce.from(t)??e.createQuery(),r)}async function U$e(e,t,r,i){const n=await Wc(e);if(!n.queryFeatureCount)throw new z(i,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(Ce.from(t)??e.createQuery(),r)}async function j$e(e,t,r,i){const n=await Wc(e);if(!n.queryExtent)throw new z(i,"Layer source does not support queryExtent capability");return n.queryExtent(Ce.from(t)??e.createQuery(),r)}async function z$e(e,t,r,i){const n=await Wc(e);if(!n.queryRelatedFeatures)throw new z(i,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(Ht.from(t),r)}async function V$e(e,t,r,i){const n=await Wc(e);if(!n.queryRelatedFeaturesCount)throw new z(i,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(Ht.from(t),r)}async function G$e(e){const t=e.source;if(t?.refresh)try{const{dataChanged:r,updates:i}=await t.refresh();if(i!=null&&(e.sourceJSON={...e.sourceJSON,...i},e.read(i,{origin:"service",url:e.parsedUrl})),r)return!0}catch{}if(e.definitionExpression)try{return(await sW(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function q$e(e){const t=new Ce;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,t.outFields=["*"],t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null;const r=e.capabilities?.query;r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference);const i=e.capabilities?.data;i?.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),i?.supportsM&&e.returnM!=null&&(t.returnM=e.returnM);const{timeOffset:n,timeExtent:s}=e;return t.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,t}function TX(e){const{globalIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeGlobalID")return i.name}}function EX(e){const{objectIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeOID")return i.name}}function B$e(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function H$e(e,t,r,i){const n=r?.feature,s=!!e.subtypes?.length;if(s&&!r?.excludeImpliedDomains){const d=Z$e(e,t);if(d)return d}const a=s&&W$e(e,n);if(a){const d=a?.domains?.[t];return d?.type==="inherited"?i:d}const c=MX(e.types,e.typeIdField,n);if(c){const d=c.domains&&c.domains[t];if(d&&d?.type!=="inherited")return d}if(i)return i;if(!r?.excludeImpliedDomains){const d=Y$e(e,t);if(d)return d}return null}function W$e(e,t){const{subtypes:r,subtypeField:i}=e;if(!t?.attributes||!r?.length||!i)return null;const n=t.attributes[i];return n==null?null:r.find((s=>s.code===n))}function Z$e(e,t){const{fieldsIndex:r,subtypeField:i}=e,{name:n,type:s}=r.get(t)??{};if(!n)return null;if((i&&r.get(i)?.name)===n&&e.subtypes?.length){const a=e.subtypes.map((c=>new lh({code:xX(c.code,s),name:c.name})));if(a?.length)return new _c({codedValues:a})}return null}function Y$e(e,t){const{fieldsIndex:r}=e,{name:i,type:n}=r.get(t)??{};if(!i)return null;if(("typeIdField"in e?r.get(e.typeIdField)?.name:null)===i&&"types"in e&&e.types?.length){const s=e.types.map((a=>new lh({code:xX(a.id,n),name:a.name})));return new _c({codedValues:s})}return null}function xX(e,t){return t?bW({type:t})&&typeof e=="number"?`${e}`:tye({type:t})&&typeof e=="string"?Number.parseInt(e,10):e:e}async function Wc(e){return(await e.load()).source}async function r6e(e,t){if(!nt)return;const r=nt.findCredential(e);if(r)return r.userId;let i;try{const n=await _N(e,t);n&&(i=await nt.checkSignInStatus(`${n}/sharing`))}catch{}return i?i.userId:null}async function $X(e,t){if(!nt||nt.findCredential(e))return;let r;try{const i=await _N(e,t);i&&(r=await nt.checkSignInStatus(`${i}/sharing`))}catch{}if(r)try{const i=t!=null?t.signal:null;await nt.getCredential(e,{signal:i})}catch{}}async function J$e(e,t,r){const i=e.parsedUrl?.path;i&&e.authenticationTriggerEvent===t&&await $X(i,r)}async function i6e(e){const t=e.parsedUrl?.path;t&&X$e(e)&&await $X(t)}function X$e(e){return Q$e(e)&&("serviceDefinitionExpression"in e&&Q2(e.serviceDefinitionExpression)||"definitionExpression"in e&&Q2(e.definitionExpression))}function Q$e(e){return!(!Kq(e)||!e.capabilities?.query.supportsCurrentUser)}function Q2(e){return!!e?.toLowerCase().includes("current_user")}function K$e(e){return!TS(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const f3=yy({types:YW});function FP(e,t){if(e.defaultSymbol)return e.types?.length?new Vt({defaultSymbol:f3(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map((r=>({id:r.id,symbol:f3(r.symbol,r,t)})))}):new dn({symbol:f3(e.defaultSymbol,e,t)})}function eMe(e){let t=e.sourceJSON?.cacheMaxAge;if(!t)return!1;const r=e.editingInfo?.lastEditDate?.getTime();return r==null||(t*=1e3,Date.now()-r<t)}async function tMe(e,t,r){if(t==null)return null;const i=[],{objectIdField:n}=e;if(t.forEach((f=>{let g=null;if("attributes"in f){const{attributes:v}=f;g={globalId:v[r],objectId:v[n]!=null&&v[n]!==-1?v[n]:null}}else g={globalId:f.globalId,objectId:f.objectId!=null&&f.objectId!==-1?f.objectId:null};g.globalId!=null&&(g.objectId!=null&&g.objectId!==-1||i.push(g.globalId))})),i.length===0)return null;const s=e.createQuery();s.where=i.map((f=>`${r}='${f}'`)).join(" OR "),s.returnGeometry=!1,s.outFields=[n,r],s.cacheHint=!1;const a=await Gse(Sxe(e,s));if(!a.ok)return null;const c=new Map,d=a.value.features;for(const f of d){const g=f.attributes[r],v=f.attributes[n];g!=null&&v!=null&&v!==-1&&c.set(Que(g),v)}return c}function MX(e,t,r){if(!t||!r||!e)return null;const i=r.getAttribute(t);return i==null?null:e.find((n=>{const{id:s}=n;return s!=null&&s.toString()===i.toString()}))??null}function TS(e){return e.sourceJSON?.isMultiServicesView||rMe(e)}function rMe(e){return!!e.sourceJSON?.capabilities?.toLowerCase().split(",").map((t=>t.trim())).includes("map")}function iMe(e,t,r){const i=t?.queryAttributeBins;if(!t?.operations?.supportsQueryBins||!i)throw new z(r,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!i.supportsAutoInterval)throw new z(r,"Layer source does not support auto-interval binning");if(e.binParameters.normalizationType&&(!i.supportsNormalization||!p9(e.binParameters.normalizationType,i.supportedNormalizationTypes)))throw new z(r,"Layer source does not support normalization binning");break;case"date":if(!i.supportsDate)throw new z(r,"Layer source does not support date binning");if(e.binParameters.snapToData&&!i.supportsSnapToData)throw new z(r,"Layer source does not support snapToData binning");if(e.binParameters.returnFullIntervalBin&&!i.supportsReturnFullIntervalBin)throw new z(r,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!i.supportsFixedBoundaries)throw new z(r,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!i.supportsFixedInterval)throw new z(r,"Layer source does not support fixed-interval binning");if(e.binParameters.normalizationType&&(!i.supportsNormalization||!p9(e.binParameters.normalizationType,i.supportedNormalizationTypes)))throw new z(r,"Layer source does not support normalization binning")}if(e.binParameters.stackBy&&!i.supportsStackBy)throw new z(r,"Layer source does not support stackBy binning");if(e.binParameters.splitBy&&!i.supportsSplitBy)throw new z(r,"Layer source does not support splitBy binning");if(e.binParameters.firstDayOfWeek&&!i.supportsFirstDayOfWeek)throw new z(r,"Layer source does not support firstDayOfWeek binning");const n=i?.supportedStatistics;if(e.outStatistics&&n){const s=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:a}of e.outStatistics){const c=s.get(a);if(c&&!n[c])throw new z(r,`Layer source does not support ${a} statistic type`)}}}function p9(e,t){return e!=null&&!!t?.[SX.toJSON(e)]}let Cf=class extends We.ClonableMixin(K){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};u([p({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Cf.prototype,"shapeAreaField",void 0),u([p({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Cf.prototype,"shapeLengthField",void 0),u([p({type:String,json:{read:e=>Toe.read(e)||Eoe.read(e)}})],Cf.prototype,"units",void 0),Cf=u([O("esri.layers.support.GeometryFieldsInfo")],Cf);var BC;let If=BC=class extends K{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new ge}clone(){return new BC({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};u([p({type:String,json:{write:{isRequired:!0}}})],If.prototype,"floorField",void 0),u([p({json:{read:!1,write:!1}})],If.prototype,"viewAllMode",void 0),u([p({json:{read:!1,write:!1}})],If.prototype,"viewAllLevelIds",void 0),If=BC=u([O("esri.layers.support.LayerFloorInfo")],If);const f9=new tt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),m9=new tt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let ss=class extends We.ClonableMixin(K){constructor(t){super(t),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};u([p({json:{read:f9.read,write:f9.write}})],ss.prototype,"cardinality",void 0),u([p({json:{name:"catalogID"}})],ss.prototype,"catalogId",void 0),u([p({json:{read:!0,write:!0}})],ss.prototype,"composite",void 0),u([p({json:{read:!0,write:!0}})],ss.prototype,"id",void 0),u([p({json:{read:!0,write:!0}})],ss.prototype,"keyField",void 0),u([p({json:{read:!0,write:!0}})],ss.prototype,"keyFieldInRelationshipTable",void 0),u([p({json:{read:!0,write:!0}})],ss.prototype,"name",void 0),u([p({json:{read:!0,write:!0}})],ss.prototype,"relatedTableId",void 0),u([p({json:{read:!0,write:!0}})],ss.prototype,"relationshipTableId",void 0),u([p({json:{read:m9.read,write:m9.write}})],ss.prototype,"role",void 0),ss=u([O("esri.layers.support.Relationship")],ss);const nMe=[["binary","application/octet-stream","bin",""]];function o6e(e,t){return CX(t.name,e?.supportedFormats??[])!=null}function a6e(e,t){if(!e)return!1;const r=sMe(t,e.supportedFormats??[]);return r!=null&&e.editFormats.includes(r)}function AX(e,t){return jP(uMe(e,t))}function OX(e,t){return jP(CX(e,t))}function l6e(e,t){return IX(lMe(e,t))}function sMe(e,t){return OX(e.name,t)??AX(e.type,t)}function pE(e,t,r){return AX(e,r)??OX(t,r)}function RX({supportedFormats:e}){return pE("model/gltf-binary","glb",e)}function u6e(e){const t=RX(e);return t!=null&&e.editFormats.includes(t)}function oMe({supportedFormats:e}){return pE("model/gltf+json","gltf",e)}function aMe(e){if(!e)return null;const t=RX(e),r=oMe(e);let i=null;for(const n of e.queryFormats){if(n===t)return n;n===r&&(i=n)}return i}function c6e({supportedFormats:e}){return pE("application/esri3do-SR_world","wld",e)}function d6e({supportedFormats:e}){return pE("application/esri3do-SR_prj","prj",e)}function UP(e){return[...nMe,...e]}function lMe(e,t){return UP(t).find((r=>jP(r)===e))}function uMe(e,t){const r=e.toLowerCase();return UP(t).find((i=>IX(i)===r))}function CX(e,t){const r=e.toLowerCase();return UP(t).find((i=>cMe(i).some((n=>r.endsWith(n)))))}function jP(e){return e?.[0]}function IX(e){return e?.[1].toLowerCase()}function cMe(e){return e?.[2].split(",").map((t=>t.toLowerCase()))??[]}function h6e(e){return e.tables?.find((t=>t.role==="assetMaps"))}function ve(e,t,r){return!!NX(e,t,r)}function Nf(e,t,r){return NX(e,t,r)}function NX(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const dMe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function hMe(e){const t=e?.supportedSpatialAggregationStatistics?.map((r=>r.toLowerCase()));return{envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function J1(e,t){return!!e?.supportedOperationsWithCacheHint?.map((i=>i.toLowerCase()))?.includes(t.toLowerCase())}function pMe(e){const t=e?.supportedStatisticTypes?.map((r=>r.toLowerCase()));return{count:!!t?.includes("count"),sum:!!t?.includes("sum"),min:!!t?.includes("min"),max:!!t?.includes("max"),avg:!!t?.includes("avg"),var:!!t?.includes("var"),stddev:!!t?.includes("stddev"),percentileContinuous:!!t?.includes("percentile_cont"),percentileDiscrete:!!t?.includes("percentile_disc"),envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function fMe(e){const t=e?.supportedNormalizationTypes?.map((r=>r.toLowerCase()));return{field:!!t?.includes("field"),log:!!t?.includes("log"),naturalLog:!!t?.includes("naturallog"),percentOfTotal:!!t?.includes("percentoftotal"),squareRoot:!!t?.includes("squareroot")}}function PX(e,t){return{analytics:mMe(e),attachment:yMe(e),data:gMe(e),metadata:vMe(e),operations:bMe(e.capabilities,e,t),query:wMe(e,t),queryAttributeBins:TMe(e),queryRelated:_Me(e),queryTopFeatures:SMe(e),editing:EMe(e)}}function mMe(e){return{supportsCacheHint:J1(e.advancedQueryCapabilities,"queryAnalytics")}}function yMe(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:J1(e.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:ve(e.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:ve(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach((i=>{const n=dMe[i.name];n&&(r[n]=!!i.isEnabled)})),r}function gMe(e){return{isVersioned:ve(e,"isDataVersioned",!1),isBranchVersioned:ve(e,"isDataBranchVersioned",!1),supportsAttachment:ve(e,"hasAttachments",!1),supportsM:ve(e,"hasM",!1),supportsZ:ve(e,"hasZ",!1)}}function vMe(e){return{supportsAdvancedFieldProperties:ve(e,"supportsFieldDescriptionProperty",!1)}}function bMe(e,t,r){const i=e?.toLowerCase().split(",").map((w=>w.trim()))??[],n=r?jc(r):null,s=i.includes(n?.serverType==="MapServer"?"data":"query"),a=i.includes("editing")&&!t.datesInUnknownTimezone&&t.uniqueIdInfo?.OIDFieldContainsHashValue!==!0;let c=a&&i.includes("create"),d=a&&i.includes("delete"),f=a&&i.includes("update");const g=i.includes("changetracking"),v=t.advancedQueryCapabilities;return a&&!(c||d||f)&&(c=d=f=!0),{supportsCalculate:ve(t,"supportsCalculate",!1),supportsTruncate:ve(t,"supportsTruncate",!1),supportsValidateSql:ve(t,"supportsValidateSql",!1),supportsAdd:c,supportsDelete:d,supportsEditing:a,supportsChangeTracking:g,supportsQuery:s,supportsQueryAnalytics:ve(v,"supportsQueryAnalytic",!1),supportsQueryAttachments:ve(v,"supportsQueryAttachments",!1),supportsQueryBins:ve(v,"supportsQueryBins",!1)||!!t.queryBinsCapabilities,supportsQueryTopFeatures:ve(v,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:ve(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:f,supportsExceedsLimitStatistics:ve(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:ve(t,"supportsAsyncConvert3D",!1)}}function wMe(e,t){const r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,s=e.currentVersion,a=t?.includes("MapServer"),c=!a||s>=V("mapserver-pbf-version-support"),d=NS(t),f=new Set((e.supportedQueryFormats??"").split(",").map((g=>g.toLowerCase().trim())));return{maxRecordCount:Nf(e,"maxRecordCount",void 0),maxRecordCountFactor:Nf(e,"maxRecordCountFactor",void 0),maxUniqueIDCount:Nf(e,"maxUniqueIDCount",void 0),standardMaxRecordCount:Nf(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:hMe(r),supportsCacheHint:ve(r,"supportsQueryWithCacheHint",!1)||J1(r,"query"),supportsCentroid:ve(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:d,supportsCurrentUser:ve(r,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:ve(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:ve(r,"supportsDisjointSpatialRel",!1),supportsDistance:ve(r,"supportsQueryWithDistance",!1),supportsDistinct:ve(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:ve(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:c&&f.has("pbf"),supportsFullTextSearch:ve(r,"supportsFullTextSearch",!1),supportsGeometryProperties:ve(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:ve(r,"supportsHavingClause",!1),supportsHistoricMoment:ve(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:ve(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:ve(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:ve(r,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:ve(r,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:ve(r,"supportsPercentileStatistics",!1),supportsQuantization:ve(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:ve(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:ve(i,"allowAnonymousToQuery",!0),supportsQueryByOthers:ve(i,"allowOthersToQuery",!0),supportsQueryGeometry:ve(e,"supportsReturningQueryGeometry",!1),supportsResultType:ve(r,"supportsQueryWithResultType",!1),supportsReturnMesh:!!aMe(e.infoFor3D),supportsSpatialAggregationStatistics:ve(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:ve(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ve(e,"useStandardizedQueries",!1),supportsStatistics:ve(r,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:ve(r,"supportsTopFeaturesQuery",!1),supportsTrueCurve:ve(r,"supportsTrueCurve",!1),tileMaxRecordCount:Nf(e,"tileMaxRecordCount",void 0)}}function _Me(e){const t=e.advancedQueryCapabilities,r=ve(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ve(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:J1(t,"queryRelated")}}function SMe(e){return{supportsCacheHint:J1(e.advancedQueryCapabilities,"queryTopFilter")}}function TMe(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:ve(t,"supportsDateBin",!1),supportsFixedInterval:ve(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:ve(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:ve(t,"supportsFixedBoundariesBin",!1),supportsStackBy:ve(t,"supportsStackBy",!1),supportsSplitBy:ve(t,"supportsSplitBy",!1),supportsSnapToData:ve(t,"supportsSnapToData",!1),supportsReturnFullIntervalBin:ve(t,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:ve(t,"supportsFirstDayOfWeek",!1),supportsNormalization:ve(t,"supportsNormalization",!1),supportedStatistics:pMe(t),supportedNormalizationTypes:fMe(t)}}function EMe(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:ve(e,"allowGeometryUpdates",!0),supportsGlobalId:ve(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:ve(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:ve(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ve(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ve(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ve(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ve(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ve(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ve(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:ve(r,"supportsAsyncApplyEdits",!1),zDefault:Nf(e,"zDefault",void 0)}}function p6e(e){return{operations:{supportsAppend:ve(e,"supportsAppend",!1),supportsCoverageQuery:e?.playbackInfo?.klv["0601"]??!1,supportsExportClip:ve(e,"supportsExportClip",!1),supportsExportFrameset:ve(e,"supportsExportFrameset",!1),supportsMensuration:ve(e,"supportsMensuration",!1),supportsPreviews:ve(e,"supportsPreviews",!1),supportsUpdate:ve(e,"supportsUpdate",!1)}}}let _l=class extends We.ClonableMixin(K){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const r={};for(const i of Object.keys(t))r[i]=BT(t[i]);return r}writeDomains(t,r){if(!t)return;const i={};for(const n of Object.keys(t))t[n]&&(i[n]=t[n]?.toJSON());r.domains=i}};u([p({type:Number,json:{write:!0}})],_l.prototype,"code",void 0),u([p({type:Object,json:{write:!0}})],_l.prototype,"defaultValues",void 0),u([p({json:{write:!0}})],_l.prototype,"domains",void 0),u([le("domains")],_l.prototype,"readDomains",null),u([de("domains")],_l.prototype,"writeDomains",null),u([p({type:String,json:{write:!0}})],_l.prototype,"name",void 0),_l=u([O("esri.layers.support.Subtype")],_l);async function xMe(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return kf(e);const r=Ee.WGS84;return await NN(t,r),Gc(e,r)}function $Me(e,t){if(!zP(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function zP(e,t){return!!e.typeKeywords?.includes(t)}function m6e(e){return zP(e,LX.HOSTED_SERVICE)}function MMe(e,t){const r=e.typeKeywords;if(r){const i=r.indexOf(t);i>-1&&r.splice(i,1)}}function y6e(e,t,r){r?$Me(e,t):MMe(e,t)}async function g6e(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return xMe(r)}const LX={CHARTS:"Charts",DYNAMIC:"Dynamic",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function AMe(e){const{portal:t,isOrgItem:r,itemControl:i}=e,n=t.user?.privileges;let s=!n||n.includes("features:user:edit"),a=!!r&&!!n?.includes("features:user:fullEdit");const c=i==="update"||i==="admin";return c?a=s=!0:a&&(s=!0),{features:{edit:s,fullEdit:a},content:{updateItem:c}}}const OMe=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(ge.ofType(da)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=Ee.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(){throw new Error("Not implemented")}getField(r){return this.fieldsIndex.get(r)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:n,operations:s,editing:a}=r;if(!n.supportsQueryByOthers||!n.supportsQueryByAnonymous||s.supportsEditing&&!(a.supportsUpdateByOthers&&a.supportsUpdateByAnonymous&&a.supportsDeleteByOthers&&a.supportsDeleteByAnonymous))return"load"}if(Q2(this.serviceDefinitionExpression)||Q2(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(eMe(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const i=this.editFieldsInfo;return(i?.creatorField||i?.editorField)&&r?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(r,i){return PX(i,this.url)}readEditingInfo(r,i){const{editingInfo:n}=i;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const i=U(r),{operations:n,editing:s}=i;return TS(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),i):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,i):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=s.supportsGeometryUpdate=!0),i)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(r,i){return TX(i)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||TS(this))return!1;const{operations:i,editing:n}=r;return i.supportsEditing&&!(i.supportsAdd&&i.supportsDelete&&i.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:i,editing:n}=r;return TS(this)?!i.supportsQuery:!(i.supportsAdd&&i.supportsDelete&&i.supportsEditing&&i.supportsQuery&&i.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(r,i){return i.type==="Table"}readMaxScale(r,i){return i.effectiveMaxScale||r||0}readMinScale(r,i){return i.effectiveMinScale||r||0}readObjectIdFieldFromService(r,i){return EX(i)}readServiceDefinitionExpression(r,i){return i.definitionQuery||i.definitionExpression}readUniqueIdFields(r,i){return i.uniqueIdInfo?.OIDFieldContainsHashValue?i.uniqueIdInfo.fields:null}set url(r){if(r==null)return void this._set("url",r);const i=gie({layer:this,url:r,nonStandardUrlAllowed:!0,logger:re.getLogger(this)});this._set("url",i.url),i.layerId!=null&&this._set("layerId",i.layerId)}writeUrl(r,i,n,s){vie(this,r,null,i,s)}readVersion(r,i){return B$e(i)}get isUrlHostModified(){const{loaded:r,url:i,_isUrlHostModified:n}=this;if(n)return!0;if(!r||!i||this.originIdOf("url")<Ke.USER)return!1;const s=this.sourceJSON?.preferredHost;if(!s||!Sa(i,`https://${s}`,!0))return!1;for(let a=Ke.USER-1;a>=Ke.PORTAL_ITEM;a--){const c=this.getAtOrigin("url",Wv(a));if(c)return!Sa(i,c,!0)}return!1}applyPreferredHost(r){const{url:i,portalItem:n}=this;!i||$A(n)}applyHostFromPortalItem(){const{url:r,portalItem:i}=this;if(!r||this.originIdOf("url")===Ke.USER||!i?.url||!$A(i)||!zP(i,LX.HOSTED_SERVICE)||Sa(r,i.url,!0)||!this._isUrlHostModificationEnabled)return;const n=Jre(i.url);this._set("url",W7(r,n)),this._isUrlHostModified=!0}};return u([p({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),u([p({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),u([p({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),u([le("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),u([p(l2("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),u([p({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),u([p({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),u([p({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),u([p({readOnly:!0,type:wl})],t.prototype,"editFieldsInfo",void 0),u([p({readOnly:!0})],t.prototype,"editingInfo",void 0),u([le("editingInfo")],t.prototype,"readEditingInfo",null),u([p({readOnly:!0})],t.prototype,"effectiveCapabilities",null),u([p()],t.prototype,"effectiveEditingEnabled",null),u([p((()=>{const r=U(yxe),i=r.json.origins;return i["web-map"]={read:!1,write:!1},i["portal-item"]={read:!1,write:!1},r})())],t.prototype,"elevationInfo",void 0),u([p()],t.prototype,"fieldsIndex",void 0),u([p({type:If,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:kt}}})],t.prototype,"floorInfo",void 0),u([p({type:Xe,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),u([p()],t.prototype,"gdbVersion",void 0),u([p({readOnly:!0,type:Cf,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),u([p({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:qC.read}}}})],t.prototype,"geometryType",void 0),u([p({type:String})],t.prototype,"globalIdField",void 0),u([le("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),u([p({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),u([p({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),u([p({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),u([p({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),u([p({readOnly:!0,type:rn})],t.prototype,"heightModelInfo",void 0),u([p({type:Date})],t.prototype,"historicMoment",void 0),u([p({type:ge.ofType(da),readOnly:!0})],t.prototype,"indexes",void 0),u([p({readOnly:!0})],t.prototype,"isTable",void 0),u([le("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),u([p({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),u([p(wxe)],t.prototype,"maxScale",void 0),u([le("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),u([p(bxe)],t.prototype,"minScale",void 0),u([le("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),u([p({type:String})],t.prototype,"objectIdField",void 0),u([le("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),u([p(l2("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),u([p({type:[ss],readOnly:!0})],t.prototype,"relationships",void 0),u([p({type:Boolean})],t.prototype,"returnM",void 0),u([p({type:Boolean})],t.prototype,"returnZ",void 0),u([p({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),u([p({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),u([le("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),u([p({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),u([p()],t.prototype,"sourceJSON",void 0),u([p({type:Ee,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),u([p({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),u([p({type:[_l],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),u([p({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),u([p({type:[String],readOnly:!0})],t.prototype,"uniqueIdFields",void 0),u([le("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],t.prototype,"readUniqueIdFields",null),u([p(fxe)],t.prototype,"url",null),u([de("url")],t.prototype,"writeUrl",null),u([p({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),u([le("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),u([p({readOnly:!0})],t.prototype,"isUrlHostModified",null),t=u([O("esri.layers.mixins.FeatureLayerBase")],t),t};let pc=class extends We.ClonableMixin(K){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};u([p({type:String,json:{write:!0}})],pc.prototype,"expression",void 0),u([p({type:String,json:{write:!0}})],pc.prototype,"title",void 0),u([p({type:String,json:{write:!0}})],pc.prototype,"returnType",void 0),pc=u([O("esri.layers.support.ExpressionInfo")],pc);var HC,Lm;let zi=(Lm=class extends K{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new HC({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:U(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},HC=Lm,Lm);u([p({type:Boolean,json:{write:!0}})],zi.prototype,"isAutoGenerated",void 0),u([p({type:String,json:{write:!0}})],zi.prototype,"name",void 0),u([p({type:String,json:{write:!0}})],zi.prototype,"alias",void 0),u([p({type:String,json:{write:!0}})],zi.prototype,"onStatisticField",void 0),u([p({type:pc,json:{write:!0}})],zi.prototype,"onStatisticExpression",void 0),u([p({type:String,json:{write:!0}})],zi.prototype,"statisticType",void 0),zi=HC=u([O("esri.layers.support.AggregateField")],zi);let $c=class extends K{constructor(){super(...arguments),this.type=null}};u([p({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],$c.prototype,"type",void 0),$c=u([O("esri.layers.support.FeatureReduction")],$c);const VP="__begin__",GP="__end__",RMe=new RegExp(VP,"ig"),CMe=new RegExp(GP,"ig"),y9=new RegExp("^"+VP,"i"),g9=new RegExp(GP+"$","i"),K2='"',IMe=K2+" + ",NMe=" + "+K2;function PMe(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function LMe(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function qP(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=PMe(e.labelExpression),t.type="conventional"),t}function DMe(e){const t=qP(e);if(!t)return null;switch(t.type){case"conventional":return WC(t.expression);case"arcade":return t.expression}return null}function kMe(e){const t=qP(e);if(!t)return null;switch(t.type){case"conventional":return UMe(t.expression);case"arcade":return DX(t.expression)}return null}function WC(e){let t;return e?(t=Hh(e,(r=>VP+'$feature["'+r+'"]'+GP)),t=y9.test(t)?t.replace(y9,""):K2+t,t=g9.test(t)?t.replace(g9,""):t+K2,t=t.replaceAll(RMe,IMe).replaceAll(CMe,NMe)):t='""',t}const FMe=/^\s*\{([^}]+)\}\s*$/i;function UMe(e){return e?.match(FMe)?.[1].trim()||null}const jMe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,zMe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,VMe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function DX(e){if(!e)return null;let t=jMe.exec(e)||zMe.exec(e);return t?t[1]||t[3]:(t=VMe.exec(e),t?t[2]:null)}var ZC,Dm;let Rl=(Dm=class extends K{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,r){return r.value?WC(r.value):t}writeExpression(t,r,i){this.value!=null&&(t=WC(this.value)),t!=null&&(r[i]=t)}clone(){return new ZC({expression:this.expression,title:this.title,value:this.value})}},ZC=Dm,Dm);u([p({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Rl.prototype,"expression",void 0),u([le("expression",["expression","value"])],Rl.prototype,"readExpression",null),u([de("expression")],Rl.prototype,"writeExpression",null),u([p({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Rl.prototype,"title",void 0),u([p({json:{read:!1,write:!1}})],Rl.prototype,"value",void 0),Rl=ZC=u([O("esri.layers.support.LabelExpressionInfo")],Rl);var YC;const n_=new tt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function s_(e,t,r){return{enabled:!xA(r?.layer)}}function kX(e){return!e||e.origin!=="service"&&e.layer?.type!=="map-image"}function GMe(e){return e?.type==="map-image"}function FX(e){return!!GMe(e)&&!!e.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function qMe(e){return kX(e)||FX(e?.layer)}var km;let Wt=(km=class extends K{static evaluateWhere(t,r){const i=(n,s,a)=>{switch(s){case"=":return n==a;case"<>":return n!=a;case">":return n>a;case">=":return n>=a;case"<":return n<a;case"<=":return n<=a}return!1};try{if(t==null)return!0;const n=t.split(" ");if(n.length===3)return i(r[n[0]],n[1],n[2]);if(n.length===7){const s=i(r[n[0]],n[1],n[2]),a=n[3],c=i(r[n[4]],n[5],n[6]);switch(a){case"AND":return s&&c;case"OR":return s||c}}return!1}catch{}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=u$e,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,r){const i=r.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,r,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=LMe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const n=DX(this.labelExpressionInfo.expression);n&&(t="["+n+"]")}}t!=null&&(r[i]=t)}writeLabelExpressionInfo(t,r,i,n){if(t==null&&this.labelExpression!=null&&kX(n))t=new Rl({expression:this.getLabelExpressionArcade()});else if(!t)return;const s=t.toJSON(n);s.expression&&(r[i]=s)}writeMaxScale(t,r){(t||this.minScale)&&(r.maxScale=t)}writeMinScale(t,r){(t||this.maxScale)&&(r.minScale=t)}getLabelExpression(){return qP(this)}getLabelExpressionArcade(){return DMe(this)}getLabelExpressionSingleField(){return kMe(this)}hash(){return JSON.stringify(this)}clone(){return new YC({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:U(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:U(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},YC=km,km);u([p({type:String,json:{write:!0}})],Wt.prototype,"name",void 0),u([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:s_}}}}})],Wt.prototype,"allowOverrun",void 0),u([p({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:s_}}}}})],Wt.prototype,"deconflictionStrategy",void 0),u([p({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&r?.origin==="service"&&FX(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],Wt.prototype,"labelExpression",void 0),u([le("labelExpression")],Wt.prototype,"readLabelExpression",null),u([de("labelExpression")],Wt.prototype,"writeLabelExpression",null),u([p({type:Rl,json:{write:{overridePolicy:(e,t,r)=>qMe(r)?{allowNull:!0}:{enabled:!1}}}})],Wt.prototype,"labelExpressionInfo",void 0),u([de("labelExpressionInfo")],Wt.prototype,"writeLabelExpressionInfo",null),u([p({type:n_.apiValues,json:{type:n_.jsonValues,read:n_.read,write:n_.write}})],Wt.prototype,"labelPlacement",void 0),u([p({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Wt.prototype,"labelPosition",void 0),u([p({type:Number})],Wt.prototype,"maxScale",void 0),u([de("maxScale")],Wt.prototype,"writeMaxScale",null),u([p({type:Number})],Wt.prototype,"minScale",void 0),u([de("minScale")],Wt.prototype,"writeMinScale",null),u([p({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:s_}}}}})],Wt.prototype,"repeatLabel",void 0),u([p({type:Number,cast:ut,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:s_}}}}})],Wt.prototype,"repeatLabelDistance",void 0),u([p({types:mge,json:{origins:{"web-scene":{types:yge,write:i9,default:null}},write:i9,default:null}})],Wt.prototype,"symbol",void 0),u([p({type:Boolean,json:{write:!0}})],Wt.prototype,"useCodedValues",void 0),u([p({type:String,json:{write:!0}})],Wt.prototype,"where",void 0),Wt=YC=u([O("esri.layers.support.LabelClass")],Wt);var JC;let Oo=JC=class extends K{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new JC({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};u([p({type:String,json:{write:!0}})],Oo.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],Oo.prototype,"label",void 0),u([p({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Oo.prototype,"minValue",void 0),u([p({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Oo.prototype,"maxValue",void 0),u([p(PP)],Oo.prototype,"symbol",void 0),Oo=JC=u([O("esri.renderers.support.ClassBreakInfo")],Oo);var XC;const UX="log",ES="percent-of-total",xS="field",o_=new tt({esriNormalizeByLog:UX,esriNormalizeByPercentOfTotal:ES,esriNormalizeByField:xS}),BMe=Br(Oo);let Rr=XC=class extends Oy(ps){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map((n=>{const s=new Oo;return s.read(n,r),s.minValue==null&&(s.minValue=i),s.maxValue==null&&(s.maxValue=s.minValue),i=s.maxValue,s}))}writeClassBreakInfos(e,t,r,i){const n=e.map((s=>s.write({},i)));this._areClassBreaksConsecutive()&&n.forEach((s=>delete s.classMinValue)),t[r]=n}castField(e){return e==null?e:typeof e=="function"?(re.getLogger(this).error(".field: field must be a string value"),null):O1(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&xS||r&&ES||null,t&&r&&re.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==xS&&e!==ES||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i=typeof e=="number"?new Oo({minValue:e,maxValue:t,symbol:JW(r)}):BMe(U(e)),this.classBreakInfos.push(i),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const n=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&t?.arcade==null&&re.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&t?.arcade==null&&(r={...r,arcade:await jh()});const i=this.getBreakIndex(e,r);return i!==-1?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&t?.arcade==null)return void re.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&t?.arcade==null){const n=await jh(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}get symbols(){const e=[];return this.classBreakInfos.forEach((t=>{t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce(((i,n)=>i+n.getMeshHash()),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new XC({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:U(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:U(this.visualVariables),legendOptions:U(this.legendOptions),authoringInfo:U(this.authoringInfo)})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.symbols.map((i=>i.collectRequiredFields(e,t))),Yi(e,t,this.valueExpression)];yn(e,t,this.field),yn(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s,timeZone:a}=t??{},{valueExpression:c}=this;let d=this._compiledValueExpression.valueExpression===c?this._compiledValueExpression.compiledFunction:null;const f=s.arcadeUtils;if(!d){const v=f.createSyntaxTree(c);d=f.createFunction(v),this._compiledValueExpression.compiledFunction=d}this._compiledValueExpression.valueExpression=c;const g=f.executeFunction(d,f.createExecContext(e,f.getViewInfo({viewingMode:r,scale:i,spatialReference:n}),a));return this._getBreakIndexfromInfos(g)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let n=parseFloat(r[t]);if(i){const s=this.normalizationTotal,a=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if(i===UX)n=Math.log(n)*Math.LOG10E;else if(i!==ES||s==null||isNaN(s)){if(i===xS&&!isNaN(a)){if(isNaN(n)||isNaN(a))return-1;n/=a}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};u([p(LP)],Rr.prototype,"backgroundFillSymbol",void 0),u([p({type:[Oo],json:{write:{isRequired:!0}}})],Rr.prototype,"classBreakInfos",void 0),u([le("classBreakInfos")],Rr.prototype,"readClassBreakInfos",null),u([de("classBreakInfos")],Rr.prototype,"writeClassBreakInfos",null),u([p({type:String,json:{write:!0}})],Rr.prototype,"defaultLabel",void 0),u([p(hE)],Rr.prototype,"defaultSymbol",void 0),u([p({type:String,json:{write:!0}})],Rr.prototype,"field",void 0),u([wt("field")],Rr.prototype,"castField",null),u([p({type:Boolean})],Rr.prototype,"isMaxInclusive",void 0),u([p({type:DP,json:{write:!0}})],Rr.prototype,"legendOptions",void 0),u([p({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Rr.prototype,"minValue",null),u([p({type:String,json:{write:!0}})],Rr.prototype,"normalizationField",void 0),u([p({type:Number,json:{write:!0}})],Rr.prototype,"normalizationTotal",void 0),u([p({type:o_.apiValues,value:null,json:{type:o_.jsonValues,read:o_.read,write:o_.write}})],Rr.prototype,"normalizationType",null),u([Ne({classBreaks:"class-breaks"})],Rr.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],Rr.prototype,"valueExpression",void 0),u([p({type:String,json:{write:!0}})],Rr.prototype,"valueExpressionTitle",void 0),Rr=XC=u([O("esri.renderers.ClassBreaksRenderer")],Rr);const QC=-3,HMe=QC-1;var Cl;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Cl||(Cl={}));let WMe=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear()}register(t){this._users.set(t.id.slice(0,-1),t)}deregister(t){this.clear(t),this._sizeLimits.delete(t),this._users.delete(t.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,r){return this._db.get(t.id+r)?.size??0}put(t,r,i,n,s){r=t.id+r;const a=this._db.get(r);if(a&&(this._size-=a.size,t.size-=a.size,this._db.delete(r),a.entry!==i&&this._notifyRemove(r,a.entry,a.size,Cl.ALL)),n>this._maxSize)return void this._notifyRemove(r,i,n,Cl.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${r}`),void this._notifyRemove(r,i,0,Cl.ALL);const c=1+Math.max(s,HMe)-QC;this._db.set(r,new ZMe(i,n,c)),this._size+=n,t.size+=n,this._checkSize()}updateSize(t,r,i,n){r=t.id+r;const s=this._db.get(r);if(s&&s.entry===i){for(this._size-=s.size,t.size-=s.size;n>this._maxSize;){const a=this._notifyRemove(r,i,n,Cl.SOME);if(!(a!=null&&a>0))return void this._db.delete(r);n=a}s.size=n,this._size+=n,t.size+=n,this._checkSize()}}pop(t,r){r=t.id+r;const i=this._db.get(r);if(i)return this._size-=i.size,t.size-=i.size,this._db.delete(r),++this._hit,i.entry;++this._miss}get(t,r){r=t.id+r;const i=this._db.get(r);if(i!==void 0)return this._db.delete(r),i.lives=i.lifetime,this._db.set(r,i),++this._hit,i.entry;++this._miss}peek(t,r){const i=this._db.get(t.id+r);return i?++this._hit:++this._miss,i?.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach(((a,c)=>{const d=a.lifetime;i[d]=(i[d]||0)+a.size,this._users.forEach((f=>{const{id:g,name:v}=f;if(c.startsWith(g)){const w=r[v]||0;r[v]=w+a.size}}))}));const n={};this._users.forEach((a=>{const c=a.name;if("hitRate"in a&&typeof a.hitRate=="number"&&!isNaN(a.hitRate)&&a.hitRate>0){const d=r[c]||0;r[c]=d,n[c]=Math.round(100*a.hitRate)+"%"}else n[c]="0%"}));const s=Object.keys(r);s.sort(((a,c)=>r[c]-r[a])),s.forEach((a=>t[a]=Math.round(r[a]/2**20)+"MB / "+n[a]));for(let a=i.length-1;a>=0;--a){const c=i[a];c&&(t["Priority "+(a+QC-1)]=Math.round(c/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forEach((t=>t.resetHitRate()))}clear(t){const r=t.id;this._db.forEach(((i,n)=>{n.startsWith(r)&&(this._size-=i.size,this._db.delete(n),this._notifyRemove(n,i.entry,i.size,Cl.ALL))})),t.size=0}clearAll(){this._db.forEach(((t,r)=>this._notifyRemove(r,t.entry,t.size,Cl.ALL))),this._users.forEach((t=>t.size=0)),this._size=0,this._db.clear()}*values(t){for(const[r,i]of this._db)r.startsWith(t.id)&&(yield i.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,i,n){const s=this._users.get(t.split(m3)[0])?.removeFunc,a=s?.(r,n,i);return typeof a=="number"?a:null}_checkSize(){this._sizeLimits.forEach(((t,r)=>this._checkSizeLimits(t,r))),this._checkSizeLimits(this.maxSize)}setMaxSize(t,r){r==null||r<=0?this._sizeLimits.delete(t):this._sizeLimits.set(t,r)}_checkSizeLimits(t,r){const i=r??this;if(i.size<=t)return;const n=r?.id;let s=!0;for(;s;){s=!1;for(const[a,c]of this._db)if(c.lifetime===0&&(!n||a.startsWith(n))){const d=r??this._users.get(a.split(m3)[0]);if(this._purgeItem(a,c,d),i.size<=.9*t)return;s||=this._db.has(a)}}for(const[a,c]of this._db)if(!n||a.startsWith(n)){const d=r??this._users.get(a.split(m3)[0]);if(this._purgeItem(a,c,d),i.size<=.9*t)return}}_purgeItem(t,r,i){if(this._db.delete(t),r.lives<=1){this._size-=r.size,i&&(i.size-=r.size);const n=this._notifyRemove(t,r.entry,r.size,Cl.SOME);n!=null&&n>0&&(this._size+=n,i&&(i.size+=n),r.lives=r.lifetime,r.size=n,this._db.set(t,r))}else--r.lives,this._db.set(t,r)}},ZMe=class{constructor(t,r,i){this.entry=t,this.size=r,this.lifetime=i,this.lives=i}};const m3=":";let YMe=class{constructor(t,r){this.removeFunc=r,this._storage=new WMe,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,r,i=1){this._storage.put(this,t,r,i,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}},v9=class jX{static parse(t,r,i){const n=[],s=[],a=t.split(";");for(let c=0;c<a.length;c++){const d=a[c];if(d){if(d.includes("po:")){const f=d.slice(3).split("|");if(f.length===3){const[g,v,w]=f,S=XMe(g,v,w);S&&s.push(S)}}else if(d.includes("|")){for(const f of d.split("|"))if(r.has(f)){n.push(f);break}}else if(r.has(d))n.push(d);else if(c===0){n.length=0,n.push(QMe(i));break}}}return new jX(n,s)}constructor(t,r){this.partNames=t,this.overrides=r}};function JMe(e,t){if(e==="DashTemplate")return t.split(" ").map((r=>Number(r)));if(e==="Color"){const r=new De(t).toRgba();return[r[0],r[1],r[2],255*r[3]]}return Number(t)}function XMe(e,t,r){return{primitiveName:e,propertyName:t,value:JMe(t,r),defaultValue:null}}function QMe(e){switch(e){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}var Fm;let va=(Fm=class{},Fm.instance=new zn("Etc/UTC"),Fm);function KMe(e){return e instanceof Qh?e===va.instance:e?.toString().toLowerCase()==="unknown"}function T6e(e){return KMe(e)?va.instance:e}function e3e(e){return"timeZone"in e}function t3e(e){return"timeZone"in e}function r3e(e){return"dateFieldsTimeZone"in e}const i3e=new Map;let eT=class $S{static fromJSON(t){return new $S(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new $S(t.fields??[],w9(t))}static fromLayerJSON(t){return new $S(t.fields??[],w9(t))}constructor(t=[],r){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=r?new Map(r):null;const i=[];for(const n of this.fields){const s=n?.name,a=b9(s);if(s&&a){const c=th(s);this._fieldsMap.set(s,n),this._fieldsMap.set(c,n),this._normalizedFieldsMap.set(a,n),i.push(`${c}:${n.type}:${this._timeZoneByFieldName?.get(s)}`),rye(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):vW(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),MF(n)||AF(n)||(n.editable=n.editable==null||!!n.editable,n.nullable=n.nullable==null||!!n.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)MF(t)||AF(t)||t.nullable||Bme(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===t?.uid}has(t){return this.get(t)!=null}get(t){if(!t)return;let r=this._fieldsMap.get(t);return r||(r=this._fieldsMap.get(th(t))??this._normalizedFieldsMap.get(b9(t)),r&&this._fieldsMap.set(t,r),r)}getTimeZone(t){const r=this.get(t&&typeof t!="string"?t.name:t);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):r.type==="date"||r.type==="esriFieldTypeDate"?(re.getLogger("esri.layers.support.FieldsIndex").errorOnce(new z("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),Nc):zX.has(r.type)?Ic:null:null}getLuxonTimeZone(t){const r=this.getTimeZone(t);return r?r===Ic?va.instance:r===Nc?qr.utcInstance:dy(i3e,r,(()=>zn.create(r))):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return iye(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){return this.get(t)?.name??void 0}toJSON(){return{fields:this.fields.map((t=>Bv(t)?t.toJSON():t)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function th(e){return e.trim().toLowerCase()}function b9(e){return Cme(e)?.toLowerCase()??""}const zX=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function w9(e){const t=new Map;if(!e.fields)return t;const r=e.datesInUnknownTimezone===!0,{timeInfo:i,editFieldsInfo:n}=e,s=(i?"startField"in i?i.startField:i.startTimeField:"")??"",a=(i?"endField"in i?i.endField:i.endTimeField:"")??"",c=r3e(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?x_(e.dateFieldsTimeReference):null,d=n?e3e(n)?n.timeZone??c:n.dateFieldsTimeReference?x_(n.dateFieldsTimeReference):c??Nc:null,f=i?t3e(i)?i.timeZone??c:i.timeReference?x_(i.timeReference):c:null,g=new Map([[th(n?.creationDateField??""),d],[th(n?.editDateField??""),d],[th(s),f],[th(a),f]]);for(const{name:v,type:w}of e.fields)if(zX.has(w))t.set(v,Ic);else if(w!=="date"&&w!=="esriFieldTypeDate")t.set(v,null);else if(r)t.set(v,Ic);else{const S=g.get(th(v??""))??c;t.set(v,S)}return t}var Ye;(function(e){e.AsyncNotEnabled="AsyncNotEnabled",e.ModulesNotSupported="ModulesNotSupported",e.CircularModules="CircularModules",e.CannotCompareDateAndTime="CannotCompareDateAndTime",e.NeverReach="NeverReach",e.UnsupportedHashType="UnsupportedHashType",e.InvalidParameter="InvalidParameter",e.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes",e.UnexpectedToken="UnexpectedToken",e.Unrecognized="Unrecognized",e.UnrecognizedType="UnrecognizedType",e.MaximumCallDepth="MaximumCallDepth",e.BooleanConditionRequired="BooleanConditionRequired",e.TypeNotAllowedInFeature="TypeNotAllowedInFeature",e.KeyMustBeString="KeyMustBeString",e.WrongNumberOfParameters="WrongNumberOfParameters",e.CallNonFunction="CallNonFunction",e.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",e.NoFunctionInDictionary="NoFunctionInDictionary",e.NoFunctionInArray="NoFunctionInArray",e.AssignModuleFunction="AssignModuleFunction",e.LogicExpressionOrAnd="LogicExpressionOrAnd",e.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",e.FunctionNotFound="FunctionNotFound",e.InvalidMemberAccessKey="InvalidMemberAccessKey",e.UnsupportedUnaryOperator="UnsupportUnaryOperator",e.InvalidIdentifier="InvalidIdentifier",e.MemberOfNull="MemberOfNull",e.UnsupportedOperator="UnsupportedOperator",e.Cancelled="Cancelled",e.ModuleAccessorMustBeString="ModuleAccessorMustBeString",e.ModuleExportNotFound="ModuleExportNotFound",e.Immutable="Immutable",e.OutOfBounds="OutOfBounds",e.IllegalResult="IllegalResult",e.FieldNotFound="FieldNotFound",e.PortalRequired="PortalRequired",e.LogicError="LogicError",e.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",e.KeyAccessorMustBeString="KeyAccessorMustBeString",e.WrongSpatialReference="WrongSpatialReference",e.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime",e.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly"})(Ye||(Ye={}));const VX={[Ye.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[Ye.LogicError]:"Logic error - {reason}",[Ye.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[Ye.NeverReach]:"Encountered unreachable logic",[Ye.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[Ye.ModuleAccessorMustBeString]:"Module accessor must be a string",[Ye.ModuleExportNotFound]:"Module has no export with provided identifier",[Ye.ModulesNotSupported]:"Current profile does not support modules",[Ye.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[Ye.FunctionNotFound]:"Function not found",[Ye.FieldNotFound]:"Key not found - {key}",[Ye.CircularModules]:"Circular module dependencies are not allowed",[Ye.Cancelled]:"Execution cancelled",[Ye.UnsupportedHashType]:"Type not supported in hash function",[Ye.IllegalResult]:"Value is not a supported return type",[Ye.PortalRequired]:"Portal is required",[Ye.InvalidParameter]:"Invalid parameter",[Ye.WrongNumberOfParameters]:"Call with wrong number of parameters",[Ye.Unrecognized]:"Unrecognized code structure",[Ye.UnrecognizedType]:"Unrecognized type",[Ye.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[Ye.BooleanConditionRequired]:"Conditions must use booleans",[Ye.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[Ye.NoFunctionInArray]:"Arrays cannot contain functions.",[Ye.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[Ye.KeyAccessorMustBeString]:"Accessor must be a string",[Ye.KeyMustBeString]:"Object keys must be a string",[Ye.Immutable]:"Object is immutable",[Ye.UnexpectedToken]:"Unexpected token",[Ye.MemberOfNull]:"Cannot access property of null object",[Ye.MaximumCallDepth]:"Exceeded maximum function depth",[Ye.OutOfBounds]:"Out of bounds",[Ye.InvalidIdentifier]:"Identifier not recognized",[Ye.CallNonFunction]:"Expression is not a function",[Ye.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[Ye.AssignModuleFunction]:"Cannot assign function to module variable",[Ye.UnsupportedUnaryOperator]:"Unsupported unary operator",[Ye.UnsupportedOperator]:"Unsupported operator",[Ye.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[Ye.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&",[Ye.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[Ye.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[Ye.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"};let n3e=class extends Error{constructor(...t){super(...t)}},_9=class GX extends n3e{constructor(t,r){super(BP(r)+t.message,{cause:t}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,GX),r?.loc&&(this.loc=r.loc)}},s3e=class qX extends Error{constructor(t,r,i,n){super("Execution error - "+BP(i)+Hh(VX[r],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,qX),i?.loc&&(this.loc=i.loc)}};function BP(e){return e&&e.loc?`Line : ${e.loc.start?.line}, ${e.loc.start?.column}: `:""}let x6e=class BX extends Error{constructor(t,r,i,n){super("Compilation error - "+BP(i)+Hh(VX[r],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,BX),i?.loc&&(this.loc=i.loc)}},$6e=class HX extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,HX)}};function M6e(e,t,r){return r.declaredRootClass==="esri.arcade.arcadeexecutionerror"||r.declaredRootClass==="esri.arcade.arcadecompilationerror"?r.loc===null&&t?.loc?new _9(r,{cause:r}):r:(r.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||r.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||r.declaredRootClass,t?.loc?new _9(r,{cause:r}):r)}var tT;(function(e){e.UnrecognizedUri="UnrecognizedUri",e.UnsupportedUriProtocol="UnsupportedUriProtocol"})(tT||(tT={}));const o3e={[tT.UnrecognizedUri]:"Unrecognized uri - {uri}",[tT.UnsupportedUriProtocol]:"Unrecognized uri protocol"};let A6e=class WX extends Error{constructor(t,r){super(Hh(o3e[t],r)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,WX)}};function MS(e){return e.toLowerCase().replaceAll(/[\s-]+/g,"")}let O6e=class{constructor(t,r){const i=new Map;for(const n of t){const s=MS(n);if(i.has(s))throw new Error(`${n} already added as ${i.get(s)}`);i.set(s,n)}if(r!=null)for(const[n,s]of r){const a=MS(n);if(i.has(a))throw new Error(`${n} already associated with ${i.get(a)}`);i.set(a,s)}this._enumMap=i}lookup(t){return this._enumMap.get(MS(t))}get(t){const r=this.lookup(t);if(r==null)throw new s3e(null,Ye.InvalidParameter,null);return r}};var rT;(function(e){e.TimeZoneNotRecognized="TimeZoneNotRecognized"})(rT||(rT={}));const a3e={[rT.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let l3e=class ZX extends Error{constructor(t,r){super(Hh(a3e[t],r)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,ZX)}};function tf(e,t,r){return e<t?e-t:e>r?e-r:0}function rf(e,t,r){return e<t?t:e>r?r:e}let Vl=class Or{constructor(t){this._date=t,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(t=0,r=1,i=1,n=0,s=0,a=0,c=0,d){if(isNaN(t)||isNaN(r)||isNaN(i)||isNaN(n)||isNaN(s)||isNaN(a)||isNaN(c))return null;const f=_e.local(t,r).daysInMonth;let g=_e.fromObject({day:rf(i,1,f),year:t,month:rf(r,1,12),hour:rf(n,0,23),minute:rf(s,0,59),second:rf(a,0,59),millisecond:rf(c,0,999)},{zone:pa(d)});return g=g.plus({months:tf(r,1,12),days:tf(i,1,f),hours:tf(n,0,23),minutes:tf(s,0,59),seconds:tf(a,0,59),milliseconds:tf(c,0,999)}),new Or(g)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(t,r){const i=pa(r);return t.isUnknownTimeZone||i===va.instance?Or.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,i):new Or(t._date.setZone(i))}static dateJSToArcadeDate(t){return new Or(_e.fromJSDate(t,{zone:"system"}))}static dateJSAndZoneToArcadeDate(t,r="system"){const i=pa(r);return new Or(_e.fromJSDate(t,{zone:i}))}static unknownEpochToArcadeDate(t){return new Or(_e.fromMillis(t,{zone:va.instance}))}static unknownDateJSToArcadeDate(t){return new Or(_e.fromMillis(t.getTime(),{zone:va.instance}))}static epochToArcadeDate(t,r="system"){const i=pa(r);return new Or(_e.fromMillis(t,{zone:i}))}static dateTimeToArcadeDate(t){return new Or(t)}clone(){return new Or(this._date)}changeTimeZone(t){const r=pa(t);return Or.dateTimeToArcadeDate(this._date.setZone(r))}static dateTimeAndZoneToArcadeDate(t,r){const i=pa(r);return t.zone===va.instance||i===va.instance?Or.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,i):new Or(t.setZone(i))}static nowToArcadeDate(t){const r=pa(t);return new Or(_e.fromJSDate(new Date,{zone:r}))}static nowUTCToArcadeDate(){return new Or(_e.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===Or.systemTimeZoneCanonicalName}equals(t){return this.isSystem&&t.isSystem?this.toNumber()===t.toNumber():this.isUnknownTimeZone===t.isUnknownTimeZone&&this._date.equals(t._date)}get isUnknownTimeZone(){return this._date.zone===va.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let t=this._date.weekday;return t>6&&(t=0),t}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const t=this.zone;return t.type==="fixed"?t.fixed===0?"UTC":t.formatOffset(0,"short"):t.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new Or(this._date.plus(t))}diff(t,r){return this._date.diff(t._date,r)[r]}toISODate(){return this._date.toISODate()}toISOString(t){return t?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(t,r){return this._date.toISOTime({suppressMilliseconds:t,includeOffset:r&&!this.isUnknownTimeZone})}toFormat(t,r){return this.isUnknownTimeZone&&(t=t.replaceAll("Z","")),this._date.toFormat(t,r)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new Or(this._date.toUTC())}toLocal(){return new Or(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(t){if(!t)return null;const r=_e.fromISO(t,{setZone:!0});return new Or(r)}};function pa(e,t=!0){if(e instanceof Qh)return e;switch(MS(e)){case"system":return"system";case"utc":return"UTC";case"unknown":return va.instance}if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(e)){const i=qr.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(i)return i}const r=zn.create(e);if(!r.isValid){if(t)throw new l3e(rT.TimeZoneNotRecognized);return null}return r}function S9(e){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let t="";const r=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const i of e.match(r)||[])switch(i){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"X":case"x":t+=i;break;default:i.length>=2&&i.slice(0,1)==="["&&i.slice(-1)==="]"?t+=`'${i.slice(1,-1)}'`:t+=`'${i}'`}return t}const T9="esri.core.sql.dateonly";let u3e=class os{constructor(t,r,i){this._year=t,this._month=r,this._day=i,this.declaredRootClass=T9}static isDateOnly(t){return typeof t=="object"&&t!=null&&"declaredRootClass"in t&&t.declaredRootClass===T9}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(t){return os.isDateOnly(t)&&t.day===this.day&&t.month===this.month&&t.year===this.year}clone(){return new os(this._year,this._month,this._day)}toDateTime(t){return _e.fromObject({day:this.day,month:this.month,year:this.year},{zone:pa(t)})}toDateTimeLuxon(t){return _e.fromObject({day:this.day,month:this.month,year:this.year},{zone:pa(t)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(t=null,r=!0){if(t===null||t==="")return this.toString();if(r&&(t=S9(t)),!t)return"";const i=this.toDateTime("unknown");return Vl.dateTimeToArcadeDate(i).toFormat(t,{locale:Un(),numberingSystem:"latn"})}toArcadeDate(){const t=this.toDateTime("unknown");return Vl.dateTimeToArcadeDate(t)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(t,r){return os.fromDateTime(this.toUTCDateTime().plus({[t]:r}))}toUTCDateTime(){return _e.utc(this.year,this.month,this.day,0,0,0,0)}difference(t,r){switch(r.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return r==="M"?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}static fromMilliseconds(t){const r=_e.fromMillis(t,{zone:qr.utcInstance});return r.isValid?os.fromParts(r.year,r.month,r.day):null}static fromSeconds(t){const r=_e.fromSeconds(t,{zone:qr.utcInstance});return r.isValid?os.fromParts(r.year,r.month,r.day):null}static fromReader(t){if(!t)return null;const r=t.split("-");return r.length!==3?null:new os(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10))}static fromParts(t,r,i){const n=new os(t,r,i);return n.isValid===!1?null:n}static fromDateJS(t){return os.fromParts(t.getFullYear(),t.getMonth()+1,t.getDay())}static fromDateTime(t){return os.fromParts(t.year,t.month,t.day)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,r=null){if(t===""||t===null)return null;const i=[];if(r)(r=S9(r))&&i.push(r);else if(r===null||r===""){const n=_e.fromISO(t,{setZone:!0});return n.isValid?os.fromParts(n.year,n.month,n.day):null}for(const n of i){const s=_e.fromFormat(t,r??n);if(s.isValid)return new os(s.year,s.month,s.day)}return null}static fromNow(t="system"){const r=_e.fromJSDate(new Date).setZone(pa(t));return new os(r.year,r.month,r.day)}};function C6e(e){if(e==null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new Xe({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function I6e(e){if(e==null)return null;const t=e.clone();return e.cache._geVersion!==void 0&&(t.cache._geVersion=e.cache._geVersion),t}function a_(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function E9(e){if(!e)return"";const t=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let r="";for(const i of e.match(t)||[])switch(i){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":r+=i;break;case"A":case"a":r+="a";break;default:r+=`'${i}'`}return r}const x9="esri.core.sql.timeonly";let c3e=class aa{constructor(t,r,i,n){this._hour=t,this._minute=r,this._second=i,this._millisecond=n,this.declaredRootClass=x9}static isTimeOnly(t){return typeof t=="object"&&t!=null&&"declaredRootClass"in t&&t.declaredRootClass===x9}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(t){return aa.isTimeOnly(t)&&t.hour===this.hour&&t.minute===this.minute&&t.second===this.second&&t.millisecond===this.millisecond}clone(){return new aa(this.hour,this.minute,this.second,this.millisecond)}isValid(){return a_(this.hour)&&a_(this.minute)&&a_(this.second)&&a_(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(t=null){return t===null||t===""?this.toString():(t=E9(t))?_e.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(t,{locale:Un(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(t,r,i,n){const s=new aa(t,r,i,n);return s.isValid()?s:null}static fromReader(t){if(!t)return null;const r=t.split(":");return r.length!==3?null:new aa(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),0)}static fromMilliseconds(t){if(t>864e5||t<0)return null;const r=Math.floor(t/1e3%60),i=Math.floor(t/6e4%60),n=Math.floor(t/36e5%24),s=Math.floor(t%1e3);return new aa(n,i,r,s)}static fromDateJS(t){return new aa(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}static fromDateTime(t){return new aa(t.hour,t.minute,t.second,t.millisecond)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,r=null){if(t===""||t===null)return null;const i=[];r?(r=E9(r))&&i.push(r):r!==null&&r!==""||(i.push("HH:mm:ss"),i.push("HH:mm:ss.SSS"),i.push("hh:mm:ss a"),i.push("hh:mm:ss.SSS a"),i.push("HH:mm"),i.push("hh:mm a"),i.push("H:mm"),i.push("h:mm a"),i.push("H:mm:ss"),i.push("h:mm:ss a"),i.push("H:mm:ss.SSS"),i.push("h:mm:ss.SSS a"));for(const n of i){const s=_e.fromFormat(t,n);if(s.isValid)return new aa(s.hour,s.minute,s.second,s.millisecond)}return null}plus(t,r){switch(t){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return aa.fromDateTime(this.toUTCDateTime().plus({[t]:r}))}return null}toUTCDateTime(){return _e.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(t,r){switch(r.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return r==="M"?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}};const d3e=["geometry","scale","timeProperties"];function N6e(e,t){if(t!=null)for(const r of d3e)t.hasArcadeDependency(r)&&e.add(r);return e}function P6e(e,t){return YX.create(e,t,null,["$feature","$view"])}function h3e(e,t,r){return YX.create(e,t,r,["$feature","$view","$config"])}let YX=class JX{static async create(t,r,i,n){const{arcade:s,Dictionary:a}=await jh();let c;try{c=s.parseScript(t)}catch(S){throw new z("arcade-bad-expression","Failed to parse arcade script",{script:t,error:S})}const d=s.scriptUsesGeometryEngine(c);d&&await s.enableGeometrySupport(),await s.loadDependentModules(new Set,c,null,!1,d);const f={vars:n.reduce(((S,T)=>({...S,[T]:null})),{}),spatialReference:r,useAsync:!1},g=s.compileScript(c,f);let v=null;i!=null&&(v=new a(i),v.immutable=!0);const w=new a;return w.immutable=!1,w.setField("scale",0),new JX(t,s,c,g,r,w,v,a)}constructor(t,r,i,n,s,a,c,d){this.script=t,this._arcade=r,this._syntaxTree=i,this._compiled=n,this._spatialReference=s,this._viewDict=a,this._configDict=c,this._dictionaryCtor=d,this._dependencies=new Map,this._featureReader=new XX,this._dependencies.set("geometry",r.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(t,r){const i=r.$view?.timeZone;if(r.$view){let n;if(this._viewDict.setField("scale",r.$view.scale),r.$view.timeProperties!=null){const{currentStart:s,currentEnd:a}=r.$view.timeProperties;n=new this._dictionaryCtor({currentStart:s!=null?i!=null?Vl.epochToArcadeDate(s,i):Vl.unknownEpochToArcadeDate(s):void 0,currentEnd:a!=null?i!=null?Vl.epochToArcadeDate(a,i):Vl.unknownEpochToArcadeDate(a):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",n)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:t},spatialReference:this._spatialReference,timeZone:i})}repurposeFeature(t,r){return this._featureReader.bind(t,r,this._spatialReference),this._featureReader}references(t){return this._dependencies.get(t)??!1}},XX=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(t,r,i){const n=r??new eT(QX(t.attributes));this._boundTarget=t,this._boundSchema.fields=n.fields,this._boundSchema.fieldsIndex=n,this._boundSchema.spatialReference=i}_getField(t){return this._boundSchema.fieldsIndex.get(t)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(t){this._contextTimeZone=t}readArcadeFeature(){return this}hasField(t){return this._boundSchema.fieldsIndex.has(t)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const t=Dc(this._boundTarget.geometry);if(t){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");t.spatialReference=this._boundSchema.spatialReference}return t}isUnknownDateTimeField(t){return this._boundSchema.fieldsIndex.getTimeZone(t)===Ic}field(t,r=!0){const i=this._getField(t);if(i){const n=this._boundTarget.attributes[i.name];if(n==null)return null;switch(i.type){case"date-only":case"esriFieldTypeDateOnly":return u3e.fromReader(n);case"time-only":case"esriFieldTypeTimeOnly":return c3e.fromReader(n);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return Vl.fromReaderAsTimeStampOffset(n);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(t)?Vl.unknownEpochToArcadeDate(n):Vl.epochToArcadeDate(n,this.contextTimeZone??zo);default:return n}}if(r)throw new Error(`Field ${t} does not exist`);return null}setField(t,r){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map((t=>t.name))}castToText(t=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(t=null){return{attributes:this._boundTarget.attributes,geometry:t?.keepGeometryType===!0?this.geometry():this.geometry()?.toJSON()??null}}castAsJsonAsync(t=null,r=null){return Promise.resolve(this.castAsJson(r))}};function QX(e){const t=[];for(const r in e)t.push({name:r,alias:r,type:typeof e[r]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return t}let p3e=class KX{static async from(t,r,i){const n=t.dictionary_version?CJ.parse(t.dictionary_version):null,s=new Set(t.itemsNames),a={};if(r)for(const v in r)a[v]=r[v];if(t.authoringInfo.configuration)for(const v of t.authoringInfo.configuration)a.hasOwnProperty(v.name)||(a[v.name]=v.value);const c=new Set(t.authoringInfo.symbol);for(const v of Object.keys(i))c.delete(v);c.size&&re.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:c});const d=await h3e(t.expression,null,a);if(!d)throw new z("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const f=!n||!n.greaterEqual(4,0);f&&re.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:n});const g=new f3e(i,f);return new KX(f,s,d,g)}constructor(t,r,i,n){this._requiresFieldCoercionToString=t,this._itemNames=r,this._compiled=i,this._reader=n}get itemNames(){return this._itemNames}evaluate(t,r,i,n){try{return this._reader.bind(t,i,n),this._compiled.evaluate(this._reader,{$view:{scale:r}})}catch(s){re.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:s})}return null}createDictionaryFieldsIndex(t){if(!this._requiresFieldCoercionToString)return new eT(t);const r=t.map((i=>({...i,type:"esriFieldTypeString"})));return new eT(r)}},f3e=class extends XX{constructor(t,r){super(),this._fieldMap=t,this._requiresFieldCoercionToString=r}_getField(t){const r=this._fieldMap[t]??t;return this._boundSchema.fieldsIndex.get(r)}field(t){if(!this._requiresFieldCoercionToString)return super.field(t,!1);const r=this._getField(t);return r==null||this._boundTarget.attributes[r.name]==null?"":""+this._boundTarget.attributes[r.name]}};var $9,M9,A9,O9,R9,C9,I9,N9,P9,L9,KC,eI,D9,k9,F9,U9,j9,z9,V9,G9,q9,B9,H9,W9,Z9,Y9,J9,X9,Q9,K9,ez,tz,rz,iz,nz,sz,oz,az,lz,uz,cz,dz,hz,pz,fz,mz,yz,gz,vz,bz,wz,_z,Sz,Tz,Ez,iT,xz,$z,Mz,Az,Oz,Rz,Cz;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})($9||($9={})),(function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"})(M9||(M9={})),(function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"})(A9||(A9={})),(function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"})(O9||(O9={})),(function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"})(R9||(R9={})),(function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"})(C9||(C9={})),(function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"})(I9||(I9={})),(function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"})(N9||(N9={})),(function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"})(P9||(P9={})),(function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"})(L9||(L9={})),(function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"})(KC||(KC={})),(function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"})(eI||(eI={})),(function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"})(D9||(D9={})),(function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"})(k9||(k9={})),(function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"})(F9||(F9={})),(function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"})(U9||(U9={})),(function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"})(j9||(j9={})),(function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"})(z9||(z9={})),(function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"})(V9||(V9={})),(function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"})(G9||(G9={})),(function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"})(q9||(q9={})),(function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"})(B9||(B9={})),(function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"})(H9||(H9={})),(function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"})(W9||(W9={})),(function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"})(Z9||(Z9={})),(function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"})(Y9||(Y9={})),(function(e){e.Fast="Fast",e.Accurate="Accurate"})(J9||(J9={})),(function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"})(X9||(X9={})),(function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"})(Q9||(Q9={})),(function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"})(K9||(K9={})),(function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"})(ez||(ez={})),(function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"})(tz||(tz={})),(function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"})(rz||(rz={})),(function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AlongLine=1]="AlongLine"})(iz||(iz={})),(function(e){e[e.Auto=0]="Auto",e[e.Clockwise=1]="Clockwise",e[e.Counterclockwise=2]="Counterclockwise"})(nz||(nz={})),(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"})(sz||(sz={})),(function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"})(oz||(oz={})),(function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"})(az||(az={})),(function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"})(lz||(lz={})),(function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"})(uz||(uz={})),(function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"})(cz||(cz={})),(function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"})(dz||(dz={})),(function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"})(hz||(hz={})),(function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"})(pz||(pz={})),(function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"})(fz||(fz={})),(function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"})(mz||(mz={})),(function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"})(yz||(yz={})),(function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"})(gz||(gz={})),(function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"})(vz||(vz={})),(function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"})(bz||(bz={})),(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(wz||(wz={})),(function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"})(_z||(_z={})),(function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"})(Sz||(Sz={})),(function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"})(Tz||(Tz={})),(function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"})(Ez||(Ez={})),(function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"})(iT||(iT={})),(function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"})(xz||(xz={})),(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})($z||($z={})),(function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"})(Mz||(Mz={})),(function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"})(Az||(Az={})),(function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"})(Oz||(Oz={})),(function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"})(Rz||(Rz={})),(function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"})(Cz||(Cz={}));const m3e={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},tI={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:iT.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:iT.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:KC.Loop,repeatdelay:0,easing:eI.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function y3e(e){return typeof e=="function"}function k6e(e,t,r,i){return y3e(e)?e(t,r,i):e}function F6e(e){return[e.r,e.g,e.b,e.a]}const g3e=` /-,
`;function Iz(e){let t=e.length;for(;t--;)if(!g3e.includes(e.charAt(t)))return!1;return!0}function U6e(e,t){const r=[];let i=0,n=-1;do if(n=e.indexOf("[",i),n>=i){if(n>i){const s=e.slice(i,n);r.push([s,null,Iz(s)])}if(i=n+1,n=e.indexOf("]",i),n>=i){if(n>i){const s=t[e.slice(i,n)];s&&r.push([null,s,!1])}i=n+1}}while(n!==-1);if(i<e.length){const s=e.slice(i);r.push([s,null,Iz(s)])}return r}function j6e(e,t,r){let i="",n=null;for(const s of t){const[a,c,d]=s;if(a!=null&&a!=="")d?n=a:(n!=null&&(i+=n,n=null),i+=a);else{const f=e.readAttribute(c);f!=null&&f!==""&&(n!==null&&(i+=n,n=null),i+=f)}}return eQ(i,r)}function z6e(e,t,r,i){let n="",s=null;for(const a of t){const[c,d,f]=a;if(c!=null&&c!=="")f?s=c:(s!=null&&(n+=s,s=null),n+=c);else{let g=d;r!=null&&(g=E3e(d,r));const v=e.attributes[g];v!=null&&v!==""&&(s!=null&&(n+=s,s=null),n+=v)}}return eQ(n,i)}function eQ(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function V6e(e,t,r,i,n,s,a=!0){const c=t/n,d=r/s,f=Math.ceil(c/2),g=Math.ceil(d/2);for(let v=0;v<s;v++)for(let w=0;w<n;w++){const S=4*(w+(a?s-v-1:v)*n);let T=0,E=0,M=0,R=0,I=0,k=0,j=0;const P=(v+.5)*d;for(let X=Math.floor(v*d);X<(v+1)*d;X++){const ae=Math.abs(P-(X+.5))/g,fe=(w+.5)*c,he=ae*ae;for(let me=Math.floor(w*c);me<(w+1)*c;me++){let Oe=Math.abs(fe-(me+.5))/f;const Se=Math.sqrt(he+Oe*Oe);Se>=-1&&Se<=1&&(T=2*Se*Se*Se-3*Se*Se+1,T>0&&(Oe=4*(me+X*t),j+=T*e[Oe+3],M+=T,e[Oe+3]<255&&(T=T*e[Oe+3]/250),R+=T*e[Oe],I+=T*e[Oe+1],k+=T*e[Oe+2],E+=T))}}i[S]=R/E,i[S+1]=I/E,i[S+2]=k/E,i[S+3]=j/M}}function v3e(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function G6e(e){return e.data?.symbol??null}function q6e(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function B6e(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function H6e(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function b3e(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const W6e=(e,t=0)=>e==null||isNaN(e)?t:e,Z6e=(e,t)=>e??t,Y6e=(e,t)=>e??t,J6e=e=>e.tintColor?v3e(e.tintColor):[255,255,255,1],X6e=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1};function Q6e(){return ue(()=>import("./geometryEngineJSON-CO8CMyeT.js").then(e=>e.g),__vite__mapDeps([25,15,16,26]))}function K6e(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function eFe(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function tFe(e){let t="normal",r="normal";if(e){const i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?r="bold":i.includes("light")&&(r="lighter")}return{style:t,weight:r}}function rFe(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function Nz(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=Nz(t);if(r!=null)return r}break;case"CIMTextSymbol":return Nz(e.symbol);case"CIMSolidFill":return e.color}return null}function Pz(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const r of t){const i=Pz(r);if(i!=null)return i}break}case"CIMTextSymbol":return Pz(e.symbol);case"CIMSolidStroke":return e.color}}function iFe(e){for(const t of e)if(t.enable)switch(t.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function Lz(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=Lz(t);if(r!==void 0)return r}break;case"CIMTextSymbol":return Lz(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function nFe(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function sFe(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function oFe(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"})))}const aFe=e=>e.includes("data:image/svg+xml");function lFe(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function fE(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function uFe(e,t,r,i,n,s,a=!0){const{infos:c}=s;let d=1,f=0,g=0,v=0,w=1;for(const{absoluteAnchorPoint:E,offsetX:M,offsetY:R,rotation:I,size:k,frameHeight:j,rotateClockWise:P,scaleSymbolsProportionally:X}of c)w=E?1:d,g=kz(M,R,f,w,g),v=Dz(M,R,f,w,v),j&&(X||a)&&(d*=k/j),f=Fz(I,P,f);const S=kz(i,n,f,w,g),T=Dz(i,n,f,w,v);return{size:e*d,rotation:Fz(t,r,f),offsetX:S,offsetY:T}}function w3e(e){if(e==null)return!1;if(Array.isArray(e))return e.every((t=>w3e(t)));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function _3e(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...m3e[t]];const r=tI[e];if(!r)throw new Error(`InternalError: default value for type ${e}.`);return r[t]}function S3e(e){return e.split(" ").map((t=>Number(t)))}function T3e(e){return typeof e=="string"?S3e(e):e}function cFe(e){return e?.dashTemplate&&(e.dashTemplate=T3e(e.dashTemplate)),e}function rI(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const r of t)if(r.type==="CIMVectorMarker")return rI(r)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const r of t)if(r.symbol)return rI(r.symbol)}}return"Normal"}function dFe(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const i=r.size??tI.CIMVectorMarker.size;i>t&&(t=i);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const i=r.width;i!=null&&i>t&&(t=i);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&b3e(r.markerPlacement)){const i=r.size??tI.CIMVectorMarker.size;i>t&&(t=i)}break;case"CIMPictureFill":{const i=r.height;i!=null&&i>t&&(t=i)}}}return t}}}function E3e(e,t){if(t!==null){const r=t.get(e);return r?r.name:e}return e}function hFe(e){return e.map((t=>({...t,propertyName:fE(t.propertyName)})))}function pFe(e){const t={};for(const r in e){const i=e[r];t[fE(r)]=i}return t}function Dz(e,t,r,i,n){const s=r*Math.PI/180;if(s){const a=Math.cos(s);return(Math.sin(s)*e+a*t)*i+n}return t*i+n}function kz(e,t,r,i,n){const s=r*Math.PI/180;return s?(Math.cos(s)*e-Math.sin(s)*t)*i+n:e*i+n}function Fz(e,t,r){return t?r-e:r+e}function fFe(e,t,r){const i=r==="Color"||r==="TintColor"||r==="ToColor",n=r==="Rotation"||r==="Angle"||r==="ToRotation";let s=t[fE(r)];if(s!=null&&(i?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180)),s==null&&(s=_3e(t.type,r.toLowerCase()),s!=null&&(i?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:n&&(s*=Math.PI/180))),t.primitiveName!=null){const a=e[t.primitiveName];if(a!=null){const c=a[r];c==null||(typeof c=="string"||typeof c=="number"||Array.isArray(c)?(s=c,s!=null&&(i?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180))):(s={valueExpressionInfo:c,defaultValue:s},s!=null&&(i?s={type:"Process",op:"ArcadeColor",value:s}:n&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(s==null)throw new Error(`Failed to derive a value or an expression for "${r}".`);return s}function mFe(e,t,r){if(t[fE(r)]!=null)return!0;if(t.primitiveName!=null){const i=e[t.primitiveName];if(i!=null&&i[r]!=null)return!0}return!1}function yFe(e,t){return Math.max(Math.min((e??t)/100,1),0)}const x3e={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let tQ=class{constructor(t,r,i,n){this.url=t,this.fieldMap=i,this.dictionaryInfo=n,this._symbolPartCache=new YMe(100);const s=async()=>p3e.from(await n,r,i);this._evaluator=s()}async getSymbolAsync(t,r,i=!0){const n=await this._evaluator,s=r?.fields??QX(t.attributes),a=n.createDictionaryFieldsIndex(s),c=n.evaluate(t,r?.scale??0,a,r?.spatialReference);if(c==null)return null;const d=FT(t.geometry),f=v9.parse(c,n.itemNames,d),g=d==="esriGeometryPoint"&&!t.geometry?.hasZ;return await this._cimPartsToCIMSymbol(t,f.partNames,f.overrides,g,r,i,a)}async getSymbolForControlString(t,r,i){const n=await this._evaluator,s=v9.parse(t,n.itemNames,r),a=r==="esriGeometryPoint"&&!i,c=Uz(await Promise.all(s.partNames.map((d=>this._getSymbolPart(d)))),s.overrides,a);return new Vi({data:c})}async _cimPartsToCIMSymbol(t,r,i,n,s,a,c){const d=r.map((v=>this._getSymbolPart(v,s)));let f=await Promise.all(d);if(a&&this.fieldMap&&f.length>0){const{OverrideHelper:v}=await ue(()=>import("./OverrideHelper-DRFiIyhS.js").then(w=>w.O),__vite__mapDeps([199,120,20]));f=U(f);for(const w of f)v.applyDictionaryTextOverrides(w,t,this.fieldMap,c,rI(w))}const g=Uz(f,i,n);return new Vi({data:g})}async _fetchSymbolPart(t,r){const i=await this.dictionaryInfo,n=(this.url+"/"+i.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,t),{data:s}=await Ft(n,{responseType:"json",query:{f:"json"},...r});return s}async _getSymbolPart(t,r){let i=this._symbolPartCache.get(t);return i||(i=this._fetchSymbolPart(t,r),this._symbolPartCache.put(t,i)),i}};function Uz(e,t,r){if(!e||e.length===0)return null;const i={...e[0]};if(e.length>1){i.effects=null,i.symbolLayers=[];for(const n of e){const s=n;if(s.effects!=null)for(const a of s.symbolLayers)a.effects==null?a.effects=s.effects:a.effects.unshift(...s.effects);i.symbolLayers.unshift(...s.symbolLayers)}}return r&&(i.callout=x3e),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}var iI;let _o=iI=class extends Oy(ps){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const e=this.getDictionaryInfo();return new tQ(this.url,this.config,this.fieldMap??{},e)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){i?.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new iI({config:U(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:U(this.fieldMap),url:U(this.url),visualVariables:U(this.visualVariables)})}async getSymbolAsync(e,t,r=!0){return this._loader.getSymbolAsync(e,t,r)}async getSymbolForControlString(e,t,r){return this._loader.getSymbolForControlString(e,t,r)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await Yi(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:e}=await Ft(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return e}};u([p({type:tQ})],_o.prototype,"_loader",null),u([p({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],_o.prototype,"config",void 0),u([p({type:Object,json:{write:!0}})],_o.prototype,"fieldMap",void 0),u([p({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],_o.prototype,"scaleExpression",void 0),u([de("scaleExpression")],_o.prototype,"writeData",null),u([p({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],_o.prototype,"scaleExpressionTitle",void 0),u([p({type:String,json:{write:!0}})],_o.prototype,"url",void 0),u([de("visualVariables")],_o.prototype,"writeVisualVariables",null),_o=iI=u([O("esri.renderers.DictionaryRenderer")],_o);var nI;let Sl=nI=class extends K{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(re.getLogger(this).error(".field: field must be a string value"),null):O1(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new nI({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([p({type:De,json:{type:[Number],write:!0}})],Sl.prototype,"color",void 0),u([p({type:String,json:{write:!0}})],Sl.prototype,"field",void 0),u([wt("field")],Sl.prototype,"castField",null),u([p({type:String,json:{write:!0}})],Sl.prototype,"label",void 0),u([p({type:String,json:{write:!0}})],Sl.prototype,"valueExpression",void 0),u([p({type:String,json:{write:!0}})],Sl.prototype,"valueExpressionTitle",void 0),Sl=nI=u([O("esri.renderers.support.AttributeColorInfo")],Sl);const rQ=Sl;var sI;let AS=sI=class extends K{constructor(){super(...arguments),this.unit=null}clone(){return new sI({unit:this.unit})}};u([p({type:String,json:{write:!0}})],AS.prototype,"unit",void 0),AS=sI=u([O("esri.renderers.support.DotDensityLegendOptions")],AS);const $3e=AS;var oI;let An=oI=class extends Oy(ps){constructor(e){super(e),this.attributes=null,this.backgroundColor=new De([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Dr,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new us({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new oI({attributes:U(this.attributes),backgroundColor:U(this.backgroundColor),dotBlendingEnabled:U(this.dotBlendingEnabled),dotShape:U(this.dotShape),dotSize:U(this.dotSize),dotValue:U(this.dotValue),legendOptions:U(this.legendOptions),outline:U(this.outline),referenceScale:U(this.referenceScale),seed:U(this.seed),visualVariables:U(this.visualVariables),authoringInfo:U(this.authoringInfo)})}getControllerHash(){return`${this.attributes?.map((t=>t.field||t.valueExpression||""))}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes??[])r.valueExpression&&await Yi(e,t,r.valueExpression),r.field&&e.add(r.field)}};u([p({type:[rQ],json:{write:!0}})],An.prototype,"attributes",void 0),u([p({type:De,json:{write:!0}})],An.prototype,"backgroundColor",void 0),u([p({type:Boolean,json:{write:!0}})],An.prototype,"dotBlendingEnabled",void 0),u([p({type:String,json:{write:!1}})],An.prototype,"dotShape",void 0),u([p({type:Number,json:{write:!0}})],An.prototype,"dotSize",void 0),u([p({type:$3e,json:{write:!0}})],An.prototype,"legendOptions",void 0),u([p({type:Dr,json:{default:null,write:!0}})],An.prototype,"outline",void 0),u([p({type:Number,json:{write:!0}})],An.prototype,"dotValue",void 0),u([p({type:Number,json:{write:!0}})],An.prototype,"referenceScale",void 0),u([p({type:Number,json:{write:!0}})],An.prototype,"seed",void 0),u([Ne({dotDensity:"dot-density"})],An.prototype,"type",void 0),An=oI=u([O("esri.renderers.DotDensityRenderer")],An);var aI;let Sc=aI=class extends K{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new aI({color:this.color&&this.color.clone(),ratio:this.ratio})}};u([p({type:De,json:{type:[dt],default:null,write:{isRequired:!0}}})],Sc.prototype,"color",void 0),u([p({type:Number,json:{write:{isRequired:!0}}})],Sc.prototype,"ratio",void 0),Sc=aI=u([O("esri.renderers.support.HeatmapColorStop")],Sc);let Pf=class extends We.ClonableMixin(K){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};u([p({type:String,json:{write:!0}})],Pf.prototype,"minLabel",void 0),u([p({type:String,json:{write:!0}})],Pf.prototype,"maxLabel",void 0),u([p({type:String,json:{write:!0}})],Pf.prototype,"title",void 0),Pf=u([O("esri.renderers.support.HeatmapLegendOptions")],Pf);function M3e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function A3e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function O3e(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function R3e(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function iQ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function nQ(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function sQ(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function C3e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function I3e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function N3e(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function P3e(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function L3e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function D3e(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function k3e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e}function oQ(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(r*r+i*i+n*n+s*s)}function aQ(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return r*r+i*i+n*n+s*s}function lQ(e){const t=e[0],r=e[1],i=e[2],n=e[3];return Math.sqrt(t*t+r*r+i*i+n*n)}function uQ(e){const t=e[0],r=e[1],i=e[2],n=e[3];return t*t+r*r+i*i+n*n}function F3e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function U3e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function j3e(e,t){const r=t[0],i=t[1],n=t[2],s=t[3];let a=r*r+i*i+n*n+s*s;return a>0&&(a=1/Math.sqrt(a),e[0]=r*a,e[1]=i*a,e[2]=n*a,e[3]=s*a),e}function z3e(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function cQ(e,t,r,i){const n=t[0],s=t[1],a=t[2],c=t[3];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=a+i*(r[2]-a),e[3]=c+i*(r[3]-c),e}function V3e(e,t=1){const r=DT;let i,n,s,a,c,d;do i=2*r()-1,n=2*r()-1,c=i*i+n*n;while(c>=1);do s=2*r()-1,a=2*r()-1,d=s*s+a*a;while(d>=1);const f=Math.sqrt((1-c)/d);return e[0]=t*i,e[1]=t*n,e[2]=t*s*f,e[3]=t*a*f,e}function G3e(e,t,r){const i=t[0],n=t[1],s=t[2],a=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12]*a,e[1]=r[1]*i+r[5]*n+r[9]*s+r[13]*a,e[2]=r[2]*i+r[6]*n+r[10]*s+r[14]*a,e[3]=r[3]*i+r[7]*n+r[11]*s+r[15]*a,e}function q3e(e,t,r){const i=t[0],n=t[1],s=t[2],a=r[0],c=r[1],d=r[2],f=r[3],g=f*i+c*s-d*n,v=f*n+d*i-a*s,w=f*s+a*n-c*i,S=-a*i-c*n-d*s;return e[0]=g*f+S*-a+v*-d-w*-c,e[1]=v*f+S*-c+w*-a-g*-d,e[2]=w*f+S*-d+g*-c-v*-a,e[3]=t[3],e}function B3e(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function H3e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function W3e(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],a=t[0],c=t[1],d=t[2],f=t[3],g=mn();return Math.abs(r-a)<=g*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-c)<=g*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(n-d)<=g*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(s-f)<=g*Math.max(1,Math.abs(s),Math.abs(f))}const Z3e=iQ,Y3e=nQ,J3e=sQ,X3e=oQ,Q3e=aQ,K3e=lQ,eAe=uQ;Object.freeze(Object.defineProperty({__proto__:null,add:R3e,ceil:C3e,copy:M3e,copyVec3:A3e,dist:X3e,distance:oQ,div:J3e,divide:sQ,dot:z3e,equals:W3e,exactEquals:H3e,floor:I3e,inverse:U3e,len:K3e,length:lQ,lerp:cQ,max:P3e,min:N3e,mul:Y3e,multiply:nQ,negate:F3e,normalize:j3e,random:V3e,round:L3e,scale:D3e,scaleAndAdd:k3e,set:O3e,sqrDist:Q3e,sqrLen:eAe,squaredDistance:aQ,squaredLength:uQ,str:B3e,sub:Z3e,subtract:iQ,transformMat4:G3e,transformQuat:q3e},Symbol.toStringTag,{value:"Module"}));function mE(){return[0,0,0,0]}function tAe(e){return[e[0],e[1],e[2],e[3]]}function Ry(e,t,r,i){return[e,t,r,i]}function rAe(e,t,r,i){return[e,t,r,i]}function iAe(e,t=mE()){const r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function dQ(){return mE()}function hQ(){return Ry(1,1,1,1)}function pQ(){return Ry(1,0,0,0)}function fQ(){return Ry(0,1,0,0)}function mQ(){return Ry(0,0,1,0)}function yQ(){return Ry(0,0,0,1)}const nAe=dQ(),sAe=hQ(),oAe=pQ(),aAe=fQ(),lAe=mQ(),uAe=yQ();Object.freeze(Object.defineProperty({__proto__:null,ONES:sAe,UNIT_W:uAe,UNIT_X:oAe,UNIT_Y:aAe,UNIT_Z:lAe,ZEROS:nAe,clone:tAe,create:mE,freeze:rAe,fromArray:iAe,fromValues:Ry,ones:hQ,unitW:yQ,unitX:pQ,unitY:fQ,unitZ:mQ,zeros:dQ},Symbol.toStringTag,{value:"Module"}));const HP=2.4;function cAe(e){return Js(e*HP)}function dAe(e){return zde(e)/HP}function hAe(e,t,r,i){let{color:n,ratio:s}=t,{color:a,ratio:c}=r;c===s&&(c===1?s-=1e-6:c+=1e-6);const d=Ys((i-s)/(c-s),0,1);cQ(e,n.toArray(),a.toArray(),d)}function bFe(e){const r=new Uint8ClampedArray(2048);if(e=e.filter((({ratio:c})=>c>=0&&c<=1)).sort(((c,d)=>c.ratio-d.ratio)).map((({color:c,ratio:d})=>({color:c,ratio:Math.max(d,.001)}))),e.length<1)return r;let i=e[0],n=e[0],s=1;const a=mE();for(let c=0;c<512;c++){const d=(c+.5)/512;for(;d>n.ratio&&s<e.length;)i=n,n=e[s++];hAe(a,i,n,d),r.set(a,4*c)}return r}function wFe(e,t,r){const i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function _Fe(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var lI;function jz(e){if(e!=null){const{maxDensity:t,minDensity:r,radius:i}=e;if(t!=null||r!=null||i!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:a,...c}=e;return c}}return e}let Kr=lI=class extends ps{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new Sc({ratio:0,color:new De("rgba(255, 140, 0, 0)")}),new Sc({ratio:.75,color:new De("rgba(255, 140, 0, 1)")}),new Sc({ratio:.9,color:new De("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return jz(e)}get blurRadius(){return dAe(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",cAe(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(HP**2*this.blurRadius**4)}read(e,t){e=jz(e),super.read(e,t)}getSymbol(){return new ti}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,i=this.valueExpression;r&&typeof r=="string"&&yn(e,t,r),i&&typeof i=="string"&&await Yi(e,t,i)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new lI({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:U(this.colorStops),field:this.field,legendOptions:U(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([p({type:Qt,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Kr.prototype,"authoringInfo",void 0),u([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Kr.prototype,"blurRadius",null),u([p({type:[Sc],json:{write:{isRequired:!0}}})],Kr.prototype,"colorStops",void 0),u([p({type:String,json:{write:!0}})],Kr.prototype,"field",void 0),u([p({type:Pf,json:{write:!0}})],Kr.prototype,"legendOptions",void 0),u([p({type:Number,json:{write:!0}})],Kr.prototype,"maxDensity",void 0),u([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Kr.prototype,"maxPixelIntensity",null),u([p({type:Number,json:{write:!0}})],Kr.prototype,"minDensity",void 0),u([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Kr.prototype,"minPixelIntensity",null),u([p({type:Number,cast:ut,json:{write:!0}})],Kr.prototype,"radius",void 0),u([p({type:Number,range:{min:0},json:{default:0,write:!0}})],Kr.prototype,"referenceScale",void 0),u([Ne({heatmap:"heatmap"})],Kr.prototype,"type",void 0),u([p({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Kr.prototype,"valueExpression",void 0),u([p({type:String})],Kr.prototype,"valueExpressionTitle",void 0),u([p({readOnly:!0})],Kr.prototype,"_pixelIntensityToDensity",null),Kr=lI=u([O("esri.renderers.HeatmapRenderer")],Kr);let rh=class extends We.ClonableMixin(K){constructor(){super(...arguments),this.color=new De([0,0,0,0]),this.label=null,this.threshold=0}};u([p({type:De,json:{write:!0}})],rh.prototype,"color",void 0),u([p({type:String,json:{write:!0}})],rh.prototype,"label",void 0),u([p({type:Number,range:{min:0,max:1},json:{write:!0}})],rh.prototype,"threshold",void 0),rh=u([O("esri.renderers.support.OthersCategory")],rh);const pAe={base:Fi,key:"type",typeMap:{size:pt,opacity:Dl}};let On=class extends Oy(We.ClonableMixin(ps)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new De([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new rh,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){return new ti({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Yl)}getAttributeHash(){return this.visualVariables?.reduce(((t,r)=>t+r.getAttributeHash()),"")??""}getMeshHash(){return this.symbols.reduce(((t,r)=>t+JSON.stringify(r)),"")}async collectRequiredFields(t,r){await this.collectVVRequiredFields(t,r);for(const i of this.attributes)i.valueExpression&&await Yi(t,r,i.valueExpression),i.field&&t.add(i.field)}};u([p({type:[rQ],json:{write:!0}})],On.prototype,"attributes",void 0),u([p(LP)],On.prototype,"backgroundFillSymbol",void 0),u([p({type:De,json:{write:!0}})],On.prototype,"defaultColor",void 0),u([p({type:String,json:{write:!0}})],On.prototype,"defaultLabel",void 0),u([p({type:Number,range:{min:0,max:1},json:{write:!0}})],On.prototype,"holePercentage",void 0),u([p({type:rh,json:{write:!0}})],On.prototype,"othersCategory",void 0),u([p({type:DP,json:{write:!0}})],On.prototype,"legendOptions",void 0),u([p({type:Dr,json:{default:null,write:!0}})],On.prototype,"outline",void 0),u([p({type:Number,cast:ut,json:{write:!0}})],On.prototype,"size",void 0),u([Ne({pieChart:"pie-chart"})],On.prototype,"type",void 0),u([p({types:[pAe]})],On.prototype,"visualVariables",void 0),On=u([O("esri.renderers.PieChartRenderer")],On);const X1={key:"type",base:ps,typeMap:{heatmap:Kr,simple:dn,"unique-value":Vt,"class-breaks":Rr,"dot-density":An,dictionary:_o,"pie-chart":On},errorContext:"renderer"},fAe={key:"type",base:ps,typeMap:{simple:dn,"unique-value":Vt,"class-breaks":Rr,heatmap:Kr},errorContext:"renderer",validate:mAe};function mAe(e){switch(e.type){case"simple":return yAe(e);case"unique-value":return gAe(e);case"class-breaks":return vAe(e);case"heatmap":return e}}function yAe(e){if(e.symbol)return e;re.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function gAe(e){const t=e.uniqueValueInfos,r=t?.filter((({symbol:i,label:n},s)=>(i||re.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${n}) without a symbol from web scene.`),!!i)));return r?.length!==t?.length&&(e.uniqueValueInfos=r),e}function vAe(e){const t=e.classBreakInfos,r=t?.filter((({symbol:i,label:n},s)=>(i||re.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${n}) without a symbol from web scene.`),!!i)));return r?.length!==t?.length&&(e.classBreakInfos=r),e}function EFe(e,t){return g1(e,null,t)}const bAe=yy({types:X1});function g1(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r?.messages&&r.messages.push(new gs("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):bAe(e,t,r):null}var uI;let $i=uI=class extends $c{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=ut("12px"),this.fields=[],this.renderer=null}writeFields(e,t,r){const i=e.filter((n=>n.statisticType!=="avg_angle")).map((n=>n.toJSON()));ii(r,i,t)}readRenderer(e,t,r){const i=t.drawingInfo?.renderer;return i?g1(i,t,r)??void 0:FP(t,r)}clone(){return new uI({fields:U(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:U(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:U(this.popupTemplate),renderer:U(this.renderer),binType:U(this.binType),size:this.size})}};u([Ne({binning:"binning"})],$i.prototype,"type",void 0),u([Ne({geohash:"geohash",square:"square"}),p({type:["geohash","square"]})],$i.prototype,"binType",void 0),u([p({type:Number,json:{write:!0}})],$i.prototype,"fixedBinLevel",void 0),u([p({type:[Wt],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],$i.prototype,"labelingInfo",void 0),u([p(lE)],$i.prototype,"labelsVisible",void 0),u([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],$i.prototype,"maxScale",void 0),u([p(aE)],$i.prototype,"popupEnabled",void 0),u([p({type:Ey,json:{name:"popupInfo",write:!0}})],$i.prototype,"popupTemplate",void 0),u([p({cast:e=>e==="auto"?e:un(ut(e))})],$i.prototype,"size",void 0),u([p({type:[zi],json:{write:!0}})],$i.prototype,"fields",void 0),u([de("fields")],$i.prototype,"writeFields",null),u([p({types:X1,json:{write:{target:"drawingInfo.renderer"}}})],$i.prototype,"renderer",void 0),u([le("renderer",["drawingInfo.renderer"])],$i.prototype,"readRenderer",null),$i=uI=u([O("esri.layers.support.FeatureReductionBinning")],$i);var cI;function zz(e){return e.type==="simple"&&!e.visualVariables?.length}let Cr=cI=class extends K{constructor(e){super(e),this.type="cluster",this.clusterRadius=ut("80px"),this.clusterMinSize=ut("12px"),this.clusterMaxSize=ut("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,r){const i=t.drawingInfo?.renderer;return i?.authoringInfo?.isAutoGenerated?null:i?zz(i)?null:g1(i,t,r)??void 0:FP(t,r)}readSymbol(e,t,r){const i=t.drawingInfo?.renderer;return i?.authoringInfo?.isAutoGenerated?null:i&&zz(i)?g1(i,t,r)?.symbol:null}writeSymbol(e,t,r,i){const n=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||n){const s=new dn({symbol:e});t.drawingInfo={renderer:s.write({},i)}}}writeFields(e,t,r){const i=e.filter((n=>n.statisticType!=="avg_angle")).map((n=>n.toJSON()));ii(r,i,t)}readFields(e,t,r){return e.filter((i=>!i.isAutoGenerated)).map((i=>zi.fromJSON(i)))}clone(){return new cI({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:U(this.labelingInfo),labelsVisible:this.labelsVisible,fields:U(this.fields),maxScale:this.maxScale,renderer:U(this.renderer),symbol:U(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:U(this.popupTemplate)})}};u([p({type:["cluster"],readOnly:!0,json:{write:!0}})],Cr.prototype,"type",void 0),u([p({cast:e=>e==="auto"?e:un(ut(e)),json:{write:!0}})],Cr.prototype,"clusterRadius",void 0),u([p({type:Number,cast:ut,json:{write:!0}})],Cr.prototype,"clusterMinSize",void 0),u([p({type:Number,cast:ut,json:{write:!0}})],Cr.prototype,"clusterMaxSize",void 0),u([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Cr.prototype,"maxScale",void 0),u([p(aE)],Cr.prototype,"popupEnabled",void 0),u([p({type:Ey,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Cr.prototype,"popupTemplate",void 0),u([p({types:X1,json:{write:{target:"drawingInfo.renderer"}}})],Cr.prototype,"renderer",void 0),u([le("renderer",["drawingInfo.renderer"])],Cr.prototype,"readRenderer",null),u([p({types:pge})],Cr.prototype,"symbol",void 0),u([le("symbol",["drawingInfo.renderer"])],Cr.prototype,"readSymbol",null),u([de("symbol")],Cr.prototype,"writeSymbol",null),u([p({type:[Wt],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Cr.prototype,"labelingInfo",void 0),u([p(lE)],Cr.prototype,"labelsVisible",void 0),u([p({type:[zi],json:{write:!0}})],Cr.prototype,"fields",void 0),u([de("fields")],Cr.prototype,"writeFields",null),u([le("fields")],Cr.prototype,"readFields",null),Cr=cI=u([O("esri.layers.support.FeatureReductionCluster")],Cr);var dI;let zv=dI=class extends $c{constructor(e){super(e),this.type="selection"}clone(){return new dI}};u([p({type:["selection"]})],zv.prototype,"type",void 0),zv=dI=u([O("esri.layers.support.FeatureReductionSelection")],zv);const Vz={key:"type",base:$c,typeMap:{cluster:Cr,binning:$i}},wAe={types:{key:"type",base:$c,typeMap:{selection:zv,cluster:Cr,binning:$i}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:Vz},"portal-item":{types:Vz},"web-scene":{types:{key:"type",base:$c,typeMap:{selection:zv}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:kt}}}}},_Ae=()=>re.getLogger("esri.views.2d.layers.support.clusterUtils");V.add("esri-cluster-arcade-enabled",!0);const SAe=V("esri-cluster-arcade-enabled"),TAe=new Set(["simple-line","simple-fill","picture-fill"]);function Gz(e,t){let r=t.clone();if(!EAe(r))return r;if(t.symbols.some((i=>TAe.has(i.type)))&&(r=new dn({symbol:new ti})),r.authoringInfo||(r.authoringInfo=new Qt),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const i=(r.visualVariables||[]).filter((n=>n.valueExpression!=="$view.scale"));i.forEach((n=>{n.type==="rotation"?n.field?n.field=Ed(e,n.field,"avg_angle","number"):n.valueExpression&&(n.field=p0(e,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=Ed(e,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=Ed(e,n.field,"avg","number"):n.valueExpression&&(n.field=p0(e,n.valueExpression,"avg","number"),n.valueExpression=null)})),r.visualVariables=i}switch(r.type){case"simple":break;case"pie-chart":for(const i of r.attributes)i.field?i.field=Ed(e,i.field,"sum","number"):i.valueExpression&&(i.field=p0(e,i.valueExpression,"sum","number"),i.valueExpression=null);break;case"unique-value":r.field?r.field=Ed(e,r.field,"mode","string"):r.valueExpression&&(r.field=p0(e,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=Ed(e,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=Ed(e,r.field,"avg","number"):r.valueExpression&&(r.field=p0(e,r.valueExpression,"avg","number"),r.valueExpression=null)}return r}const EAe=e=>{const t=r=>_Ae().error(new z("Unsupported-renderer",r,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const r=e.normalizationType;if(r!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!SAe){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some((r=>!(!("valueExpression"in r)||!r.valueExpression))))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function xAe(e,t,r){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const i=r,n="field",s=t.toLowerCase()+",norm:"+n+","+i.toLowerCase();return"cluster_avg_"+TN(s)}}}function p0(e,t,r,i){const n=TN(t),s=r==="mode"?`cluster_type_${n}`:r==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return e.some((a=>a.name===s))||e.push(new zi({name:s,isAutoGenerated:!0,onStatisticExpression:new pc({expression:t,returnType:i}),statisticType:r})),s}function Ed(e,t,r,i,n){if(t==="cluster_count"||e.some((a=>a.name===t)))return t;const s=xAe(r,t,n);return e.some((a=>a.name===s))||(r==="avg_norm"?e.push(new zi({name:s,isAutoGenerated:!0,onStatisticExpression:new pc({expression:`$feature.${t} / $feature.${n}`,returnType:i}),statisticType:"avg"})):e.push(new zi({name:s,isAutoGenerated:!0,onStatisticField:t,statisticType:r}))),s}const $Ae=e=>{let t=class extends e{constructor(...r){super(...r),this.addHandles(je((()=>this.renderer),(()=>{if(this.featureReduction){const i=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",i)}}),Oa))}set featureReduction(r){const i=this._normalizeFeatureReduction(r);this._set("featureReduction",i)}set renderer(r){}_withClusterVariable(r,i,n){const s=r.clone();return"visualVariables"in s&&(s.visualVariables||(s.visualVariables=[]),s.visualVariables.some((a=>a.type==="size"))||s.visualVariables.push(new pt({field:"cluster_count",stops:[new Ao({value:1}),new Ao({useMinValue:!0,size:i}),new Ao({useMaxValue:!0,size:n})]}))),s}_normalizeFeatureReduction(r){if(r?.type!=="cluster")return r;const i=r.clone(),n=[new zi({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(i.fields??[]).filter((v=>!v.isAutoGenerated)),a=r.renderer&&!r.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:c,clusterMaxSize:d}=i;if(a){i.fields=[...n,...s];const v=this._withClusterVariable(i.renderer,c,d);return i.effectiveFeatureRenderer=v,i.effectiveClusterRenderer=v,i}if(r.symbol){if(i.fields=[...n,...s],i.renderer=null,!this.renderer)return i.effectiveFeatureRenderer=null,i.effectiveClusterRenderer=null,i;const v=Gz(n,this.renderer),w=this._withClusterVariable(v,c,d),S="visualVariables"in w&&w.visualVariables?w.visualVariables:[],T=new dn({symbol:r.symbol,visualVariables:S});return i.fields=[...n,...s],i.effectiveFeatureRenderer=w,i.effectiveClusterRenderer=T,i}if(!this.renderer)return r;const f=Gz(n,this.renderer);i.fields=[...n,...s],i.renderer=f;const g=this._withClusterVariable(f,c,d);return i.effectiveFeatureRenderer=g,i.effectiveClusterRenderer=g,i}};return u([p(wAe)],t.prototype,"featureReduction",null),t=u([O("esri.layers.mixins.FeatureReductionLayer")],t),t},qz={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},Bz={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},Hz={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},MAe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":qz,"web-map/basemap":Bz,"web-map/tables":Hz,"link-chart/operational-layers":{...qz,LinkChartLayer:!0},"link-chart/basemap":Bz,"link-chart/tables":Hz,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},AAe=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,i,n){return n?.portalItem?.type==="Group Layer"?void 0:r}writeListMode(r,i,n,s){(s&&s.layerContainerType==="ground"||r&&Pse(this,n,{},s))&&(i[n]=r)}writeOperationalLayerType(r,i,n){r&&(i[n]=r)}writeTitle(r,i){i.title=r??"Layer"}readVisibilityTimeExtent(r){return r?Lr.fromArray(r):null}writeVisibilityTimeExtent(r,i,n,s){r&&s.layerContainerType!=="tables"&&(r.isEmpty?s?.messages&&s.messages.push(new z("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):i[n]=r.toArray())}read(r,i){i&&(i.layer=this),Cse(this,r,(n=>super.read(r,n)),i)}write(r,i){if(!this.persistenceEnabled&&!i?.ignorePersistenceEnabled)return null;if(i?.origin){const a=`${i.origin}/${i.layerContainerType||"operational-layers"}`;let d=!!MAe[a]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&a==="web-scene/operational-layers"&&(d=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&a==="web-map/operational-layers"&&(d=!1),!d)return i.messages?.push(new z("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${a}'`,{layer:this})),null}const n=super.write(r,{...i,layer:this}),s=!!i&&!!i.messages&&!!i.messages.filter((a=>a instanceof z&&a.name==="web-document-write:property-required")).length;return cy(n?.url)?(i?.messages?.push(new z("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:n}beforeSave(){}};return u([p({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),u([le("id",["id"])],t.prototype,"readId",null),u([p(lX)],t.prototype,"listMode",void 0),u([de("listMode")],t.prototype,"writeListMode",null),u([p({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:kt,isRequired:!0}}}}})],t.prototype,"operationalLayerType",void 0),u([de("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),u([p(SC)],t.prototype,"opacity",void 0),u([p({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),u([p({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),u([de("title"),de(["web-scene"],"title")],t.prototype,"writeTitle",null),u([p({type:Lr,json:{origins:{"web-scene":{write:{layerContainerTypes:kt}}}}})],t.prototype,"visibilityTimeExtent",void 0),u([le("visibilityTimeExtent")],t.prototype,"readVisibilityTimeExtent",null),u([de(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[dt,gT]]}})],t.prototype,"writeVisibilityTimeExtent",null),u([p({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:kt}}})],t.prototype,"visible",void 0),t=u([O("esri.layers.mixins.OperationalLayer")],t),t};var hI;const l_=new tt({asc:"ascending",desc:"descending"});var Um;let ih=(Um=class extends K{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new hI({field:this.field,valueExpression:this.valueExpression,order:this.order})}},hI=Um,Um);u([p({type:String,json:{write:!0}})],ih.prototype,"field",void 0),u([p({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],ih.prototype,"valueExpression",void 0),u([p({type:l_.apiValues,json:{type:l_.jsonValues,read:l_.read,write:l_.write}})],ih.prototype,"order",void 0),ih=hI=u([O("esri.layers.support.OrderByInfo")],ih);function OAe(e,t,r){if(!e)return null;const i=e.find((s=>!!s.field));if(!i)return null;const n=new ih;return n.read(i,r),[n]}function RAe(e,t,r,i){const n=e.find((s=>!!s.field));n&&ii(r,[n.toJSON()],t)}const CAe={type:[ih],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:OAe},write:{writer:RAe}}},IAe=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return u([p(CAe)],t.prototype,"orderBy",void 0),t=u([O("esri.layers.mixins.OrderedLayer")],t),t},NAe=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=rr(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,i,n){if(i.itemId)return new Ge({id:i.itemId,portal:n?.portal})}writePortalItem(r,i){r?.id&&(i.itemId=r.id)}async loadFromPortal(r,i){if(this.portalItem?.id)try{const{load:n}=await ue(()=>import("./layersLoader-P1p3zvwm.js"),__vite__mapDeps([283,11,10,12,284]));return Yt(i),await n({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap,populateGroupLayer:r.populateGroupLayer},i)}catch(n){throw Zi(n)||re.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch((i=>(ya(i),!0))))}async setUserPrivileges(r,i){if(!ct.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(i);if(this.url)try{const{features:{edit:n,fullEdit:s},content:{updateItem:a}}=await this._fetchUserPrivileges(r,i);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",a)}catch(n){ya(n)}}async _fetchUserPrivileges(r,i){let n=this.portalItem;if(!r||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(i);const s=!nt?.findCredential(this.url),a=r===n.id;if(a&&n.portal.user)return this._getUserPrivileges(n,s);let c,d;if(a)c=n.portal.url;else try{c=await _N(this.url,i)}catch(w){ya(w)}if(!c||!Lre(c,n.portal.url))return this._fetchFallbackUserPrivileges(i);try{const w=i!=null?i.signal:null;d=await nt?.getCredential(`${c}/sharing`,{prompt:!1,signal:w})}catch(w){ya(w)}const f=!0,g=!1,v=!1;if(!d)return{features:{edit:f,fullEdit:g},content:{updateItem:v}};try{if(a?await n.reload():(n=new Ge({id:r,portal:{url:c}}),await n.load(i)),n.portal.user)return this._getUserPrivileges(n,s)}catch(w){ya(w)}return{features:{edit:f,fullEdit:g},content:{updateItem:v}}}_getUserPrivileges(r,i){const n=AMe(r);return i&&(n.features.edit=!0),n}async _fetchFallbackUserPrivileges(r){let i=!0;try{i=await this._fetchUserHasEditingPrivileges(r)}catch(n){ya(n)}return{features:{edit:i,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const i=this.url?nt?.findCredential(this.url):null;if(!i)return!0;const n=u_.credential===i?u_.user:await this._fetchEditingUser(r);return u_.credential=i,u_.user=n,n?.privileges==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(r){const i=this.portalItem?.portal?.user;if(i)return i;const n=nt?.findServerInfo(this.url??"");if(!n?.owningSystemUrl)return null;const s=`${n.owningSystemUrl}/sharing/rest`,a=se.getDefault();if(a&&a.loaded&&Lo(a.restUrl)===Lo(s))return a.user;const c=`${s}/community/self`,d=r!=null?r.signal:null,f=await vT(Ft(c,{authMode:"no-prompt",query:{f:"json"},signal:d}));return f.ok?$t.fromJSON(f.value.data):null}read(r,i){i&&(i.layer=this),super.read(r,i)}write(r,i){const n=i?.portal,s=this.portalItem?.id&&(this.portalItem.portal||se.getDefault());return n&&s&&!q7(s.restUrl,n.restUrl)?(i.messages&&i.messages.push(new z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...i,layer:this})}};return u([p({type:Ge})],t.prototype,"portalItem",null),u([le("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),u([de("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),u([p({clonable:!1})],t.prototype,"resourceReferences",void 0),u([p({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),u([p({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),u([p({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=u([O("esri.layers.mixins.PortalLayer")],t),t},u_={credential:null,user:null};let dv=class extends Ae{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};u([p()],dv.prototype,"updating",void 0),u([p()],dv.prototype,"status",void 0),dv=u([O("esri.layers.support.PublishingInfo")],dv);const PAe=Symbol(),LAe=e=>{var i;var t;let r=(i=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const n=this._get("publishingInfo");if(n)return n;const s=new dv;return this._checkPublishingStatus(s),s}_checkPublishingStatus(n){let c=0;const d=async g=>{let v;n.updating=!0;try{v=await this.fetchPublishingStatus()}catch{v="unavailable"}v!=="published"&&v!=="unavailable"||(n.status==="publishing"&&this.refresh(),f.remove()),n.status=v,n.updating=!1,f.removed||(c=setTimeout(d,g,g+125))},f={removed:!1,remove(){this.removed=!0,clearTimeout(c)}};this.when().catch((()=>f.remove())),d(250),this.addHandles(f)}},t=PAe,i);return u([p({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=u([O("esri.layers.mixins.PublishableLayer")],r),r},Tc=new ge,Vv=new WeakMap;function DAe(e){FAe(e)&&Tc.push(new WeakRef(e))}function kAe(e){const t=Tc.find((r=>r.deref()===e));t&&Tc.remove(t)}function FAe(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function gQ(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:gQ(t,e%t):0}let y3=0,c_=0;function UAe(){const e=Date.now();let t=!1;for(const r of Tc){const i=r.deref();i?i.refreshInterval&&e-(Vv.get(i)??0)+5>=6e4*i.refreshInterval&&(Vv.set(i,e),i.refresh(e)):t=!0}if(t)for(let r=Tc.length-1;r>=0;r--)Tc.at(r).deref()||Tc.removeAt(r)}DV((()=>{const e=Date.now();let t=0;for(const r of Tc){const i=r.deref();i&&(t=gQ(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?Vv.get(i)||Vv.set(i,e):Vv.delete(i))}if(t!==c_){if(c_=t,clearInterval(y3),c_===0)return void(y3=0);y3=setInterval(UAe,c_)}}),Oa);const Wz=.1,jAe=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=DI((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||DAe(this)}),(()=>{}))}destroy(){kAe(this)}castRefreshInterval(r){return r>=Wz?r:r<=0?0:Wz}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){A3(this._debounceHasDataChanged()).then((i=>{i&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:i})}),(i=>{re.getLogger(this).error(i),this.emit("refresh",{dataChanged:!1,error:i})}))}async hasDataChanged(){return!0}get test(){}};return u([p({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:kt}}}}})],t.prototype,"refreshInterval",void 0),u([wt("refreshInterval")],t.prototype,"castRefreshInterval",null),u([p({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),u([p({readOnly:!0})],t.prototype,"refreshParameters",null),t=u([O("esri.layers.mixins.RefreshableLayer")],t),t},zAe=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},i=this.parent;i&&"effectiveScaleRange"in i&&VAe(r,i.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===r.minScale&&n.maxScale===r.maxScale?n:r}};return u([p({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),u([p({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),u([p({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=u([O("esri.layers.mixins.ScaleRangeLayer")],t),t};function VAe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const vQ=wi()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Gl=class extends We.ClonableMixin(K){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return SH(this.value,this.unit,"milliseconds")}};u([Ne(vQ,{nonNullable:!0})],Gl.prototype,"unit",void 0),u([p({type:Number,json:{write:!0},nonNullable:!0})],Gl.prototype,"value",void 0),Gl=u([O("esri.time.TimeInterval")],Gl);function Zz(e,t){return Gl.fromJSON({value:e,unit:t})}let di=class extends We.ClonableMixin(K){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,r){return r.timeExtent&&Array.isArray(r.timeExtent)&&r.timeExtent.length===2?Lr.fromArray(r.timeExtent):null}writeFullTimeExtent(t,r){t?.start!=null&&t.end!=null?r.timeExtent=t.toArray():r.timeExtent=null}readInterval(t,r){return r.timeInterval&&r.timeIntervalUnits?Zz(r.timeInterval,r.timeIntervalUnits):r.defaultTimeInterval&&r.defaultTimeIntervalUnits?Zz(r.defaultTimeInterval,r.defaultTimeIntervalUnits):null}writeInterval(t,r){r.timeInterval=t?.toJSON().value??null,r.timeIntervalUnits=t?.toJSON().unit??null}};u([p({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],di.prototype,"cumulative",void 0),u([p({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],di.prototype,"endField",void 0),u([p({type:Lr,json:{write:{enabled:!0,allowNull:!0}}})],di.prototype,"fullTimeExtent",void 0),u([le("fullTimeExtent",["timeExtent"])],di.prototype,"readFullTimeExtent",null),u([de("fullTimeExtent")],di.prototype,"writeFullTimeExtent",null),u([p({type:Boolean,json:{write:!0}})],di.prototype,"hasLiveData",void 0),u([p({type:Gl,json:{write:{enabled:!0,allowNull:!0}}})],di.prototype,"interval",void 0),u([le("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],di.prototype,"readInterval",null),u([de("interval")],di.prototype,"writeInterval",null),u([p({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],di.prototype,"startField",void 0),u([p(l2("timeReference",!0))],di.prototype,"timeZone",void 0),u([p({type:String,json:{write:{enabled:!0,allowNull:!0}}})],di.prototype,"trackIdField",void 0),u([p({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],di.prototype,"useTime",void 0),u([p({type:[Date],json:{read:!1}})],di.prototype,"stops",void 0),di=u([O("esri.layers.support.TimeInfo")],di);const GAe={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:kt}}},qAe=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,i){const n=i.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,a=vQ.fromJSON(n.timeOffsetUnits);return s&&a?new Gl({value:s,unit:a}):null}set timeInfo(r){cW(r,this.fieldsIndex),this._set("timeInfo",r)}};return u([p({type:Lr,json:{write:!1}})],t.prototype,"timeExtent",void 0),u([p({type:Gl})],t.prototype,"timeOffset",void 0),u([le("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),u([p({value:null,type:di,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),u([p(GAe)],t.prototype,"useViewTime",void 0),t=u([O("esri.layers.mixins.TemporalLayer")],t),t};let js=class extends We.ClonableMixin(K){constructor(t){super(t),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};u([p({type:[Wt],json:{write:!0}})],js.prototype,"labelingInfo",void 0),u([p(lE)],js.prototype,"labelsVisible",void 0),u([p({types:X1,json:{write:!0}})],js.prototype,"renderer",void 0),u([p({type:Boolean,json:{write:!0}})],js.prototype,"visible",void 0),js=u([O("esri.layers.support.TrackPartInfo")],js);let Rn=class extends We.ClonableMixin(K){constructor(t){super(t),this.enabled=!0,this.fields=[],this.latestObservations=new js({renderer:new dn({symbol:J2.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new js({renderer:new dn({symbol:J2.clone()})}),this.trackLines=new js({renderer:new dn({symbol:NP.clone()})}),this.timeField="startTimeField"}writeFields(t,r,i){const n=t.filter((s=>s.statisticType!=="avg_angle")).map((s=>s.toJSON()));ii(i,n,r)}};u([p({type:Boolean,json:{write:!0}})],Rn.prototype,"enabled",void 0),u([p({type:[zi],json:{write:!0}})],Rn.prototype,"fields",void 0),u([de("fields")],Rn.prototype,"writeFields",null),u([p({type:js,json:{write:!0}})],Rn.prototype,"latestObservations",void 0),u([p({type:Gl,json:{write:!0}})],Rn.prototype,"maxDisplayDuration",void 0),u([p({type:Number,json:{write:!0}})],Rn.prototype,"maxDisplayObservationsPerTrack",void 0),u([p(aE)],Rn.prototype,"popupEnabled",void 0),u([p({type:Ey,json:{name:"popupInfo",write:!0}})],Rn.prototype,"popupTemplate",void 0),u([p({type:js,json:{write:!0}})],Rn.prototype,"previousObservations",void 0),u([p({type:js,json:{write:!0}})],Rn.prototype,"trackLines",void 0),u([p({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],Rn.prototype,"timeField",void 0),Rn=u([O("esri.layers.support.TrackInfo")],Rn);const BAe=e=>{let t=class extends e{constructor(){super(...arguments),this.trackInfo=null}};return u([p({type:Rn})],t.prototype,"trackInfo",void 0),t=u([O("esri.layers.mixins.TrackableLayer")],t),t},Yz=new tt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let fa=class extends We.ClonableMixin(K){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};u([p({json:{write:!0}})],fa.prototype,"name",void 0),u([p({json:{write:!0}})],fa.prototype,"description",void 0),u([p({json:{read:Yz.read,write:Yz.write}})],fa.prototype,"drawingTool",void 0),u([p({json:{write:!0}})],fa.prototype,"prototype",void 0),u([p({json:{write:!0}})],fa.prototype,"thumbnail",void 0),fa=u([O("esri.layers.support.FeatureTemplate")],fa);let ha=class extends We.ClonableMixin(K){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const r={};for(const i of Object.keys(t))r[i]=BT(t[i]);return r}writeDomains(t,r){const i={};for(const n of Object.keys(t))t[n]&&(i[n]=t[n]?.toJSON());r.domains=i}};u([p({json:{write:!0}})],ha.prototype,"id",void 0),u([p({json:{write:!0}})],ha.prototype,"name",void 0),u([p({json:{write:!0}})],ha.prototype,"domains",void 0),u([le("domains")],ha.prototype,"readDomains",null),u([de("domains")],ha.prototype,"writeDomains",null),u([p({type:[fa],json:{write:!0}})],ha.prototype,"templates",void 0),ha=u([O("esri.layers.support.FeatureType")],ha);function HAe(){return{fields:{type:[pi],value:null,set:function(e){if(e&&V("big-integer-warning-enabled")){const t=e.filter((r=>r.type==="big-integer"||r.type==="oid"&&(r.length||0)>=8));if(t.length){const r=t.map((i=>`'${i.name}'`)).join(", ");re.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${r}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return eT.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e?.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex?.has(t)||re.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return zT(this.fieldsIndex,e)}}}}const g3=()=>re.getLogger("esri.layers.support.labelingInfo"),WAe=/\[([^[\]]+)\]/gi;function Jz(e,t,r){return e?e.map((i=>{const n=new Wt;if(n.read(i,r),n.labelExpression){const s=t.fields||t.layerDefinition?.fields||this.fields;n.labelExpression=n.labelExpression.replaceAll(WAe,((a,c)=>`[${ZAe(c,s)}]`))}return n})):null}function ZAe(e,t){if(!t)return e;const r=e.toLowerCase();for(let i=0;i<t.length;i++){const n=t[i].name;if(n.toLowerCase()===r)return n}return e}const Xz=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],YAe={esriGeometryPoint:Xz,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:Xz,esriGeometryEnvelope:null};function IFe(e,t){const r=[];for(const i of e){const n=i.labelPlacement,s=YAe[t];if(!i.symbol)return g3().warn("No ILabelClass symbol specified."),[];if(!s)return g3().error(new z("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(s.includes(n))r.push(i);else{const a=s[0];n&&g3().warn(`Found invalid label placement type ${n} for ${t}. Defaulting to ${a}`);const c=i.clone();c.labelPlacement=a,r.push(c)}}return r}const JAe="relationships/",XAe="expression/";let en=class extends Ae{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||bT((()=>jh())):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??ue(()=>import("./featureUtils-qWuBDcz2.js"),__vite__mapDeps([168,21])).then((e=>this._featureUtils=e))}get calculatedExpressions(){const e=new ge;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const t of this.expressionsUsedInTitle??[])e.push({name:t.name,invalid:!0});return e}for(const t of this.expressionsUsedInTitle)try{const r=this._arcadeTask.value.arcade.parseScript(t.expression,["$layer","$map","$datastore"]);if(r.isAsync){e.push({name:t.name,invalid:!0});break}e.push({name:t.name,syntax:r,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(r,{vars:{$feature:"any"}})})}catch{e.push({name:t.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return typeof e!="string"?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter((t=>e.includes(`{expression/${t.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>e.invalid===!0))}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const r of this.calculatedExpressions?.toArray()??[])try{const i=this._arcadeTask.value.arcade.extractFieldLiterals(r.syntax);for(const n of i){const s=n.split("."),a=this.fieldsIndex.get(s.at(-1)??"");a&&e.add(a.name)}}catch{}const t=this._extractFieldNames(this.workingTitle);for(const r of t){const i=this.fieldsIndex.get(r);i&&e.add(i.name)}return this.objectIdField!=null&&e.add(this.objectIdField),e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return e===""||e==null||this.hasBadExpressions||typeof e!="string"?this.titleFromDisplayField:e}async getTitle(e,t,r){const i=t.getObjectId()??t.attributes[e.objectIdField];return(await this.getTitles(e,[t],r)).get(i)??""}async getTitles(e,t,r){const i=new Map,n=r?.timeZone??"system";try{const[{substituteFieldsInLinksAndAttributes:s}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);r?.fetchMissingFields&&(t=await this._checkAndReQueryGraphics(e,t));const{fieldInfoMap:a,workingTitle:c}=this,d=c&&a;t.forEach((f=>{const g=f.getObjectId()??f.attributes[e.objectIdField],v=d?s({attributes:f.attributes,expressionAttributes:null,fieldInfoMap:a,globalAttributes:this._createFormattedAttributes(e,f,n).global,layer:e,text:c}):"";i.set(g,v)}))}catch{}return i}async _checkAndReQueryGraphics(e,t){const r=t.map((i=>i.getObjectId()??i.attributes[e.objectIdField])).filter(Yl);if(r.length!==t.length)return t;if(t.some((i=>!dye(i,this.requiredFields)))){const i=e.createQuery();i.where="1=1",i.outFields=[...this.requiredFields],i.objectIds=r;const n=await e.queryFeatures(i);if(n?.features.length===t.length)return n.features}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const r of e){if(!r.fieldName)continue;const i=this.fieldsIndex.get(r.fieldName),n=i?.name??r.fieldName;r.fieldName=n,t.set(n.toLowerCase(),r)}return t}_createFormattedAttributes(e,t,r="system"){const i=this.effectivePopupTemplate?.fieldInfos??[],n={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const a=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const c of this.calculatedExpressions)try{n[`expression/${c.name}`]=c.func({vars:{$feature:a}})}catch{}}const s={...t.attributes,...n};return{global:this._featureUtils.formatAttributes({fieldInfos:i,attributes:s,graphic:t,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return qN(e).filter((t=>!(t.indexOf(JAe)===0||t.indexOf(XAe)===0)))}};u([p({readOnly:!0})],en.prototype,"_arcadeTask",null),u([p()],en.prototype,"_featureUtils",void 0),u([p({readOnly:!0})],en.prototype,"featureUtilsPromise",null),u([p({readOnly:!0})],en.prototype,"calculatedExpressions",null),u([p()],en.prototype,"displayField",void 0),u([p()],en.prototype,"effectivePopupTemplate",void 0),u([p()],en.prototype,"expressionsUsedInTitle",null),u([p()],en.prototype,"fieldsIndex",void 0),u([p()],en.prototype,"fieldInfoMap",null),u([p()],en.prototype,"fields",void 0),u([p()],en.prototype,"objectIdField",void 0),u([p()],en.prototype,"requiredFields",null),en=u([O("esri.layers.support.TitleCreator")],en);const Lf=[];function QAe(e,t){if(NS(e.url??""))return!0;const{wkid:r}=t;for(const i of Lf){if((e.version??0)>=i[0])return!0;if(typeof i[1]=="function"&&(i[1]=i[1]()),i[1].has(r))return!1}return!0}Lf.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),Lf.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Lf.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Lf.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Lf.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function KAe(e,t,r){const i=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(i&&i.type==="unique-value"&&i.styleOrigin){const n=await vT(i.populateFromStyle());if(Yt(r),n.ok===!1){const s=n.error;t?.messages&&t.messages.push(new gs("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:t})),e.clear("renderer",t?.origin)}}}function eOe({displayField:e,editFieldsInfo:t,fields:r,objectIdField:i,title:n},s){if(!r)return null;const a=nOe({editFieldsInfo:t,fields:r,objectIdField:i},s);if(!a.length)return null;const c=aOe({titleBase:n,fields:r,displayField:e}),d=oOe();return new Ey({title:c,content:d,fieldInfos:a})}const tOe=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):qme(e,t);function rOe({fields:e,ignoreFieldTypes:t,sortDisabled:r}){const i=e;return t&&(e=e.filter((n=>!t.includes(n.type)))),e===i&&(e=e.slice()),r!==!0&&e.sort(iOe),e}function iOe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:Qz(e)?-1:Qz(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function nOe(e,t){const r=t?.visibleFieldNames;return rOe({fields:e.fields??[],ignoreFieldTypes:t?.ignoreFieldTypes||lOe,sortDisabled:t?.sortDisabled}).map((i=>new BN({fieldName:i.name,isEditable:Gme(i,e),label:i.alias,format:sOe(i),visible:tOe(i,{...e,visibleFieldNames:r})})))}function sOe(e){switch(e.type){case"small-integer":case"integer":case"single":return new j_({digitSeparator:!0,places:0});case"double":return new j_({digitSeparator:!0,places:2});case"string":return pye(e.name)?new j_({digitSeparator:!0,places:0}):void 0;default:return}}function oOe(){return[new ry,new ty]}function aOe(e){const t=Pme(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r??""}function Qz(e){return(e.name&&e.name.toLowerCase())==="name"?!0:e.alias?.toLowerCase()==="name"}const lOe=["geometry","blob","raster","guid","xml"];var Jf;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(Jf||(Jf={}));const Ei="FeatureLayer";function d_(e,t){return new z("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function Kz(e){return e&&e instanceof ge}const v3=HAe();function b3(e,t,r){const i=!!r?.writeLayerSchema;return{enabled:i,ignoreOrigin:i}}let Te=class extends OMe($Ae(sxe(LAe(rxe(YEe(jEe(IAe(qAe(BAe(zAe(jAe(mEe(AAe(NAe(zJ(zEe(fEe(We.ClonableMixin(sr))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Ee.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=DI((async(t,r,i)=>{const{save:n,saveAs:s}=await ue(()=>import("./featureLayerUtils-DeGHNdbF.js"),__vite__mapDeps([285,286,287,284,288,11]));switch(t){case Jf.SAVE:return n(this,r);case Jf.SAVE_AS:return s(this,i,r)}}))}destroy(){this.source?.destroy()}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=e!=null?e.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then((i=>this.initLayerProperties(i)))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(ya).then((async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const i=await this._fetchFirstValidLayerId(t);i!=null&&(this.layerId=i)}if(!this.url&&!this._hasMemorySource())throw new z("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))})).then((()=>J$e(this,"load",e)));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return rr(e),new en({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,t){return t=t.layerDefinition||t,PX(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}get effectiveEditingEnabled(){return K$e(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}readIsTable(e,t){return(t=t?.layerDefinition??t).type==="Table"||!t.geometryType}writeIsTable(e,t,r,i){i?.writeLayerSchema&&ii(r,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return TX(t.layerDefinition||t)}readObjectIdField(e,t){return EX(t.layerDefinition||t)}get parsedUrl(){const e=Wi(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=Oh(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Oh(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){xF(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){t=t.layerDefinition||t;const i=t.drawingInfo?.renderer;if(i){const n=g1(i,t,r)??void 0;return n||re.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),n}return FP(t,r)}set source(e){const t=this._get("source");t!==e&&(Kz(t)&&this._resetMemorySource(t),Kz(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof ge?new Ml({layer:this,items:e}):e:null}readSource(e,t){const r=Qr.fromJSON(t.featureSet);return new Ml({layer:this,items:r?.features??[]})}readTemplates(e,t){const r=t.editFieldsInfo,i=r?.creatorField,n=r?.editorField;return e=e?.map((s=>fa.fromJSON(s))),this._fixTemplates(e,i),this._fixTemplates(e,n),e}readTitle(e,t){const r=t.layerDefinition?.name??t.name,i=t.title||t.layerDefinition?.title;if(r){const n=this.portalItem?.title;if(this.sublayerTitleMode==="item-title")return this.url?mie(this.url,r):r;let s=r;if(!s&&this.url){const a=jc(this.url);a!=null&&(s=a.title)}return s?(this.sublayerTitleMode==="item-title-and-service-name"&&n&&n!==s&&(s=n+" - "+s),FI(s)):void 0}if(this.sublayerTitleMode==="item-title"&&i)return i}readTitleFromWebMap(e,t){return t.title||t.layerDefinition?.name}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const i=t.fields.find((n=>n.name.toLowerCase()===r));i&&(r=i.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,i=r?.creatorField,n=r?.editorField;return e?.map((s=>(s=ha.fromJSON(s),this._fixTemplates(s.templates,i),this._fixTemplates(s.templates,n),s)))}readVisible(e,t){return t.layerDefinition?.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){const r=await C$e(this,e,t,Ei);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,t,r){const i=await I$e(this,e,t,r,Ei);return this.lastEditsEventDate=new Date,i}async applyEdits(e,t){return N$e(this,e,t)}async uploadAssets(e,t){return P$e(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return eOe(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await iV(ue(()=>import("./FeatureLayerSource-DdwOejM-.js"),__vite__mapDeps([289,60,67,290,291,63,108,62,109,292,293,46,38,294,295,74,72,73,7,29,34,171,33])),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=q$e(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=dme(this.definitionExpression,t);return e.where=r||"1=1",e}async deleteAttachments(e,t){const r=await L$e(this,e,t,Ei);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return D$e(this,e,Ei)}async getFeatureTitle(e,t){return this._titleCreator.getTitle(this,e,t)}async getFeatureTitles(e,t){return this._titleCreator.getTitles(this,e,t)}getFeatureType(e){return MX(this.types,this.typeIdField,e)}getFieldDomain(e,t){return H$e(this,e,t,this.getField(e)?.domain??null)}async queryAttachments(e,t){return k$e(this,e,t,Ei)}async queryFeatures(e,t){const r=await this.load(),i=await r.source.queryFeatures(Ce.from(e)??r.createQuery(),t);if(i?.features)for(const n of i.features)n.layer=n.sourceLayer=r;return i}async queryObjectIds(e,t){return await F$e(this,e,t,Ei)}async queryFeatureCount(e,t){return U$e(this,e,t,Ei)}async queryExtent(e,t){return j$e(this,e,t,Ei)}async queryRelatedFeatures(e,t){return z$e(this,e,t,Ei)}async queryRelatedFeaturesCount(e,t){return V$e(this,e,t,Ei)}async queryTopFeatures(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryTopFeatures||!i?.query?.supportsTopFeaturesQuery)throw new z(Ei,"Layer source does not support queryTopFeatures capability");const n=await ue(()=>import("./TopFeaturesQuery-Bcc73YGS.js"),[]),s=await r.queryTopFeatures(n.default.from(e),t);if(s?.features)for(const a of s.features)a.layer=a.sourceLayer=this;return s}async queryAttributeBins(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryAttributeBins)throw new z(Ei,"Layer source does not support queryAttributeBins capability");iMe(e,i,Ei);const n=await ue(()=>import("./AttributeBinsQuery-iy_Hjvo-.js"),__vite__mapDeps([230,31,26,40])),s=await r.queryAttributeBins(n.default.from(e),t);if(s.features)for(const a of s.features)a.layer=a.sourceLayer=this;return s}async queryTopObjectIds(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryTopObjectIds||!i?.query.supportsTopFeaturesQuery)throw new z(Ei,"Layer source does not support queryTopObjectIds capability");const n=await ue(()=>import("./TopFeaturesQuery-Bcc73YGS.js"),[]);return(await r.queryTopObjectIds(n.default.from(e),t)).filter(mme)}async queryTopFeaturesExtent(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryTopExtents||!i?.query?.supportsTopFeaturesQuery)throw new z(Ei,"Layer source does not support queryTopExtents capability");const n=await ue(()=>import("./TopFeaturesQuery-Bcc73YGS.js"),[]);return r.queryTopExtents(n.default.from(e),t)}async queryTopFeatureCount(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryTopCount||!i?.query?.supportsTopFeaturesQuery)throw new z(Ei,"Layer source does not support queryFeatureCount capability");const n=await ue(()=>import("./TopFeaturesQuery-Bcc73YGS.js"),[]);return r.queryTopCount(n.default.from(e),t)}read(e,t){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const{layers:i,showLegend:n}=r;i?.length===1&&(super.read(i[0],t),n!=null&&super.read({showLegend:n},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:t?.origin??void 0,writeLayerSchema:t?.writeLayerSchema??this._hasMemorySource()};const{origin:r,layerContainerType:i,messages:n}=t;if(this.dynamicDataSource)return n?.push(d_(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&i!=="tables")return n?.push(d_(this,`a table source can only be written to tables, not ${i}`)),null;if(this._hasMemorySource())return n?.push(d_(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&i==="tables")return n?.push(d_(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new z(Ei,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source?.type==="memory"||QAe(this,e))}async save(e){return this._debouncedSaveOperations(Jf.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Jf.SAVE_AS,t,e)}_readEditingEnabled(e,t,r){let i=e.layerDefinition?.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,t&&r?.origin==="web-map"&&!this._hasMemorySource()&&i?this._hasEditingCapability(i):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map((t=>t.trim())).includes("editing")}_writeEditingEnabled(e,t,r,i){if(!e){const n=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";ii("layerDefinition.capabilities",n,t),r&&!i?.writeLayerSchema&&(t.capabilities=n)}}_fetchFirstValidLayerId(e){return Ft(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then((t=>{const r=t.data;if(r)return this.applyPreferredHost(r),this.findFirstValidLayerId(r)}))}async initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),xF(this.renderer,this.fieldsIndex),cW(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),KAe(this,{origin:"service"})}async hasDataChanged(){return G$e(this)}async fetchPublishingStatus(){const e=this.source;return e?.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields?.some((t=>t.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach((r=>{const i=r.prototype?.attributes;i&&t&&delete i[t]}))}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new z("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new z("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach((t=>{t.layer=this,t.sourceLayer=this})),this.addHandles([e.on("after-add",(t=>{t.item.layer=this,t.item.sourceLayer=this})),e.on("after-remove",(t=>{t.item.layer=null,t.item.sourceLayer=null}))],"fl-source")}_resetMemorySource(e){e.forEach((t=>{t.layer=null,t.sourceLayer=null})),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};u([p({clonable:!1,readOnly:!0})],Te.prototype,"_titleCreator",null),u([p(_xe)],Te.prototype,"attributeTableTemplate",void 0),u([le("service","capabilities")],Te.prototype,"readCapabilities",null),u([p({json:{origins:{"web-scene":{write:!1}},write:!0}})],Te.prototype,"charts",void 0),u([p({readOnly:!0})],Te.prototype,"createQueryVersion",null),u([p({json:{read:{source:"layerDefinition.copyrightText"}}})],Te.prototype,"copyright",void 0),u([p({json:{read:{source:"layerDefinition.displayField"}}})],Te.prototype,"displayField",void 0),u([p({types:bc,readOnly:!0})],Te.prototype,"defaultSymbol",void 0),u([p({type:$o})],Te.prototype,"dynamicDataSource",void 0),u([p({type:Boolean})],Te.prototype,"editingEnabled",null),u([le(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Te.prototype,"readEditingEnabled",null),u([le("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Te.prototype,"readEditingEnabledFromWebMap",null),u([de(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Te.prototype,"writeEditingEnabled",null),u([de("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Te.prototype,"writeEditingEnabledToWebMap",null),u([p({readOnly:!0})],Te.prototype,"effectiveEditingEnabled",null),u([p({clonable:!1,readOnly:!0})],Te.prototype,"featureTitleFields",null),u([p({...v3.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:b3}}}}})],Te.prototype,"fields",void 0),u([p(v3.fieldsIndex)],Te.prototype,"fieldsIndex",void 0),u([p({type:uEe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Te.prototype,"formTemplate",void 0),u([p({json:{read:{source:"layerDefinition.extent"}}})],Te.prototype,"fullExtent",void 0),u([p({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:b3,writer(e,t,r){const i=e?qC.toJSON(e):null;i&&ii(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:qC.read}}})],Te.prototype,"geometryType",void 0),u([p({json:{read:{source:"layerDefinition.hasM"}}})],Te.prototype,"hasM",void 0),u([p({json:{read:{source:"layerDefinition.hasZ"}}})],Te.prototype,"hasZ",void 0),u([p(vxe)],Te.prototype,"id",void 0),u([p({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Te.prototype,"infoFor3D",void 0),u([p({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Te.prototype,"isTable",void 0),u([le("service","isTable",["type","geometryType"]),le("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Te.prototype,"readIsTable",null),u([de("web-map","isTable")],Te.prototype,"writeIsTable",null),u([p(lE)],Te.prototype,"labelsVisible",void 0),u([p({type:[Wt],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:Jz,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:Jz,write:{layerContainerTypes:kt}}})],Te.prototype,"labelingInfo",void 0),u([p((()=>{const e=U(gxe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,r,i){ii(i,CT(t),r)}}},e})())],Te.prototype,"opacity",void 0),u([p(mxe)],Te.prototype,"legendEnabled",void 0),u([p({type:["show","hide"],json:(()=>{const e=U(lX.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Te.prototype,"listMode",void 0),u([le("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Te.prototype,"readGlobalIdField",null),u([p({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:b3}}}}})],Te.prototype,"objectIdField",void 0),u([le("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Te.prototype,"readObjectIdField",null),u([p({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:kt}}})],Te.prototype,"operationalLayerType",void 0),u([p(v3.outFields)],Te.prototype,"outFields",void 0),u([p({readOnly:!0})],Te.prototype,"parsedUrl",null),u([p({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Te.prototype,"path",void 0),u([p(aE)],Te.prototype,"popupEnabled",void 0),u([p({type:Ey,json:{name:"popupInfo",write:!0}})],Te.prototype,"popupTemplate",void 0),u([p({readOnly:!0})],Te.prototype,"defaultPopupTemplate",null),u([p({types:X1,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:fAe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:kt,overridePolicy:(e,t,r)=>({ignoreOrigin:r?.writeLayerSchema,layerContainerTypes:kt})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r?.writeLayerSchema,layerContainerTypes:kt})}}})],Te.prototype,"renderer",null),u([le("service","renderer",["drawingInfo.renderer","defaultSymbol"]),le("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Te.prototype,"readRenderer",null),u([p()],Te.prototype,"resourceInfo",void 0),u([p((()=>{const e=U(pxe);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Te.prototype,"screenSizePerspectiveEnabled",void 0),u([p({clonable:!1})],Te.prototype,"source",null),u([wt("source")],Te.prototype,"castSource",null),u([le("portal-item","source",["featureSet"]),le("web-map","source",["featureSet"])],Te.prototype,"readSource",null),u([p({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Te.prototype,"spatialReference",void 0),u([p({type:Number})],Te.prototype,"subtypeCode",void 0),u([p({type:[fa]})],Te.prototype,"templates",void 0),u([le("templates",["editFieldsInfo","creatorField","editorField","templates"])],Te.prototype,"readTemplates",null),u([p({type:di})],Te.prototype,"timeInfo",void 0),u([p()],Te.prototype,"title",void 0),u([le("service","title",["name"]),le("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Te.prototype,"readTitle",null),u([le("web-map","title",["layerDefinition.name","title"])],Te.prototype,"readTitleFromWebMap",null),u([p({type:String})],Te.prototype,"sublayerTitleMode",void 0),u([p({json:{read:!1}})],Te.prototype,"type",void 0),u([p({type:String})],Te.prototype,"typeIdField",void 0),u([le("service","typeIdField"),le("typeIdField",["layerDefinition.typeIdField"])],Te.prototype,"readTypeIdField",null),u([p({type:[ha]})],Te.prototype,"types",void 0),u([le("service","types",["types"]),le("types",["layerDefinition.types"])],Te.prototype,"readTypes",null),u([p({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:kt}}}}})],Te.prototype,"visible",void 0),u([le("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Te.prototype,"readVisible",null),Te=u([O("esri.layers.FeatureLayer")],Te);const NFe=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Te}},Symbol.toStringTag,{value:"Module"}));function uOe(){const e=ne.useRef(null);return ne.useEffect(()=>{const t=new EH({basemap:"arcgis-topographic"}),r=new Te({portalItem:{id:"d9677f2ef1d547c29fc30e628596f0c0"},outFields:["*"],renderer:{type:"simple",symbol:{type:"simple-marker",style:"circle",size:8,color:"red",outline:{color:"white",width:1}}},popupTemplate:{title:"{CITY_NAME}",content:"<b>Population:</b> {POP}"}});t.add(r);const i=new FTe({container:e.current,map:t,center:[35,31.5],zoom:8});return r.queryFeatures().then(n=>{n.features.length&&i.popup.open({features:[n.features[0]],location:n.features[0].geometry})}),()=>{i&&i.destroy()}},[]),Fl.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",minHeight:"100vh"},children:[Fl.jsx("h2",{style:{textAlign:"center"},children:"World Capitals • ArcGIS JS • Israel Focus"}),Fl.jsx("div",{ref:e,id:"mapDiv",style:{width:"80%",height:"80vh",border:"1px solid #ccc"}})]})}function cOe(){return Fl.jsx(Wte,{children:Fl.jsx(Ete,{children:Fl.jsx(h7,{path:"/",element:Fl.jsx(uOe,{})})})})}Nee.createRoot(document.getElementById("root")).render(Fl.jsx(ne.StrictMode,{children:Fl.jsx(cOe,{})}));export{ge as $,DCe as A,$De as B,se as C,Aue as D,LX as E,Qe as F,$A as G,kCe as H,Wi as I,ADe as J,ht as K,Yl as L,aZ as M,wCe as N,ni as O,pye as P,Zi as Q,$y as R,Q4 as S,iye as T,u as U,p as V,O as W,je as X,Hi as Y,Qr as Z,ue as _,zP as a,Qce as a$,Ey as a0,EFe as a1,dn as a2,Zs as a3,rr as a4,Nr as a5,sce as a6,Ge as a7,$Me as a8,Pe as a9,u6e as aA,qNe as aB,gy as aC,Ph as aD,Aa as aE,mn as aF,O3e as aG,H3e as aH,fY as aI,j3e as aJ,dbe as aK,Nbe as aL,NR as aM,uQ as aN,D3e as aO,cQ as aP,lQ as aQ,W3e as aR,z3e as aS,M3e as aT,R3e as aU,DT as aV,X1e as aW,lB as aX,D1 as aY,mhe as aZ,Xce as a_,xbe as aa,Ft as ab,Yt as ac,sMe as ad,pE as ae,r$e as af,i$e as ag,n$e as ah,U as ai,bve as aj,Ce as ak,K as al,zc as am,Zce as an,Ty as ao,Hce as ap,yhe as aq,sH as ar,Rhe as as,w5e as at,b5e as au,ys as av,Cve as aw,Rue as ax,QCe as ay,jm as az,fie as b,$Ie as b$,Kce as b0,Tbe as b1,AH as b2,cm as b3,OH as b4,MH as b5,IF as b6,NPe as b7,dIe as b8,iPe as b9,oke as bA,m_e as bB,rU as bC,tU as bD,eU as bE,K8 as bF,tS as bG,ey as bH,t1 as bI,ir as bJ,jo as bK,PI as bL,Zt as bM,A1 as bN,Ia as bO,br as bP,IIe as bQ,RIe as bR,CIe as bS,R1 as bT,Gr as bU,er as bV,Ys as bW,Zke as bX,fn as bY,Bv as bZ,zw as b_,rV as ba,fy as bb,pre as bc,We as bd,pue as be,tt as bf,Ne as bg,Ee as bh,Dc as bi,U1 as bj,vo as bk,$ge as bl,Lr as bm,Br as bn,ya as bo,nt as bp,gU as bq,G2 as br,Hke as bs,M9 as bt,$9 as bu,De as bv,Ry as bw,EOe as bx,_7 as by,$H as bz,MMe as c,z1 as c$,IZ as c0,pn as c1,uh as c2,wce as c3,KC as c4,SRe as c5,EY as c6,YMe as c7,TCe as c8,SCe as c9,eCe as cA,rCe as cB,tCe as cC,iCe as cD,nCe as cE,sCe as cF,nA as cG,Uh as cH,FNe as cI,zT as cJ,Ke as cK,Xs as cL,Y3 as cM,tr as cN,e2 as cO,N_ as cP,Z3 as cQ,X3 as cR,MY as cS,Re as cT,c1 as cU,or as cV,U2 as cW,O_e as cX,Pr as cY,j$ as cZ,ct as c_,_Ce as ca,rye as cb,VNe as cc,GNe as cd,Nc as ce,le as cf,xi as cg,Ppe as ch,bI as ci,Oh as cj,Y7 as ck,Xe as cl,Eo as cm,C1 as cn,Le as co,G6e as cp,B6e as cq,q6e as cr,b3e as cs,v3e as ct,pi as cu,_e as cv,c3e as cw,Vl as cx,u3e as cy,spe as cz,z4 as d,zNe as d$,CO as d0,AIe as d1,mPe as d2,LPe as d3,Xl as d4,eG as d5,Ae as d6,dme as d7,h5e as d8,ba as d9,Kse as dA,_Fe as dB,q6 as dC,wFe as dD,zde as dE,E1 as dF,Na as dG,IPe as dH,EIe as dI,la as dJ,jCe as dK,$7 as dL,roe as dM,wT as dN,_T as dO,rN as dP,iN as dQ,toe as dR,Go as dS,k1 as dT,e1 as dU,NN as dV,UCe as dW,wG as dX,eT as dY,_ge as dZ,Bme as d_,an as da,wi as db,fv as dc,S3 as dd,gOe as de,n_e as df,b7 as dg,jEe as dh,zAe as di,sr as dj,bl as dk,wF as dl,ILe as dm,wve as dn,Un as dp,IOe as dq,sRe as dr,dy as ds,qU as dt,$4e as du,S4e as dv,l4e as dw,Sr as dx,o4e as dy,I4e as dz,NCe as e,us as e$,bT as e0,FT as e1,Cme as e2,vW as e3,nye as e4,HNe as e5,ds as e6,BNe as e7,bW as e8,WCe as e9,Mbe as eA,qCe as eB,h2 as eC,aT as eD,lT as eE,tV as eF,wt as eG,l6e as eH,UOe as eI,HOe as eJ,Lj as eK,gG as eL,lCe as eM,S5e as eN,Sy as eO,iRe as eP,LI as eQ,jAe as eR,AAe as eS,NAe as eT,zJ as eU,vxe as eV,mxe as eW,Dr as eX,Tr as eY,ti as eZ,nn as e_,dG as ea,eN as eb,Zse as ec,zs as ed,ST as ee,aY as ef,pY as eg,K1e as eh,cY as ei,hY as ej,mme as ek,gs as el,Hie as em,dRe as en,jre as eo,Sa as ep,II as eq,Gc as er,oRe as es,upe as et,oY as eu,Bc as ev,gbe as ew,ahe as ex,Q1e as ey,dY as ez,uT as f,mOe as f$,fxe as f0,mEe as f1,zEe as f2,fEe as f3,Yh as f4,nbe as f5,sbe as f6,Abe as f7,Oa as f8,uce as f9,NS as fA,hJ as fB,pJ as fC,u4e as fD,w4e as fE,aN as fF,pOe as fG,SPe as fH,kPe as fI,Oc as fJ,vh as fK,QOe as fL,Hl as fM,XOe as fN,s3e as fO,Ye as fP,ANe as fQ,$Ne as fR,M6e as fS,MNe as fT,j1 as fU,yi as fV,C6e as fW,kf as fX,ONe as fY,yh as fZ,fOe as f_,yxe as fa,Wv as fb,Ul as fc,Rh as fd,Fn as fe,de as ff,qAe as fg,DI as fh,c5e as fi,cG as fj,Jf as fk,QAe as fl,l2 as fm,dt as fn,Mt as fo,Te as fp,fIe as fq,Mde as fr,Ice as fs,xIe as ft,ii as fu,Vc as fv,Lc as fw,I6 as fx,Oi as fy,Hv as fz,gN as g,Jce as g$,JRe as g0,XRe as g1,x4e as g2,l1 as g3,cr as g4,SZ as g5,Vi as g6,Js as g7,dz as g8,az as g9,FA as gA,Df as gB,TT as gC,OIe as gD,Jh as gE,cFe as gF,pFe as gG,hFe as gH,oFe as gI,P6e as gJ,U6e as gK,z6e as gL,fE as gM,Ove as gN,tI as gO,zCe as gP,cke as gQ,rIe as gR,QDe as gS,gr as gT,RPe as gU,vPe as gV,mIe as gW,ZW as gX,JPe as gY,hs as gZ,qRe as g_,tIe as ga,Ym as gb,BB as gc,sP as gd,d5e as ge,Sbe as gf,Hm as gg,iV as gh,lie as gi,cre as gj,lFe as gk,Zh as gl,A3 as gm,Cde as gn,oCe as go,qOe as gp,cs as gq,J$e as gr,cEe as gs,v5e as gt,KEe as gu,g5e as gv,QEe as gw,nV as gx,h6e as gy,w_ as gz,oT as h,sxe as h$,fM as h0,ixe as h1,my as h2,py as h3,tRe as h4,bi as h5,bc as h6,Bre as h7,M$e as h8,X5e as h9,GB as hA,yOe as hB,g_ as hC,$Oe as hD,bbe as hE,lbe as hF,uj as hG,Eve as hH,r2 as hI,dPe as hJ,cPe as hK,jye as hL,bB as hM,Ht as hN,Lpe as hO,cRe as hP,rn as hQ,mie as hR,FI as hS,gie as hT,vie as hU,Ch as hV,hT as hW,F1 as hX,IAe as hY,YEe as hZ,$Ae as h_,B5e as ha,Iv as hb,Nl as hc,$$e as hd,Q5e as he,K5e as hf,vbe as hg,pCe as hh,p1e as hi,ZCe as hj,Kve as hk,I5 as hl,vG as hm,bG as hn,dr as ho,BCe as hp,ehe as hq,nH as hr,ube as hs,oH as ht,Xse as hu,ode as hv,q as hw,she as hx,sde as hy,kT as hz,re as i,nS as i$,BAe as i0,xF as i1,cW as i2,eOe as i3,iMe as i4,_xe as i5,HAe as i6,lE as i7,Jz as i8,Wt as i9,gxe as iA,goe as iB,aoe as iC,OG as iD,A4e as iE,I6e as iF,j5e as iG,qIe as iH,E2 as iI,UIe as iJ,rRe as iK,S_e as iL,V2 as iM,z2 as iN,Ake as iO,Vs as iP,sU as iQ,j2 as iR,iU as iS,UR as iT,$Y as iU,VR as iV,Nke as iW,sy as iX,Cke as iY,wh as iZ,Ike as i_,SC as ia,aE as ib,fAe as ic,X1 as id,pxe as ie,fa as ig,npe as ih,rpe as ii,Jhe as ij,$6 as ik,gn as il,QB as im,wN as io,NOe as ip,Z6 as iq,ha as ir,Xf as is,Hre as it,$a as iu,Lo as iv,g1 as iw,FP as ix,wxe as iy,bxe as iz,bCe as j,MX as j$,Q8 as j0,PLe as j1,WZ as j2,cP as j3,xR as j4,ny as j5,s1e as j6,ZZ as j7,SU as j8,J8 as j9,g4e as jA,N4e as jB,dJ as jC,N7 as jD,Yce as jE,Wce as jF,rbe as jG,Ibe as jH,Pbe as jI,d1e as jJ,mE as jK,G3e as jL,zB as jM,Qse as jN,soe as jO,T2 as jP,ibe as jQ,lY as jR,zS as jS,pbe as jT,fi as jU,ih as jV,eie as jW,uEe as jX,OMe as jY,rxe as jZ,N$e as j_,wne as ja,Ws as jb,zm as jc,MI as jd,Kre as je,hIe as jf,gi as jg,t1e as jh,i1e as ji,HZ as jj,hOe as jk,Dv as jl,jR as jm,jZ as jn,LN as jo,$ as jp,MS as jq,T2e as jr,E2e as js,v4e as jt,R2e as ju,b4e as jv,I2e as jw,YSe as jx,n4e as jy,X0 as jz,ECe as k,qhe as k$,G$e as k0,k7 as k1,q7 as k2,CJ as k3,m6e as k4,PX as k5,BI as k6,uf as k7,Xr as k8,IFe as k9,z$e as kA,V$e as kB,di as kC,oie as kD,un as kE,HB as kF,vj as kG,qr as kH,aRe as kI,JH as kJ,Pse as kK,O4e as kL,AOe as kM,OOe as kN,MOe as kO,kre as kP,Wh as kQ,vT as kR,S7 as kS,ra as kT,KOe as kU,E6 as kV,RCe as kW,Nce as kX,Pce as kY,aMe as kZ,YJ as k_,hxe as ka,If as kb,OAe as kc,ss as kd,$o as ke,yy as kf,Rr as kg,Vt as kh,ps as ki,en as kj,q$e as kk,Z$e as kl,bX as km,NP as kn,J2 as ko,kt as kp,K$e as kq,C$e as kr,I$e as ks,L$e as kt,D$e as ku,W$e as kv,k$e as kw,F$e as kx,U$e as ky,j$e as kz,g6e as l,xP as l$,Bhe as l0,Y8 as l1,BDe as l2,qDe as l3,GDe as l4,VDe as l5,WDe as l6,HDe as l7,zDe as l8,jDe as l9,nf as lA,ICe as lB,OCe as lC,sIe as lD,vB as lE,cLe as lF,x7 as lG,Uoe as lH,Hoe as lI,I1 as lJ,fCe as lK,yF as lL,Gse as lM,_Ie as lN,GI as lO,ORe as lP,ARe as lQ,Que as lR,$ne as lS,xne as lT,gIe as lU,iAe as lV,wOe as lW,Wke as lX,ut as lY,YRe as lZ,rE as l_,o1e as la,X4 as lb,UDe as lc,PRe as ld,oN as le,Voe as lf,_I as lg,ROe as lh,SI as li,COe as lj,que as lk,pne as ll,TRe as lm,d6e as ln,c6e as lo,RX as lp,AX as lq,yie as lr,XN as ls,gPe as lt,fPe as lu,A1e as lv,O1e as lw,uY as lx,tve as ly,y5 as lz,dye as m,O6e as m$,kn as m0,iE as m1,L4e as m2,xa as m3,SSe as m4,RSe as m5,fre as m6,jOe as m7,D7 as m8,cT as m9,ZOe as mA,OZ as mB,qZ as mC,iy as mD,ga as mE,dke as mF,rP as mG,TR as mH,yZ as mI,H1 as mJ,N6e as mK,Gl as mL,Sv as mM,H$e as mN,CNe as mO,tMe as mP,a6e as mQ,o6e as mR,zv as mS,$c as mT,Kv as mU,GAe as mV,lRe as mW,p6e as mX,gV as mY,UEe as mZ,X2 as m_,BOe as ma,zh as mb,O6 as mc,are as md,PB as me,Ece as mf,lIe as mg,CW as mh,hP as mi,WB as mj,WT as mk,KIe as ml,QIe as mm,_Z as mn,bZ as mo,I0e as mp,P0e as mq,_d as mr,E7 as ms,_Oe as mt,nU as mu,Pke as mv,pU as mw,Lke as mx,R9 as my,Z8 as mz,jh as n,r1e as n$,xNe as n0,e6e as n1,x1e as n2,XDe as n3,f_e as n4,xc as n5,z_e as n6,G_e as n7,q_e as n8,jl as n9,xce as nA,V1 as nB,G1 as nC,q1 as nD,nhe as nE,rhe as nF,ihe as nG,T7 as nH,H7 as nI,FOe as nJ,_G as nK,Z4 as nL,aV as nM,hSe as nN,T6e as nO,Qh as nP,va as nQ,KMe as nR,YCe as nS,pPe as nT,hPe as nU,RI as nV,ghe as nW,fhe as nX,cbe as nY,phe as nZ,qye as n_,Sye as na,R4e as nb,lhe as nc,Kde as nd,the as ne,_0 as nf,cn as ng,xl as nh,dc as ni,ei as nj,age as nk,L1e as nl,JZ as nm,vU as nn,DDe as no,w_e as np,rAe as nq,dm as nr,nAe as ns,W1 as nt,U0e as nu,tAe as nv,sAe as nw,Ide as nx,nIe as ny,iIe as nz,xCe as o,vN as o$,VCe as o0,sV as o1,Vm as o2,cy as o3,zOe as o4,CA as o5,iW as o6,fLe as o7,pLe as o8,rve as o9,ko as oA,n1e as oB,HCe as oC,xN as oD,$N as oE,F2 as oF,SB as oG,tke as oH,KDe as oI,eke as oJ,V5e as oK,G5e as oL,z5e as oM,a1e as oN,r0 as oO,FCe as oP,ln as oQ,O5e as oR,qse as oS,OW as oT,R5e as oU,XPe as oV,QPe as oW,KPe as oX,Io as oY,lh as oZ,_c as o_,fP as oa,_$e as ob,w$e as oc,DP as od,Pxe as oe,ZRe as of,sW as og,Rl as oh,Km as oi,FEe as oj,JEe as ok,XEe as ol,nxe as om,wAe as on,CAe as oo,TN as op,Gp as oq,ure as or,oU as os,sc as ot,dSe as ou,Mke as ov,X8 as ow,__e as ox,dU as oy,cU as oz,jc as p,PCe as p$,nRe as p0,nc as p1,TOe as p2,UZ as p3,ETe as p4,Hs as p5,JT as p6,FZ as p7,zZ as p8,Dve as p9,j0e as pA,ive as pB,dLe as pC,KM as pD,WIe as pE,x2 as pF,eve as pG,$be as pH,V0e as pI,t2 as pJ,aCe as pK,RNe as pL,PMe as pM,j6e as pN,zo as pO,Ic as pP,wke as pQ,CG as pR,K0e as pS,G0e as pT,q0e as pU,aIe as pV,Fde as pW,CCe as pX,uCe as pY,zl as pZ,on as p_,LLe as pa,Bve as pb,DLe as pc,Oy as pd,Qt as pe,Rxe as pf,Oxe as pg,pt as ph,lc as pi,Yxe as pj,yX as pk,Oo as pl,Zf as pm,Ro as pn,Zde as po,HIe as pp,Ai as pq,hi as pr,vIe as ps,FPe as pt,jPe as pu,DPe as pv,_ne as pw,eRe as px,qc as py,DN as pz,VOe as q,hme as q$,YOe as q0,sve as q1,AZ as q2,TU as q3,PY as q4,yke as q5,gke as q6,vke as q7,bke as q8,ike as q9,cCe as qA,hLe as qB,KRe as qC,QRe as qD,moe as qE,MSe as qF,lZ as qG,Sne as qH,ASe as qI,TSe as qJ,FIe as qK,S2 as qL,ri as qM,oE as qN,bFe as qO,NDe as qP,Zd as qQ,f5e as qR,r6e as qS,jNe as qT,NNe as qU,DNe as qV,PNe as qW,kNe as qX,LNe as qY,UNe as qZ,yn as q_,ske as qa,nke as qb,V_e as qc,yoe as qd,Ea as qe,yve as qf,iP as qg,Sce as qh,oIe as qi,a1 as qj,DV as qk,a8 as ql,O0e as qm,R0e as qn,eIe as qo,iT as qp,uFe as qq,Ske as qr,_ke as qs,PDe as qt,LDe as qu,A9 as qv,MZ as qw,Z1 as qx,eA as qy,$Ce as qz,Hh as r,MIe as r$,ENe as r0,qke as r1,i6e as r2,q4 as r3,INe as r4,Eoe as r5,Toe as r6,dCe as r7,Bne as r8,yV as r9,ake as rA,wU as rB,kDe as rC,FDe as rD,pke as rE,fke as rF,Tke as rG,Eke as rH,ZDe as rI,xke as rJ,$ke as rK,p_e as rL,g_e as rM,rke as rN,HY as rO,qm as rP,mke as rQ,i_e as rR,GOe as rS,l1e as rT,Y9 as rU,q9 as rV,gce as rW,B9 as rX,lz as rY,H9 as rZ,W9 as r_,fFe as ra,eI as rb,mFe as rc,Z6e as rd,dFe as re,F6e as rf,iFe as rg,J6e as rh,W6e as ri,_3e as rj,Y6e as rk,Lz as rl,Nz as rm,Pz as rn,rFe as ro,tFe as rp,sFe as rq,nFe as rr,rI as rs,uke as rt,w3e as ru,hke as rv,T3e as rw,lke as rx,V6e as ry,A_e as rz,z as s,m5e as s$,Mce as s0,Q9 as s1,yz as s2,gz as s3,vz as s4,Dce as s5,uIe as s6,bce as s7,oA as s8,bz as s9,Sc as sA,gye as sB,e4e as sC,n1 as sD,o1 as sE,ry as sF,yye as sG,POe as sH,Sxe as sI,Eye as sJ,xye as sK,YN as sL,MTe as sM,TIe as sN,vLe as sO,The as sP,wZ as sQ,kB as sR,NV as sS,She as sT,ude as sU,Z0e as sV,rNe as sW,p3e as sX,u_e as sY,SG as sZ,SIe as s_,cIe as sa,zPe as sb,Qve as sc,H6e as sd,aFe as se,pIe as sf,yFe as sg,bIe as sh,eFe as si,K6e as sj,Mz as sk,z9 as sl,Oz as sm,$z as sn,K9 as so,P9 as sp,N9 as sq,I9 as sr,j9 as ss,Ds as st,X6e as su,Q6e as sv,fye as sw,t4e as sx,r4e as sy,BN as sz,KAe as t,tY as t$,wpe as t0,W5e as t1,H5e as t2,W8 as t3,Bke as t4,Vke as t5,Gke as t6,zke as t7,jke as t8,U_e as t9,x6e as tA,$6e as tB,A6e as tC,tT as tD,bhe as tE,Che as tF,aQ as tG,jIe as tH,_5e as tI,f0e as tJ,xLe as tK,Zxe as tL,Kp as tM,y$e as tN,PPe as tO,_Pe as tP,xPe as tQ,TPe as tR,LOe as tS,HPe as tT,BPe as tU,xOe as tV,bPe as tW,yIe as tX,CPe as tY,rme as tZ,P1e as t_,NY as ta,JDe as tb,YDe as tc,D_e as td,IDe as te,_ie as tf,hre as tg,Cbe as th,Oke as ti,Rke as tj,APe as tk,OPe as tl,h1e as tm,Nhe as tn,Ihe as to,DB as tp,hQ as tq,yme as tr,AY as ts,pa as tt,NLe as tu,C4e as tv,kc as tw,T4e as tx,M4e as ty,E4e as tz,y6e as u,WOe as u0,i_ as u1,V6 as u2,xo as u3,q5e as u4,mi as u5,QC as u6,$Le as u7,EPe as u8,Jde as u9,JOe as uA,MPe as uB,che as uC,ohe as uD,VF as uE,vhe as uF,NIe as uG,LIe as uH,Yke as uI,F5e as uJ,t6e as uK,NFe as uL,yPe as ua,k6e as ub,zf as uc,Vye as ud,oPe as ue,bOe as uf,lre as ug,vOe as uh,wPe as ui,Dke as uj,X0e as uk,GCe as ul,D0e as um,zye as un,ERe as uo,DG as up,UG as uq,GIe as ur,$Pe as us,VIe as ut,qF as uu,zIe as uv,wIe as uw,GF as ux,CN as uy,K7 as uz,V as v,Nv as w,LCe as x,Kwe as y,Cue as z};
